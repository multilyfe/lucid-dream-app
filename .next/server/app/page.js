/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/page";
exports.ids = ["app/page"];
exports.modules = {

/***/ "(rsc)/./app/components/AchievementTriggerManager.tsx":
/*!******************************************************!*\
  !*** ./app/components/AchievementTriggerManager.tsx ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-server-dom-webpack/server */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-webpack-server.js\");\n/* harmony import */ var react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__);\n// This file is generated by the Webpack next-flight-loader.\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(\nfunction() { throw new Error(\"Attempted to call the default export of \\\"C:\\\\\\\\Mommy Lucy\\\\\\\\Projects\\\\\\\\Lucid Dream\\\\\\\\app\\\\\\\\components\\\\\\\\AchievementTriggerManager.tsx\\\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n\"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\components\\\\AchievementTriggerManager.tsx\",\n\"default\",\n));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvY29tcG9uZW50cy9BY2hpZXZlbWVudFRyaWdnZXJNYW5hZ2VyLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSIsInNvdXJjZXMiOlsiX05fRS8uL2FwcC9jb21wb25lbnRzL0FjaGlldmVtZW50VHJpZ2dlck1hbmFnZXIudHN4L19fbmV4dGpzLWludGVybmFsLXByb3h5Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGlzIGZpbGUgaXMgZ2VuZXJhdGVkIGJ5IHRoZSBXZWJwYWNrIG5leHQtZmxpZ2h0LWxvYWRlci5cbmltcG9ydCB7IHJlZ2lzdGVyQ2xpZW50UmVmZXJlbmNlIH0gZnJvbSBcInJlYWN0LXNlcnZlci1kb20td2VicGFjay9zZXJ2ZXJcIjtcbmV4cG9ydCBkZWZhdWx0IHJlZ2lzdGVyQ2xpZW50UmVmZXJlbmNlKFxuZnVuY3Rpb24oKSB7IHRocm93IG5ldyBFcnJvcihcIkF0dGVtcHRlZCB0byBjYWxsIHRoZSBkZWZhdWx0IGV4cG9ydCBvZiBcXFwiQzpcXFxcXFxcXE1vbW15IEx1Y3lcXFxcXFxcXFByb2plY3RzXFxcXFxcXFxMdWNpZCBEcmVhbVxcXFxcXFxcYXBwXFxcXFxcXFxjb21wb25lbnRzXFxcXFxcXFxBY2hpZXZlbWVudFRyaWdnZXJNYW5hZ2VyLnRzeFxcXCIgZnJvbSB0aGUgc2VydmVyLCBidXQgaXQncyBvbiB0aGUgY2xpZW50LiBJdCdzIG5vdCBwb3NzaWJsZSB0byBpbnZva2UgYSBjbGllbnQgZnVuY3Rpb24gZnJvbSB0aGUgc2VydmVyLCBpdCBjYW4gb25seSBiZSByZW5kZXJlZCBhcyBhIENvbXBvbmVudCBvciBwYXNzZWQgdG8gcHJvcHMgb2YgYSBDbGllbnQgQ29tcG9uZW50LlwiKTsgfSxcblwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxhcHBcXFxcY29tcG9uZW50c1xcXFxBY2hpZXZlbWVudFRyaWdnZXJNYW5hZ2VyLnRzeFwiLFxuXCJkZWZhdWx0XCIsXG4pO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/components/AchievementTriggerManager.tsx\n");

/***/ }),

/***/ "(rsc)/./app/components/ThemeController.tsx":
/*!********************************************!*\
  !*** ./app/components/ThemeController.tsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   isBrightTheme: () => (/* binding */ isBrightTheme)\n/* harmony export */ });\n/* harmony import */ var react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-server-dom-webpack/server */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-webpack-server.js\");\n/* harmony import */ var react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__);\n// This file is generated by the Webpack next-flight-loader.\n\nconst isBrightTheme = (0,react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(\nfunction() { throw new Error(\"Attempted to call isBrightTheme() from the server but isBrightTheme is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n\"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\components\\\\ThemeController.tsx\",\n\"isBrightTheme\",\n);/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(\nfunction() { throw new Error(\"Attempted to call the default export of \\\"C:\\\\\\\\Mommy Lucy\\\\\\\\Projects\\\\\\\\Lucid Dream\\\\\\\\app\\\\\\\\components\\\\\\\\ThemeController.tsx\\\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n\"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\components\\\\ThemeController.tsx\",\n\"default\",\n));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvY29tcG9uZW50cy9UaGVtZUNvbnRyb2xsZXIudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSIsInNvdXJjZXMiOlsiX05fRS8uL2FwcC9jb21wb25lbnRzL1RoZW1lQ29udHJvbGxlci50c3gvX19uZXh0anMtaW50ZXJuYWwtcHJveHkubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgZmlsZSBpcyBnZW5lcmF0ZWQgYnkgdGhlIFdlYnBhY2sgbmV4dC1mbGlnaHQtbG9hZGVyLlxuaW1wb3J0IHsgcmVnaXN0ZXJDbGllbnRSZWZlcmVuY2UgfSBmcm9tIFwicmVhY3Qtc2VydmVyLWRvbS13ZWJwYWNrL3NlcnZlclwiO1xuZXhwb3J0IGNvbnN0IGlzQnJpZ2h0VGhlbWUgPSByZWdpc3RlckNsaWVudFJlZmVyZW5jZShcbmZ1bmN0aW9uKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0ZWQgdG8gY2FsbCBpc0JyaWdodFRoZW1lKCkgZnJvbSB0aGUgc2VydmVyIGJ1dCBpc0JyaWdodFRoZW1lIGlzIG9uIHRoZSBjbGllbnQuIEl0J3Mgbm90IHBvc3NpYmxlIHRvIGludm9rZSBhIGNsaWVudCBmdW5jdGlvbiBmcm9tIHRoZSBzZXJ2ZXIsIGl0IGNhbiBvbmx5IGJlIHJlbmRlcmVkIGFzIGEgQ29tcG9uZW50IG9yIHBhc3NlZCB0byBwcm9wcyBvZiBhIENsaWVudCBDb21wb25lbnQuXCIpOyB9LFxuXCJDOlxcXFxNb21teSBMdWN5XFxcXFByb2plY3RzXFxcXEx1Y2lkIERyZWFtXFxcXGFwcFxcXFxjb21wb25lbnRzXFxcXFRoZW1lQ29udHJvbGxlci50c3hcIixcblwiaXNCcmlnaHRUaGVtZVwiLFxuKTtleHBvcnQgZGVmYXVsdCByZWdpc3RlckNsaWVudFJlZmVyZW5jZShcbmZ1bmN0aW9uKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0ZWQgdG8gY2FsbCB0aGUgZGVmYXVsdCBleHBvcnQgb2YgXFxcIkM6XFxcXFxcXFxNb21teSBMdWN5XFxcXFxcXFxQcm9qZWN0c1xcXFxcXFxcTHVjaWQgRHJlYW1cXFxcXFxcXGFwcFxcXFxcXFxcY29tcG9uZW50c1xcXFxcXFxcVGhlbWVDb250cm9sbGVyLnRzeFxcXCIgZnJvbSB0aGUgc2VydmVyLCBidXQgaXQncyBvbiB0aGUgY2xpZW50LiBJdCdzIG5vdCBwb3NzaWJsZSB0byBpbnZva2UgYSBjbGllbnQgZnVuY3Rpb24gZnJvbSB0aGUgc2VydmVyLCBpdCBjYW4gb25seSBiZSByZW5kZXJlZCBhcyBhIENvbXBvbmVudCBvciBwYXNzZWQgdG8gcHJvcHMgb2YgYSBDbGllbnQgQ29tcG9uZW50LlwiKTsgfSxcblwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxhcHBcXFxcY29tcG9uZW50c1xcXFxUaGVtZUNvbnRyb2xsZXIudHN4XCIsXG5cImRlZmF1bHRcIixcbik7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/components/ThemeController.tsx\n");

/***/ }),

/***/ "(rsc)/./app/globals.css":
/*!*************************!*\
  !*** ./app/globals.css ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"20b636908ba0\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvZ2xvYmFscy5jc3MiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGlFQUFlLGNBQWM7QUFDN0IsSUFBSSxLQUFVLEVBQUUsRUFBdUIiLCJzb3VyY2VzIjpbIkM6XFxNb21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxcZ2xvYmFscy5jc3MiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCIyMGI2MzY5MDhiYTBcIlxuaWYgKG1vZHVsZS5ob3QpIHsgbW9kdWxlLmhvdC5hY2NlcHQoKSB9XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/globals.css\n");

/***/ }),

/***/ "(rsc)/./app/layout.tsx":
/*!************************!*\
  !*** ./app/layout.tsx ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RootLayout),\n/* harmony export */   metadata: () => (/* binding */ metadata)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./globals.css */ \"(rsc)/./app/globals.css\");\n/* harmony import */ var _components_ThemeController__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/ThemeController */ \"(rsc)/./app/components/ThemeController.tsx\");\n/* harmony import */ var _components_AchievementTriggerManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components/AchievementTriggerManager */ \"(rsc)/./app/components/AchievementTriggerManager.tsx\");\n/* harmony import */ var react_hot_toast__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-hot-toast */ \"(rsc)/./node_modules/react-hot-toast/dist/index.mjs\");\n\n\n\n\n\nconst metadata = {\n    title: \"Lucid Dream Temple RPG\",\n    description: \"Single-file emergent dream journal RPG\"\n};\nfunction RootLayout({ children }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"html\", {\n        lang: \"en\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"body\", {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ThemeController__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {}, void 0, false, {\n                    fileName: \"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\layout.tsx\",\n                    lineNumber: 15,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"min-h-screen bg-base-100 text-base-content transition-colors duration-300\",\n                    children: children\n                }, void 0, false, {\n                    fileName: \"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\layout.tsx\",\n                    lineNumber: 16,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AchievementTriggerManager__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {}, void 0, false, {\n                    fileName: \"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\layout.tsx\",\n                    lineNumber: 19,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_hot_toast__WEBPACK_IMPORTED_MODULE_4__.Toaster, {\n                    position: \"bottom-right\",\n                    reverseOrder: false\n                }, void 0, false, {\n                    fileName: \"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\layout.tsx\",\n                    lineNumber: 20,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\layout.tsx\",\n            lineNumber: 14,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\layout.tsx\",\n        lineNumber: 13,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvbGF5b3V0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBdUI7QUFDb0M7QUFDb0I7QUFDckM7QUFFbkMsTUFBTUcsV0FBVztJQUN0QkMsT0FBTztJQUNQQyxhQUFhO0FBQ2YsRUFBRTtBQUVhLFNBQVNDLFdBQVcsRUFBRUMsUUFBUSxFQUFpQztJQUM1RSxxQkFDRSw4REFBQ0M7UUFBS0MsTUFBSztrQkFDVCw0RUFBQ0M7OzhCQUNDLDhEQUFDVixtRUFBZUE7Ozs7OzhCQUNoQiw4REFBQ1c7b0JBQUlDLFdBQVU7OEJBQ1pMOzs7Ozs7OEJBRUgsOERBQUNOLDZFQUF5QkE7Ozs7OzhCQUMxQiw4REFBQ0Msb0RBQU9BO29CQUNOVyxVQUFTO29CQUNUQyxjQUFjOzs7Ozs7Ozs7Ozs7Ozs7OztBQUt4QiIsInNvdXJjZXMiOlsiQzpcXE1vbW15IEx1Y3lcXFByb2plY3RzXFxMdWNpZCBEcmVhbVxcYXBwXFxsYXlvdXQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcIi4vZ2xvYmFscy5jc3NcIjtcbmltcG9ydCBUaGVtZUNvbnRyb2xsZXIgZnJvbSBcIi4vY29tcG9uZW50cy9UaGVtZUNvbnRyb2xsZXJcIjtcbmltcG9ydCBBY2hpZXZlbWVudFRyaWdnZXJNYW5hZ2VyIGZyb20gXCIuL2NvbXBvbmVudHMvQWNoaWV2ZW1lbnRUcmlnZ2VyTWFuYWdlclwiO1xuaW1wb3J0IHsgVG9hc3RlciB9IGZyb20gXCJyZWFjdC1ob3QtdG9hc3RcIjtcblxuZXhwb3J0IGNvbnN0IG1ldGFkYXRhID0ge1xuICB0aXRsZTogXCJMdWNpZCBEcmVhbSBUZW1wbGUgUlBHXCIsXG4gIGRlc2NyaXB0aW9uOiBcIlNpbmdsZS1maWxlIGVtZXJnZW50IGRyZWFtIGpvdXJuYWwgUlBHXCIsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBSb290TGF5b3V0KHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0pIHtcbiAgcmV0dXJuIChcbiAgICA8aHRtbCBsYW5nPVwiZW5cIj5cbiAgICAgIDxib2R5PlxuICAgICAgICA8VGhlbWVDb250cm9sbGVyIC8+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLWJhc2UtMTAwIHRleHQtYmFzZS1jb250ZW50IHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTMwMFwiPlxuICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxBY2hpZXZlbWVudFRyaWdnZXJNYW5hZ2VyIC8+XG4gICAgICAgIDxUb2FzdGVyXG4gICAgICAgICAgcG9zaXRpb249XCJib3R0b20tcmlnaHRcIlxuICAgICAgICAgIHJldmVyc2VPcmRlcj17ZmFsc2V9XG4gICAgICAgIC8+XG4gICAgICA8L2JvZHk+XG4gICAgPC9odG1sPlxuICApO1xufVxuIl0sIm5hbWVzIjpbIlRoZW1lQ29udHJvbGxlciIsIkFjaGlldmVtZW50VHJpZ2dlck1hbmFnZXIiLCJUb2FzdGVyIiwibWV0YWRhdGEiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiUm9vdExheW91dCIsImNoaWxkcmVuIiwiaHRtbCIsImxhbmciLCJib2R5IiwiZGl2IiwiY2xhc3NOYW1lIiwicG9zaXRpb24iLCJyZXZlcnNlT3JkZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/layout.tsx\n");

/***/ }),

/***/ "(rsc)/./app/page.tsx":
/*!**********************!*\
  !*** ./app/page.tsx ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Page)\n/* harmony export */ });\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/navigation */ \"(rsc)/./node_modules/next/dist/api/navigation.react-server.js\");\n\nfunction Page() {\n    (0,next_navigation__WEBPACK_IMPORTED_MODULE_0__.redirect)(\"/rpg\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvcGFnZS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMkM7QUFFNUIsU0FBU0M7SUFDdEJELHlEQUFRQSxDQUFDO0FBQ1giLCJzb3VyY2VzIjpbIkM6XFxNb21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxccGFnZS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVkaXJlY3QgfSBmcm9tIFwibmV4dC9uYXZpZ2F0aW9uXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFBhZ2UoKSB7XG4gIHJlZGlyZWN0KFwiL3JwZ1wiKTtcbn1cbiJdLCJuYW1lcyI6WyJyZWRpcmVjdCIsIlBhZ2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/page.tsx\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=C%3A%5CMommy%20Lucy%5CProjects%5CLucid%20Dream%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CMommy%20Lucy%5CProjects%5CLucid%20Dream&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=C%3A%5CMommy%20Lucy%5CProjects%5CLucid%20Dream%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CMommy%20Lucy%5CProjects%5CLucid%20Dream&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GlobalError: () => (/* reexport default from dynamic */ next_dist_client_components_builtin_global_error_js__WEBPACK_IMPORTED_MODULE_25___default.a),\n/* harmony export */   __next_app__: () => (/* binding */ __next_app__),\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   pages: () => (/* binding */ pages),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   tree: () => (/* binding */ tree)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-page/module.compiled */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/module.compiled.js?6a4d\");\n/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_app_render_interop_default__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/app-render/interop-default */ \"(rsc)/./node_modules/next/dist/server/app-render/interop-default.js\");\n/* harmony import */ var next_dist_server_app_render_strip_flight_headers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/app-render/strip-flight-headers */ \"(rsc)/./node_modules/next/dist/server/app-render/strip-flight-headers.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_lib_experimental_ppr__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/lib/experimental/ppr */ \"(rsc)/./node_modules/next/dist/server/lib/experimental/ppr.js\");\n/* harmony import */ var next_dist_server_lib_experimental_ppr__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_experimental_ppr__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var next_dist_server_request_fallback_params__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/request/fallback-params */ \"(rsc)/./node_modules/next/dist/server/request/fallback-params.js\");\n/* harmony import */ var next_dist_server_app_render_encryption_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/app-render/encryption-utils */ \"(rsc)/./node_modules/next/dist/server/app-render/encryption-utils.js\");\n/* harmony import */ var next_dist_server_app_render_encryption_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_encryption_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_streaming_metadata__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/streaming-metadata */ \"(rsc)/./node_modules/next/dist/server/lib/streaming-metadata.js\");\n/* harmony import */ var next_dist_server_lib_streaming_metadata__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_streaming_metadata__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var next_dist_server_app_render_action_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/server/app-render/action-utils */ \"(rsc)/./node_modules/next/dist/server/app-render/action-utils.js\");\n/* harmony import */ var next_dist_server_app_render_action_utils__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_action_utils__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_lib_server_action_request_meta__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/lib/server-action-request-meta */ \"(rsc)/./node_modules/next/dist/server/lib/server-action-request-meta.js\");\n/* harmony import */ var next_dist_server_lib_server_action_request_meta__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_server_action_request_meta__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! next/dist/client/components/app-router-headers */ \"(rsc)/./node_modules/next/dist/client/components/app-router-headers.js\");\n/* harmony import */ var next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/is-bot */ \"next/dist/shared/lib/router/utils/is-bot\");\n/* harmony import */ var next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! next/dist/lib/fallback */ \"(rsc)/./node_modules/next/dist/lib/fallback.js\");\n/* harmony import */ var next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__);\n/* harmony import */ var next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! next/dist/server/render-result */ \"(rsc)/./node_modules/next/dist/server/render-result.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__);\n/* harmony import */ var next_dist_server_stream_utils_encoded_tags__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! next/dist/server/stream-utils/encoded-tags */ \"(rsc)/./node_modules/next/dist/server/stream-utils/encoded-tags.js\");\n/* harmony import */ var next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! next/dist/server/send-payload */ \"(rsc)/./node_modules/next/dist/server/send-payload.js\");\n/* harmony import */ var next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_24__);\n/* harmony import */ var next_dist_client_components_builtin_global_error_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! next/dist/client/components/builtin/global-error.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/global-error.js\");\n/* harmony import */ var next_dist_client_components_builtin_global_error_js__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_builtin_global_error_js__WEBPACK_IMPORTED_MODULE_25__);\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! next/dist/server/app-render/entry-base */ \"(rsc)/./node_modules/next/dist/server/app-render/entry-base.js\");\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26__);\n/* harmony import */ var next_dist_client_components_redirect_status_code__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! next/dist/client/components/redirect-status-code */ \"(rsc)/./node_modules/next/dist/client/components/redirect-status-code.js\");\n/* harmony import */ var next_dist_client_components_redirect_status_code__WEBPACK_IMPORTED_MODULE_27___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_redirect_status_code__WEBPACK_IMPORTED_MODULE_27__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26__) if([\"default\",\"tree\",\"pages\",\"GlobalError\",\"__next_app__\",\"routeModule\",\"handler\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\nconst module0 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/layout.tsx */ \"(rsc)/./app/layout.tsx\"));\nconst module1 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/builtin/global-error.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/global-error.js\", 23));\nconst module2 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/builtin/not-found.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/not-found.js\", 23));\nconst module3 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/builtin/forbidden.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/forbidden.js\", 23));\nconst module4 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/builtin/unauthorized.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/unauthorized.js\", 23));\nconst page5 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/page.tsx */ \"(rsc)/./app/page.tsx\"));\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the tree and pages here so that we can use them in the route\n// module.\nconst tree = {\n        children: [\n        '',\n        {\n        children: ['__PAGE__', {}, {\n          page: [page5, \"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\page.tsx\"],\n          \n        }]\n      },\n        {\n        'layout': [module0, \"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\layout.tsx\"],\n'global-error': [module1, \"next/dist/client/components/builtin/global-error.js\"],\n'not-found': [module2, \"next/dist/client/components/builtin/not-found.js\"],\n'forbidden': [module3, \"next/dist/client/components/builtin/forbidden.js\"],\n'unauthorized': [module4, \"next/dist/client/components/builtin/unauthorized.js\"],\n        \n      }\n      ]\n      }.children;\nconst pages = [\"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\page.tsx\"];\n\n\n\nconst __next_app_require__ = __webpack_require__\nconst __next_app_load_chunk__ = () => Promise.resolve()\nconst __next_app__ = {\n    require: __next_app_require__,\n    loadChunk: __next_app_load_chunk__\n};\n\n\n\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppPageRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,\n        page: \"/page\",\n        pathname: \"/\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: '',\n        appPaths: []\n    },\n    userland: {\n        loaderTree: tree\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || ''\n});\nasync function handler(req, res, ctx) {\n    var _this;\n    let srcPage = \"/page\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const initialPostponed = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'postponed');\n    // TODO: replace with more specific flags\n    const minimalMode = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'minimalMode');\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, query, params, parsedUrl, pageIsDynamic, buildManifest, nextFontManifest, reactLoadableManifest, serverActionsManifest, clientReferenceManifest, subresourceIntegrityManifest, prerenderManifest, isDraftMode, resolvedPathname, revalidateOnlyGenerated, routerServerContext, nextConfig, interceptionRoutePatterns } = prepareResult;\n    const pathname = parsedUrl.pathname || '/';\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_14__.normalizeAppPath)(srcPage);\n    let { isOnDemandRevalidate } = prepareResult;\n    const prerenderInfo = routeModule.match(pathname, prerenderManifest);\n    const isPrerendered = !!prerenderManifest.routes[resolvedPathname];\n    let isSSG = Boolean(prerenderInfo || isPrerendered || prerenderManifest.routes[normalizedSrcPage]);\n    const userAgent = req.headers['user-agent'] || '';\n    const botType = (0,next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_17__.getBotType)(userAgent);\n    const isHtmlBot = (0,next_dist_server_lib_streaming_metadata__WEBPACK_IMPORTED_MODULE_12__.isHtmlBotRequest)(req);\n    /**\n   * If true, this indicates that the request being made is for an app\n   * prefetch request.\n   */ const isPrefetchRSCRequest = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'isPrefetchRSCRequest') ?? req.headers[next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.NEXT_ROUTER_PREFETCH_HEADER] === '1' // exclude runtime prefetches, which use '2'\n    ;\n    // NOTE: Don't delete headers[RSC] yet, it still needs to be used in renderToHTML later\n    const isRSCRequest = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'isRSCRequest') ?? Boolean(req.headers[next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.RSC_HEADER]);\n    const isPossibleServerAction = (0,next_dist_server_lib_server_action_request_meta__WEBPACK_IMPORTED_MODULE_15__.getIsPossibleServerAction)(req);\n    /**\n   * If the route being rendered is an app page, and the ppr feature has been\n   * enabled, then the given route _could_ support PPR.\n   */ const couldSupportPPR = (0,next_dist_server_lib_experimental_ppr__WEBPACK_IMPORTED_MODULE_9__.checkIsAppPPREnabled)(nextConfig.experimental.ppr);\n    // When enabled, this will allow the use of the `?__nextppronly` query to\n    // enable debugging of the static shell.\n    const hasDebugStaticShellQuery =  false && 0;\n    // When enabled, this will allow the use of the `?__nextppronly` query\n    // to enable debugging of the fallback shell.\n    const hasDebugFallbackShellQuery = hasDebugStaticShellQuery && query.__nextppronly === 'fallback';\n    // This page supports PPR if it is marked as being `PARTIALLY_STATIC` in the\n    // prerender manifest and this is an app page.\n    const isRoutePPREnabled = couldSupportPPR && (((_this = prerenderManifest.routes[normalizedSrcPage] ?? prerenderManifest.dynamicRoutes[normalizedSrcPage]) == null ? void 0 : _this.renderingMode) === 'PARTIALLY_STATIC' || // Ideally we'd want to check the appConfig to see if this page has PPR\n    // enabled or not, but that would require plumbing the appConfig through\n    // to the server during development. We assume that the page supports it\n    // but only during development.\n    hasDebugStaticShellQuery && (routeModule.isDev === true || (routerServerContext == null ? void 0 : routerServerContext.experimentalTestProxy) === true));\n    const isDebugStaticShell = hasDebugStaticShellQuery && isRoutePPREnabled;\n    // We should enable debugging dynamic accesses when the static shell\n    // debugging has been enabled and we're also in development mode.\n    const isDebugDynamicAccesses = isDebugStaticShell && routeModule.isDev === true;\n    const isDebugFallbackShell = hasDebugFallbackShellQuery && isRoutePPREnabled;\n    // If we're in minimal mode, then try to get the postponed information from\n    // the request metadata. If available, use it for resuming the postponed\n    // render.\n    const minimalPostponed = isRoutePPREnabled ? initialPostponed : undefined;\n    // If PPR is enabled, and this is a RSC request (but not a prefetch), then\n    // we can use this fact to only generate the flight data for the request\n    // because we can't cache the HTML (as it's also dynamic).\n    const isDynamicRSCRequest = isRoutePPREnabled && isRSCRequest && !isPrefetchRSCRequest;\n    // Need to read this before it's stripped by stripFlightHeaders. We don't\n    // need to transfer it to the request meta because it's only read\n    // within this function; the static segment data should have already been\n    // generated, so we will always either return a static response or a 404.\n    const segmentPrefetchHeader = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'segmentPrefetchRSCRequest');\n    // TODO: investigate existing bug with shouldServeStreamingMetadata always\n    // being true for a revalidate due to modifying the base-server this.renderOpts\n    // when fixing this to correct logic it causes hydration issue since we set\n    // serveStreamingMetadata to true during export\n    let serveStreamingMetadata = !userAgent ? true : (0,next_dist_server_lib_streaming_metadata__WEBPACK_IMPORTED_MODULE_12__.shouldServeStreamingMetadata)(userAgent, nextConfig.htmlLimitedBots);\n    if (isHtmlBot && isRoutePPREnabled) {\n        isSSG = false;\n        serveStreamingMetadata = false;\n    }\n    // In development, we always want to generate dynamic HTML.\n    let supportsDynamicResponse = // If we're in development, we always support dynamic HTML, unless it's\n    // a data request, in which case we only produce static HTML.\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isSSG || // If this request has provided postponed data, it supports dynamic\n    // HTML.\n    typeof initialPostponed === 'string' || // If this is a dynamic RSC request, then this render supports dynamic\n    // HTML (it's dynamic).\n    isDynamicRSCRequest;\n    // When html bots request PPR page, perform the full dynamic rendering.\n    const shouldWaitOnAllReady = isHtmlBot && isRoutePPREnabled;\n    let ssgCacheKey = null;\n    if (!isDraftMode && isSSG && !supportsDynamicResponse && !isPossibleServerAction && !minimalPostponed && !isDynamicRSCRequest) {\n        ssgCacheKey = resolvedPathname;\n    }\n    // the staticPathKey differs from ssgCacheKey since\n    // ssgCacheKey is null in dev since we're always in \"dynamic\"\n    // mode in dev to bypass the cache, but we still need to honor\n    // dynamicParams = false in dev mode\n    let staticPathKey = ssgCacheKey;\n    if (!staticPathKey && routeModule.isDev) {\n        staticPathKey = resolvedPathname;\n    }\n    // If this is a request for an app path that should be statically generated\n    // and we aren't in the edge runtime, strip the flight headers so it will\n    // generate the static response.\n    if (!routeModule.isDev && !isDraftMode && isSSG && isRSCRequest && !isDynamicRSCRequest) {\n        (0,next_dist_server_app_render_strip_flight_headers__WEBPACK_IMPORTED_MODULE_7__.stripFlightHeaders)(req.headers);\n    }\n    const ComponentMod = {\n        ...next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26__,\n        tree,\n        pages,\n        GlobalError: (next_dist_client_components_builtin_global_error_js__WEBPACK_IMPORTED_MODULE_25___default()),\n        handler,\n        routeModule,\n        __next_app__\n    };\n    // Before rendering (which initializes component tree modules), we have to\n    // set the reference manifests to our global store so Server Action's\n    // encryption util can access to them at the top level of the page module.\n    if (serverActionsManifest && clientReferenceManifest) {\n        (0,next_dist_server_app_render_encryption_utils__WEBPACK_IMPORTED_MODULE_11__.setReferenceManifestsSingleton)({\n            page: srcPage,\n            clientReferenceManifest,\n            serverActionsManifest,\n            serverModuleMap: (0,next_dist_server_app_render_action_utils__WEBPACK_IMPORTED_MODULE_13__.createServerModuleMap)({\n                serverActionsManifest\n            })\n        });\n    }\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    try {\n        const varyHeader = routeModule.getVaryHeader(resolvedPathname, interceptionRoutePatterns);\n        res.setHeader('Vary', varyHeader);\n        const invokeRouteModule = async (span, context)=>{\n            const nextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8__.NodeNextRequest(req);\n            const nextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8__.NodeNextResponse(res);\n            // TODO: adapt for putting the RDC inside the postponed data\n            // If we're in dev, and this isn't a prefetch or a server action,\n            // we should seed the resume data cache.\n            if (true) {\n                if (nextConfig.experimental.cacheComponents && !isPrefetchRSCRequest && !context.renderOpts.isPossibleServerAction) {\n                    const warmup = await routeModule.warmup(nextReq, nextRes, context);\n                    // If the warmup is successful, we should use the resume data\n                    // cache from the warmup.\n                    if (warmup.metadata.renderResumeDataCache) {\n                        context.renderOpts.renderResumeDataCache = warmup.metadata.renderResumeDataCache;\n                    }\n                }\n            }\n            return routeModule.render(nextReq, nextRes, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_5__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const doRender = async ({ span, postponed, fallbackRouteParams })=>{\n            const context = {\n                query,\n                params,\n                page: normalizedSrcPage,\n                sharedContext: {\n                    buildId\n                },\n                serverComponentsHmrCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'serverComponentsHmrCache'),\n                fallbackRouteParams,\n                renderOpts: {\n                    App: ()=>null,\n                    Document: ()=>null,\n                    pageConfig: {},\n                    ComponentMod,\n                    Component: (0,next_dist_server_app_render_interop_default__WEBPACK_IMPORTED_MODULE_6__.interopDefault)(ComponentMod),\n                    params,\n                    routeModule,\n                    page: srcPage,\n                    postponed,\n                    shouldWaitOnAllReady,\n                    serveStreamingMetadata,\n                    supportsDynamicResponse: typeof postponed === 'string' || supportsDynamicResponse,\n                    buildManifest,\n                    nextFontManifest,\n                    reactLoadableManifest,\n                    subresourceIntegrityManifest,\n                    serverActionsManifest,\n                    clientReferenceManifest,\n                    setIsrStatus: routerServerContext == null ? void 0 : routerServerContext.setIsrStatus,\n                    dir:  true ? (__webpack_require__(/*! path */ \"path\").join)(/* turbopackIgnore: true */ process.cwd(), routeModule.relativeProjectDir) : 0,\n                    isDraftMode,\n                    isRevalidate: isSSG && !postponed && !isDynamicRSCRequest,\n                    botType,\n                    isOnDemandRevalidate,\n                    isPossibleServerAction,\n                    assetPrefix: nextConfig.assetPrefix,\n                    nextConfigOutput: nextConfig.output,\n                    crossOrigin: nextConfig.crossOrigin,\n                    trailingSlash: nextConfig.trailingSlash,\n                    previewProps: prerenderManifest.preview,\n                    deploymentId: nextConfig.deploymentId,\n                    enableTainting: nextConfig.experimental.taint,\n                    htmlLimitedBots: nextConfig.htmlLimitedBots,\n                    devtoolSegmentExplorer: nextConfig.experimental.devtoolSegmentExplorer,\n                    reactMaxHeadersLength: nextConfig.reactMaxHeadersLength,\n                    multiZoneDraftMode,\n                    incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'incrementalCache'),\n                    cacheLifeProfiles: nextConfig.experimental.cacheLife,\n                    basePath: nextConfig.basePath,\n                    serverActions: nextConfig.experimental.serverActions,\n                    ...isDebugStaticShell || isDebugDynamicAccesses ? {\n                        nextExport: true,\n                        supportsDynamicResponse: false,\n                        isStaticGeneration: true,\n                        isRevalidate: true,\n                        isDebugDynamicAccesses: isDebugDynamicAccesses\n                    } : {},\n                    experimental: {\n                        isRoutePPREnabled,\n                        expireTime: nextConfig.expireTime,\n                        staleTimes: nextConfig.experimental.staleTimes,\n                        cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                        clientSegmentCache: Boolean(nextConfig.experimental.clientSegmentCache),\n                        clientParamParsing: Boolean(nextConfig.experimental.clientParamParsing),\n                        dynamicOnHover: Boolean(nextConfig.experimental.dynamicOnHover),\n                        inlineCss: Boolean(nextConfig.experimental.inlineCss),\n                        authInterrupts: Boolean(nextConfig.experimental.authInterrupts),\n                        clientTraceMetadata: nextConfig.experimental.clientTraceMetadata || []\n                    },\n                    waitUntil: ctx.waitUntil,\n                    onClose: (cb)=>{\n                        res.on('close', cb);\n                    },\n                    onAfterTaskError: ()=>{},\n                    onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext),\n                    err: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'invokeError'),\n                    dev: routeModule.isDev\n                }\n            };\n            const result = await invokeRouteModule(span, context);\n            const { metadata } = result;\n            const { cacheControl, headers = {}, // Add any fetch tags that were on the page to the response headers.\n            fetchTags: cacheTags } = metadata;\n            if (cacheTags) {\n                headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n            }\n            // Pull any fetch metrics from the render onto the request.\n            ;\n            req.fetchMetrics = metadata.fetchMetrics;\n            // we don't throw static to dynamic errors in dev as isSSG\n            // is a best guess in dev since we don't have the prerender pass\n            // to know whether the path is actually static or not\n            if (isSSG && (cacheControl == null ? void 0 : cacheControl.revalidate) === 0 && !routeModule.isDev && !isRoutePPREnabled) {\n                const staticBailoutInfo = metadata.staticBailoutInfo;\n                const err = Object.defineProperty(new Error(`Page changed from static to dynamic at runtime ${resolvedPathname}${(staticBailoutInfo == null ? void 0 : staticBailoutInfo.description) ? `, reason: ${staticBailoutInfo.description}` : ``}` + `\\nsee more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E132\",\n                    enumerable: false,\n                    configurable: true\n                });\n                if (staticBailoutInfo == null ? void 0 : staticBailoutInfo.stack) {\n                    const stack = staticBailoutInfo.stack;\n                    err.stack = err.message + stack.substring(stack.indexOf('\\n'));\n                }\n                throw err;\n            }\n            return {\n                value: {\n                    kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__.CachedRouteKind.APP_PAGE,\n                    html: result,\n                    headers,\n                    rscData: metadata.flightData,\n                    postponed: metadata.postponed,\n                    status: metadata.statusCode,\n                    segmentData: metadata.segmentData\n                },\n                cacheControl\n            };\n        };\n        const responseGenerator = async ({ hasResolved, previousCacheEntry, isRevalidating, span })=>{\n            const isProduction = routeModule.isDev === false;\n            const didRespond = hasResolved || res.writableEnded;\n            // skip on-demand revalidate if cache is not present and\n            // revalidate-if-generated is set\n            if (isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry && !minimalMode) {\n                if (routerServerContext == null ? void 0 : routerServerContext.render404) {\n                    await routerServerContext.render404(req, res);\n                } else {\n                    res.statusCode = 404;\n                    res.end('This page could not be found');\n                }\n                return null;\n            }\n            let fallbackMode;\n            if (prerenderInfo) {\n                fallbackMode = (0,next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.parseFallbackField)(prerenderInfo.fallback);\n            }\n            // When serving a HTML bot request, we want to serve a blocking render and\n            // not the prerendered page. This ensures that the correct content is served\n            // to the bot in the head.\n            if (fallbackMode === next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.PRERENDER && (0,next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_17__.isBot)(userAgent)) {\n                if (!isRoutePPREnabled || isHtmlBot) {\n                    fallbackMode = next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.BLOCKING_STATIC_RENDER;\n                }\n            }\n            if ((previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) === -1) {\n                isOnDemandRevalidate = true;\n            }\n            // TODO: adapt for PPR\n            // only allow on-demand revalidate for fallback: true/blocking\n            // or for prerendered fallback: false paths\n            if (isOnDemandRevalidate && (fallbackMode !== next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.NOT_FOUND || previousCacheEntry)) {\n                fallbackMode = next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.BLOCKING_STATIC_RENDER;\n            }\n            if (!minimalMode && fallbackMode !== next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.BLOCKING_STATIC_RENDER && staticPathKey && !didRespond && !isDraftMode && pageIsDynamic && (isProduction || !isPrerendered)) {\n                // if the page has dynamicParams: false and this pathname wasn't\n                // prerendered trigger the no fallback handling\n                if (// In development, fall through to render to handle missing\n                // getStaticPaths.\n                (isProduction || prerenderInfo) && // When fallback isn't present, abort this render so we 404\n                fallbackMode === next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.NOT_FOUND) {\n                    throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_24__.NoFallbackError();\n                }\n                let fallbackResponse;\n                if (isRoutePPREnabled && !isRSCRequest) {\n                    const cacheKey = typeof (prerenderInfo == null ? void 0 : prerenderInfo.fallback) === 'string' ? prerenderInfo.fallback : isProduction ? normalizedSrcPage : null;\n                    // We use the response cache here to handle the revalidation and\n                    // management of the fallback shell.\n                    fallbackResponse = await routeModule.handleResponse({\n                        cacheKey,\n                        req,\n                        nextConfig,\n                        routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,\n                        isFallback: true,\n                        prerenderManifest,\n                        isRoutePPREnabled,\n                        responseGenerator: async ()=>doRender({\n                                span,\n                                // We pass `undefined` as rendering a fallback isn't resumed\n                                // here.\n                                postponed: undefined,\n                                fallbackRouteParams: // If we're in production or we're debugging the fallback\n                                // shell then we should postpone when dynamic params are\n                                // accessed.\n                                isProduction || isDebugFallbackShell ? (0,next_dist_server_request_fallback_params__WEBPACK_IMPORTED_MODULE_10__.getFallbackRouteParams)(normalizedSrcPage) : null\n                            }),\n                        waitUntil: ctx.waitUntil\n                    });\n                    // If the fallback response was set to null, then we should return null.\n                    if (fallbackResponse === null) return null;\n                    // Otherwise, if we did get a fallback response, we should return it.\n                    if (fallbackResponse) {\n                        // Remove the cache control from the response to prevent it from being\n                        // used in the surrounding cache.\n                        delete fallbackResponse.cacheControl;\n                        return fallbackResponse;\n                    }\n                }\n            }\n            // Only requests that aren't revalidating can be resumed. If we have the\n            // minimal postponed data, then we should resume the render with it.\n            const postponed = !isOnDemandRevalidate && !isRevalidating && minimalPostponed ? minimalPostponed : undefined;\n            // When we're in minimal mode, if we're trying to debug the static shell,\n            // we should just return nothing instead of resuming the dynamic render.\n            if ((isDebugStaticShell || isDebugDynamicAccesses) && typeof postponed !== 'undefined') {\n                return {\n                    cacheControl: {\n                        revalidate: 1,\n                        expire: undefined\n                    },\n                    value: {\n                        kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__.CachedRouteKind.PAGES,\n                        html: next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_20__[\"default\"].EMPTY,\n                        pageData: {},\n                        headers: undefined,\n                        status: undefined\n                    }\n                };\n            }\n            // If this is a dynamic route with PPR enabled and the default route\n            // matches were set, then we should pass the fallback route params to\n            // the renderer as this is a fallback revalidation request.\n            const fallbackRouteParams = pageIsDynamic && isRoutePPREnabled && ((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'renderFallbackShell') || isDebugFallbackShell) ? (0,next_dist_server_request_fallback_params__WEBPACK_IMPORTED_MODULE_10__.getFallbackRouteParams)(pathname) : null;\n            // Perform the render.\n            return doRender({\n                span,\n                postponed,\n                fallbackRouteParams\n            });\n        };\n        const handleResponse = async (span)=>{\n            var _cacheEntry_value, _cachedData_headers;\n            const cacheEntry = await routeModule.handleResponse({\n                cacheKey: ssgCacheKey,\n                responseGenerator: (c)=>responseGenerator({\n                        span,\n                        ...c\n                    }),\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,\n                isOnDemandRevalidate,\n                isRoutePPREnabled,\n                req,\n                nextConfig,\n                prerenderManifest,\n                waitUntil: ctx.waitUntil\n            });\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            // In dev, we should not cache pages for any reason.\n            if (routeModule.isDev) {\n                res.setHeader('Cache-Control', 'no-store, must-revalidate');\n            }\n            if (!cacheEntry) {\n                if (ssgCacheKey) {\n                    // A cache entry might not be generated if a response is written\n                    // in `getInitialProps` or `getServerSideProps`, but those shouldn't\n                    // have a cache key. If we do have a cache key but we don't end up\n                    // with a cache entry, then either Next.js or the application has a\n                    // bug that needs fixing.\n                    throw Object.defineProperty(new Error('invariant: cache entry required but not generated'), \"__NEXT_ERROR_CODE\", {\n                        value: \"E62\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n                return null;\n            }\n            if (((_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__.CachedRouteKind.APP_PAGE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant app-page handler received invalid cache entry ${(_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E707\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            const didPostpone = typeof cacheEntry.value.postponed === 'string';\n            if (isSSG && // We don't want to send a cache header for requests that contain dynamic\n            // data. If this is a Dynamic RSC request or wasn't a Prefetch RSC\n            // request, then we should set the cache header.\n            !isDynamicRSCRequest && (!didPostpone || isPrefetchRSCRequest)) {\n                if (!minimalMode) {\n                    // set x-nextjs-cache header to match the header\n                    // we set for the image-optimizer\n                    res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n                }\n                // Set a header used by the client router to signal the response is static\n                // and should respect the `static` cache staleTime value.\n                res.setHeader(next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.NEXT_IS_PRERENDER_HEADER, '1');\n            }\n            const { value: cachedData } = cacheEntry;\n            // Coerce the cache control parameter from the render.\n            let cacheControl;\n            // If this is a resume request in minimal mode it is streamed with dynamic\n            // content and should not be cached.\n            if (minimalPostponed) {\n                cacheControl = {\n                    revalidate: 0,\n                    expire: undefined\n                };\n            } else if (minimalMode && isRSCRequest && !isPrefetchRSCRequest && isRoutePPREnabled) {\n                cacheControl = {\n                    revalidate: 0,\n                    expire: undefined\n                };\n            } else if (!routeModule.isDev) {\n                // If this is a preview mode request, we shouldn't cache it\n                if (isDraftMode) {\n                    cacheControl = {\n                        revalidate: 0,\n                        expire: undefined\n                    };\n                } else if (!isSSG) {\n                    if (!res.getHeader('Cache-Control')) {\n                        cacheControl = {\n                            revalidate: 0,\n                            expire: undefined\n                        };\n                    }\n                } else if (cacheEntry.cacheControl) {\n                    // If the cache entry has a cache control with a revalidate value that's\n                    // a number, use it.\n                    if (typeof cacheEntry.cacheControl.revalidate === 'number') {\n                        var _cacheEntry_cacheControl;\n                        if (cacheEntry.cacheControl.revalidate < 1) {\n                            throw Object.defineProperty(new Error(`Invalid revalidate configuration provided: ${cacheEntry.cacheControl.revalidate} < 1`), \"__NEXT_ERROR_CODE\", {\n                                value: \"E22\",\n                                enumerable: false,\n                                configurable: true\n                            });\n                        }\n                        cacheControl = {\n                            revalidate: cacheEntry.cacheControl.revalidate,\n                            expire: ((_cacheEntry_cacheControl = cacheEntry.cacheControl) == null ? void 0 : _cacheEntry_cacheControl.expire) ?? nextConfig.expireTime\n                        };\n                    } else {\n                        cacheControl = {\n                            revalidate: next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.CACHE_ONE_YEAR,\n                            expire: undefined\n                        };\n                    }\n                }\n            }\n            cacheEntry.cacheControl = cacheControl;\n            if (typeof segmentPrefetchHeader === 'string' && (cachedData == null ? void 0 : cachedData.kind) === next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__.CachedRouteKind.APP_PAGE && cachedData.segmentData) {\n                var _cachedData_headers1;\n                // This is a prefetch request issued by the client Segment Cache. These\n                // should never reach the application layer (lambda). We should either\n                // respond from the cache (HIT) or respond with 204 No Content (MISS).\n                // Set a header to indicate that PPR is enabled for this route. This\n                // lets the client distinguish between a regular cache miss and a cache\n                // miss due to PPR being disabled. In other contexts this header is used\n                // to indicate that the response contains dynamic data, but here we're\n                // only using it to indicate that the feature is enabled — the segment\n                // response itself contains whether the data is dynamic.\n                res.setHeader(next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.NEXT_DID_POSTPONE_HEADER, '2');\n                // Add the cache tags header to the response if it exists and we're in\n                // minimal mode while rendering a static page.\n                const tags = (_cachedData_headers1 = cachedData.headers) == null ? void 0 : _cachedData_headers1[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER];\n                if (minimalMode && isSSG && tags && typeof tags === 'string') {\n                    res.setHeader(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER, tags);\n                }\n                const matchedSegment = cachedData.segmentData.get(segmentPrefetchHeader);\n                if (matchedSegment !== undefined) {\n                    // Cache hit\n                    return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                        req,\n                        res,\n                        generateEtags: nextConfig.generateEtags,\n                        poweredByHeader: nextConfig.poweredByHeader,\n                        result: next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_20__[\"default\"].fromStatic(matchedSegment, next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.RSC_CONTENT_TYPE_HEADER),\n                        cacheControl: cacheEntry.cacheControl\n                    });\n                }\n                // Cache miss. Either a cache entry for this route has not been generated\n                // (which technically should not be possible when PPR is enabled, because\n                // at a minimum there should always be a fallback entry) or there's no\n                // match for the requested segment. Respond with a 204 No Content. We\n                // don't bother to respond with 404, because these requests are only\n                // issued as part of a prefetch.\n                res.statusCode = 204;\n                return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                    req,\n                    res,\n                    generateEtags: nextConfig.generateEtags,\n                    poweredByHeader: nextConfig.poweredByHeader,\n                    result: next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_20__[\"default\"].EMPTY,\n                    cacheControl: cacheEntry.cacheControl\n                });\n            }\n            // If there's a callback for `onCacheEntry`, call it with the cache entry\n            // and the revalidate options.\n            const onCacheEntry = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'onCacheEntry');\n            if (onCacheEntry) {\n                const finished = await onCacheEntry({\n                    ...cacheEntry,\n                    // TODO: remove this when upstream doesn't\n                    // always expect this value to be \"PAGE\"\n                    value: {\n                        ...cacheEntry.value,\n                        kind: 'PAGE'\n                    }\n                }, {\n                    url: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'initURL')\n                });\n                if (finished) {\n                    // TODO: maybe we have to end the request?\n                    return null;\n                }\n            }\n            // If the request has a postponed state and it's a resume request we\n            // should error.\n            if (didPostpone && minimalPostponed) {\n                throw Object.defineProperty(new Error('Invariant: postponed state should not be present on a resume request'), \"__NEXT_ERROR_CODE\", {\n                    value: \"E396\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (cachedData.headers) {\n                const headers = {\n                    ...cachedData.headers\n                };\n                if (!minimalMode || !isSSG) {\n                    delete headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER];\n                }\n                for (let [key, value] of Object.entries(headers)){\n                    if (typeof value === 'undefined') continue;\n                    if (Array.isArray(value)) {\n                        for (const v of value){\n                            res.appendHeader(key, v);\n                        }\n                    } else if (typeof value === 'number') {\n                        value = value.toString();\n                        res.appendHeader(key, value);\n                    } else {\n                        res.appendHeader(key, value);\n                    }\n                }\n            }\n            // Add the cache tags header to the response if it exists and we're in\n            // minimal mode while rendering a static page.\n            const tags = (_cachedData_headers = cachedData.headers) == null ? void 0 : _cachedData_headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER];\n            if (minimalMode && isSSG && tags && typeof tags === 'string') {\n                res.setHeader(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER, tags);\n            }\n            // If the request is a data request, then we shouldn't set the status code\n            // from the response because it should always be 200. This should be gated\n            // behind the experimental PPR flag.\n            if (cachedData.status && (!isRSCRequest || !isRoutePPREnabled)) {\n                res.statusCode = cachedData.status;\n            }\n            // Redirect information is encoded in RSC payload, so we don't need to use redirect status codes\n            if (!minimalMode && cachedData.status && next_dist_client_components_redirect_status_code__WEBPACK_IMPORTED_MODULE_27__.RedirectStatusCode[cachedData.status] && isRSCRequest) {\n                res.statusCode = 200;\n            }\n            // Mark that the request did postpone.\n            if (didPostpone) {\n                res.setHeader(next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.NEXT_DID_POSTPONE_HEADER, '1');\n            }\n            // we don't go through this block when preview mode is true\n            // as preview mode is a dynamic request (bypasses cache) and doesn't\n            // generate both HTML and payloads in the same request so continue to just\n            // return the generated payload\n            if (isRSCRequest && !isDraftMode) {\n                // If this is a dynamic RSC request, then stream the response.\n                if (typeof cachedData.rscData === 'undefined') {\n                    if (cachedData.postponed) {\n                        throw Object.defineProperty(new Error('Invariant: Expected postponed to be undefined'), \"__NEXT_ERROR_CODE\", {\n                            value: \"E372\",\n                            enumerable: false,\n                            configurable: true\n                        });\n                    }\n                    return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                        req,\n                        res,\n                        generateEtags: nextConfig.generateEtags,\n                        poweredByHeader: nextConfig.poweredByHeader,\n                        result: cachedData.html,\n                        // Dynamic RSC responses cannot be cached, even if they're\n                        // configured with `force-static` because we have no way of\n                        // distinguishing between `force-static` and pages that have no\n                        // postponed state.\n                        // TODO: distinguish `force-static` from pages with no postponed state (static)\n                        cacheControl: isDynamicRSCRequest ? {\n                            revalidate: 0,\n                            expire: undefined\n                        } : cacheEntry.cacheControl\n                    });\n                }\n                // As this isn't a prefetch request, we should serve the static flight\n                // data.\n                return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                    req,\n                    res,\n                    generateEtags: nextConfig.generateEtags,\n                    poweredByHeader: nextConfig.poweredByHeader,\n                    result: next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_20__[\"default\"].fromStatic(cachedData.rscData, next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.RSC_CONTENT_TYPE_HEADER),\n                    cacheControl: cacheEntry.cacheControl\n                });\n            }\n            // This is a request for HTML data.\n            let body = cachedData.html;\n            // If there's no postponed state, we should just serve the HTML. This\n            // should also be the case for a resume request because it's completed\n            // as a server render (rather than a static render).\n            if (!didPostpone || minimalMode || isRSCRequest) {\n                // If we're in test mode, we should add a sentinel chunk to the response\n                // that's between the static and dynamic parts so we can compare the\n                // chunks and add assertions.\n                if (false) {}\n                return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                    req,\n                    res,\n                    generateEtags: nextConfig.generateEtags,\n                    poweredByHeader: nextConfig.poweredByHeader,\n                    result: body,\n                    cacheControl: cacheEntry.cacheControl\n                });\n            }\n            // If we're debugging the static shell or the dynamic API accesses, we\n            // should just serve the HTML without resuming the render. The returned\n            // HTML will be the static shell so all the Dynamic API's will be used\n            // during static generation.\n            if (isDebugStaticShell || isDebugDynamicAccesses) {\n                // Since we're not resuming the render, we need to at least add the\n                // closing body and html tags to create valid HTML.\n                body.push(new ReadableStream({\n                    start (controller) {\n                        controller.enqueue(next_dist_server_stream_utils_encoded_tags__WEBPACK_IMPORTED_MODULE_22__.ENCODED_TAGS.CLOSED.BODY_AND_HTML);\n                        controller.close();\n                    }\n                }));\n                return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                    req,\n                    res,\n                    generateEtags: nextConfig.generateEtags,\n                    poweredByHeader: nextConfig.poweredByHeader,\n                    result: body,\n                    cacheControl: {\n                        revalidate: 0,\n                        expire: undefined\n                    }\n                });\n            }\n            // If we're in test mode, we should add a sentinel chunk to the response\n            // that's between the static and dynamic parts so we can compare the\n            // chunks and add assertions.\n            if (false) {}\n            // This request has postponed, so let's create a new transformer that the\n            // dynamic data can pipe to that will attach the dynamic data to the end\n            // of the response.\n            const transformer = new TransformStream();\n            body.push(transformer.readable);\n            // Perform the render again, but this time, provide the postponed state.\n            // We don't await because we want the result to start streaming now, and\n            // we've already chained the transformer's readable to the render result.\n            doRender({\n                span,\n                postponed: cachedData.postponed,\n                // This is a resume render, not a fallback render, so we don't need to\n                // set this.\n                fallbackRouteParams: null\n            }).then(async (result)=>{\n                var _result_value;\n                if (!result) {\n                    throw Object.defineProperty(new Error('Invariant: expected a result to be returned'), \"__NEXT_ERROR_CODE\", {\n                        value: \"E463\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n                if (((_result_value = result.value) == null ? void 0 : _result_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__.CachedRouteKind.APP_PAGE) {\n                    var _result_value1;\n                    throw Object.defineProperty(new Error(`Invariant: expected a page response, got ${(_result_value1 = result.value) == null ? void 0 : _result_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                        value: \"E305\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n                // Pipe the resume result to the transformer.\n                await result.value.html.pipeTo(transformer.writable);\n            }).catch((err)=>{\n                // An error occurred during piping or preparing the render, abort\n                // the transformers writer so we can terminate the stream.\n                transformer.writable.abort(err).catch((e)=>{\n                    console.error(\"couldn't abort transformer\", e);\n                });\n            });\n            return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                req,\n                res,\n                generateEtags: nextConfig.generateEtags,\n                poweredByHeader: nextConfig.poweredByHeader,\n                result: body,\n                // We don't want to cache the response if it has postponed data because\n                // the response being sent to the client it's dynamic parts are streamed\n                // to the client on the same request.\n                cacheControl: {\n                    revalidate: 0,\n                    expire: undefined\n                }\n            });\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            return await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_5__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        // if we aren't wrapped by base-server handle here\n        if (!activeSpan && !(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_24__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: srcPage,\n                routeType: 'render',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_2__.getRevalidateReason)({\n                    isRevalidate: isSSG,\n                    isOnDemandRevalidate\n                })\n            }, routerServerContext);\n        }\n        // rethrow so that we can handle serving error page\n        throw err;\n    }\n}\n// TODO: omit this from production builds, only test builds should include it\n/**\n * Creates a readable stream that emits a PPR boundary sentinel.\n *\n * @returns A readable stream that emits a PPR boundary sentinel.\n */ function createPPRBoundarySentinel() {\n    return new ReadableStream({\n        start (controller) {\n            controller.enqueue(new TextEncoder().encode('<!-- PPR_BOUNDARY_SENTINEL -->'));\n            controller.close();\n        }\n    });\n}\n\n//# sourceMappingURL=app-page.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZwYWdlJnBhZ2U9JTJGcGFnZSZhcHBQYXRocz0lMkZwYWdlJnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGcGFnZS50c3gmYXBwRGlyPUMlM0ElNUNNb21teSUyMEx1Y3klNUNQcm9qZWN0cyU1Q0x1Y2lkJTIwRHJlYW0lNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNNb21teSUyMEx1Y3klNUNQcm9qZWN0cyU1Q0x1Y2lkJTIwRHJlYW0maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QmaXNHbG9iYWxOb3RGb3VuZEVuYWJsZWQ9ISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsc0JBQXNCLDRJQUEyRjtBQUNqSCxzQkFBc0IsdU9BQXdGO0FBQzlHLHNCQUFzQixpT0FBcUY7QUFDM0csc0JBQXNCLGlPQUFxRjtBQUMzRyxzQkFBc0IsdU9BQXdGO0FBQzlHLG9CQUFvQix3SUFBeUY7QUFHM0c7QUFHQTtBQUMyRTtBQUNMO0FBQ1Q7QUFDTztBQUNPO0FBQ1M7QUFDRjtBQUNQO0FBQ0s7QUFDWTtBQUNXO0FBQ3hCO0FBQ0Y7QUFDYTtBQUMwRjtBQUN6RztBQUNYO0FBQ1E7QUFDaEI7QUFDaUQ7QUFDakM7QUFDVDtBQUNpQjtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFD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O0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDJGQUFtQjtBQUNyRDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQSIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vZHVsZTAgPSAoKSA9PiBpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkM6XFxcXE1vbW15IEx1Y3lcXFxcUHJvamVjdHNcXFxcTHVjaWQgRHJlYW1cXFxcYXBwXFxcXGxheW91dC50c3hcIik7XG5jb25zdCBtb2R1bGUxID0gKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvYnVpbHRpbi9nbG9iYWwtZXJyb3IuanNcIik7XG5jb25zdCBtb2R1bGUyID0gKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvYnVpbHRpbi9ub3QtZm91bmQuanNcIik7XG5jb25zdCBtb2R1bGUzID0gKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvYnVpbHRpbi9mb3JiaWRkZW4uanNcIik7XG5jb25zdCBtb2R1bGU0ID0gKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvYnVpbHRpbi91bmF1dGhvcml6ZWQuanNcIik7XG5jb25zdCBwYWdlNSA9ICgpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxhcHBcXFxccGFnZS50c3hcIik7XG5pbXBvcnQgeyBBcHBQYWdlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1wYWdlL21vZHVsZS5jb21waWxlZFwiIHdpdGgge1xuICAgICd0dXJib3BhY2stdHJhbnNpdGlvbic6ICduZXh0LXNzcidcbn07XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCIgd2l0aCB7XG4gICAgJ3R1cmJvcGFjay10cmFuc2l0aW9uJzogJ25leHQtc2VydmVyLXV0aWxpdHknXG59O1xuaW1wb3J0IHsgZ2V0UmV2YWxpZGF0ZVJlYXNvbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2luc3RydW1lbnRhdGlvbi91dGlsc1wiO1xuaW1wb3J0IHsgZ2V0VHJhY2VyLCBTcGFuS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS90cmFjZXJcIjtcbmltcG9ydCB7IGdldFJlcXVlc3RNZXRhIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVxdWVzdC1tZXRhXCI7XG5pbXBvcnQgeyBCYXNlU2VydmVyU3BhbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS9jb25zdGFudHNcIjtcbmltcG9ydCB7IGludGVyb3BEZWZhdWx0IH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYXBwLXJlbmRlci9pbnRlcm9wLWRlZmF1bHRcIjtcbmltcG9ydCB7IHN0cmlwRmxpZ2h0SGVhZGVycyB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvc3RyaXAtZmxpZ2h0LWhlYWRlcnNcIjtcbmltcG9ydCB7IE5vZGVOZXh0UmVxdWVzdCwgTm9kZU5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Jhc2UtaHR0cC9ub2RlXCI7XG5pbXBvcnQgeyBjaGVja0lzQXBwUFBSRW5hYmxlZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9leHBlcmltZW50YWwvcHByXCI7XG5pbXBvcnQgeyBnZXRGYWxsYmFja1JvdXRlUGFyYW1zIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVxdWVzdC9mYWxsYmFjay1wYXJhbXNcIjtcbmltcG9ydCB7IHNldFJlZmVyZW5jZU1hbmlmZXN0c1NpbmdsZXRvbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvZW5jcnlwdGlvbi11dGlsc1wiO1xuaW1wb3J0IHsgaXNIdG1sQm90UmVxdWVzdCwgc2hvdWxkU2VydmVTdHJlYW1pbmdNZXRhZGF0YSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9zdHJlYW1pbmctbWV0YWRhdGFcIjtcbmltcG9ydCB7IGNyZWF0ZVNlcnZlck1vZHVsZU1hcCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvYWN0aW9uLXV0aWxzXCI7XG5pbXBvcnQgeyBub3JtYWxpemVBcHBQYXRoIH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL3JvdXRlci91dGlscy9hcHAtcGF0aHNcIjtcbmltcG9ydCB7IGdldElzUG9zc2libGVTZXJ2ZXJBY3Rpb24gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvc2VydmVyLWFjdGlvbi1yZXF1ZXN0LW1ldGFcIjtcbmltcG9ydCB7IFJTQ19IRUFERVIsIE5FWFRfUk9VVEVSX1BSRUZFVENIX0hFQURFUiwgTkVYVF9JU19QUkVSRU5ERVJfSEVBREVSLCBORVhUX0RJRF9QT1NUUE9ORV9IRUFERVIsIFJTQ19DT05URU5UX1RZUEVfSEVBREVSIH0gZnJvbSBcIm5leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9hcHAtcm91dGVyLWhlYWRlcnNcIjtcbmltcG9ydCB7IGdldEJvdFR5cGUsIGlzQm90IH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL3JvdXRlci91dGlscy9pcy1ib3RcIjtcbmltcG9ydCB7IENhY2hlZFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3Jlc3BvbnNlLWNhY2hlXCI7XG5pbXBvcnQgeyBGYWxsYmFja01vZGUsIHBhcnNlRmFsbGJhY2tGaWVsZCB9IGZyb20gXCJuZXh0L2Rpc3QvbGliL2ZhbGxiYWNrXCI7XG5pbXBvcnQgUmVuZGVyUmVzdWx0IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JlbmRlci1yZXN1bHRcIjtcbmltcG9ydCB7IENBQ0hFX09ORV9ZRUFSLCBIVE1MX0NPTlRFTlRfVFlQRV9IRUFERVIsIE5FWFRfQ0FDSEVfVEFHU19IRUFERVIgfSBmcm9tIFwibmV4dC9kaXN0L2xpYi9jb25zdGFudHNcIjtcbmltcG9ydCB7IEVOQ09ERURfVEFHUyB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3N0cmVhbS11dGlscy9lbmNvZGVkLXRhZ3NcIjtcbmltcG9ydCB7IHNlbmRSZW5kZXJSZXN1bHQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9zZW5kLXBheWxvYWRcIjtcbmltcG9ydCB7IE5vRmFsbGJhY2tFcnJvciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9uby1mYWxsYmFjay1lcnJvci5leHRlcm5hbFwiO1xuLy8gV2UgaW5qZWN0IHRoZSB0cmVlIGFuZCBwYWdlcyBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgdHJlZSA9IHtcbiAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgJycsXG4gICAgICAgIHtcbiAgICAgICAgY2hpbGRyZW46IFsnX19QQUdFX18nLCB7fSwge1xuICAgICAgICAgIHBhZ2U6IFtwYWdlNSwgXCJDOlxcXFxNb21teSBMdWN5XFxcXFByb2plY3RzXFxcXEx1Y2lkIERyZWFtXFxcXGFwcFxcXFxwYWdlLnRzeFwiXSxcbiAgICAgICAgICBcbiAgICAgICAgfV1cbiAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgJ2xheW91dCc6IFttb2R1bGUwLCBcIkM6XFxcXE1vbW15IEx1Y3lcXFxcUHJvamVjdHNcXFxcTHVjaWQgRHJlYW1cXFxcYXBwXFxcXGxheW91dC50c3hcIl0sXG4nZ2xvYmFsLWVycm9yJzogW21vZHVsZTEsIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2J1aWx0aW4vZ2xvYmFsLWVycm9yLmpzXCJdLFxuJ25vdC1mb3VuZCc6IFttb2R1bGUyLCBcIm5leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9idWlsdGluL25vdC1mb3VuZC5qc1wiXSxcbidmb3JiaWRkZW4nOiBbbW9kdWxlMywgXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvYnVpbHRpbi9mb3JiaWRkZW4uanNcIl0sXG4ndW5hdXRob3JpemVkJzogW21vZHVsZTQsIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2J1aWx0aW4vdW5hdXRob3JpemVkLmpzXCJdLFxuICAgICAgICBcbiAgICAgIH1cbiAgICAgIF1cbiAgICAgIH0uY2hpbGRyZW47XG5jb25zdCBwYWdlcyA9IFtcIkM6XFxcXE1vbW15IEx1Y3lcXFxcUHJvamVjdHNcXFxcTHVjaWQgRHJlYW1cXFxcYXBwXFxcXHBhZ2UudHN4XCJdO1xuZXhwb3J0IHsgdHJlZSwgcGFnZXMgfTtcbmltcG9ydCBHbG9iYWxFcnJvciBmcm9tIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2J1aWx0aW4vZ2xvYmFsLWVycm9yLmpzXCIgd2l0aCB7XG4gICAgJ3R1cmJvcGFjay10cmFuc2l0aW9uJzogJ25leHQtc2VydmVyLXV0aWxpdHknXG59O1xuZXhwb3J0IHsgR2xvYmFsRXJyb3IgfTtcbmNvbnN0IF9fbmV4dF9hcHBfcmVxdWlyZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfX1xuY29uc3QgX19uZXh0X2FwcF9sb2FkX2NodW5rX18gPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoKVxuZXhwb3J0IGNvbnN0IF9fbmV4dF9hcHBfXyA9IHtcbiAgICByZXF1aXJlOiBfX25leHRfYXBwX3JlcXVpcmVfXyxcbiAgICBsb2FkQ2h1bms6IF9fbmV4dF9hcHBfbG9hZF9jaHVua19fXG59O1xuaW1wb3J0ICogYXMgZW50cnlCYXNlIGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvZW50cnktYmFzZVwiIHdpdGgge1xuICAgICd0dXJib3BhY2stdHJhbnNpdGlvbic6ICduZXh0LXNlcnZlci11dGlsaXR5J1xufTtcbmltcG9ydCB7IFJlZGlyZWN0U3RhdHVzQ29kZSB9IGZyb20gXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvcmVkaXJlY3Qtc3RhdHVzLWNvZGVcIjtcbmV4cG9ydCAqIGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvZW50cnktYmFzZVwiIHdpdGgge1xuICAgICd0dXJib3BhY2stdHJhbnNpdGlvbic6ICduZXh0LXNlcnZlci11dGlsaXR5J1xufTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFBhZ2VSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1BBR0UsXG4gICAgICAgIHBhZ2U6IFwiL3BhZ2VcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJycsXG4gICAgICAgIGFwcFBhdGhzOiBbXVxuICAgIH0sXG4gICAgdXNlcmxhbmQ6IHtcbiAgICAgICAgbG9hZGVyVHJlZTogdHJlZVxuICAgIH0sXG4gICAgZGlzdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX0RJU1RfRElSIHx8ICcnLFxuICAgIHJlbGF0aXZlUHJvamVjdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX1BST0pFQ1RfRElSIHx8ICcnXG59KTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzLCBjdHgpIHtcbiAgICB2YXIgX3RoaXM7XG4gICAgbGV0IHNyY1BhZ2UgPSBcIi9wYWdlXCI7XG4gICAgLy8gdHVyYm9wYWNrIGRvZXNuJ3Qgbm9ybWFsaXplIGAvaW5kZXhgIGluIHRoZSBwYWdlIG5hbWVcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHRvIHByb2Nlc3MgZHluYW1pYyByb3V0ZXMgcHJvcGVybHlcbiAgICAvLyBUT0RPOiBmaXggdHVyYm9wYWNrIHByb3ZpZGluZyBkaWZmZXJpbmcgdmFsdWUgZnJvbSB3ZWJwYWNrXG4gICAgaWYgKHByb2Nlc3MuZW52LlRVUkJPUEFDSykge1xuICAgICAgICBzcmNQYWdlID0gc3JjUGFnZS5yZXBsYWNlKC9cXC9pbmRleCQvLCAnJykgfHwgJy8nO1xuICAgIH0gZWxzZSBpZiAoc3JjUGFnZSA9PT0gJy9pbmRleCcpIHtcbiAgICAgICAgLy8gd2UgYWx3YXlzIG5vcm1hbGl6ZSAvaW5kZXggc3BlY2lmaWNhbGx5XG4gICAgICAgIHNyY1BhZ2UgPSAnLyc7XG4gICAgfVxuICAgIGNvbnN0IG11bHRpWm9uZURyYWZ0TW9kZSA9IHByb2Nlc3MuZW52Ll9fTkVYVF9NVUxUSV9aT05FX0RSQUZUX01PREU7XG4gICAgY29uc3QgaW5pdGlhbFBvc3Rwb25lZCA9IGdldFJlcXVlc3RNZXRhKHJlcSwgJ3Bvc3Rwb25lZCcpO1xuICAgIC8vIFRPRE86IHJlcGxhY2Ugd2l0aCBtb3JlIHNwZWNpZmljIGZsYWdzXG4gICAgY29uc3QgbWluaW1hbE1vZGUgPSBnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpO1xuICAgIGNvbnN0IHByZXBhcmVSZXN1bHQgPSBhd2FpdCByb3V0ZU1vZHVsZS5wcmVwYXJlKHJlcSwgcmVzLCB7XG4gICAgICAgIHNyY1BhZ2UsXG4gICAgICAgIG11bHRpWm9uZURyYWZ0TW9kZVxuICAgIH0pO1xuICAgIGlmICghcHJlcGFyZVJlc3VsdCkge1xuICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwMDtcbiAgICAgICAgcmVzLmVuZCgnQmFkIFJlcXVlc3QnKTtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgeyBidWlsZElkLCBxdWVyeSwgcGFyYW1zLCBwYXJzZWRVcmwsIHBhZ2VJc0R5bmFtaWMsIGJ1aWxkTWFuaWZlc3QsIG5leHRGb250TWFuaWZlc3QsIHJlYWN0TG9hZGFibGVNYW5pZmVzdCwgc2VydmVyQWN0aW9uc01hbmlmZXN0LCBjbGllbnRSZWZlcmVuY2VNYW5pZmVzdCwgc3VicmVzb3VyY2VJbnRlZ3JpdHlNYW5pZmVzdCwgcHJlcmVuZGVyTWFuaWZlc3QsIGlzRHJhZnRNb2RlLCByZXNvbHZlZFBhdGhuYW1lLCByZXZhbGlkYXRlT25seUdlbmVyYXRlZCwgcm91dGVyU2VydmVyQ29udGV4dCwgbmV4dENvbmZpZywgaW50ZXJjZXB0aW9uUm91dGVQYXR0ZXJucyB9ID0gcHJlcGFyZVJlc3VsdDtcbiAgICBjb25zdCBwYXRobmFtZSA9IHBhcnNlZFVybC5wYXRobmFtZSB8fCAnLyc7XG4gICAgY29uc3Qgbm9ybWFsaXplZFNyY1BhZ2UgPSBub3JtYWxpemVBcHBQYXRoKHNyY1BhZ2UpO1xuICAgIGxldCB7IGlzT25EZW1hbmRSZXZhbGlkYXRlIH0gPSBwcmVwYXJlUmVzdWx0O1xuICAgIGNvbnN0IHByZXJlbmRlckluZm8gPSByb3V0ZU1vZHVsZS5tYXRjaChwYXRobmFtZSwgcHJlcmVuZGVyTWFuaWZlc3QpO1xuICAgIGNvbnN0IGlzUHJlcmVuZGVyZWQgPSAhIXByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXTtcbiAgICBsZXQgaXNTU0cgPSBCb29sZWFuKHByZXJlbmRlckluZm8gfHwgaXNQcmVyZW5kZXJlZCB8fCBwcmVyZW5kZXJNYW5pZmVzdC5yb3V0ZXNbbm9ybWFsaXplZFNyY1BhZ2VdKTtcbiAgICBjb25zdCB1c2VyQWdlbnQgPSByZXEuaGVhZGVyc1sndXNlci1hZ2VudCddIHx8ICcnO1xuICAgIGNvbnN0IGJvdFR5cGUgPSBnZXRCb3RUeXBlKHVzZXJBZ2VudCk7XG4gICAgY29uc3QgaXNIdG1sQm90ID0gaXNIdG1sQm90UmVxdWVzdChyZXEpO1xuICAgIC8qKlxuICAgKiBJZiB0cnVlLCB0aGlzIGluZGljYXRlcyB0aGF0IHRoZSByZXF1ZXN0IGJlaW5nIG1hZGUgaXMgZm9yIGFuIGFwcFxuICAgKiBwcmVmZXRjaCByZXF1ZXN0LlxuICAgKi8gY29uc3QgaXNQcmVmZXRjaFJTQ1JlcXVlc3QgPSBnZXRSZXF1ZXN0TWV0YShyZXEsICdpc1ByZWZldGNoUlNDUmVxdWVzdCcpID8/IHJlcS5oZWFkZXJzW05FWFRfUk9VVEVSX1BSRUZFVENIX0hFQURFUl0gPT09ICcxJyAvLyBleGNsdWRlIHJ1bnRpbWUgcHJlZmV0Y2hlcywgd2hpY2ggdXNlICcyJ1xuICAgIDtcbiAgICAvLyBOT1RFOiBEb24ndCBkZWxldGUgaGVhZGVyc1tSU0NdIHlldCwgaXQgc3RpbGwgbmVlZHMgdG8gYmUgdXNlZCBpbiByZW5kZXJUb0hUTUwgbGF0ZXJcbiAgICBjb25zdCBpc1JTQ1JlcXVlc3QgPSBnZXRSZXF1ZXN0TWV0YShyZXEsICdpc1JTQ1JlcXVlc3QnKSA/PyBCb29sZWFuKHJlcS5oZWFkZXJzW1JTQ19IRUFERVJdKTtcbiAgICBjb25zdCBpc1Bvc3NpYmxlU2VydmVyQWN0aW9uID0gZ2V0SXNQb3NzaWJsZVNlcnZlckFjdGlvbihyZXEpO1xuICAgIC8qKlxuICAgKiBJZiB0aGUgcm91dGUgYmVpbmcgcmVuZGVyZWQgaXMgYW4gYXBwIHBhZ2UsIGFuZCB0aGUgcHByIGZlYXR1cmUgaGFzIGJlZW5cbiAgICogZW5hYmxlZCwgdGhlbiB0aGUgZ2l2ZW4gcm91dGUgX2NvdWxkXyBzdXBwb3J0IFBQUi5cbiAgICovIGNvbnN0IGNvdWxkU3VwcG9ydFBQUiA9IGNoZWNrSXNBcHBQUFJFbmFibGVkKG5leHRDb25maWcuZXhwZXJpbWVudGFsLnBwcik7XG4gICAgLy8gV2hlbiBlbmFibGVkLCB0aGlzIHdpbGwgYWxsb3cgdGhlIHVzZSBvZiB0aGUgYD9fX25leHRwcHJvbmx5YCBxdWVyeSB0b1xuICAgIC8vIGVuYWJsZSBkZWJ1Z2dpbmcgb2YgdGhlIHN0YXRpYyBzaGVsbC5cbiAgICBjb25zdCBoYXNEZWJ1Z1N0YXRpY1NoZWxsUXVlcnkgPSBwcm9jZXNzLmVudi5fX05FWFRfRVhQRVJJTUVOVEFMX1NUQVRJQ19TSEVMTF9ERUJVR0dJTkcgPT09ICcxJyAmJiB0eXBlb2YgcXVlcnkuX19uZXh0cHByb25seSAhPT0gJ3VuZGVmaW5lZCcgJiYgY291bGRTdXBwb3J0UFBSO1xuICAgIC8vIFdoZW4gZW5hYmxlZCwgdGhpcyB3aWxsIGFsbG93IHRoZSB1c2Ugb2YgdGhlIGA/X19uZXh0cHByb25seWAgcXVlcnlcbiAgICAvLyB0byBlbmFibGUgZGVidWdnaW5nIG9mIHRoZSBmYWxsYmFjayBzaGVsbC5cbiAgICBjb25zdCBoYXNEZWJ1Z0ZhbGxiYWNrU2hlbGxRdWVyeSA9IGhhc0RlYnVnU3RhdGljU2hlbGxRdWVyeSAmJiBxdWVyeS5fX25leHRwcHJvbmx5ID09PSAnZmFsbGJhY2snO1xuICAgIC8vIFRoaXMgcGFnZSBzdXBwb3J0cyBQUFIgaWYgaXQgaXMgbWFya2VkIGFzIGJlaW5nIGBQQVJUSUFMTFlfU1RBVElDYCBpbiB0aGVcbiAgICAvLyBwcmVyZW5kZXIgbWFuaWZlc3QgYW5kIHRoaXMgaXMgYW4gYXBwIHBhZ2UuXG4gICAgY29uc3QgaXNSb3V0ZVBQUkVuYWJsZWQgPSBjb3VsZFN1cHBvcnRQUFIgJiYgKCgoX3RoaXMgPSBwcmVyZW5kZXJNYW5pZmVzdC5yb3V0ZXNbbm9ybWFsaXplZFNyY1BhZ2VdID8/IHByZXJlbmRlck1hbmlmZXN0LmR5bmFtaWNSb3V0ZXNbbm9ybWFsaXplZFNyY1BhZ2VdKSA9PSBudWxsID8gdm9pZCAwIDogX3RoaXMucmVuZGVyaW5nTW9kZSkgPT09ICdQQVJUSUFMTFlfU1RBVElDJyB8fCAvLyBJZGVhbGx5IHdlJ2Qgd2FudCB0byBjaGVjayB0aGUgYXBwQ29uZmlnIHRvIHNlZSBpZiB0aGlzIHBhZ2UgaGFzIFBQUlxuICAgIC8vIGVuYWJsZWQgb3Igbm90LCBidXQgdGhhdCB3b3VsZCByZXF1aXJlIHBsdW1iaW5nIHRoZSBhcHBDb25maWcgdGhyb3VnaFxuICAgIC8vIHRvIHRoZSBzZXJ2ZXIgZHVyaW5nIGRldmVsb3BtZW50LiBXZSBhc3N1bWUgdGhhdCB0aGUgcGFnZSBzdXBwb3J0cyBpdFxuICAgIC8vIGJ1dCBvbmx5IGR1cmluZyBkZXZlbG9wbWVudC5cbiAgICBoYXNEZWJ1Z1N0YXRpY1NoZWxsUXVlcnkgJiYgKHJvdXRlTW9kdWxlLmlzRGV2ID09PSB0cnVlIHx8IChyb3V0ZXJTZXJ2ZXJDb250ZXh0ID09IG51bGwgPyB2b2lkIDAgOiByb3V0ZXJTZXJ2ZXJDb250ZXh0LmV4cGVyaW1lbnRhbFRlc3RQcm94eSkgPT09IHRydWUpKTtcbiAgICBjb25zdCBpc0RlYnVnU3RhdGljU2hlbGwgPSBoYXNEZWJ1Z1N0YXRpY1NoZWxsUXVlcnkgJiYgaXNSb3V0ZVBQUkVuYWJsZWQ7XG4gICAgLy8gV2Ugc2hvdWxkIGVuYWJsZSBkZWJ1Z2dpbmcgZHluYW1pYyBhY2Nlc3NlcyB3aGVuIHRoZSBzdGF0aWMgc2hlbGxcbiAgICAvLyBkZWJ1Z2dpbmcgaGFzIGJlZW4gZW5hYmxlZCBhbmQgd2UncmUgYWxzbyBpbiBkZXZlbG9wbWVudCBtb2RlLlxuICAgIGNvbnN0IGlzRGVidWdEeW5hbWljQWNjZXNzZXMgPSBpc0RlYnVnU3RhdGljU2hlbGwgJiYgcm91dGVNb2R1bGUuaXNEZXYgPT09IHRydWU7XG4gICAgY29uc3QgaXNEZWJ1Z0ZhbGxiYWNrU2hlbGwgPSBoYXNEZWJ1Z0ZhbGxiYWNrU2hlbGxRdWVyeSAmJiBpc1JvdXRlUFBSRW5hYmxlZDtcbiAgICAvLyBJZiB3ZSdyZSBpbiBtaW5pbWFsIG1vZGUsIHRoZW4gdHJ5IHRvIGdldCB0aGUgcG9zdHBvbmVkIGluZm9ybWF0aW9uIGZyb21cbiAgICAvLyB0aGUgcmVxdWVzdCBtZXRhZGF0YS4gSWYgYXZhaWxhYmxlLCB1c2UgaXQgZm9yIHJlc3VtaW5nIHRoZSBwb3N0cG9uZWRcbiAgICAvLyByZW5kZXIuXG4gICAgY29uc3QgbWluaW1hbFBvc3Rwb25lZCA9IGlzUm91dGVQUFJFbmFibGVkID8gaW5pdGlhbFBvc3Rwb25lZCA6IHVuZGVmaW5lZDtcbiAgICAvLyBJZiBQUFIgaXMgZW5hYmxlZCwgYW5kIHRoaXMgaXMgYSBSU0MgcmVxdWVzdCAoYnV0IG5vdCBhIHByZWZldGNoKSwgdGhlblxuICAgIC8vIHdlIGNhbiB1c2UgdGhpcyBmYWN0IHRvIG9ubHkgZ2VuZXJhdGUgdGhlIGZsaWdodCBkYXRhIGZvciB0aGUgcmVxdWVzdFxuICAgIC8vIGJlY2F1c2Ugd2UgY2FuJ3QgY2FjaGUgdGhlIEhUTUwgKGFzIGl0J3MgYWxzbyBkeW5hbWljKS5cbiAgICBjb25zdCBpc0R5bmFtaWNSU0NSZXF1ZXN0ID0gaXNSb3V0ZVBQUkVuYWJsZWQgJiYgaXNSU0NSZXF1ZXN0ICYmICFpc1ByZWZldGNoUlNDUmVxdWVzdDtcbiAgICAvLyBOZWVkIHRvIHJlYWQgdGhpcyBiZWZvcmUgaXQncyBzdHJpcHBlZCBieSBzdHJpcEZsaWdodEhlYWRlcnMuIFdlIGRvbid0XG4gICAgLy8gbmVlZCB0byB0cmFuc2ZlciBpdCB0byB0aGUgcmVxdWVzdCBtZXRhIGJlY2F1c2UgaXQncyBvbmx5IHJlYWRcbiAgICAvLyB3aXRoaW4gdGhpcyBmdW5jdGlvbjsgdGhlIHN0YXRpYyBzZWdtZW50IGRhdGEgc2hvdWxkIGhhdmUgYWxyZWFkeSBiZWVuXG4gICAgLy8gZ2VuZXJhdGVkLCBzbyB3ZSB3aWxsIGFsd2F5cyBlaXRoZXIgcmV0dXJuIGEgc3RhdGljIHJlc3BvbnNlIG9yIGEgNDA0LlxuICAgIGNvbnN0IHNlZ21lbnRQcmVmZXRjaEhlYWRlciA9IGdldFJlcXVlc3RNZXRhKHJlcSwgJ3NlZ21lbnRQcmVmZXRjaFJTQ1JlcXVlc3QnKTtcbiAgICAvLyBUT0RPOiBpbnZlc3RpZ2F0ZSBleGlzdGluZyBidWcgd2l0aCBzaG91bGRTZXJ2ZVN0cmVhbWluZ01ldGFkYXRhIGFsd2F5c1xuICAgIC8vIGJlaW5nIHRydWUgZm9yIGEgcmV2YWxpZGF0ZSBkdWUgdG8gbW9kaWZ5aW5nIHRoZSBiYXNlLXNlcnZlciB0aGlzLnJlbmRlck9wdHNcbiAgICAvLyB3aGVuIGZpeGluZyB0aGlzIHRvIGNvcnJlY3QgbG9naWMgaXQgY2F1c2VzIGh5ZHJhdGlvbiBpc3N1ZSBzaW5jZSB3ZSBzZXRcbiAgICAvLyBzZXJ2ZVN0cmVhbWluZ01ldGFkYXRhIHRvIHRydWUgZHVyaW5nIGV4cG9ydFxuICAgIGxldCBzZXJ2ZVN0cmVhbWluZ01ldGFkYXRhID0gIXVzZXJBZ2VudCA/IHRydWUgOiBzaG91bGRTZXJ2ZVN0cmVhbWluZ01ldGFkYXRhKHVzZXJBZ2VudCwgbmV4dENvbmZpZy5odG1sTGltaXRlZEJvdHMpO1xuICAgIGlmIChpc0h0bWxCb3QgJiYgaXNSb3V0ZVBQUkVuYWJsZWQpIHtcbiAgICAgICAgaXNTU0cgPSBmYWxzZTtcbiAgICAgICAgc2VydmVTdHJlYW1pbmdNZXRhZGF0YSA9IGZhbHNlO1xuICAgIH1cbiAgICAvLyBJbiBkZXZlbG9wbWVudCwgd2UgYWx3YXlzIHdhbnQgdG8gZ2VuZXJhdGUgZHluYW1pYyBIVE1MLlxuICAgIGxldCBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSA9IC8vIElmIHdlJ3JlIGluIGRldmVsb3BtZW50LCB3ZSBhbHdheXMgc3VwcG9ydCBkeW5hbWljIEhUTUwsIHVubGVzcyBpdCdzXG4gICAgLy8gYSBkYXRhIHJlcXVlc3QsIGluIHdoaWNoIGNhc2Ugd2Ugb25seSBwcm9kdWNlIHN0YXRpYyBIVE1MLlxuICAgIHJvdXRlTW9kdWxlLmlzRGV2ID09PSB0cnVlIHx8IC8vIElmIHRoaXMgaXMgbm90IFNTRyBvciBkb2VzIG5vdCBoYXZlIHN0YXRpYyBwYXRocywgdGhlbiBpdCBzdXBwb3J0c1xuICAgIC8vIGR5bmFtaWMgSFRNTC5cbiAgICAhaXNTU0cgfHwgLy8gSWYgdGhpcyByZXF1ZXN0IGhhcyBwcm92aWRlZCBwb3N0cG9uZWQgZGF0YSwgaXQgc3VwcG9ydHMgZHluYW1pY1xuICAgIC8vIEhUTUwuXG4gICAgdHlwZW9mIGluaXRpYWxQb3N0cG9uZWQgPT09ICdzdHJpbmcnIHx8IC8vIElmIHRoaXMgaXMgYSBkeW5hbWljIFJTQyByZXF1ZXN0LCB0aGVuIHRoaXMgcmVuZGVyIHN1cHBvcnRzIGR5bmFtaWNcbiAgICAvLyBIVE1MIChpdCdzIGR5bmFtaWMpLlxuICAgIGlzRHluYW1pY1JTQ1JlcXVlc3Q7XG4gICAgLy8gV2hlbiBodG1sIGJvdHMgcmVxdWVzdCBQUFIgcGFnZSwgcGVyZm9ybSB0aGUgZnVsbCBkeW5hbWljIHJlbmRlcmluZy5cbiAgICBjb25zdCBzaG91bGRXYWl0T25BbGxSZWFkeSA9IGlzSHRtbEJvdCAmJiBpc1JvdXRlUFBSRW5hYmxlZDtcbiAgICBsZXQgc3NnQ2FjaGVLZXkgPSBudWxsO1xuICAgIGlmICghaXNEcmFmdE1vZGUgJiYgaXNTU0cgJiYgIXN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlICYmICFpc1Bvc3NpYmxlU2VydmVyQWN0aW9uICYmICFtaW5pbWFsUG9zdHBvbmVkICYmICFpc0R5bmFtaWNSU0NSZXF1ZXN0KSB7XG4gICAgICAgIHNzZ0NhY2hlS2V5ID0gcmVzb2x2ZWRQYXRobmFtZTtcbiAgICB9XG4gICAgLy8gdGhlIHN0YXRpY1BhdGhLZXkgZGlmZmVycyBmcm9tIHNzZ0NhY2hlS2V5IHNpbmNlXG4gICAgLy8gc3NnQ2FjaGVLZXkgaXMgbnVsbCBpbiBkZXYgc2luY2Ugd2UncmUgYWx3YXlzIGluIFwiZHluYW1pY1wiXG4gICAgLy8gbW9kZSBpbiBkZXYgdG8gYnlwYXNzIHRoZSBjYWNoZSwgYnV0IHdlIHN0aWxsIG5lZWQgdG8gaG9ub3JcbiAgICAvLyBkeW5hbWljUGFyYW1zID0gZmFsc2UgaW4gZGV2IG1vZGVcbiAgICBsZXQgc3RhdGljUGF0aEtleSA9IHNzZ0NhY2hlS2V5O1xuICAgIGlmICghc3RhdGljUGF0aEtleSAmJiByb3V0ZU1vZHVsZS5pc0Rldikge1xuICAgICAgICBzdGF0aWNQYXRoS2V5ID0gcmVzb2x2ZWRQYXRobmFtZTtcbiAgICB9XG4gICAgLy8gSWYgdGhpcyBpcyBhIHJlcXVlc3QgZm9yIGFuIGFwcCBwYXRoIHRoYXQgc2hvdWxkIGJlIHN0YXRpY2FsbHkgZ2VuZXJhdGVkXG4gICAgLy8gYW5kIHdlIGFyZW4ndCBpbiB0aGUgZWRnZSBydW50aW1lLCBzdHJpcCB0aGUgZmxpZ2h0IGhlYWRlcnMgc28gaXQgd2lsbFxuICAgIC8vIGdlbmVyYXRlIHRoZSBzdGF0aWMgcmVzcG9uc2UuXG4gICAgaWYgKCFyb3V0ZU1vZHVsZS5pc0RldiAmJiAhaXNEcmFmdE1vZGUgJiYgaXNTU0cgJiYgaXNSU0NSZXF1ZXN0ICYmICFpc0R5bmFtaWNSU0NSZXF1ZXN0KSB7XG4gICAgICAgIHN0cmlwRmxpZ2h0SGVhZGVycyhyZXEuaGVhZGVycyk7XG4gICAgfVxuICAgIGNvbnN0IENvbXBvbmVudE1vZCA9IHtcbiAgICAgICAgLi4uZW50cnlCYXNlLFxuICAgICAgICB0cmVlLFxuICAgICAgICBwYWdlcyxcbiAgICAgICAgR2xvYmFsRXJyb3IsXG4gICAgICAgIGhhbmRsZXIsXG4gICAgICAgIHJvdXRlTW9kdWxlLFxuICAgICAgICBfX25leHRfYXBwX19cbiAgICB9O1xuICAgIC8vIEJlZm9yZSByZW5kZXJpbmcgKHdoaWNoIGluaXRpYWxpemVzIGNvbXBvbmVudCB0cmVlIG1vZHVsZXMpLCB3ZSBoYXZlIHRvXG4gICAgLy8gc2V0IHRoZSByZWZlcmVuY2UgbWFuaWZlc3RzIHRvIG91ciBnbG9iYWwgc3RvcmUgc28gU2VydmVyIEFjdGlvbidzXG4gICAgLy8gZW5jcnlwdGlvbiB1dGlsIGNhbiBhY2Nlc3MgdG8gdGhlbSBhdCB0aGUgdG9wIGxldmVsIG9mIHRoZSBwYWdlIG1vZHVsZS5cbiAgICBpZiAoc2VydmVyQWN0aW9uc01hbmlmZXN0ICYmIGNsaWVudFJlZmVyZW5jZU1hbmlmZXN0KSB7XG4gICAgICAgIHNldFJlZmVyZW5jZU1hbmlmZXN0c1NpbmdsZXRvbih7XG4gICAgICAgICAgICBwYWdlOiBzcmNQYWdlLFxuICAgICAgICAgICAgY2xpZW50UmVmZXJlbmNlTWFuaWZlc3QsXG4gICAgICAgICAgICBzZXJ2ZXJBY3Rpb25zTWFuaWZlc3QsXG4gICAgICAgICAgICBzZXJ2ZXJNb2R1bGVNYXA6IGNyZWF0ZVNlcnZlck1vZHVsZU1hcCh7XG4gICAgICAgICAgICAgICAgc2VydmVyQWN0aW9uc01hbmlmZXN0XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgbWV0aG9kID0gcmVxLm1ldGhvZCB8fCAnR0VUJztcbiAgICBjb25zdCB0cmFjZXIgPSBnZXRUcmFjZXIoKTtcbiAgICBjb25zdCBhY3RpdmVTcGFuID0gdHJhY2VyLmdldEFjdGl2ZVNjb3BlU3BhbigpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHZhcnlIZWFkZXIgPSByb3V0ZU1vZHVsZS5nZXRWYXJ5SGVhZGVyKHJlc29sdmVkUGF0aG5hbWUsIGludGVyY2VwdGlvblJvdXRlUGF0dGVybnMpO1xuICAgICAgICByZXMuc2V0SGVhZGVyKCdWYXJ5JywgdmFyeUhlYWRlcik7XG4gICAgICAgIGNvbnN0IGludm9rZVJvdXRlTW9kdWxlID0gYXN5bmMgKHNwYW4sIGNvbnRleHQpPT57XG4gICAgICAgICAgICBjb25zdCBuZXh0UmVxID0gbmV3IE5vZGVOZXh0UmVxdWVzdChyZXEpO1xuICAgICAgICAgICAgY29uc3QgbmV4dFJlcyA9IG5ldyBOb2RlTmV4dFJlc3BvbnNlKHJlcyk7XG4gICAgICAgICAgICAvLyBUT0RPOiBhZGFwdCBmb3IgcHV0dGluZyB0aGUgUkRDIGluc2lkZSB0aGUgcG9zdHBvbmVkIGRhdGFcbiAgICAgICAgICAgIC8vIElmIHdlJ3JlIGluIGRldiwgYW5kIHRoaXMgaXNuJ3QgYSBwcmVmZXRjaCBvciBhIHNlcnZlciBhY3Rpb24sXG4gICAgICAgICAgICAvLyB3ZSBzaG91bGQgc2VlZCB0aGUgcmVzdW1lIGRhdGEgY2FjaGUuXG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgICAgICAgICBpZiAobmV4dENvbmZpZy5leHBlcmltZW50YWwuY2FjaGVDb21wb25lbnRzICYmICFpc1ByZWZldGNoUlNDUmVxdWVzdCAmJiAhY29udGV4dC5yZW5kZXJPcHRzLmlzUG9zc2libGVTZXJ2ZXJBY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2FybXVwID0gYXdhaXQgcm91dGVNb2R1bGUud2FybXVwKG5leHRSZXEsIG5leHRSZXMsIGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgd2FybXVwIGlzIHN1Y2Nlc3NmdWwsIHdlIHNob3VsZCB1c2UgdGhlIHJlc3VtZSBkYXRhXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhY2hlIGZyb20gdGhlIHdhcm11cC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHdhcm11cC5tZXRhZGF0YS5yZW5kZXJSZXN1bWVEYXRhQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQucmVuZGVyT3B0cy5yZW5kZXJSZXN1bWVEYXRhQ2FjaGUgPSB3YXJtdXAubWV0YWRhdGEucmVuZGVyUmVzdW1lRGF0YUNhY2hlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJvdXRlTW9kdWxlLnJlbmRlcihuZXh0UmVxLCBuZXh0UmVzLCBjb250ZXh0KS5maW5hbGx5KCgpPT57XG4gICAgICAgICAgICAgICAgaWYgKCFzcGFuKSByZXR1cm47XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHAuc3RhdHVzX2NvZGUnOiByZXMuc3RhdHVzQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgJ25leHQucnNjJzogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByb290U3BhbkF0dHJpYnV0ZXMgPSB0cmFjZXIuZ2V0Um9vdFNwYW5BdHRyaWJ1dGVzKCk7XG4gICAgICAgICAgICAgICAgLy8gV2Ugd2VyZSB1bmFibGUgdG8gZ2V0IGF0dHJpYnV0ZXMsIHByb2JhYmx5IE9URUwgaXMgbm90IGVuYWJsZWRcbiAgICAgICAgICAgICAgICBpZiAoIXJvb3RTcGFuQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnNwYW5fdHlwZScpICE9PSBCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgVW5leHBlY3RlZCByb290IHNwYW4gdHlwZSAnJHtyb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnNwYW5fdHlwZScpfScuIFBsZWFzZSByZXBvcnQgdGhpcyBOZXh0LmpzIGlzc3VlIGh0dHBzOi8vZ2l0aHViLmNvbS92ZXJjZWwvbmV4dC5qc2ApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJvdXRlID0gcm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5yb3V0ZScpO1xuICAgICAgICAgICAgICAgIGlmIChyb3V0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gYCR7bWV0aG9kfSAke3JvdXRlfWA7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnNwYW5fbmFtZSc6IG5hbWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShuYW1lKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUoYCR7bWV0aG9kfSAke3JlcS51cmx9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGRvUmVuZGVyID0gYXN5bmMgKHsgc3BhbiwgcG9zdHBvbmVkLCBmYWxsYmFja1JvdXRlUGFyYW1zIH0pPT57XG4gICAgICAgICAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgICAgICAgICBwYWdlOiBub3JtYWxpemVkU3JjUGFnZSxcbiAgICAgICAgICAgICAgICBzaGFyZWRDb250ZXh0OiB7XG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkSWRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNlcnZlckNvbXBvbmVudHNIbXJDYWNoZTogZ2V0UmVxdWVzdE1ldGEocmVxLCAnc2VydmVyQ29tcG9uZW50c0htckNhY2hlJyksXG4gICAgICAgICAgICAgICAgZmFsbGJhY2tSb3V0ZVBhcmFtcyxcbiAgICAgICAgICAgICAgICByZW5kZXJPcHRzOiB7XG4gICAgICAgICAgICAgICAgICAgIEFwcDogKCk9Pm51bGwsXG4gICAgICAgICAgICAgICAgICAgIERvY3VtZW50OiAoKT0+bnVsbCxcbiAgICAgICAgICAgICAgICAgICAgcGFnZUNvbmZpZzoge30sXG4gICAgICAgICAgICAgICAgICAgIENvbXBvbmVudE1vZCxcbiAgICAgICAgICAgICAgICAgICAgQ29tcG9uZW50OiBpbnRlcm9wRGVmYXVsdChDb21wb25lbnRNb2QpLFxuICAgICAgICAgICAgICAgICAgICBwYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgIHJvdXRlTW9kdWxlLFxuICAgICAgICAgICAgICAgICAgICBwYWdlOiBzcmNQYWdlLFxuICAgICAgICAgICAgICAgICAgICBwb3N0cG9uZWQsXG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFdhaXRPbkFsbFJlYWR5LFxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZVN0cmVhbWluZ01ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZTogdHlwZW9mIHBvc3Rwb25lZCA9PT0gJ3N0cmluZycgfHwgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkTWFuaWZlc3QsXG4gICAgICAgICAgICAgICAgICAgIG5leHRGb250TWFuaWZlc3QsXG4gICAgICAgICAgICAgICAgICAgIHJlYWN0TG9hZGFibGVNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICAgICAgc3VicmVzb3VyY2VJbnRlZ3JpdHlNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyQWN0aW9uc01hbmlmZXN0LFxuICAgICAgICAgICAgICAgICAgICBjbGllbnRSZWZlcmVuY2VNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICAgICAgc2V0SXNyU3RhdHVzOiByb3V0ZXJTZXJ2ZXJDb250ZXh0ID09IG51bGwgPyB2b2lkIDAgOiByb3V0ZXJTZXJ2ZXJDb250ZXh0LnNldElzclN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgZGlyOiBwcm9jZXNzLmVudi5ORVhUX1JVTlRJTUUgPT09ICdub2RlanMnID8gcmVxdWlyZSgncGF0aCcpLmpvaW4oLyogdHVyYm9wYWNrSWdub3JlOiB0cnVlICovIHByb2Nlc3MuY3dkKCksIHJvdXRlTW9kdWxlLnJlbGF0aXZlUHJvamVjdERpcikgOiBgJHtwcm9jZXNzLmN3ZCgpfS8ke3JvdXRlTW9kdWxlLnJlbGF0aXZlUHJvamVjdERpcn1gLFxuICAgICAgICAgICAgICAgICAgICBpc0RyYWZ0TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlOiBpc1NTRyAmJiAhcG9zdHBvbmVkICYmICFpc0R5bmFtaWNSU0NSZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgICBib3RUeXBlLFxuICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNQb3NzaWJsZVNlcnZlckFjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRQcmVmaXg6IG5leHRDb25maWcuYXNzZXRQcmVmaXgsXG4gICAgICAgICAgICAgICAgICAgIG5leHRDb25maWdPdXRwdXQ6IG5leHRDb25maWcub3V0cHV0LFxuICAgICAgICAgICAgICAgICAgICBjcm9zc09yaWdpbjogbmV4dENvbmZpZy5jcm9zc09yaWdpbixcbiAgICAgICAgICAgICAgICAgICAgdHJhaWxpbmdTbGFzaDogbmV4dENvbmZpZy50cmFpbGluZ1NsYXNoLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aWV3UHJvcHM6IHByZXJlbmRlck1hbmlmZXN0LnByZXZpZXcsXG4gICAgICAgICAgICAgICAgICAgIGRlcGxveW1lbnRJZDogbmV4dENvbmZpZy5kZXBsb3ltZW50SWQsXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZVRhaW50aW5nOiBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC50YWludCxcbiAgICAgICAgICAgICAgICAgICAgaHRtbExpbWl0ZWRCb3RzOiBuZXh0Q29uZmlnLmh0bWxMaW1pdGVkQm90cyxcbiAgICAgICAgICAgICAgICAgICAgZGV2dG9vbFNlZ21lbnRFeHBsb3JlcjogbmV4dENvbmZpZy5leHBlcmltZW50YWwuZGV2dG9vbFNlZ21lbnRFeHBsb3JlcixcbiAgICAgICAgICAgICAgICAgICAgcmVhY3RNYXhIZWFkZXJzTGVuZ3RoOiBuZXh0Q29uZmlnLnJlYWN0TWF4SGVhZGVyc0xlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlLFxuICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnRhbENhY2hlOiBnZXRSZXF1ZXN0TWV0YShyZXEsICdpbmNyZW1lbnRhbENhY2hlJyksXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlTGlmZVByb2ZpbGVzOiBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5jYWNoZUxpZmUsXG4gICAgICAgICAgICAgICAgICAgIGJhc2VQYXRoOiBuZXh0Q29uZmlnLmJhc2VQYXRoLFxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJBY3Rpb25zOiBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5zZXJ2ZXJBY3Rpb25zLFxuICAgICAgICAgICAgICAgICAgICAuLi5pc0RlYnVnU3RhdGljU2hlbGwgfHwgaXNEZWJ1Z0R5bmFtaWNBY2Nlc3NlcyA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRFeHBvcnQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1N0YXRpY0dlbmVyYXRpb246IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1JldmFsaWRhdGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0RlYnVnRHluYW1pY0FjY2Vzc2VzOiBpc0RlYnVnRHluYW1pY0FjY2Vzc2VzXG4gICAgICAgICAgICAgICAgICAgIH0gOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgZXhwZXJpbWVudGFsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1JvdXRlUFBSRW5hYmxlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZVRpbWU6IG5leHRDb25maWcuZXhwaXJlVGltZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YWxlVGltZXM6IG5leHRDb25maWcuZXhwZXJpbWVudGFsLnN0YWxlVGltZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZUNvbXBvbmVudHM6IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuY2FjaGVDb21wb25lbnRzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudFNlZ21lbnRDYWNoZTogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5jbGllbnRTZWdtZW50Q2FjaGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50UGFyYW1QYXJzaW5nOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmNsaWVudFBhcmFtUGFyc2luZyksXG4gICAgICAgICAgICAgICAgICAgICAgICBkeW5hbWljT25Ib3ZlcjogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5keW5hbWljT25Ib3ZlciksXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDc3M6IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuaW5saW5lQ3NzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhJbnRlcnJ1cHRzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmF1dGhJbnRlcnJ1cHRzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudFRyYWNlTWV0YWRhdGE6IG5leHRDb25maWcuZXhwZXJpbWVudGFsLmNsaWVudFRyYWNlTWV0YWRhdGEgfHwgW11cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsLFxuICAgICAgICAgICAgICAgICAgICBvbkNsb3NlOiAoY2IpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMub24oJ2Nsb3NlJywgY2IpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvbkFmdGVyVGFza0Vycm9yOiAoKT0+e30sXG4gICAgICAgICAgICAgICAgICAgIG9uSW5zdHJ1bWVudGF0aW9uUmVxdWVzdEVycm9yOiAoZXJyb3IsIF9yZXF1ZXN0LCBlcnJvckNvbnRleHQpPT5yb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVycm9yLCBlcnJvckNvbnRleHQsIHJvdXRlclNlcnZlckNvbnRleHQpLFxuICAgICAgICAgICAgICAgICAgICBlcnI6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2ludm9rZUVycm9yJyksXG4gICAgICAgICAgICAgICAgICAgIGRldjogcm91dGVNb2R1bGUuaXNEZXZcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaW52b2tlUm91dGVNb2R1bGUoc3BhbiwgY29udGV4dCk7XG4gICAgICAgICAgICBjb25zdCB7IG1ldGFkYXRhIH0gPSByZXN1bHQ7XG4gICAgICAgICAgICBjb25zdCB7IGNhY2hlQ29udHJvbCwgaGVhZGVycyA9IHt9LCAvLyBBZGQgYW55IGZldGNoIHRhZ3MgdGhhdCB3ZXJlIG9uIHRoZSBwYWdlIHRvIHRoZSByZXNwb25zZSBoZWFkZXJzLlxuICAgICAgICAgICAgZmV0Y2hUYWdzOiBjYWNoZVRhZ3MgfSA9IG1ldGFkYXRhO1xuICAgICAgICAgICAgaWYgKGNhY2hlVGFncykge1xuICAgICAgICAgICAgICAgIGhlYWRlcnNbTkVYVF9DQUNIRV9UQUdTX0hFQURFUl0gPSBjYWNoZVRhZ3M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBQdWxsIGFueSBmZXRjaCBtZXRyaWNzIGZyb20gdGhlIHJlbmRlciBvbnRvIHRoZSByZXF1ZXN0LlxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgcmVxLmZldGNoTWV0cmljcyA9IG1ldGFkYXRhLmZldGNoTWV0cmljcztcbiAgICAgICAgICAgIC8vIHdlIGRvbid0IHRocm93IHN0YXRpYyB0byBkeW5hbWljIGVycm9ycyBpbiBkZXYgYXMgaXNTU0dcbiAgICAgICAgICAgIC8vIGlzIGEgYmVzdCBndWVzcyBpbiBkZXYgc2luY2Ugd2UgZG9uJ3QgaGF2ZSB0aGUgcHJlcmVuZGVyIHBhc3NcbiAgICAgICAgICAgIC8vIHRvIGtub3cgd2hldGhlciB0aGUgcGF0aCBpcyBhY3R1YWxseSBzdGF0aWMgb3Igbm90XG4gICAgICAgICAgICBpZiAoaXNTU0cgJiYgKGNhY2hlQ29udHJvbCA9PSBudWxsID8gdm9pZCAwIDogY2FjaGVDb250cm9sLnJldmFsaWRhdGUpID09PSAwICYmICFyb3V0ZU1vZHVsZS5pc0RldiAmJiAhaXNSb3V0ZVBQUkVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0aWNCYWlsb3V0SW5mbyA9IG1ldGFkYXRhLnN0YXRpY0JhaWxvdXRJbmZvO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVyciA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoYFBhZ2UgY2hhbmdlZCBmcm9tIHN0YXRpYyB0byBkeW5hbWljIGF0IHJ1bnRpbWUgJHtyZXNvbHZlZFBhdGhuYW1lfSR7KHN0YXRpY0JhaWxvdXRJbmZvID09IG51bGwgPyB2b2lkIDAgOiBzdGF0aWNCYWlsb3V0SW5mby5kZXNjcmlwdGlvbikgPyBgLCByZWFzb246ICR7c3RhdGljQmFpbG91dEluZm8uZGVzY3JpcHRpb259YCA6IGBgfWAgKyBgXFxuc2VlIG1vcmUgaGVyZSBodHRwczovL25leHRqcy5vcmcvZG9jcy9tZXNzYWdlcy9hcHAtc3RhdGljLXRvLWR5bmFtaWMtZXJyb3JgKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkUxMzJcIixcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0aWNCYWlsb3V0SW5mbyA9PSBudWxsID8gdm9pZCAwIDogc3RhdGljQmFpbG91dEluZm8uc3RhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhY2sgPSBzdGF0aWNCYWlsb3V0SW5mby5zdGFjaztcbiAgICAgICAgICAgICAgICAgICAgZXJyLnN0YWNrID0gZXJyLm1lc3NhZ2UgKyBzdGFjay5zdWJzdHJpbmcoc3RhY2suaW5kZXhPZignXFxuJykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IENhY2hlZFJvdXRlS2luZC5BUFBfUEFHRSxcbiAgICAgICAgICAgICAgICAgICAgaHRtbDogcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICByc2NEYXRhOiBtZXRhZGF0YS5mbGlnaHREYXRhLFxuICAgICAgICAgICAgICAgICAgICBwb3N0cG9uZWQ6IG1ldGFkYXRhLnBvc3Rwb25lZCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBtZXRhZGF0YS5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICBzZWdtZW50RGF0YTogbWV0YWRhdGEuc2VnbWVudERhdGFcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VHZW5lcmF0b3IgPSBhc3luYyAoeyBoYXNSZXNvbHZlZCwgcHJldmlvdXNDYWNoZUVudHJ5LCBpc1JldmFsaWRhdGluZywgc3BhbiB9KT0+e1xuICAgICAgICAgICAgY29uc3QgaXNQcm9kdWN0aW9uID0gcm91dGVNb2R1bGUuaXNEZXYgPT09IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgZGlkUmVzcG9uZCA9IGhhc1Jlc29sdmVkIHx8IHJlcy53cml0YWJsZUVuZGVkO1xuICAgICAgICAgICAgLy8gc2tpcCBvbi1kZW1hbmQgcmV2YWxpZGF0ZSBpZiBjYWNoZSBpcyBub3QgcHJlc2VudCBhbmRcbiAgICAgICAgICAgIC8vIHJldmFsaWRhdGUtaWYtZ2VuZXJhdGVkIGlzIHNldFxuICAgICAgICAgICAgaWYgKGlzT25EZW1hbmRSZXZhbGlkYXRlICYmIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkICYmICFwcmV2aW91c0NhY2hlRW50cnkgJiYgIW1pbmltYWxNb2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlclNlcnZlckNvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IHJvdXRlclNlcnZlckNvbnRleHQucmVuZGVyNDA0KSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHJvdXRlclNlcnZlckNvbnRleHQucmVuZGVyNDA0KHJlcSwgcmVzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwNDtcbiAgICAgICAgICAgICAgICAgICAgcmVzLmVuZCgnVGhpcyBwYWdlIGNvdWxkIG5vdCBiZSBmb3VuZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBmYWxsYmFja01vZGU7XG4gICAgICAgICAgICBpZiAocHJlcmVuZGVySW5mbykge1xuICAgICAgICAgICAgICAgIGZhbGxiYWNrTW9kZSA9IHBhcnNlRmFsbGJhY2tGaWVsZChwcmVyZW5kZXJJbmZvLmZhbGxiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFdoZW4gc2VydmluZyBhIEhUTUwgYm90IHJlcXVlc3QsIHdlIHdhbnQgdG8gc2VydmUgYSBibG9ja2luZyByZW5kZXIgYW5kXG4gICAgICAgICAgICAvLyBub3QgdGhlIHByZXJlbmRlcmVkIHBhZ2UuIFRoaXMgZW5zdXJlcyB0aGF0IHRoZSBjb3JyZWN0IGNvbnRlbnQgaXMgc2VydmVkXG4gICAgICAgICAgICAvLyB0byB0aGUgYm90IGluIHRoZSBoZWFkLlxuICAgICAgICAgICAgaWYgKGZhbGxiYWNrTW9kZSA9PT0gRmFsbGJhY2tNb2RlLlBSRVJFTkRFUiAmJiBpc0JvdCh1c2VyQWdlbnQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1JvdXRlUFBSRW5hYmxlZCB8fCBpc0h0bWxCb3QpIHtcbiAgICAgICAgICAgICAgICAgICAgZmFsbGJhY2tNb2RlID0gRmFsbGJhY2tNb2RlLkJMT0NLSU5HX1NUQVRJQ19SRU5ERVI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChwcmV2aW91c0NhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IHByZXZpb3VzQ2FjaGVFbnRyeS5pc1N0YWxlKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUT0RPOiBhZGFwdCBmb3IgUFBSXG4gICAgICAgICAgICAvLyBvbmx5IGFsbG93IG9uLWRlbWFuZCByZXZhbGlkYXRlIGZvciBmYWxsYmFjazogdHJ1ZS9ibG9ja2luZ1xuICAgICAgICAgICAgLy8gb3IgZm9yIHByZXJlbmRlcmVkIGZhbGxiYWNrOiBmYWxzZSBwYXRoc1xuICAgICAgICAgICAgaWYgKGlzT25EZW1hbmRSZXZhbGlkYXRlICYmIChmYWxsYmFja01vZGUgIT09IEZhbGxiYWNrTW9kZS5OT1RfRk9VTkQgfHwgcHJldmlvdXNDYWNoZUVudHJ5KSkge1xuICAgICAgICAgICAgICAgIGZhbGxiYWNrTW9kZSA9IEZhbGxiYWNrTW9kZS5CTE9DS0lOR19TVEFUSUNfUkVOREVSO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFtaW5pbWFsTW9kZSAmJiBmYWxsYmFja01vZGUgIT09IEZhbGxiYWNrTW9kZS5CTE9DS0lOR19TVEFUSUNfUkVOREVSICYmIHN0YXRpY1BhdGhLZXkgJiYgIWRpZFJlc3BvbmQgJiYgIWlzRHJhZnRNb2RlICYmIHBhZ2VJc0R5bmFtaWMgJiYgKGlzUHJvZHVjdGlvbiB8fCAhaXNQcmVyZW5kZXJlZCkpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgcGFnZSBoYXMgZHluYW1pY1BhcmFtczogZmFsc2UgYW5kIHRoaXMgcGF0aG5hbWUgd2Fzbid0XG4gICAgICAgICAgICAgICAgLy8gcHJlcmVuZGVyZWQgdHJpZ2dlciB0aGUgbm8gZmFsbGJhY2sgaGFuZGxpbmdcbiAgICAgICAgICAgICAgICBpZiAoLy8gSW4gZGV2ZWxvcG1lbnQsIGZhbGwgdGhyb3VnaCB0byByZW5kZXIgdG8gaGFuZGxlIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAvLyBnZXRTdGF0aWNQYXRocy5cbiAgICAgICAgICAgICAgICAoaXNQcm9kdWN0aW9uIHx8IHByZXJlbmRlckluZm8pICYmIC8vIFdoZW4gZmFsbGJhY2sgaXNuJ3QgcHJlc2VudCwgYWJvcnQgdGhpcyByZW5kZXIgc28gd2UgNDA0XG4gICAgICAgICAgICAgICAgZmFsbGJhY2tNb2RlID09PSBGYWxsYmFja01vZGUuTk9UX0ZPVU5EKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb0ZhbGxiYWNrRXJyb3IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGZhbGxiYWNrUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgaWYgKGlzUm91dGVQUFJFbmFibGVkICYmICFpc1JTQ1JlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVLZXkgPSB0eXBlb2YgKHByZXJlbmRlckluZm8gPT0gbnVsbCA/IHZvaWQgMCA6IHByZXJlbmRlckluZm8uZmFsbGJhY2spID09PSAnc3RyaW5nJyA/IHByZXJlbmRlckluZm8uZmFsbGJhY2sgOiBpc1Byb2R1Y3Rpb24gPyBub3JtYWxpemVkU3JjUGFnZSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIHVzZSB0aGUgcmVzcG9uc2UgY2FjaGUgaGVyZSB0byBoYW5kbGUgdGhlIHJldmFsaWRhdGlvbiBhbmRcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFuYWdlbWVudCBvZiB0aGUgZmFsbGJhY2sgc2hlbGwuXG4gICAgICAgICAgICAgICAgICAgIGZhbGxiYWNrUmVzcG9uc2UgPSBhd2FpdCByb3V0ZU1vZHVsZS5oYW5kbGVSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZUtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRDb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICByb3V0ZUtpbmQ6IFJvdXRlS2luZC5BUFBfUEFHRSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRmFsbGJhY2s6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUm91dGVQUFJFbmFibGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VHZW5lcmF0b3I6IGFzeW5jICgpPT5kb1JlbmRlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIHBhc3MgYHVuZGVmaW5lZGAgYXMgcmVuZGVyaW5nIGEgZmFsbGJhY2sgaXNuJ3QgcmVzdW1lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0cG9uZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsbGJhY2tSb3V0ZVBhcmFtczogLy8gSWYgd2UncmUgaW4gcHJvZHVjdGlvbiBvciB3ZSdyZSBkZWJ1Z2dpbmcgdGhlIGZhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNoZWxsIHRoZW4gd2Ugc2hvdWxkIHBvc3Rwb25lIHdoZW4gZHluYW1pYyBwYXJhbXMgYXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFjY2Vzc2VkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1Byb2R1Y3Rpb24gfHwgaXNEZWJ1Z0ZhbGxiYWNrU2hlbGwgPyBnZXRGYWxsYmFja1JvdXRlUGFyYW1zKG5vcm1hbGl6ZWRTcmNQYWdlKSA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXRVbnRpbDogY3R4LndhaXRVbnRpbFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGZhbGxiYWNrIHJlc3BvbnNlIHdhcyBzZXQgdG8gbnVsbCwgdGhlbiB3ZSBzaG91bGQgcmV0dXJuIG51bGwuXG4gICAgICAgICAgICAgICAgICAgIGlmIChmYWxsYmFja1Jlc3BvbnNlID09PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCBpZiB3ZSBkaWQgZ2V0IGEgZmFsbGJhY2sgcmVzcG9uc2UsIHdlIHNob3VsZCByZXR1cm4gaXQuXG4gICAgICAgICAgICAgICAgICAgIGlmIChmYWxsYmFja1Jlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGNhY2hlIGNvbnRyb2wgZnJvbSB0aGUgcmVzcG9uc2UgdG8gcHJldmVudCBpdCBmcm9tIGJlaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1c2VkIGluIHRoZSBzdXJyb3VuZGluZyBjYWNoZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBmYWxsYmFja1Jlc3BvbnNlLmNhY2hlQ29udHJvbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxsYmFja1Jlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gT25seSByZXF1ZXN0cyB0aGF0IGFyZW4ndCByZXZhbGlkYXRpbmcgY2FuIGJlIHJlc3VtZWQuIElmIHdlIGhhdmUgdGhlXG4gICAgICAgICAgICAvLyBtaW5pbWFsIHBvc3Rwb25lZCBkYXRhLCB0aGVuIHdlIHNob3VsZCByZXN1bWUgdGhlIHJlbmRlciB3aXRoIGl0LlxuICAgICAgICAgICAgY29uc3QgcG9zdHBvbmVkID0gIWlzT25EZW1hbmRSZXZhbGlkYXRlICYmICFpc1JldmFsaWRhdGluZyAmJiBtaW5pbWFsUG9zdHBvbmVkID8gbWluaW1hbFBvc3Rwb25lZCA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UncmUgaW4gbWluaW1hbCBtb2RlLCBpZiB3ZSdyZSB0cnlpbmcgdG8gZGVidWcgdGhlIHN0YXRpYyBzaGVsbCxcbiAgICAgICAgICAgIC8vIHdlIHNob3VsZCBqdXN0IHJldHVybiBub3RoaW5nIGluc3RlYWQgb2YgcmVzdW1pbmcgdGhlIGR5bmFtaWMgcmVuZGVyLlxuICAgICAgICAgICAgaWYgKChpc0RlYnVnU3RhdGljU2hlbGwgfHwgaXNEZWJ1Z0R5bmFtaWNBY2Nlc3NlcykgJiYgdHlwZW9mIHBvc3Rwb25lZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2w6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGU6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcmU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAga2luZDogQ2FjaGVkUm91dGVLaW5kLlBBR0VTLFxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbDogUmVuZGVyUmVzdWx0LkVNUFRZLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZURhdGE6IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGEgZHluYW1pYyByb3V0ZSB3aXRoIFBQUiBlbmFibGVkIGFuZCB0aGUgZGVmYXVsdCByb3V0ZVxuICAgICAgICAgICAgLy8gbWF0Y2hlcyB3ZXJlIHNldCwgdGhlbiB3ZSBzaG91bGQgcGFzcyB0aGUgZmFsbGJhY2sgcm91dGUgcGFyYW1zIHRvXG4gICAgICAgICAgICAvLyB0aGUgcmVuZGVyZXIgYXMgdGhpcyBpcyBhIGZhbGxiYWNrIHJldmFsaWRhdGlvbiByZXF1ZXN0LlxuICAgICAgICAgICAgY29uc3QgZmFsbGJhY2tSb3V0ZVBhcmFtcyA9IHBhZ2VJc0R5bmFtaWMgJiYgaXNSb3V0ZVBQUkVuYWJsZWQgJiYgKGdldFJlcXVlc3RNZXRhKHJlcSwgJ3JlbmRlckZhbGxiYWNrU2hlbGwnKSB8fCBpc0RlYnVnRmFsbGJhY2tTaGVsbCkgPyBnZXRGYWxsYmFja1JvdXRlUGFyYW1zKHBhdGhuYW1lKSA6IG51bGw7XG4gICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSByZW5kZXIuXG4gICAgICAgICAgICByZXR1cm4gZG9SZW5kZXIoe1xuICAgICAgICAgICAgICAgIHNwYW4sXG4gICAgICAgICAgICAgICAgcG9zdHBvbmVkLFxuICAgICAgICAgICAgICAgIGZhbGxiYWNrUm91dGVQYXJhbXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBoYW5kbGVSZXNwb25zZSA9IGFzeW5jIChzcGFuKT0+e1xuICAgICAgICAgICAgdmFyIF9jYWNoZUVudHJ5X3ZhbHVlLCBfY2FjaGVkRGF0YV9oZWFkZXJzO1xuICAgICAgICAgICAgY29uc3QgY2FjaGVFbnRyeSA9IGF3YWl0IHJvdXRlTW9kdWxlLmhhbmRsZVJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICBjYWNoZUtleTogc3NnQ2FjaGVLZXksXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VHZW5lcmF0b3I6IChjKT0+cmVzcG9uc2VHZW5lcmF0b3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3BhbixcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgcm91dGVLaW5kOiBSb3V0ZUtpbmQuQVBQX1BBR0UsXG4gICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgaXNSb3V0ZVBQUkVuYWJsZWQsXG4gICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgIG5leHRDb25maWcsXG4gICAgICAgICAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3QsXG4gICAgICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChpc0RyYWZ0TW9kZSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnLCAncHJpdmF0ZSwgbm8tY2FjaGUsIG5vLXN0b3JlLCBtYXgtYWdlPTAsIG11c3QtcmV2YWxpZGF0ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSW4gZGV2LCB3ZSBzaG91bGQgbm90IGNhY2hlIHBhZ2VzIGZvciBhbnkgcmVhc29uLlxuICAgICAgICAgICAgaWYgKHJvdXRlTW9kdWxlLmlzRGV2KSB7XG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcignQ2FjaGUtQ29udHJvbCcsICduby1zdG9yZSwgbXVzdC1yZXZhbGlkYXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNhY2hlRW50cnkpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3NnQ2FjaGVLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQSBjYWNoZSBlbnRyeSBtaWdodCBub3QgYmUgZ2VuZXJhdGVkIGlmIGEgcmVzcG9uc2UgaXMgd3JpdHRlblxuICAgICAgICAgICAgICAgICAgICAvLyBpbiBgZ2V0SW5pdGlhbFByb3BzYCBvciBgZ2V0U2VydmVyU2lkZVByb3BzYCwgYnV0IHRob3NlIHNob3VsZG4ndFxuICAgICAgICAgICAgICAgICAgICAvLyBoYXZlIGEgY2FjaGUga2V5LiBJZiB3ZSBkbyBoYXZlIGEgY2FjaGUga2V5IGJ1dCB3ZSBkb24ndCBlbmQgdXBcbiAgICAgICAgICAgICAgICAgICAgLy8gd2l0aCBhIGNhY2hlIGVudHJ5LCB0aGVuIGVpdGhlciBOZXh0LmpzIG9yIHRoZSBhcHBsaWNhdGlvbiBoYXMgYVxuICAgICAgICAgICAgICAgICAgICAvLyBidWcgdGhhdCBuZWVkcyBmaXhpbmcuXG4gICAgICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoJ2ludmFyaWFudDogY2FjaGUgZW50cnkgcmVxdWlyZWQgYnV0IG5vdCBnZW5lcmF0ZWQnKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNjJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoKF9jYWNoZUVudHJ5X3ZhbHVlID0gY2FjaGVFbnRyeS52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jYWNoZUVudHJ5X3ZhbHVlLmtpbmQpICE9PSBDYWNoZWRSb3V0ZUtpbmQuQVBQX1BBR0UpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWUxO1xuICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoYEludmFyaWFudCBhcHAtcGFnZSBoYW5kbGVyIHJlY2VpdmVkIGludmFsaWQgY2FjaGUgZW50cnkgJHsoX2NhY2hlRW50cnlfdmFsdWUxID0gY2FjaGVFbnRyeS52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jYWNoZUVudHJ5X3ZhbHVlMS5raW5kfWApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTcwN1wiLFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBkaWRQb3N0cG9uZSA9IHR5cGVvZiBjYWNoZUVudHJ5LnZhbHVlLnBvc3Rwb25lZCA9PT0gJ3N0cmluZyc7XG4gICAgICAgICAgICBpZiAoaXNTU0cgJiYgLy8gV2UgZG9uJ3Qgd2FudCB0byBzZW5kIGEgY2FjaGUgaGVhZGVyIGZvciByZXF1ZXN0cyB0aGF0IGNvbnRhaW4gZHluYW1pY1xuICAgICAgICAgICAgLy8gZGF0YS4gSWYgdGhpcyBpcyBhIER5bmFtaWMgUlNDIHJlcXVlc3Qgb3Igd2Fzbid0IGEgUHJlZmV0Y2ggUlNDXG4gICAgICAgICAgICAvLyByZXF1ZXN0LCB0aGVuIHdlIHNob3VsZCBzZXQgdGhlIGNhY2hlIGhlYWRlci5cbiAgICAgICAgICAgICFpc0R5bmFtaWNSU0NSZXF1ZXN0ICYmICghZGlkUG9zdHBvbmUgfHwgaXNQcmVmZXRjaFJTQ1JlcXVlc3QpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtaW5pbWFsTW9kZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBzZXQgeC1uZXh0anMtY2FjaGUgaGVhZGVyIHRvIG1hdGNoIHRoZSBoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2Ugc2V0IGZvciB0aGUgaW1hZ2Utb3B0aW1pemVyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgaXNPbkRlbWFuZFJldmFsaWRhdGUgPyAnUkVWQUxJREFURUQnIDogY2FjaGVFbnRyeS5pc01pc3MgPyAnTUlTUycgOiBjYWNoZUVudHJ5LmlzU3RhbGUgPyAnU1RBTEUnIDogJ0hJVCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBTZXQgYSBoZWFkZXIgdXNlZCBieSB0aGUgY2xpZW50IHJvdXRlciB0byBzaWduYWwgdGhlIHJlc3BvbnNlIGlzIHN0YXRpY1xuICAgICAgICAgICAgICAgIC8vIGFuZCBzaG91bGQgcmVzcGVjdCB0aGUgYHN0YXRpY2AgY2FjaGUgc3RhbGVUaW1lIHZhbHVlLlxuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoTkVYVF9JU19QUkVSRU5ERVJfSEVBREVSLCAnMScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeyB2YWx1ZTogY2FjaGVkRGF0YSB9ID0gY2FjaGVFbnRyeTtcbiAgICAgICAgICAgIC8vIENvZXJjZSB0aGUgY2FjaGUgY29udHJvbCBwYXJhbWV0ZXIgZnJvbSB0aGUgcmVuZGVyLlxuICAgICAgICAgICAgbGV0IGNhY2hlQ29udHJvbDtcbiAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgYSByZXN1bWUgcmVxdWVzdCBpbiBtaW5pbWFsIG1vZGUgaXQgaXMgc3RyZWFtZWQgd2l0aCBkeW5hbWljXG4gICAgICAgICAgICAvLyBjb250ZW50IGFuZCBzaG91bGQgbm90IGJlIGNhY2hlZC5cbiAgICAgICAgICAgIGlmIChtaW5pbWFsUG9zdHBvbmVkKSB7XG4gICAgICAgICAgICAgICAgY2FjaGVDb250cm9sID0ge1xuICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlOiAwLFxuICAgICAgICAgICAgICAgICAgICBleHBpcmU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1pbmltYWxNb2RlICYmIGlzUlNDUmVxdWVzdCAmJiAhaXNQcmVmZXRjaFJTQ1JlcXVlc3QgJiYgaXNSb3V0ZVBQUkVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2wgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGU6IDAsXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXJvdXRlTW9kdWxlLmlzRGV2KSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBhIHByZXZpZXcgbW9kZSByZXF1ZXN0LCB3ZSBzaG91bGRuJ3QgY2FjaGUgaXRcbiAgICAgICAgICAgICAgICBpZiAoaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghaXNTU0cpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXMuZ2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY2FjaGUgZW50cnkgaGFzIGEgY2FjaGUgY29udHJvbCB3aXRoIGEgcmV2YWxpZGF0ZSB2YWx1ZSB0aGF0J3NcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBudW1iZXIsIHVzZSBpdC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWNoZUVudHJ5LmNhY2hlQ29udHJvbC5yZXZhbGlkYXRlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9jYWNoZUVudHJ5X2NhY2hlQ29udHJvbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5LmNhY2hlQ29udHJvbC5yZXZhbGlkYXRlIDwgMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoYEludmFsaWQgcmV2YWxpZGF0ZSBjb25maWd1cmF0aW9uIHByb3ZpZGVkOiAke2NhY2hlRW50cnkuY2FjaGVDb250cm9sLnJldmFsaWRhdGV9IDwgMWApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTIyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlOiBjYWNoZUVudHJ5LmNhY2hlQ29udHJvbC5yZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZTogKChfY2FjaGVFbnRyeV9jYWNoZUNvbnRyb2wgPSBjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jYWNoZUVudHJ5X2NhY2hlQ29udHJvbC5leHBpcmUpID8/IG5leHRDb25maWcuZXhwaXJlVGltZVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlOiBDQUNIRV9PTkVfWUVBUixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhY2hlRW50cnkuY2FjaGVDb250cm9sID0gY2FjaGVDb250cm9sO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBzZWdtZW50UHJlZmV0Y2hIZWFkZXIgPT09ICdzdHJpbmcnICYmIChjYWNoZWREYXRhID09IG51bGwgPyB2b2lkIDAgOiBjYWNoZWREYXRhLmtpbmQpID09PSBDYWNoZWRSb3V0ZUtpbmQuQVBQX1BBR0UgJiYgY2FjaGVkRGF0YS5zZWdtZW50RGF0YSkge1xuICAgICAgICAgICAgICAgIHZhciBfY2FjaGVkRGF0YV9oZWFkZXJzMTtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgcHJlZmV0Y2ggcmVxdWVzdCBpc3N1ZWQgYnkgdGhlIGNsaWVudCBTZWdtZW50IENhY2hlLiBUaGVzZVxuICAgICAgICAgICAgICAgIC8vIHNob3VsZCBuZXZlciByZWFjaCB0aGUgYXBwbGljYXRpb24gbGF5ZXIgKGxhbWJkYSkuIFdlIHNob3VsZCBlaXRoZXJcbiAgICAgICAgICAgICAgICAvLyByZXNwb25kIGZyb20gdGhlIGNhY2hlIChISVQpIG9yIHJlc3BvbmQgd2l0aCAyMDQgTm8gQ29udGVudCAoTUlTUykuXG4gICAgICAgICAgICAgICAgLy8gU2V0IGEgaGVhZGVyIHRvIGluZGljYXRlIHRoYXQgUFBSIGlzIGVuYWJsZWQgZm9yIHRoaXMgcm91dGUuIFRoaXNcbiAgICAgICAgICAgICAgICAvLyBsZXRzIHRoZSBjbGllbnQgZGlzdGluZ3Vpc2ggYmV0d2VlbiBhIHJlZ3VsYXIgY2FjaGUgbWlzcyBhbmQgYSBjYWNoZVxuICAgICAgICAgICAgICAgIC8vIG1pc3MgZHVlIHRvIFBQUiBiZWluZyBkaXNhYmxlZC4gSW4gb3RoZXIgY29udGV4dHMgdGhpcyBoZWFkZXIgaXMgdXNlZFxuICAgICAgICAgICAgICAgIC8vIHRvIGluZGljYXRlIHRoYXQgdGhlIHJlc3BvbnNlIGNvbnRhaW5zIGR5bmFtaWMgZGF0YSwgYnV0IGhlcmUgd2UncmVcbiAgICAgICAgICAgICAgICAvLyBvbmx5IHVzaW5nIGl0IHRvIGluZGljYXRlIHRoYXQgdGhlIGZlYXR1cmUgaXMgZW5hYmxlZCDigJQgdGhlIHNlZ21lbnRcbiAgICAgICAgICAgICAgICAvLyByZXNwb25zZSBpdHNlbGYgY29udGFpbnMgd2hldGhlciB0aGUgZGF0YSBpcyBkeW5hbWljLlxuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoTkVYVF9ESURfUE9TVFBPTkVfSEVBREVSLCAnMicpO1xuICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgY2FjaGUgdGFncyBoZWFkZXIgdG8gdGhlIHJlc3BvbnNlIGlmIGl0IGV4aXN0cyBhbmQgd2UncmUgaW5cbiAgICAgICAgICAgICAgICAvLyBtaW5pbWFsIG1vZGUgd2hpbGUgcmVuZGVyaW5nIGEgc3RhdGljIHBhZ2UuXG4gICAgICAgICAgICAgICAgY29uc3QgdGFncyA9IChfY2FjaGVkRGF0YV9oZWFkZXJzMSA9IGNhY2hlZERhdGEuaGVhZGVycykgPT0gbnVsbCA/IHZvaWQgMCA6IF9jYWNoZWREYXRhX2hlYWRlcnMxW05FWFRfQ0FDSEVfVEFHU19IRUFERVJdO1xuICAgICAgICAgICAgICAgIGlmIChtaW5pbWFsTW9kZSAmJiBpc1NTRyAmJiB0YWdzICYmIHR5cGVvZiB0YWdzID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKE5FWFRfQ0FDSEVfVEFHU19IRUFERVIsIHRhZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaGVkU2VnbWVudCA9IGNhY2hlZERhdGEuc2VnbWVudERhdGEuZ2V0KHNlZ21lbnRQcmVmZXRjaEhlYWRlcik7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoZWRTZWdtZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FjaGUgaGl0XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZW5kUmVuZGVyUmVzdWx0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYXRlRXRhZ3M6IG5leHRDb25maWcuZ2VuZXJhdGVFdGFncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvd2VyZWRCeUhlYWRlcjogbmV4dENvbmZpZy5wb3dlcmVkQnlIZWFkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IFJlbmRlclJlc3VsdC5mcm9tU3RhdGljKG1hdGNoZWRTZWdtZW50LCBSU0NfQ09OVEVOVF9UWVBFX0hFQURFUiksXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2w6IGNhY2hlRW50cnkuY2FjaGVDb250cm9sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBDYWNoZSBtaXNzLiBFaXRoZXIgYSBjYWNoZSBlbnRyeSBmb3IgdGhpcyByb3V0ZSBoYXMgbm90IGJlZW4gZ2VuZXJhdGVkXG4gICAgICAgICAgICAgICAgLy8gKHdoaWNoIHRlY2huaWNhbGx5IHNob3VsZCBub3QgYmUgcG9zc2libGUgd2hlbiBQUFIgaXMgZW5hYmxlZCwgYmVjYXVzZVxuICAgICAgICAgICAgICAgIC8vIGF0IGEgbWluaW11bSB0aGVyZSBzaG91bGQgYWx3YXlzIGJlIGEgZmFsbGJhY2sgZW50cnkpIG9yIHRoZXJlJ3Mgbm9cbiAgICAgICAgICAgICAgICAvLyBtYXRjaCBmb3IgdGhlIHJlcXVlc3RlZCBzZWdtZW50LiBSZXNwb25kIHdpdGggYSAyMDQgTm8gQ29udGVudC4gV2VcbiAgICAgICAgICAgICAgICAvLyBkb24ndCBib3RoZXIgdG8gcmVzcG9uZCB3aXRoIDQwNCwgYmVjYXVzZSB0aGVzZSByZXF1ZXN0cyBhcmUgb25seVxuICAgICAgICAgICAgICAgIC8vIGlzc3VlZCBhcyBwYXJ0IG9mIGEgcHJlZmV0Y2guXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSAyMDQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbmRSZW5kZXJSZXN1bHQoe1xuICAgICAgICAgICAgICAgICAgICByZXEsXG4gICAgICAgICAgICAgICAgICAgIHJlcyxcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVFdGFnczogbmV4dENvbmZpZy5nZW5lcmF0ZUV0YWdzLFxuICAgICAgICAgICAgICAgICAgICBwb3dlcmVkQnlIZWFkZXI6IG5leHRDb25maWcucG93ZXJlZEJ5SGVhZGVyLFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IFJlbmRlclJlc3VsdC5FTVBUWSxcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiBjYWNoZUVudHJ5LmNhY2hlQ29udHJvbFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhIGNhbGxiYWNrIGZvciBgb25DYWNoZUVudHJ5YCwgY2FsbCBpdCB3aXRoIHRoZSBjYWNoZSBlbnRyeVxuICAgICAgICAgICAgLy8gYW5kIHRoZSByZXZhbGlkYXRlIG9wdGlvbnMuXG4gICAgICAgICAgICBjb25zdCBvbkNhY2hlRW50cnkgPSBnZXRSZXF1ZXN0TWV0YShyZXEsICdvbkNhY2hlRW50cnknKTtcbiAgICAgICAgICAgIGlmIChvbkNhY2hlRW50cnkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaW5pc2hlZCA9IGF3YWl0IG9uQ2FjaGVFbnRyeSh7XG4gICAgICAgICAgICAgICAgICAgIC4uLmNhY2hlRW50cnksXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IHJlbW92ZSB0aGlzIHdoZW4gdXBzdHJlYW0gZG9lc24ndFxuICAgICAgICAgICAgICAgICAgICAvLyBhbHdheXMgZXhwZWN0IHRoaXMgdmFsdWUgdG8gYmUgXCJQQUdFXCJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNhY2hlRW50cnkudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBraW5kOiAnUEFHRSdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBnZXRSZXF1ZXN0TWV0YShyZXEsICdpbml0VVJMJylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoZmluaXNoZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogbWF5YmUgd2UgaGF2ZSB0byBlbmQgdGhlIHJlcXVlc3Q/XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHRoZSByZXF1ZXN0IGhhcyBhIHBvc3Rwb25lZCBzdGF0ZSBhbmQgaXQncyBhIHJlc3VtZSByZXF1ZXN0IHdlXG4gICAgICAgICAgICAvLyBzaG91bGQgZXJyb3IuXG4gICAgICAgICAgICBpZiAoZGlkUG9zdHBvbmUgJiYgbWluaW1hbFBvc3Rwb25lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoJ0ludmFyaWFudDogcG9zdHBvbmVkIHN0YXRlIHNob3VsZCBub3QgYmUgcHJlc2VudCBvbiBhIHJlc3VtZSByZXF1ZXN0JyksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFMzk2XCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjYWNoZWREYXRhLmhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jYWNoZWREYXRhLmhlYWRlcnNcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmICghbWluaW1hbE1vZGUgfHwgIWlzU1NHKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBoZWFkZXJzW05FWFRfQ0FDSEVfVEFHU19IRUFERVJdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoaGVhZGVycykpe1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJykgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIHZhbHVlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuYXBwZW5kSGVhZGVyKGtleSwgdik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmFwcGVuZEhlYWRlcihrZXksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5hcHBlbmRIZWFkZXIoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBBZGQgdGhlIGNhY2hlIHRhZ3MgaGVhZGVyIHRvIHRoZSByZXNwb25zZSBpZiBpdCBleGlzdHMgYW5kIHdlJ3JlIGluXG4gICAgICAgICAgICAvLyBtaW5pbWFsIG1vZGUgd2hpbGUgcmVuZGVyaW5nIGEgc3RhdGljIHBhZ2UuXG4gICAgICAgICAgICBjb25zdCB0YWdzID0gKF9jYWNoZWREYXRhX2hlYWRlcnMgPSBjYWNoZWREYXRhLmhlYWRlcnMpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVkRGF0YV9oZWFkZXJzW05FWFRfQ0FDSEVfVEFHU19IRUFERVJdO1xuICAgICAgICAgICAgaWYgKG1pbmltYWxNb2RlICYmIGlzU1NHICYmIHRhZ3MgJiYgdHlwZW9mIHRhZ3MgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcihORVhUX0NBQ0hFX1RBR1NfSEVBREVSLCB0YWdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHRoZSByZXF1ZXN0IGlzIGEgZGF0YSByZXF1ZXN0LCB0aGVuIHdlIHNob3VsZG4ndCBzZXQgdGhlIHN0YXR1cyBjb2RlXG4gICAgICAgICAgICAvLyBmcm9tIHRoZSByZXNwb25zZSBiZWNhdXNlIGl0IHNob3VsZCBhbHdheXMgYmUgMjAwLiBUaGlzIHNob3VsZCBiZSBnYXRlZFxuICAgICAgICAgICAgLy8gYmVoaW5kIHRoZSBleHBlcmltZW50YWwgUFBSIGZsYWcuXG4gICAgICAgICAgICBpZiAoY2FjaGVkRGF0YS5zdGF0dXMgJiYgKCFpc1JTQ1JlcXVlc3QgfHwgIWlzUm91dGVQUFJFbmFibGVkKSkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXNDb2RlID0gY2FjaGVkRGF0YS5zdGF0dXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZWRpcmVjdCBpbmZvcm1hdGlvbiBpcyBlbmNvZGVkIGluIFJTQyBwYXlsb2FkLCBzbyB3ZSBkb24ndCBuZWVkIHRvIHVzZSByZWRpcmVjdCBzdGF0dXMgY29kZXNcbiAgICAgICAgICAgIGlmICghbWluaW1hbE1vZGUgJiYgY2FjaGVkRGF0YS5zdGF0dXMgJiYgUmVkaXJlY3RTdGF0dXNDb2RlW2NhY2hlZERhdGEuc3RhdHVzXSAmJiBpc1JTQ1JlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDIwMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE1hcmsgdGhhdCB0aGUgcmVxdWVzdCBkaWQgcG9zdHBvbmUuXG4gICAgICAgICAgICBpZiAoZGlkUG9zdHBvbmUpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKE5FWFRfRElEX1BPU1RQT05FX0hFQURFUiwgJzEnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHdlIGRvbid0IGdvIHRocm91Z2ggdGhpcyBibG9jayB3aGVuIHByZXZpZXcgbW9kZSBpcyB0cnVlXG4gICAgICAgICAgICAvLyBhcyBwcmV2aWV3IG1vZGUgaXMgYSBkeW5hbWljIHJlcXVlc3QgKGJ5cGFzc2VzIGNhY2hlKSBhbmQgZG9lc24ndFxuICAgICAgICAgICAgLy8gZ2VuZXJhdGUgYm90aCBIVE1MIGFuZCBwYXlsb2FkcyBpbiB0aGUgc2FtZSByZXF1ZXN0IHNvIGNvbnRpbnVlIHRvIGp1c3RcbiAgICAgICAgICAgIC8vIHJldHVybiB0aGUgZ2VuZXJhdGVkIHBheWxvYWRcbiAgICAgICAgICAgIGlmIChpc1JTQ1JlcXVlc3QgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBhIGR5bmFtaWMgUlNDIHJlcXVlc3QsIHRoZW4gc3RyZWFtIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNhY2hlZERhdGEucnNjRGF0YSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlZERhdGEucG9zdHBvbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKCdJbnZhcmlhbnQ6IEV4cGVjdGVkIHBvc3Rwb25lZCB0byBiZSB1bmRlZmluZWQnKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTM3MlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbmRSZW5kZXJSZXN1bHQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVFdGFnczogbmV4dENvbmZpZy5nZW5lcmF0ZUV0YWdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG93ZXJlZEJ5SGVhZGVyOiBuZXh0Q29uZmlnLnBvd2VyZWRCeUhlYWRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogY2FjaGVkRGF0YS5odG1sLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRHluYW1pYyBSU0MgcmVzcG9uc2VzIGNhbm5vdCBiZSBjYWNoZWQsIGV2ZW4gaWYgdGhleSdyZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uZmlndXJlZCB3aXRoIGBmb3JjZS1zdGF0aWNgIGJlY2F1c2Ugd2UgaGF2ZSBubyB3YXkgb2ZcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpc3Rpbmd1aXNoaW5nIGJldHdlZW4gYGZvcmNlLXN0YXRpY2AgYW5kIHBhZ2VzIHRoYXQgaGF2ZSBub1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9zdHBvbmVkIHN0YXRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogZGlzdGluZ3Vpc2ggYGZvcmNlLXN0YXRpY2AgZnJvbSBwYWdlcyB3aXRoIG5vIHBvc3Rwb25lZCBzdGF0ZSAoc3RhdGljKVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiBpc0R5bmFtaWNSU0NSZXF1ZXN0ID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGU6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gOiBjYWNoZUVudHJ5LmNhY2hlQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gQXMgdGhpcyBpc24ndCBhIHByZWZldGNoIHJlcXVlc3QsIHdlIHNob3VsZCBzZXJ2ZSB0aGUgc3RhdGljIGZsaWdodFxuICAgICAgICAgICAgICAgIC8vIGRhdGEuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbmRSZW5kZXJSZXN1bHQoe1xuICAgICAgICAgICAgICAgICAgICByZXEsXG4gICAgICAgICAgICAgICAgICAgIHJlcyxcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVFdGFnczogbmV4dENvbmZpZy5nZW5lcmF0ZUV0YWdzLFxuICAgICAgICAgICAgICAgICAgICBwb3dlcmVkQnlIZWFkZXI6IG5leHRDb25maWcucG93ZXJlZEJ5SGVhZGVyLFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IFJlbmRlclJlc3VsdC5mcm9tU3RhdGljKGNhY2hlZERhdGEucnNjRGF0YSwgUlNDX0NPTlRFTlRfVFlQRV9IRUFERVIpLFxuICAgICAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2w6IGNhY2hlRW50cnkuY2FjaGVDb250cm9sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgcmVxdWVzdCBmb3IgSFRNTCBkYXRhLlxuICAgICAgICAgICAgbGV0IGJvZHkgPSBjYWNoZWREYXRhLmh0bWw7XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIG5vIHBvc3Rwb25lZCBzdGF0ZSwgd2Ugc2hvdWxkIGp1c3Qgc2VydmUgdGhlIEhUTUwuIFRoaXNcbiAgICAgICAgICAgIC8vIHNob3VsZCBhbHNvIGJlIHRoZSBjYXNlIGZvciBhIHJlc3VtZSByZXF1ZXN0IGJlY2F1c2UgaXQncyBjb21wbGV0ZWRcbiAgICAgICAgICAgIC8vIGFzIGEgc2VydmVyIHJlbmRlciAocmF0aGVyIHRoYW4gYSBzdGF0aWMgcmVuZGVyKS5cbiAgICAgICAgICAgIGlmICghZGlkUG9zdHBvbmUgfHwgbWluaW1hbE1vZGUgfHwgaXNSU0NSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgd2UncmUgaW4gdGVzdCBtb2RlLCB3ZSBzaG91bGQgYWRkIGEgc2VudGluZWwgY2h1bmsgdG8gdGhlIHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgLy8gdGhhdCdzIGJldHdlZW4gdGhlIHN0YXRpYyBhbmQgZHluYW1pYyBwYXJ0cyBzbyB3ZSBjYW4gY29tcGFyZSB0aGVcbiAgICAgICAgICAgICAgICAvLyBjaHVua3MgYW5kIGFkZCBhc3NlcnRpb25zLlxuICAgICAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5fX05FWFRfVEVTVF9NT0RFICYmIG1pbmltYWxNb2RlICYmIGlzUm91dGVQUFJFbmFibGVkICYmIGJvZHkuY29udGVudFR5cGUgPT09IEhUTUxfQ09OVEVOVF9UWVBFX0hFQURFUikge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcyB3ZSdyZSBpbiBtaW5pbWFsIG1vZGUsIHRoZSBzdGF0aWMgcGFydCB3b3VsZCBoYXZlIGFscmVhZHkgYmVlblxuICAgICAgICAgICAgICAgICAgICAvLyBzdHJlYW1lZCBmaXJzdC4gVGhlIG9ubHkgcGFydCB0aGF0IHRoaXMgc3RyZWFtcyBpcyB0aGUgZHluYW1pYyBwYXJ0XG4gICAgICAgICAgICAgICAgICAgIC8vIHNvIHdlIHNob3VsZCBGSVJTVCBzdHJlYW0gdGhlIHNlbnRpbmVsIGFuZCBUSEVOIHRoZSBkeW5hbWljIHBhcnQuXG4gICAgICAgICAgICAgICAgICAgIGJvZHkudW5zaGlmdChjcmVhdGVQUFJCb3VuZGFyeVNlbnRpbmVsKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gc2VuZFJlbmRlclJlc3VsdCh7XG4gICAgICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICAgICAgcmVzLFxuICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZUV0YWdzOiBuZXh0Q29uZmlnLmdlbmVyYXRlRXRhZ3MsXG4gICAgICAgICAgICAgICAgICAgIHBvd2VyZWRCeUhlYWRlcjogbmV4dENvbmZpZy5wb3dlcmVkQnlIZWFkZXIsXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogYm9keSxcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiBjYWNoZUVudHJ5LmNhY2hlQ29udHJvbFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgd2UncmUgZGVidWdnaW5nIHRoZSBzdGF0aWMgc2hlbGwgb3IgdGhlIGR5bmFtaWMgQVBJIGFjY2Vzc2VzLCB3ZVxuICAgICAgICAgICAgLy8gc2hvdWxkIGp1c3Qgc2VydmUgdGhlIEhUTUwgd2l0aG91dCByZXN1bWluZyB0aGUgcmVuZGVyLiBUaGUgcmV0dXJuZWRcbiAgICAgICAgICAgIC8vIEhUTUwgd2lsbCBiZSB0aGUgc3RhdGljIHNoZWxsIHNvIGFsbCB0aGUgRHluYW1pYyBBUEkncyB3aWxsIGJlIHVzZWRcbiAgICAgICAgICAgIC8vIGR1cmluZyBzdGF0aWMgZ2VuZXJhdGlvbi5cbiAgICAgICAgICAgIGlmIChpc0RlYnVnU3RhdGljU2hlbGwgfHwgaXNEZWJ1Z0R5bmFtaWNBY2Nlc3Nlcykge1xuICAgICAgICAgICAgICAgIC8vIFNpbmNlIHdlJ3JlIG5vdCByZXN1bWluZyB0aGUgcmVuZGVyLCB3ZSBuZWVkIHRvIGF0IGxlYXN0IGFkZCB0aGVcbiAgICAgICAgICAgICAgICAvLyBjbG9zaW5nIGJvZHkgYW5kIGh0bWwgdGFncyB0byBjcmVhdGUgdmFsaWQgSFRNTC5cbiAgICAgICAgICAgICAgICBib2R5LnB1c2gobmV3IFJlYWRhYmxlU3RyZWFtKHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShFTkNPREVEX1RBR1MuQ0xPU0VELkJPRFlfQU5EX0hUTUwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzZW5kUmVuZGVyUmVzdWx0KHtcbiAgICAgICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgICAgICByZXMsXG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRlRXRhZ3M6IG5leHRDb25maWcuZ2VuZXJhdGVFdGFncyxcbiAgICAgICAgICAgICAgICAgICAgcG93ZXJlZEJ5SGVhZGVyOiBuZXh0Q29uZmlnLnBvd2VyZWRCeUhlYWRlcixcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBib2R5LFxuICAgICAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2w6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGU6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcmU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiB3ZSdyZSBpbiB0ZXN0IG1vZGUsIHdlIHNob3VsZCBhZGQgYSBzZW50aW5lbCBjaHVuayB0byB0aGUgcmVzcG9uc2VcbiAgICAgICAgICAgIC8vIHRoYXQncyBiZXR3ZWVuIHRoZSBzdGF0aWMgYW5kIGR5bmFtaWMgcGFydHMgc28gd2UgY2FuIGNvbXBhcmUgdGhlXG4gICAgICAgICAgICAvLyBjaHVua3MgYW5kIGFkZCBhc3NlcnRpb25zLlxuICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Ll9fTkVYVF9URVNUX01PREUpIHtcbiAgICAgICAgICAgICAgICBib2R5LnB1c2goY3JlYXRlUFBSQm91bmRhcnlTZW50aW5lbCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRoaXMgcmVxdWVzdCBoYXMgcG9zdHBvbmVkLCBzbyBsZXQncyBjcmVhdGUgYSBuZXcgdHJhbnNmb3JtZXIgdGhhdCB0aGVcbiAgICAgICAgICAgIC8vIGR5bmFtaWMgZGF0YSBjYW4gcGlwZSB0byB0aGF0IHdpbGwgYXR0YWNoIHRoZSBkeW5hbWljIGRhdGEgdG8gdGhlIGVuZFxuICAgICAgICAgICAgLy8gb2YgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtZXIgPSBuZXcgVHJhbnNmb3JtU3RyZWFtKCk7XG4gICAgICAgICAgICBib2R5LnB1c2godHJhbnNmb3JtZXIucmVhZGFibGUpO1xuICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgcmVuZGVyIGFnYWluLCBidXQgdGhpcyB0aW1lLCBwcm92aWRlIHRoZSBwb3N0cG9uZWQgc3RhdGUuXG4gICAgICAgICAgICAvLyBXZSBkb24ndCBhd2FpdCBiZWNhdXNlIHdlIHdhbnQgdGhlIHJlc3VsdCB0byBzdGFydCBzdHJlYW1pbmcgbm93LCBhbmRcbiAgICAgICAgICAgIC8vIHdlJ3ZlIGFscmVhZHkgY2hhaW5lZCB0aGUgdHJhbnNmb3JtZXIncyByZWFkYWJsZSB0byB0aGUgcmVuZGVyIHJlc3VsdC5cbiAgICAgICAgICAgIGRvUmVuZGVyKHtcbiAgICAgICAgICAgICAgICBzcGFuLFxuICAgICAgICAgICAgICAgIHBvc3Rwb25lZDogY2FjaGVkRGF0YS5wb3N0cG9uZWQsXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHJlc3VtZSByZW5kZXIsIG5vdCBhIGZhbGxiYWNrIHJlbmRlciwgc28gd2UgZG9uJ3QgbmVlZCB0b1xuICAgICAgICAgICAgICAgIC8vIHNldCB0aGlzLlxuICAgICAgICAgICAgICAgIGZhbGxiYWNrUm91dGVQYXJhbXM6IG51bGxcbiAgICAgICAgICAgIH0pLnRoZW4oYXN5bmMgKHJlc3VsdCk9PntcbiAgICAgICAgICAgICAgICB2YXIgX3Jlc3VsdF92YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKCdJbnZhcmlhbnQ6IGV4cGVjdGVkIGEgcmVzdWx0IHRvIGJlIHJldHVybmVkJyksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTQ2M1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgoKF9yZXN1bHRfdmFsdWUgPSByZXN1bHQudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfcmVzdWx0X3ZhbHVlLmtpbmQpICE9PSBDYWNoZWRSb3V0ZUtpbmQuQVBQX1BBR0UpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9yZXN1bHRfdmFsdWUxO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKGBJbnZhcmlhbnQ6IGV4cGVjdGVkIGEgcGFnZSByZXNwb25zZSwgZ290ICR7KF9yZXN1bHRfdmFsdWUxID0gcmVzdWx0LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX3Jlc3VsdF92YWx1ZTEua2luZH1gKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFMzA1XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gUGlwZSB0aGUgcmVzdW1lIHJlc3VsdCB0byB0aGUgdHJhbnNmb3JtZXIuXG4gICAgICAgICAgICAgICAgYXdhaXQgcmVzdWx0LnZhbHVlLmh0bWwucGlwZVRvKHRyYW5zZm9ybWVyLndyaXRhYmxlKTtcbiAgICAgICAgICAgIH0pLmNhdGNoKChlcnIpPT57XG4gICAgICAgICAgICAgICAgLy8gQW4gZXJyb3Igb2NjdXJyZWQgZHVyaW5nIHBpcGluZyBvciBwcmVwYXJpbmcgdGhlIHJlbmRlciwgYWJvcnRcbiAgICAgICAgICAgICAgICAvLyB0aGUgdHJhbnNmb3JtZXJzIHdyaXRlciBzbyB3ZSBjYW4gdGVybWluYXRlIHRoZSBzdHJlYW0uXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtZXIud3JpdGFibGUuYWJvcnQoZXJyKS5jYXRjaCgoZSk9PntcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcImNvdWxkbid0IGFib3J0IHRyYW5zZm9ybWVyXCIsIGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gc2VuZFJlbmRlclJlc3VsdCh7XG4gICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgIHJlcyxcbiAgICAgICAgICAgICAgICBnZW5lcmF0ZUV0YWdzOiBuZXh0Q29uZmlnLmdlbmVyYXRlRXRhZ3MsXG4gICAgICAgICAgICAgICAgcG93ZXJlZEJ5SGVhZGVyOiBuZXh0Q29uZmlnLnBvd2VyZWRCeUhlYWRlcixcbiAgICAgICAgICAgICAgICByZXN1bHQ6IGJvZHksXG4gICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3Qgd2FudCB0byBjYWNoZSB0aGUgcmVzcG9uc2UgaWYgaXQgaGFzIHBvc3Rwb25lZCBkYXRhIGJlY2F1c2VcbiAgICAgICAgICAgICAgICAvLyB0aGUgcmVzcG9uc2UgYmVpbmcgc2VudCB0byB0aGUgY2xpZW50IGl0J3MgZHluYW1pYyBwYXJ0cyBhcmUgc3RyZWFtZWRcbiAgICAgICAgICAgICAgICAvLyB0byB0aGUgY2xpZW50IG9uIHRoZSBzYW1lIHJlcXVlc3QuXG4gICAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiB7XG4gICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGU6IDAsXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIFRPRE86IGFjdGl2ZVNwYW4gY29kZSBwYXRoIGlzIGZvciB3aGVuIHdyYXBwZWQgYnlcbiAgICAgICAgLy8gbmV4dC1zZXJ2ZXIgY2FuIGJlIHJlbW92ZWQgd2hlbiB0aGlzIGlzIG5vIGxvbmdlciB1c2VkXG4gICAgICAgIGlmIChhY3RpdmVTcGFuKSB7XG4gICAgICAgICAgICBhd2FpdCBoYW5kbGVSZXNwb25zZShhY3RpdmVTcGFuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0cmFjZXIud2l0aFByb3BhZ2F0ZWRDb250ZXh0KHJlcS5oZWFkZXJzLCAoKT0+dHJhY2VyLnRyYWNlKEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbk5hbWU6IGAke21ldGhvZH0gJHtyZXEudXJsfWAsXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFNwYW5LaW5kLlNFUlZFUixcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAubWV0aG9kJzogbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAudGFyZ2V0JzogcmVxLnVybFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaGFuZGxlUmVzcG9uc2UpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyBpZiB3ZSBhcmVuJ3Qgd3JhcHBlZCBieSBiYXNlLXNlcnZlciBoYW5kbGUgaGVyZVxuICAgICAgICBpZiAoIWFjdGl2ZVNwYW4gJiYgIShlcnIgaW5zdGFuY2VvZiBOb0ZhbGxiYWNrRXJyb3IpKSB7XG4gICAgICAgICAgICBhd2FpdCByb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVyciwge1xuICAgICAgICAgICAgICAgIHJvdXRlcktpbmQ6ICdBcHAgUm91dGVyJyxcbiAgICAgICAgICAgICAgICByb3V0ZVBhdGg6IHNyY1BhZ2UsXG4gICAgICAgICAgICAgICAgcm91dGVUeXBlOiAncmVuZGVyJyxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlOiBpc1NTRyxcbiAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSwgcm91dGVyU2VydmVyQ29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0aHJvdyBzbyB0aGF0IHdlIGNhbiBoYW5kbGUgc2VydmluZyBlcnJvciBwYWdlXG4gICAgICAgIHRocm93IGVycjtcbiAgICB9XG59XG4vLyBUT0RPOiBvbWl0IHRoaXMgZnJvbSBwcm9kdWN0aW9uIGJ1aWxkcywgb25seSB0ZXN0IGJ1aWxkcyBzaG91bGQgaW5jbHVkZSBpdFxuLyoqXG4gKiBDcmVhdGVzIGEgcmVhZGFibGUgc3RyZWFtIHRoYXQgZW1pdHMgYSBQUFIgYm91bmRhcnkgc2VudGluZWwuXG4gKlxuICogQHJldHVybnMgQSByZWFkYWJsZSBzdHJlYW0gdGhhdCBlbWl0cyBhIFBQUiBib3VuZGFyeSBzZW50aW5lbC5cbiAqLyBmdW5jdGlvbiBjcmVhdGVQUFJCb3VuZGFyeVNlbnRpbmVsKCkge1xuICAgIHJldHVybiBuZXcgUmVhZGFibGVTdHJlYW0oe1xuICAgICAgICBzdGFydCAoY29udHJvbGxlcikge1xuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZSgnPCEtLSBQUFJfQk9VTkRBUllfU0VOVElORUwgLS0+JykpO1xuICAgICAgICAgICAgY29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1wYWdlLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=C%3A%5CMommy%20Lucy%5CProjects%5CLucid%20Dream%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CMommy%20Lucy%5CProjects%5CLucid%20Dream&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CAchievementTriggerManager.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CThemeController.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Cglobals.css%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Creact-hot-toast%5C%5Cdist%5C%5Cindex.mjs%22%2C%22ids%22%3A%5B%22Toaster%22%5D%7D&server=true!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CAchievementTriggerManager.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CThemeController.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Cglobals.css%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Creact-hot-toast%5C%5Cdist%5C%5Cindex.mjs%22%2C%22ids%22%3A%5B%22Toaster%22%5D%7D&server=true! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/components/AchievementTriggerManager.tsx */ \"(rsc)/./app/components/AchievementTriggerManager.tsx\"));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/components/ThemeController.tsx */ \"(rsc)/./app/components/ThemeController.tsx\"));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./node_modules/react-hot-toast/dist/index.mjs */ \"(rsc)/./node_modules/react-hot-toast/dist/index.mjs\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNhcHAlNUMlNUNjb21wb25lbnRzJTVDJTVDQWNoaWV2ZW1lbnRUcmlnZ2VyTWFuYWdlci50c3glMjIlMkMlMjJpZHMlMjIlM0ElNUIlMjJkZWZhdWx0JTIyJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNhcHAlNUMlNUNjb21wb25lbnRzJTVDJTVDVGhlbWVDb250cm9sbGVyLnRzeCUyMiUyQyUyMmlkcyUyMiUzQSU1QiUyMmRlZmF1bHQlMjIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q2FwcCU1QyU1Q2dsb2JhbHMuY3NzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNub2RlX21vZHVsZXMlNUMlNUNyZWFjdC1ob3QtdG9hc3QlNUMlNUNkaXN0JTVDJTVDaW5kZXgubWpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTIyVG9hc3RlciUyMiU1RCU3RCZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEsd01BQXVKO0FBQ3ZKO0FBQ0Esb0xBQTZJO0FBQzdJO0FBQ0Esc01BQXVKIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIsIHdlYnBhY2tFeHBvcnRzOiBbXCJkZWZhdWx0XCJdICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxhcHBcXFxcY29tcG9uZW50c1xcXFxBY2hpZXZlbWVudFRyaWdnZXJNYW5hZ2VyLnRzeFwiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiLCB3ZWJwYWNrRXhwb3J0czogW1wiZGVmYXVsdFwiXSAqLyBcIkM6XFxcXE1vbW15IEx1Y3lcXFxcUHJvamVjdHNcXFxcTHVjaWQgRHJlYW1cXFxcYXBwXFxcXGNvbXBvbmVudHNcXFxcVGhlbWVDb250cm9sbGVyLnRzeFwiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiLCB3ZWJwYWNrRXhwb3J0czogW1wiVG9hc3RlclwiXSAqLyBcIkM6XFxcXE1vbW15IEx1Y3lcXFxcUHJvamVjdHNcXFxcTHVjaWQgRHJlYW1cXFxcbm9kZV9tb2R1bGVzXFxcXHJlYWN0LWhvdC10b2FzdFxcXFxkaXN0XFxcXGluZGV4Lm1qc1wiKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CAchievementTriggerManager.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CThemeController.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Cglobals.css%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Creact-hot-toast%5C%5Cdist%5C%5Cindex.mjs%22%2C%22ids%22%3A%5B%22Toaster%22%5D%7D&server=true!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cbuiltin%5C%5Cglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Chttp-access-fallback%5C%5Cerror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Clayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cmetadata%5C%5Casync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Crender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cframework%5C%5Cboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cmetadata%5C%5Cgenerate%5C%5Cicon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cnext-devtools%5C%5Cuserspace%5C%5Capp%5C%5Csegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cbuiltin%5C%5Cglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Chttp-access-fallback%5C%5Cerror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Clayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cmetadata%5C%5Casync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Crender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cframework%5C%5Cboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cmetadata%5C%5Cgenerate%5C%5Cicon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cnext-devtools%5C%5Cuserspace%5C%5Capp%5C%5Csegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/builtin/global-error.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/global-error.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-page.js */ \"(rsc)/./node_modules/next/dist/client/components/client-page.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-segment.js */ \"(rsc)/./node_modules/next/dist/client/components/client-segment.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js */ \"(rsc)/./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/layout-router.js */ \"(rsc)/./node_modules/next/dist/client/components/layout-router.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/metadata/async-metadata.js */ \"(rsc)/./node_modules/next/dist/client/components/metadata/async-metadata.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/render-from-template-context.js */ \"(rsc)/./node_modules/next/dist/client/components/render-from-template-context.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/lib/framework/boundary-components.js */ \"(rsc)/./node_modules/next/dist/lib/framework/boundary-components.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/lib/metadata/generate/icon-mark.js */ \"(rsc)/./node_modules/next/dist/lib/metadata/generate/icon-mark.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/next-devtools/userspace/app/segment-explorer-node.js */ \"(rsc)/./node_modules/next/dist/next-devtools/userspace/app/segment-explorer-node.js\", 23));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNub2RlX21vZHVsZXMlNUMlNUNuZXh0JTVDJTVDZGlzdCU1QyU1Q2NsaWVudCU1QyU1Q2NvbXBvbmVudHMlNUMlNUNidWlsdGluJTVDJTVDZ2xvYmFsLWVycm9yLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNub2RlX21vZHVsZXMlNUMlNUNuZXh0JTVDJTVDZGlzdCU1QyU1Q2NsaWVudCU1QyU1Q2NvbXBvbmVudHMlNUMlNUNjbGllbnQtcGFnZS5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjJDJTNBJTVDJTVDTW9tbXklMjBMdWN5JTVDJTVDUHJvamVjdHMlNUMlNUNMdWNpZCUyMERyZWFtJTVDJTVDbm9kZV9tb2R1bGVzJTVDJTVDbmV4dCU1QyU1Q2Rpc3QlNUMlNUNjbGllbnQlNUMlNUNjb21wb25lbnRzJTVDJTVDY2xpZW50LXNlZ21lbnQuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q2h0dHAtYWNjZXNzLWZhbGxiYWNrJTVDJTVDZXJyb3ItYm91bmRhcnkuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q2xheW91dC1yb3V0ZXIuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q21ldGFkYXRhJTVDJTVDYXN5bmMtbWV0YWRhdGEuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q3JlbmRlci1mcm9tLXRlbXBsYXRlLWNvbnRleHQuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDbGliJTVDJTVDZnJhbWV3b3JrJTVDJTVDYm91bmRhcnktY29tcG9uZW50cy5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjJDJTNBJTVDJTVDTW9tbXklMjBMdWN5JTVDJTVDUHJvamVjdHMlNUMlNUNMdWNpZCUyMERyZWFtJTVDJTVDbm9kZV9tb2R1bGVzJTVDJTVDbmV4dCU1QyU1Q2Rpc3QlNUMlNUNsaWIlNUMlNUNtZXRhZGF0YSU1QyU1Q2dlbmVyYXRlJTVDJTVDaWNvbi1tYXJrLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNub2RlX21vZHVsZXMlNUMlNUNuZXh0JTVDJTVDZGlzdCU1QyU1Q25leHQtZGV2dG9vbHMlNUMlNUN1c2Vyc3BhY2UlNUMlNUNhcHAlNUMlNUNzZWdtZW50LWV4cGxvcmVyLW5vZGUuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0Qmc2VydmVyPXRydWUhIiwibWFwcGluZ3MiOiJBQUFBLHNQQUFrSjtBQUNsSjtBQUNBLG9PQUF3STtBQUN4STtBQUNBLDBPQUEySTtBQUMzSTtBQUNBLG9SQUFpSztBQUNqSztBQUNBLHdPQUEwSTtBQUMxSTtBQUNBLDRQQUFxSjtBQUNySjtBQUNBLHNRQUF5SjtBQUN6SjtBQUNBLDRPQUE0STtBQUM1STtBQUNBLHdPQUEySTtBQUMzSTtBQUNBLDRRQUE2SiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGNsaWVudFxcXFxjb21wb25lbnRzXFxcXGJ1aWx0aW5cXFxcZ2xvYmFsLWVycm9yLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxNb21teSBMdWN5XFxcXFByb2plY3RzXFxcXEx1Y2lkIERyZWFtXFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxcY2xpZW50LXBhZ2UuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkM6XFxcXE1vbW15IEx1Y3lcXFxcUHJvamVjdHNcXFxcTHVjaWQgRHJlYW1cXFxcbm9kZV9tb2R1bGVzXFxcXG5leHRcXFxcZGlzdFxcXFxjbGllbnRcXFxcY29tcG9uZW50c1xcXFxjbGllbnQtc2VnbWVudC5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGNsaWVudFxcXFxjb21wb25lbnRzXFxcXGh0dHAtYWNjZXNzLWZhbGxiYWNrXFxcXGVycm9yLWJvdW5kYXJ5LmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxNb21teSBMdWN5XFxcXFByb2plY3RzXFxcXEx1Y2lkIERyZWFtXFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxcbGF5b3V0LXJvdXRlci5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGNsaWVudFxcXFxjb21wb25lbnRzXFxcXG1ldGFkYXRhXFxcXGFzeW5jLW1ldGFkYXRhLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxNb21teSBMdWN5XFxcXFByb2plY3RzXFxcXEx1Y2lkIERyZWFtXFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxccmVuZGVyLWZyb20tdGVtcGxhdGUtY29udGV4dC5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGxpYlxcXFxmcmFtZXdvcmtcXFxcYm91bmRhcnktY29tcG9uZW50cy5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGxpYlxcXFxtZXRhZGF0YVxcXFxnZW5lcmF0ZVxcXFxpY29uLW1hcmsuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkM6XFxcXE1vbW15IEx1Y3lcXFxcUHJvamVjdHNcXFxcTHVjaWQgRHJlYW1cXFxcbm9kZV9tb2R1bGVzXFxcXG5leHRcXFxcZGlzdFxcXFxuZXh0LWRldnRvb2xzXFxcXHVzZXJzcGFjZVxcXFxhcHBcXFxcc2VnbWVudC1leHBsb3Jlci1ub2RlLmpzXCIpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cbuiltin%5C%5Cglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Chttp-access-fallback%5C%5Cerror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Clayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cmetadata%5C%5Casync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Crender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cframework%5C%5Cboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cmetadata%5C%5Cgenerate%5C%5Cicon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cnext-devtools%5C%5Cuserspace%5C%5Capp%5C%5Csegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./app/components/AchievementTriggerManager.tsx":
/*!******************************************************!*\
  !*** ./app/components/AchievementTriggerManager.tsx ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AchievementTriggerManager)\n/* harmony export */ });\n/* harmony import */ var _hooks_useShameAchievements__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../hooks/useShameAchievements */ \"(ssr)/./app/hooks/useShameAchievements.ts\");\n/* harmony import */ var _hooks_useDungeonAchievements__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../hooks/useDungeonAchievements */ \"(ssr)/./app/hooks/useDungeonAchievements.ts\");\n/* harmony import */ var _hooks_useCompanionAchievements__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../hooks/useCompanionAchievements */ \"(ssr)/./app/hooks/useCompanionAchievements.ts\");\n/* harmony import */ var _hooks_useRitualAchievements__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../hooks/useRitualAchievements */ \"(ssr)/./app/hooks/useRitualAchievements.ts\");\n/* harmony import */ var _hooks_useMapAchievements__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../hooks/useMapAchievements */ \"(ssr)/./app/hooks/useMapAchievements.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\n/**\r\n * This is a client-side component that exists only to instantiate the achievement trigger hooks.\r\n * These hooks listen to various state changes in the application and trigger achievements accordingly.\r\n * It renders no UI and has no direct effect on the component tree otherwise.\r\n */ function AchievementTriggerManager() {\n    (0,_hooks_useShameAchievements__WEBPACK_IMPORTED_MODULE_0__.useShameAchievements)();\n    (0,_hooks_useDungeonAchievements__WEBPACK_IMPORTED_MODULE_1__.useDungeonAchievements)();\n    (0,_hooks_useCompanionAchievements__WEBPACK_IMPORTED_MODULE_2__.useCompanionAchievements)();\n    (0,_hooks_useRitualAchievements__WEBPACK_IMPORTED_MODULE_3__.useRitualAchievements)();\n    (0,_hooks_useMapAchievements__WEBPACK_IMPORTED_MODULE_4__.useMapAchievements)();\n    return null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvY29tcG9uZW50cy9BY2hpZXZlbWVudFRyaWdnZXJNYW5hZ2VyLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7NkRBRXFFO0FBQ0k7QUFDSTtBQUNOO0FBQ047QUFFakU7Ozs7Q0FJQyxHQUNjLFNBQVNLO0lBQ3RCTCxpRkFBb0JBO0lBQ3BCQyxxRkFBc0JBO0lBQ3RCQyx5RkFBd0JBO0lBQ3hCQyxtRkFBcUJBO0lBQ3JCQyw2RUFBa0JBO0lBRWxCLE9BQU87QUFDVCIsInNvdXJjZXMiOlsiQzpcXE1vbW15IEx1Y3lcXFByb2plY3RzXFxMdWNpZCBEcmVhbVxcYXBwXFxjb21wb25lbnRzXFxBY2hpZXZlbWVudFRyaWdnZXJNYW5hZ2VyLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XHJcblxyXG5pbXBvcnQgeyB1c2VTaGFtZUFjaGlldmVtZW50cyB9IGZyb20gXCIuLi9ob29rcy91c2VTaGFtZUFjaGlldmVtZW50c1wiO1xyXG5pbXBvcnQgeyB1c2VEdW5nZW9uQWNoaWV2ZW1lbnRzIH0gZnJvbSBcIi4uL2hvb2tzL3VzZUR1bmdlb25BY2hpZXZlbWVudHNcIjtcclxuaW1wb3J0IHsgdXNlQ29tcGFuaW9uQWNoaWV2ZW1lbnRzIH0gZnJvbSBcIi4uL2hvb2tzL3VzZUNvbXBhbmlvbkFjaGlldmVtZW50c1wiO1xyXG5pbXBvcnQgeyB1c2VSaXR1YWxBY2hpZXZlbWVudHMgfSBmcm9tIFwiLi4vaG9va3MvdXNlUml0dWFsQWNoaWV2ZW1lbnRzXCI7XHJcbmltcG9ydCB7IHVzZU1hcEFjaGlldmVtZW50cyB9IGZyb20gXCIuLi9ob29rcy91c2VNYXBBY2hpZXZlbWVudHNcIjtcclxuXHJcbi8qKlxyXG4gKiBUaGlzIGlzIGEgY2xpZW50LXNpZGUgY29tcG9uZW50IHRoYXQgZXhpc3RzIG9ubHkgdG8gaW5zdGFudGlhdGUgdGhlIGFjaGlldmVtZW50IHRyaWdnZXIgaG9va3MuXHJcbiAqIFRoZXNlIGhvb2tzIGxpc3RlbiB0byB2YXJpb3VzIHN0YXRlIGNoYW5nZXMgaW4gdGhlIGFwcGxpY2F0aW9uIGFuZCB0cmlnZ2VyIGFjaGlldmVtZW50cyBhY2NvcmRpbmdseS5cclxuICogSXQgcmVuZGVycyBubyBVSSBhbmQgaGFzIG5vIGRpcmVjdCBlZmZlY3Qgb24gdGhlIGNvbXBvbmVudCB0cmVlIG90aGVyd2lzZS5cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFjaGlldmVtZW50VHJpZ2dlck1hbmFnZXIoKSB7XHJcbiAgdXNlU2hhbWVBY2hpZXZlbWVudHMoKTtcclxuICB1c2VEdW5nZW9uQWNoaWV2ZW1lbnRzKCk7XHJcbiAgdXNlQ29tcGFuaW9uQWNoaWV2ZW1lbnRzKCk7XHJcbiAgdXNlUml0dWFsQWNoaWV2ZW1lbnRzKCk7XHJcbiAgdXNlTWFwQWNoaWV2ZW1lbnRzKCk7XHJcblxyXG4gIHJldHVybiBudWxsO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJ1c2VTaGFtZUFjaGlldmVtZW50cyIsInVzZUR1bmdlb25BY2hpZXZlbWVudHMiLCJ1c2VDb21wYW5pb25BY2hpZXZlbWVudHMiLCJ1c2VSaXR1YWxBY2hpZXZlbWVudHMiLCJ1c2VNYXBBY2hpZXZlbWVudHMiLCJBY2hpZXZlbWVudFRyaWdnZXJNYW5hZ2VyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/components/AchievementTriggerManager.tsx\n");

/***/ }),

/***/ "(ssr)/./app/components/ThemeController.tsx":
/*!********************************************!*\
  !*** ./app/components/ThemeController.tsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   isBrightTheme: () => (/* binding */ isBrightTheme)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* __next_internal_client_entry_do_not_use__ isBrightTheme,default auto */ \n// Helper: detect bright themes by name or computed body background\nconst isBrightTheme = (theme)=>[\n        \"Femboy Peach\",\n        \"Lucid Pink\",\n        \"Candy Vibe\",\n        \"Bubblegirl\"\n    ].includes(theme) ||  false && 0;\nfunction ThemeController() {\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"ThemeController.useEffect\": ()=>{\n            const apply = {\n                \"ThemeController.useEffect.apply\": ()=>{\n                    if (typeof document === \"undefined\") return;\n                    const root = document.documentElement;\n                    const body = document.body;\n                    try {\n                        const theme = localStorage.getItem(\"lucid_theme\") || localStorage.getItem(\"theme\") || \"peach\";\n                        const brightness = (localStorage.getItem(\"lucid_brightness\") || \"bright\").toLowerCase();\n                        const autoDim = (localStorage.getItem(\"autoDimBrightThemes\") || \"off\").toLowerCase();\n                        root.setAttribute(\"data-theme\", theme);\n                        body.setAttribute(\"data-theme\", theme);\n                        body.setAttribute(\"data-brightness\", brightness === \"low\" ? \"low\" : \"bright\");\n                        root.setAttribute(\"data-auto-dim\", autoDim === \"on\" || autoDim === \"true\" ? \"on\" : \"off\");\n                        body.setAttribute(\"data-auto-dim\", autoDim === \"on\" || autoDim === \"true\" ? \"on\" : \"off\");\n                    } catch  {}\n                }\n            }[\"ThemeController.useEffect.apply\"];\n            apply();\n            const onStorage = {\n                \"ThemeController.useEffect.onStorage\": (e)=>{\n                    if (!e.key || [\n                        \"lucid_theme\",\n                        \"theme\",\n                        \"lucid_brightness\",\n                        \"autoDimBrightThemes\"\n                    ].includes(e.key)) apply();\n                }\n            }[\"ThemeController.useEffect.onStorage\"];\n            window.addEventListener(\"storage\", onStorage);\n            return ({\n                \"ThemeController.useEffect\": ()=>window.removeEventListener(\"storage\", onStorage)\n            })[\"ThemeController.useEffect\"];\n        }\n    }[\"ThemeController.useEffect\"], []);\n    return null;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ThemeController);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvY29tcG9uZW50cy9UaGVtZUNvbnRyb2xsZXIudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7MkVBQ2tDO0FBRWxDLG1FQUFtRTtBQUM1RCxNQUFNQyxnQkFBZ0IsQ0FBQ0MsUUFDNUI7UUFBQztRQUFnQjtRQUFjO1FBQWM7S0FBYSxDQUFDQyxRQUFRLENBQUNELFVBQ25FLE1BQTZCLElBQUlFLENBQStELENBQUU7QUFFckcsU0FBU0k7SUFDUFIsZ0RBQVNBO3FDQUFDO1lBQ1IsTUFBTVM7bURBQVE7b0JBQ1osSUFBSSxPQUFPSixhQUFhLGFBQWE7b0JBQ3JDLE1BQU1LLE9BQU9MLFNBQVNNLGVBQWU7b0JBQ3JDLE1BQU1MLE9BQU9ELFNBQVNDLElBQUk7b0JBQzFCLElBQUk7d0JBQ1IsTUFBTUosUUFBUVUsYUFBYUMsT0FBTyxDQUFDLGtCQUFrQkQsYUFBYUMsT0FBTyxDQUFDLFlBQVk7d0JBQ2hGLE1BQU1DLGFBQWEsQ0FBQ0YsYUFBYUMsT0FBTyxDQUFDLHVCQUF1QixRQUFPLEVBQUdFLFdBQVc7d0JBQ3JGLE1BQU1DLFVBQVUsQ0FBQ0osYUFBYUMsT0FBTyxDQUFDLDBCQUEwQixLQUFJLEVBQUdFLFdBQVc7d0JBRWxGTCxLQUFLTyxZQUFZLENBQUMsY0FBY2Y7d0JBQ2hDSSxLQUFLVyxZQUFZLENBQUMsY0FBY2Y7d0JBQ2hDSSxLQUFLVyxZQUFZLENBQUMsbUJBQW1CSCxlQUFlLFFBQVEsUUFBUTt3QkFDcEVKLEtBQUtPLFlBQVksQ0FBQyxpQkFBaUJELFlBQVksUUFBUUEsWUFBWSxTQUFTLE9BQU87d0JBQ25GVixLQUFLVyxZQUFZLENBQUMsaUJBQWlCRCxZQUFZLFFBQVFBLFlBQVksU0FBUyxPQUFPO29CQUNyRixFQUFFLE9BQU0sQ0FBQztnQkFDWDs7WUFFQVA7WUFDQSxNQUFNUzt1REFBWSxDQUFDQztvQkFDakIsSUFBSSxDQUFDQSxFQUFFQyxHQUFHLElBQUk7d0JBQUM7d0JBQWU7d0JBQVM7d0JBQW9CO3FCQUFzQixDQUFDakIsUUFBUSxDQUFDZ0IsRUFBRUMsR0FBRyxHQUFHWDtnQkFDckc7O1lBQ0FZLE9BQU9DLGdCQUFnQixDQUFDLFdBQVdKO1lBQ25DOzZDQUFPLElBQU1HLE9BQU9FLG1CQUFtQixDQUFDLFdBQVdMOztRQUNyRDtvQ0FBRyxFQUFFO0lBRUwsT0FBTztBQUNUO0FBRUEsaUVBQWVWLGVBQWVBLEVBQUMiLCJzb3VyY2VzIjpbIkM6XFxNb21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxcY29tcG9uZW50c1xcVGhlbWVDb250cm9sbGVyLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBIZWxwZXI6IGRldGVjdCBicmlnaHQgdGhlbWVzIGJ5IG5hbWUgb3IgY29tcHV0ZWQgYm9keSBiYWNrZ3JvdW5kXG5leHBvcnQgY29uc3QgaXNCcmlnaHRUaGVtZSA9ICh0aGVtZTogc3RyaW5nKSA9PlxuICBbXCJGZW1ib3kgUGVhY2hcIiwgXCJMdWNpZCBQaW5rXCIsIFwiQ2FuZHkgVmliZVwiLCBcIkJ1YmJsZWdpcmxcIl0uaW5jbHVkZXModGhlbWUpIHx8XG4gICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuYmFja2dyb3VuZENvbG9yLmluY2x1ZGVzKFwiMjU1XCIpKTtcblxuZnVuY3Rpb24gVGhlbWVDb250cm9sbGVyKCkge1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGFwcGx5ID0gKCkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xuICAgICAgY29uc3Qgcm9vdCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuICAgICAgdHJ5IHtcbiAgY29uc3QgdGhlbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImx1Y2lkX3RoZW1lXCIpIHx8IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidGhlbWVcIikgfHwgXCJwZWFjaFwiO1xuICAgICAgICBjb25zdCBicmlnaHRuZXNzID0gKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibHVjaWRfYnJpZ2h0bmVzc1wiKSB8fCBcImJyaWdodFwiKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBhdXRvRGltID0gKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiYXV0b0RpbUJyaWdodFRoZW1lc1wiKSB8fCBcIm9mZlwiKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIHJvb3Quc2V0QXR0cmlidXRlKFwiZGF0YS10aGVtZVwiLCB0aGVtZSk7XG4gICAgICAgIGJvZHkuc2V0QXR0cmlidXRlKFwiZGF0YS10aGVtZVwiLCB0aGVtZSk7XG4gICAgICAgIGJvZHkuc2V0QXR0cmlidXRlKFwiZGF0YS1icmlnaHRuZXNzXCIsIGJyaWdodG5lc3MgPT09IFwibG93XCIgPyBcImxvd1wiIDogXCJicmlnaHRcIik7XG4gICAgICAgIHJvb3Quc2V0QXR0cmlidXRlKFwiZGF0YS1hdXRvLWRpbVwiLCBhdXRvRGltID09PSBcIm9uXCIgfHwgYXV0b0RpbSA9PT0gXCJ0cnVlXCIgPyBcIm9uXCIgOiBcIm9mZlwiKTtcbiAgICAgICAgYm9keS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWF1dG8tZGltXCIsIGF1dG9EaW0gPT09IFwib25cIiB8fCBhdXRvRGltID09PSBcInRydWVcIiA/IFwib25cIiA6IFwib2ZmXCIpO1xuICAgICAgfSBjYXRjaCB7fVxuICAgIH07XG5cbiAgICBhcHBseSgpO1xuICAgIGNvbnN0IG9uU3RvcmFnZSA9IChlOiBTdG9yYWdlRXZlbnQpID0+IHtcbiAgICAgIGlmICghZS5rZXkgfHwgW1wibHVjaWRfdGhlbWVcIiwgXCJ0aGVtZVwiLCBcImx1Y2lkX2JyaWdodG5lc3NcIiwgXCJhdXRvRGltQnJpZ2h0VGhlbWVzXCJdLmluY2x1ZGVzKGUua2V5KSkgYXBwbHkoKTtcbiAgICB9O1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLCBvblN0b3JhZ2UpO1xuICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgb25TdG9yYWdlKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgZGVmYXVsdCBUaGVtZUNvbnRyb2xsZXI7XG5cbiJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJpc0JyaWdodFRoZW1lIiwidGhlbWUiLCJpbmNsdWRlcyIsImdldENvbXB1dGVkU3R5bGUiLCJkb2N1bWVudCIsImJvZHkiLCJiYWNrZ3JvdW5kQ29sb3IiLCJUaGVtZUNvbnRyb2xsZXIiLCJhcHBseSIsInJvb3QiLCJkb2N1bWVudEVsZW1lbnQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiYnJpZ2h0bmVzcyIsInRvTG93ZXJDYXNlIiwiYXV0b0RpbSIsInNldEF0dHJpYnV0ZSIsIm9uU3RvcmFnZSIsImUiLCJrZXkiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/components/ThemeController.tsx\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useAchievements.ts":
/*!**************************************!*\
  !*** ./app/hooks/useAchievements.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAchievements: () => (/* binding */ useAchievements)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _data_achievements_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../data/achievements.json */ \"(ssr)/./data/achievements.json\");\n/* harmony import */ var _useShame__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useShame */ \"(ssr)/./app/hooks/useShame.ts\");\n/* harmony import */ var _useDungeons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useDungeons */ \"(ssr)/./app/hooks/useDungeons.ts\");\n/* harmony import */ var _useCompanions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useCompanions */ \"(ssr)/./app/hooks/useCompanions.ts\");\n/* harmony import */ var _useDreamJournal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./useDreamJournal */ \"(ssr)/./app/hooks/useDreamJournal.ts\");\n/* harmony import */ var _useRitualsEngine__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./useRitualsEngine */ \"(ssr)/./app/hooks/useRitualsEngine.ts\");\n/* harmony import */ var _usePunishments__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./usePunishments */ \"(ssr)/./app/hooks/usePunishments.ts\");\n/* harmony import */ var _useInventory__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./useInventory */ \"(ssr)/./app/hooks/useInventory.ts\");\n/* __next_internal_client_entry_do_not_use__ useAchievements auto */ \n\n\n\n\n\n\n\n\n\n// This would be a real toast library\nconst showToast = (message)=>{\n    console.log(`TOAST: ${message}`);\n// In a real app, you'd integrate a library like react-hot-toast here\n};\nfunction useAchievements() {\n    const [achievements, setAchievements] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)('achievements', {\n        \"useAchievements.usePersistentState\": ()=>_data_achievements_json__WEBPACK_IMPORTED_MODULE_2__\n    }[\"useAchievements.usePersistentState\"]);\n    const { shame } = (0,_useShame__WEBPACK_IMPORTED_MODULE_3__.useShame)();\n    const { dungeons } = (0,_useDungeons__WEBPACK_IMPORTED_MODULE_4__.useDungeons)();\n    const { companions } = (0,_useCompanions__WEBPACK_IMPORTED_MODULE_5__.useCompanions)();\n    const { entries } = (0,_useDreamJournal__WEBPACK_IMPORTED_MODULE_6__.useDreamJournal)();\n    const { progressById: ritualProgressById } = (0,_useRitualsEngine__WEBPACK_IMPORTED_MODULE_7__.useRitualsEngine)();\n    const { activePunishments } = (0,_usePunishments__WEBPACK_IMPORTED_MODULE_8__.usePunishments)();\n    const { awardXp, awardTokens } = (0,_useInventory__WEBPACK_IMPORTED_MODULE_9__.useInventory)();\n    const unlockAchievement = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useAchievements.useCallback[unlockAchievement]\": (achievementId)=>{\n            setAchievements({\n                \"useAchievements.useCallback[unlockAchievement]\": (prev)=>{\n                    const achievement = prev.find({\n                        \"useAchievements.useCallback[unlockAchievement].achievement\": (a)=>a.id === achievementId\n                    }[\"useAchievements.useCallback[unlockAchievement].achievement\"]);\n                    if (achievement && !achievement.unlocked) {\n                        showToast(`🏆 Achievement Unlocked: ${achievement.title}!`);\n                        // Grant rewards\n                        if (achievement.reward.xp) {\n                            awardXp(achievement.reward.xp);\n                        }\n                        if (achievement.reward.tokens) {\n                            awardTokens(achievement.reward.tokens);\n                        }\n                        // TODO: Add title reward logic\n                        return prev.map({\n                            \"useAchievements.useCallback[unlockAchievement]\": (a)=>a.id === achievementId ? {\n                                    ...a,\n                                    unlocked: true,\n                                    date: new Date().toISOString()\n                                } : a\n                        }[\"useAchievements.useCallback[unlockAchievement]\"]);\n                    }\n                    return prev;\n                }\n            }[\"useAchievements.useCallback[unlockAchievement]\"]);\n        }\n    }[\"useAchievements.useCallback[unlockAchievement]\"], [\n        setAchievements,\n        awardXp,\n        awardTokens\n    ]);\n    const triggerAchievement = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useAchievements.useCallback[triggerAchievement]\": (type, value)=>{\n            achievements.forEach({\n                \"useAchievements.useCallback[triggerAchievement]\": (achievement)=>{\n                    if (achievement.unlocked) return;\n                    const { trigger } = achievement;\n                    let conditionMet = false;\n                    if (trigger.type === type) {\n                        switch(trigger.type){\n                            case 'MAP_NODE_UNLOCKED':\n                                if (trigger.value === value) {\n                                    conditionMet = true;\n                                }\n                                break;\n                            case 'MAP_ALL_NODES_UNLOCKED':\n                                conditionMet = true; // The check is now done in the calling hook\n                                break;\n                        }\n                    }\n                    if (conditionMet) {\n                        unlockAchievement(achievement.id);\n                    }\n                }\n            }[\"useAchievements.useCallback[triggerAchievement]\"]);\n        }\n    }[\"useAchievements.useCallback[triggerAchievement]\"], [\n        achievements,\n        unlockAchievement\n    ]);\n    const checkTriggers = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useAchievements.useCallback[checkTriggers]\": ()=>{\n            if (!achievements) return;\n            achievements.forEach({\n                \"useAchievements.useCallback[checkTriggers]\": (achievement)=>{\n                    if (achievement.unlocked) return;\n                    const { trigger } = achievement;\n                    let conditionMet = false;\n                    switch(trigger.type){\n                        case 'SHAME_COUNTER':\n                            if (shame[trigger.counter] >= trigger.value) {\n                                conditionMet = true;\n                            }\n                            break;\n                        case 'DUNGEON_CLEARED':\n                            const clearedDungeons = dungeons.filter({\n                                \"useAchievements.useCallback[checkTriggers]\": (d)=>d.completed\n                            }[\"useAchievements.useCallback[checkTriggers]\"]).length;\n                            if (clearedDungeons >= trigger.value) {\n                                conditionMet = true;\n                            }\n                            break;\n                        case 'COMPANION_EVOLVED':\n                            const evolvedCompanions = companions.filter({\n                                \"useAchievements.useCallback[checkTriggers]\": (c)=>(c.evolutionTree || c.forms || []).length > 1\n                            }[\"useAchievements.useCallback[checkTriggers]\"]).length; // Simplified\n                            if (evolvedCompanions >= trigger.value) {\n                                conditionMet = true;\n                            }\n                            break;\n                        case 'DREAM_TAG':\n                            const hasTag = entries.some({\n                                \"useAchievements.useCallback[checkTriggers].hasTag\": (e)=>e.tags.includes(trigger.value)\n                            }[\"useAchievements.useCallback[checkTriggers].hasTag\"]);\n                            if (hasTag) {\n                                conditionMet = true;\n                            }\n                            break;\n                        case 'CONFESSION_LOGGED':\n                            if (shame.confessions.length >= trigger.value) {\n                                conditionMet = true;\n                            }\n                            break;\n                        case 'RITUAL_COMPLETED':\n                            const completedRituals = Object.values(ritualProgressById).filter({\n                                \"useAchievements.useCallback[checkTriggers]\": (p)=>p.completed\n                            }[\"useAchievements.useCallback[checkTriggers]\"]).length;\n                            if (completedRituals >= trigger.value) {\n                                conditionMet = true;\n                            }\n                            break;\n                        case 'PUNISHMENT_TIER_REACHED':\n                            // Assuming tier is the number of active punishments\n                            if (activePunishments.length >= trigger.value) {\n                                conditionMet = true;\n                            }\n                            break;\n                    }\n                    if (conditionMet) {\n                        unlockAchievement(achievement.id);\n                    }\n                }\n            }[\"useAchievements.useCallback[checkTriggers]\"]);\n        }\n    }[\"useAchievements.useCallback[checkTriggers]\"], [\n        achievements,\n        shame,\n        dungeons,\n        companions,\n        entries,\n        ritualProgressById,\n        activePunishments,\n        unlockAchievement\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useAchievements.useEffect\": ()=>{\n            // Debounce or throttle this in a real app if it becomes expensive\n            checkTriggers();\n        }\n    }[\"useAchievements.useEffect\"], [\n        checkTriggers\n    ]);\n    const addAchievement = (newAchievement)=>{\n        const achievementToAdd = {\n            ...newAchievement,\n            unlocked: false,\n            date: null\n        };\n        setAchievements((prev)=>[\n                ...prev,\n                achievementToAdd\n            ]);\n    };\n    const resetAchievements = ()=>{\n        setAchievements(_data_achievements_json__WEBPACK_IMPORTED_MODULE_2__);\n    };\n    return {\n        achievements,\n        unlockAchievement,\n        addAchievement,\n        resetAchievements,\n        checkTriggers,\n        triggerAchievement\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QW9CbkIsUUFBUUYsS0FBSyxFQUFFO2dDQUNuQ0csZUFBZTs0QkFDbkI7NEJBQ0E7d0JBQ0osS0FBSzs0QkFDRCxvREFBb0Q7NEJBQ3BELElBQUl4QixrQkFBa0IrQixNQUFNLElBQUlSLFFBQVFGLEtBQUssRUFBRTtnQ0FDM0NHLGVBQWU7NEJBQ25COzRCQUNBO29CQUNOO29CQUVBLElBQUlBLGNBQWM7d0JBQ2hCckIsa0JBQWtCRyxZQUFZRyxFQUFFO29CQUNsQztnQkFDRjs7UUFDRjtxREFBRztRQUFDakI7UUFBY0U7UUFBT0M7UUFBVUM7UUFBWUM7UUFBU0U7UUFBb0JDO1FBQW1CRztLQUFrQjtJQUVqSDFCLGdEQUFTQTtxQ0FBQztZQUNSLGtFQUFrRTtZQUNsRWdEO1FBQ0Y7b0NBQUc7UUFBQ0E7S0FBYztJQUVsQixNQUFNcUIsaUJBQWlCLENBQUNDO1FBQ3RCLE1BQU1DLG1CQUFnQztZQUNwQyxHQUFHRCxjQUFjO1lBQ2pCckMsVUFBVTtZQUNWTSxNQUFNO1FBQ1I7UUFDQXZCLGdCQUFnQlksQ0FBQUEsT0FBUTttQkFBSUE7Z0JBQU0yQzthQUFpQjtJQUNyRDtJQUVBLE1BQU1DLG9CQUFvQjtRQUN4QnhELGdCQUFnQmQsb0RBQW1CQTtJQUNyQztJQUVBLE9BQU87UUFBRWE7UUFBY1c7UUFBbUIyQztRQUFnQkc7UUFBbUJ4QjtRQUFlTjtJQUFtQjtBQUNqSCIsInNvdXJjZXMiOlsiQzpcXE1vbW15IEx1Y3lcXFByb2plY3RzXFxMdWNpZCBEcmVhbVxcYXBwXFxob29rc1xcdXNlQWNoaWV2ZW1lbnRzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcclxuXHJcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVzZVBlcnNpc3RlbnRTdGF0ZSB9IGZyb20gJy4vdXNlUGVyc2lzdGVudFN0YXRlJztcclxuaW1wb3J0IGRlZmF1bHRBY2hpZXZlbWVudHMgZnJvbSAnLi4vLi4vZGF0YS9hY2hpZXZlbWVudHMuanNvbic7XHJcbmltcG9ydCB7IHR5cGUgQWNoaWV2ZW1lbnQgfSBmcm9tICcuLi9saWIvYWNoaWV2ZW1lbnRzJztcclxuaW1wb3J0IHsgdXNlU2hhbWUgfSBmcm9tICcuL3VzZVNoYW1lJztcclxuaW1wb3J0IHsgdXNlRHVuZ2VvbnMgfSBmcm9tICcuL3VzZUR1bmdlb25zJztcclxuaW1wb3J0IHsgdXNlQ29tcGFuaW9ucyB9IGZyb20gJy4vdXNlQ29tcGFuaW9ucyc7XHJcbmltcG9ydCB7IHVzZURyZWFtSm91cm5hbCB9IGZyb20gJy4vdXNlRHJlYW1Kb3VybmFsJztcclxuaW1wb3J0IHsgdXNlUml0dWFsc0VuZ2luZSB9IGZyb20gJy4vdXNlUml0dWFsc0VuZ2luZSc7XHJcbmltcG9ydCB7IHVzZVB1bmlzaG1lbnRzIH0gZnJvbSAnLi91c2VQdW5pc2htZW50cyc7XHJcbmltcG9ydCB7IHVzZUludmVudG9yeSB9IGZyb20gJy4vdXNlSW52ZW50b3J5JztcclxuXHJcbi8vIFRoaXMgd291bGQgYmUgYSByZWFsIHRvYXN0IGxpYnJhcnlcclxuY29uc3Qgc2hvd1RvYXN0ID0gKG1lc3NhZ2U6IHN0cmluZykgPT4ge1xyXG4gIGNvbnNvbGUubG9nKGBUT0FTVDogJHttZXNzYWdlfWApO1xyXG4gIC8vIEluIGEgcmVhbCBhcHAsIHlvdSdkIGludGVncmF0ZSBhIGxpYnJhcnkgbGlrZSByZWFjdC1ob3QtdG9hc3QgaGVyZVxyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZUFjaGlldmVtZW50cygpIHtcclxuICBjb25zdCBbYWNoaWV2ZW1lbnRzLCBzZXRBY2hpZXZlbWVudHNdID0gdXNlUGVyc2lzdGVudFN0YXRlPEFjaGlldmVtZW50W10+KCdhY2hpZXZlbWVudHMnLCAoKSA9PiBkZWZhdWx0QWNoaWV2ZW1lbnRzIGFzIEFjaGlldmVtZW50W10pO1xyXG4gIGNvbnN0IHsgc2hhbWUgfSA9IHVzZVNoYW1lKCk7XHJcbiAgY29uc3QgeyBkdW5nZW9ucyB9ID0gdXNlRHVuZ2VvbnMoKTtcclxuICBjb25zdCB7IGNvbXBhbmlvbnMgfSA9IHVzZUNvbXBhbmlvbnMoKTtcclxuICBjb25zdCB7IGVudHJpZXMgfSA9IHVzZURyZWFtSm91cm5hbCgpO1xyXG4gIGNvbnN0IHsgcHJvZ3Jlc3NCeUlkOiByaXR1YWxQcm9ncmVzc0J5SWQgfSA9IHVzZVJpdHVhbHNFbmdpbmUoKTtcclxuICBjb25zdCB7IGFjdGl2ZVB1bmlzaG1lbnRzIH0gPSB1c2VQdW5pc2htZW50cygpO1xyXG4gIGNvbnN0IHsgYXdhcmRYcCwgYXdhcmRUb2tlbnMgfSA9IHVzZUludmVudG9yeSgpO1xyXG5cclxuICBjb25zdCB1bmxvY2tBY2hpZXZlbWVudCA9IHVzZUNhbGxiYWNrKChhY2hpZXZlbWVudElkOiBzdHJpbmcpID0+IHtcclxuICAgIHNldEFjaGlldmVtZW50cyhwcmV2ID0+IHtcclxuICAgICAgY29uc3QgYWNoaWV2ZW1lbnQgPSBwcmV2LmZpbmQoYSA9PiBhLmlkID09PSBhY2hpZXZlbWVudElkKTtcclxuICAgICAgaWYgKGFjaGlldmVtZW50ICYmICFhY2hpZXZlbWVudC51bmxvY2tlZCkge1xyXG4gICAgICAgIHNob3dUb2FzdChg8J+PhiBBY2hpZXZlbWVudCBVbmxvY2tlZDogJHthY2hpZXZlbWVudC50aXRsZX0hYCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gR3JhbnQgcmV3YXJkc1xyXG4gICAgICAgIGlmIChhY2hpZXZlbWVudC5yZXdhcmQueHApIHtcclxuICAgICAgICAgIGF3YXJkWHAoYWNoaWV2ZW1lbnQucmV3YXJkLnhwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFjaGlldmVtZW50LnJld2FyZC50b2tlbnMpIHtcclxuICAgICAgICAgIGF3YXJkVG9rZW5zKGFjaGlldmVtZW50LnJld2FyZC50b2tlbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUT0RPOiBBZGQgdGl0bGUgcmV3YXJkIGxvZ2ljXHJcblxyXG4gICAgICAgIHJldHVybiBwcmV2Lm1hcChhID0+XHJcbiAgICAgICAgICBhLmlkID09PSBhY2hpZXZlbWVudElkXHJcbiAgICAgICAgICAgID8geyAuLi5hLCB1bmxvY2tlZDogdHJ1ZSwgZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH1cclxuICAgICAgICAgICAgOiBhXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcHJldjtcclxuICAgIH0pO1xyXG4gIH0sIFtzZXRBY2hpZXZlbWVudHMsIGF3YXJkWHAsIGF3YXJkVG9rZW5zXSk7XHJcblxyXG4gIGNvbnN0IHRyaWdnZXJBY2hpZXZlbWVudCA9IHVzZUNhbGxiYWNrKCh0eXBlOiBzdHJpbmcsIHZhbHVlPzogYW55KSA9PiB7XHJcbiAgICBhY2hpZXZlbWVudHMuZm9yRWFjaChhY2hpZXZlbWVudCA9PiB7XHJcbiAgICAgIGlmIChhY2hpZXZlbWVudC51bmxvY2tlZCkgcmV0dXJuO1xyXG5cclxuICAgICAgY29uc3QgeyB0cmlnZ2VyIH0gPSBhY2hpZXZlbWVudDtcclxuICAgICAgbGV0IGNvbmRpdGlvbk1ldCA9IGZhbHNlO1xyXG5cclxuICAgICAgaWYgKHRyaWdnZXIudHlwZSA9PT0gdHlwZSkge1xyXG4gICAgICAgIHN3aXRjaCAodHJpZ2dlci50eXBlKSB7XHJcbiAgICAgICAgICBjYXNlICdNQVBfTk9ERV9VTkxPQ0tFRCc6XHJcbiAgICAgICAgICAgIGlmICh0cmlnZ2VyLnZhbHVlID09PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgIGNvbmRpdGlvbk1ldCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlICdNQVBfQUxMX05PREVTX1VOTE9DS0VEJzpcclxuICAgICAgICAgICAgY29uZGl0aW9uTWV0ID0gdHJ1ZTsgLy8gVGhlIGNoZWNrIGlzIG5vdyBkb25lIGluIHRoZSBjYWxsaW5nIGhvb2tcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAvLyBvdGhlciBjYXNlcyBjYW4gYmUgYWRkZWQgaGVyZSBpZiBuZWVkZWQgZm9yIGRpcmVjdCB0cmlnZ2VyaW5nXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoY29uZGl0aW9uTWV0KSB7XHJcbiAgICAgICAgdW5sb2NrQWNoaWV2ZW1lbnQoYWNoaWV2ZW1lbnQuaWQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9LCBbYWNoaWV2ZW1lbnRzLCB1bmxvY2tBY2hpZXZlbWVudF0pO1xyXG5cclxuICBjb25zdCBjaGVja1RyaWdnZXJzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgaWYgKCFhY2hpZXZlbWVudHMpIHJldHVybjtcclxuICAgIGFjaGlldmVtZW50cy5mb3JFYWNoKGFjaGlldmVtZW50ID0+IHtcclxuICAgICAgaWYgKGFjaGlldmVtZW50LnVubG9ja2VkKSByZXR1cm47XHJcblxyXG4gICAgICBjb25zdCB7IHRyaWdnZXIgfSA9IGFjaGlldmVtZW50O1xyXG4gICAgICBsZXQgY29uZGl0aW9uTWV0ID0gZmFsc2U7XHJcblxyXG4gICAgICBzd2l0Y2ggKHRyaWdnZXIudHlwZSkge1xyXG4gICAgICAgIGNhc2UgJ1NIQU1FX0NPVU5URVInOlxyXG4gICAgICAgICAgaWYgKHNoYW1lW3RyaWdnZXIuY291bnRlcl0gPj0gdHJpZ2dlci52YWx1ZSkge1xyXG4gICAgICAgICAgICBjb25kaXRpb25NZXQgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnRFVOR0VPTl9DTEVBUkVEJzpcclxuICAgICAgICAgIGNvbnN0IGNsZWFyZWREdW5nZW9ucyA9IGR1bmdlb25zLmZpbHRlcihkID0+IGQuY29tcGxldGVkKS5sZW5ndGg7XHJcbiAgICAgICAgICBpZiAoY2xlYXJlZER1bmdlb25zID49IHRyaWdnZXIudmFsdWUpIHtcclxuICAgICAgICAgICAgY29uZGl0aW9uTWV0ID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ0NPTVBBTklPTl9FVk9MVkVEJzpcclxuICAgICAgICAgICAgY29uc3QgZXZvbHZlZENvbXBhbmlvbnMgPSBjb21wYW5pb25zLmZpbHRlcihjID0+IChjLmV2b2x1dGlvblRyZWUgfHwgYy5mb3JtcyB8fCBbXSkubGVuZ3RoID4gMSkubGVuZ3RoOyAvLyBTaW1wbGlmaWVkXHJcbiAgICAgICAgICAgIGlmIChldm9sdmVkQ29tcGFuaW9ucyA+PSB0cmlnZ2VyLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25kaXRpb25NZXQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ0RSRUFNX1RBRyc6XHJcbiAgICAgICAgICAgIGNvbnN0IGhhc1RhZyA9IGVudHJpZXMuc29tZShlID0+IGUudGFncy5pbmNsdWRlcyh0cmlnZ2VyLnZhbHVlKSk7XHJcbiAgICAgICAgICAgIGlmIChoYXNUYWcpIHtcclxuICAgICAgICAgICAgICAgIGNvbmRpdGlvbk1ldCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnQ09ORkVTU0lPTl9MT0dHRUQnOlxyXG4gICAgICAgICAgICBpZiAoc2hhbWUuY29uZmVzc2lvbnMubGVuZ3RoID49IHRyaWdnZXIudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbmRpdGlvbk1ldCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnUklUVUFMX0NPTVBMRVRFRCc6XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlZFJpdHVhbHMgPSBPYmplY3QudmFsdWVzKHJpdHVhbFByb2dyZXNzQnlJZCkuZmlsdGVyKHAgPT4gcC5jb21wbGV0ZWQpLmxlbmd0aDtcclxuICAgICAgICAgICAgaWYgKGNvbXBsZXRlZFJpdHVhbHMgPj0gdHJpZ2dlci52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uTWV0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdQVU5JU0hNRU5UX1RJRVJfUkVBQ0hFRCc6XHJcbiAgICAgICAgICAgIC8vIEFzc3VtaW5nIHRpZXIgaXMgdGhlIG51bWJlciBvZiBhY3RpdmUgcHVuaXNobWVudHNcclxuICAgICAgICAgICAgaWYgKGFjdGl2ZVB1bmlzaG1lbnRzLmxlbmd0aCA+PSB0cmlnZ2VyLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25kaXRpb25NZXQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoY29uZGl0aW9uTWV0KSB7XHJcbiAgICAgICAgdW5sb2NrQWNoaWV2ZW1lbnQoYWNoaWV2ZW1lbnQuaWQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9LCBbYWNoaWV2ZW1lbnRzLCBzaGFtZSwgZHVuZ2VvbnMsIGNvbXBhbmlvbnMsIGVudHJpZXMsIHJpdHVhbFByb2dyZXNzQnlJZCwgYWN0aXZlUHVuaXNobWVudHMsIHVubG9ja0FjaGlldmVtZW50XSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAvLyBEZWJvdW5jZSBvciB0aHJvdHRsZSB0aGlzIGluIGEgcmVhbCBhcHAgaWYgaXQgYmVjb21lcyBleHBlbnNpdmVcclxuICAgIGNoZWNrVHJpZ2dlcnMoKTtcclxuICB9LCBbY2hlY2tUcmlnZ2Vyc10pO1xyXG5cclxuICBjb25zdCBhZGRBY2hpZXZlbWVudCA9IChuZXdBY2hpZXZlbWVudDogT21pdDxBY2hpZXZlbWVudCwgJ3VubG9ja2VkJyB8ICdkYXRlJz4pID0+IHtcclxuICAgIGNvbnN0IGFjaGlldmVtZW50VG9BZGQ6IEFjaGlldmVtZW50ID0ge1xyXG4gICAgICAuLi5uZXdBY2hpZXZlbWVudCxcclxuICAgICAgdW5sb2NrZWQ6IGZhbHNlLFxyXG4gICAgICBkYXRlOiBudWxsLFxyXG4gICAgfTtcclxuICAgIHNldEFjaGlldmVtZW50cyhwcmV2ID0+IFsuLi5wcmV2LCBhY2hpZXZlbWVudFRvQWRkXSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcmVzZXRBY2hpZXZlbWVudHMgPSAoKSA9PiB7XHJcbiAgICBzZXRBY2hpZXZlbWVudHMoZGVmYXVsdEFjaGlldmVtZW50cyBhcyBBY2hpZXZlbWVudFtdKTtcclxuICB9O1xyXG5cclxuICByZXR1cm4geyBhY2hpZXZlbWVudHMsIHVubG9ja0FjaGlldmVtZW50LCBhZGRBY2hpZXZlbWVudCwgcmVzZXRBY2hpZXZlbWVudHMsIGNoZWNrVHJpZ2dlcnMsIHRyaWdnZXJBY2hpZXZlbWVudCB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsInVzZVBlcnNpc3RlbnRTdGF0ZSIsImRlZmF1bHRBY2hpZXZlbWVudHMiLCJ1c2VTaGFtZSIsInVzZUR1bmdlb25zIiwidXNlQ29tcGFuaW9ucyIsInVzZURyZWFtSm91cm5hbCIsInVzZVJpdHVhbHNFbmdpbmUiLCJ1c2VQdW5pc2htZW50cyIsInVzZUludmVudG9yeSIsInNob3dUb2FzdCIsIm1lc3NhZ2UiLCJjb25zb2xlIiwibG9nIiwidXNlQWNoaWV2ZW1lbnRzIiwiYWNoaWV2ZW1lbnRzIiwic2V0QWNoaWV2ZW1lbnRzIiwic2hhbWUiLCJkdW5nZW9ucyIsImNvbXBhbmlvbnMiLCJlbnRyaWVzIiwicHJvZ3Jlc3NCeUlkIiwicml0dWFsUHJvZ3Jlc3NCeUlkIiwiYWN0aXZlUHVuaXNobWVudHMiLCJhd2FyZFhwIiwiYXdhcmRUb2tlbnMiLCJ1bmxvY2tBY2hpZXZlbWVudCIsImFjaGlldmVtZW50SWQiLCJwcmV2IiwiYWNoaWV2ZW1lbnQiLCJmaW5kIiwiYSIsImlkIiwidW5sb2NrZWQiLCJ0aXRsZSIsInJld2FyZCIsInhwIiwidG9rZW5zIiwibWFwIiwiZGF0ZSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInRyaWdnZXJBY2hpZXZlbWVudCIsInR5cGUiLCJ2YWx1ZSIsImZvckVhY2giLCJ0cmlnZ2VyIiwiY29uZGl0aW9uTWV0IiwiY2hlY2tUcmlnZ2VycyIsImNvdW50ZXIiLCJjbGVhcmVkRHVuZ2VvbnMiLCJmaWx0ZXIiLCJkIiwiY29tcGxldGVkIiwibGVuZ3RoIiwiZXZvbHZlZENvbXBhbmlvbnMiLCJjIiwiZXZvbHV0aW9uVHJlZSIsImZvcm1zIiwiaGFzVGFnIiwic29tZSIsImUiLCJ0YWdzIiwiaW5jbHVkZXMiLCJjb25mZXNzaW9ucyIsImNvbXBsZXRlZFJpdHVhbHMiLCJPYmplY3QiLCJ2YWx1ZXMiLCJwIiwiYWRkQWNoaWV2ZW1lbnQiLCJuZXdBY2hpZXZlbWVudCIsImFjaGlldmVtZW50VG9BZGQiLCJyZXNldEFjaGlldmVtZW50cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useAchievements.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useBuffs.ts":
/*!*******************************!*\
  !*** ./app/hooks/useBuffs.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useBuffs: () => (/* binding */ useBuffs)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _lib_buffEngine__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/buffEngine */ \"(ssr)/./app/lib/buffEngine.ts\");\n/* __next_internal_client_entry_do_not_use__ useBuffs auto */ \n\n\nfunction normaliseBuff(buff) {\n    return {\n        ...buff,\n        expiresAt: typeof buff.expiresAt === \"number\" ? buff.expiresAt : null\n    };\n}\nfunction useBuffs() {\n    const [buffs, setBuffs] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(\"buffs\", _lib_buffEngine__WEBPACK_IMPORTED_MODULE_2__.cloneDefaultBuffs);\n    const activeBuffs = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useBuffs.useMemo[activeBuffs]\": ()=>{\n            const current = Date.now();\n            return buffs.filter({\n                \"useBuffs.useMemo[activeBuffs]\": (buff)=>(0,_lib_buffEngine__WEBPACK_IMPORTED_MODULE_2__.isBuffActive)(buff, current)\n            }[\"useBuffs.useMemo[activeBuffs]\"]);\n        }\n    }[\"useBuffs.useMemo[activeBuffs]\"], [\n        buffs\n    ]);\n    const applyEvent = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBuffs.useCallback[applyEvent]\": (event, baseValue)=>{\n            if (baseValue <= 0) return 0;\n            const snapshot = buffs;\n            const { value, expiredIds } = (0,_lib_buffEngine__WEBPACK_IMPORTED_MODULE_2__.applyBuffs)(snapshot, event, baseValue, Date.now());\n            if (expiredIds.length > 0) {\n                setBuffs({\n                    \"useBuffs.useCallback[applyEvent]\": (previous)=>previous.map({\n                            \"useBuffs.useCallback[applyEvent]\": (buff)=>expiredIds.includes(buff.id) ? {\n                                    ...buff,\n                                    active: false,\n                                    expiresAt: null\n                                } : buff\n                        }[\"useBuffs.useCallback[applyEvent]\"])\n                }[\"useBuffs.useCallback[applyEvent]\"]);\n            }\n            const shouldRound = event !== \"clarity\";\n            const rounded = shouldRound ? Math.round(value) : Number(value.toFixed(2));\n            return rounded > 0 ? rounded : 0;\n        }\n    }[\"useBuffs.useCallback[applyEvent]\"], [\n        buffs,\n        setBuffs\n    ]);\n    const setBuffActive = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBuffs.useCallback[setBuffActive]\": (id, active)=>{\n            setBuffs({\n                \"useBuffs.useCallback[setBuffActive]\": (previous)=>previous.map({\n                        \"useBuffs.useCallback[setBuffActive]\": (buff)=>buff.id === id ? {\n                                ...buff,\n                                active,\n                                expiresAt: active ? buff.expiresAt ?? null : null\n                            } : buff\n                    }[\"useBuffs.useCallback[setBuffActive]\"])\n            }[\"useBuffs.useCallback[setBuffActive]\"]);\n        }\n    }[\"useBuffs.useCallback[setBuffActive]\"], [\n        setBuffs\n    ]);\n    const activateBuffsBySource = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBuffs.useCallback[activateBuffsBySource]\": (source)=>{\n            setBuffs({\n                \"useBuffs.useCallback[activateBuffsBySource]\": (previous)=>previous.map({\n                        \"useBuffs.useCallback[activateBuffsBySource]\": (buff)=>buff.source === source ? {\n                                ...buff,\n                                active: true\n                            } : buff\n                    }[\"useBuffs.useCallback[activateBuffsBySource]\"])\n            }[\"useBuffs.useCallback[activateBuffsBySource]\"]);\n        }\n    }[\"useBuffs.useCallback[activateBuffsBySource]\"], [\n        setBuffs\n    ]);\n    const deactivateBuffsBySource = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBuffs.useCallback[deactivateBuffsBySource]\": (source)=>{\n            setBuffs({\n                \"useBuffs.useCallback[deactivateBuffsBySource]\": (previous)=>previous.map({\n                        \"useBuffs.useCallback[deactivateBuffsBySource]\": (buff)=>buff.source === source ? {\n                                ...buff,\n                                active: false,\n                                expiresAt: null\n                            } : buff\n                    }[\"useBuffs.useCallback[deactivateBuffsBySource]\"])\n            }[\"useBuffs.useCallback[deactivateBuffsBySource]\"]);\n        }\n    }[\"useBuffs.useCallback[deactivateBuffsBySource]\"], [\n        setBuffs\n    ]);\n    const triggerBuffBySource = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBuffs.useCallback[triggerBuffBySource]\": (source)=>{\n            const activatedAt = Date.now();\n            setBuffs({\n                \"useBuffs.useCallback[triggerBuffBySource]\": (previous)=>previous.map({\n                        \"useBuffs.useCallback[triggerBuffBySource]\": (buff)=>{\n                            if (buff.source !== source) return buff;\n                            const durationMs = (0,_lib_buffEngine__WEBPACK_IMPORTED_MODULE_2__.parseDuration)(buff.duration);\n                            return {\n                                ...buff,\n                                active: true,\n                                expiresAt: durationMs ? activatedAt + durationMs : buff.expiresAt ?? null\n                            };\n                        }\n                    }[\"useBuffs.useCallback[triggerBuffBySource]\"])\n            }[\"useBuffs.useCallback[triggerBuffBySource]\"]);\n        }\n    }[\"useBuffs.useCallback[triggerBuffBySource]\"], [\n        setBuffs\n    ]);\n    const addBuff = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBuffs.useCallback[addBuff]\": (buff)=>{\n            setBuffs({\n                \"useBuffs.useCallback[addBuff]\": (previous)=>{\n                    if (previous.some({\n                        \"useBuffs.useCallback[addBuff]\": (entry)=>entry.id === buff.id\n                    }[\"useBuffs.useCallback[addBuff]\"])) {\n                        return previous.map({\n                            \"useBuffs.useCallback[addBuff]\": (entry)=>entry.id === buff.id ? normaliseBuff(buff) : entry\n                        }[\"useBuffs.useCallback[addBuff]\"]);\n                    }\n                    return [\n                        ...previous,\n                        normaliseBuff(buff)\n                    ];\n                }\n            }[\"useBuffs.useCallback[addBuff]\"]);\n        }\n    }[\"useBuffs.useCallback[addBuff]\"], [\n        setBuffs\n    ]);\n    const updateBuff = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBuffs.useCallback[updateBuff]\": (id, patch)=>{\n            setBuffs({\n                \"useBuffs.useCallback[updateBuff]\": (previous)=>previous.map({\n                        \"useBuffs.useCallback[updateBuff]\": (buff)=>buff.id === id ? normaliseBuff({\n                                ...buff,\n                                ...patch\n                            }) : buff\n                    }[\"useBuffs.useCallback[updateBuff]\"])\n            }[\"useBuffs.useCallback[updateBuff]\"]);\n        }\n    }[\"useBuffs.useCallback[updateBuff]\"], [\n        setBuffs\n    ]);\n    const removeBuff = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBuffs.useCallback[removeBuff]\": (id)=>{\n            setBuffs({\n                \"useBuffs.useCallback[removeBuff]\": (previous)=>previous.filter({\n                        \"useBuffs.useCallback[removeBuff]\": (buff)=>buff.id !== id\n                    }[\"useBuffs.useCallback[removeBuff]\"])\n            }[\"useBuffs.useCallback[removeBuff]\"]);\n        }\n    }[\"useBuffs.useCallback[removeBuff]\"], [\n        setBuffs\n    ]);\n    const toggleBuff = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBuffs.useCallback[toggleBuff]\": (id)=>{\n            setBuffs({\n                \"useBuffs.useCallback[toggleBuff]\": (previous)=>previous.map({\n                        \"useBuffs.useCallback[toggleBuff]\": (buff)=>buff.id === id ? {\n                                ...buff,\n                                active: !buff.active,\n                                expiresAt: !buff.active ? buff.expiresAt : null\n                            } : buff\n                    }[\"useBuffs.useCallback[toggleBuff]\"])\n            }[\"useBuffs.useCallback[toggleBuff]\"]);\n        }\n    }[\"useBuffs.useCallback[toggleBuff]\"], [\n        setBuffs\n    ]);\n    const clearExpired = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBuffs.useCallback[clearExpired]\": ()=>{\n            const current = Date.now();\n            setBuffs({\n                \"useBuffs.useCallback[clearExpired]\": (previous)=>previous.map({\n                        \"useBuffs.useCallback[clearExpired]\": (buff)=>(0,_lib_buffEngine__WEBPACK_IMPORTED_MODULE_2__.isBuffExpired)(buff, current) ? {\n                                ...buff,\n                                active: false,\n                                expiresAt: null\n                            } : buff\n                    }[\"useBuffs.useCallback[clearExpired]\"])\n            }[\"useBuffs.useCallback[clearExpired]\"]);\n        }\n    }[\"useBuffs.useCallback[clearExpired]\"], [\n        setBuffs\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useBuffs.useEffect\": ()=>{\n            if (true) return;\n            const interval = window.setInterval(clearExpired, 60 * 1000);\n            return ({\n                \"useBuffs.useEffect\": ()=>window.clearInterval(interval)\n            })[\"useBuffs.useEffect\"];\n        }\n    }[\"useBuffs.useEffect\"], [\n        clearExpired\n    ]);\n    const getRemainingForBuff = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBuffs.useCallback[getRemainingForBuff]\": (buff, at)=>(0,_lib_buffEngine__WEBPACK_IMPORTED_MODULE_2__.computeRemaining)(buff, at ?? Date.now())\n    }[\"useBuffs.useCallback[getRemainingForBuff]\"], []);\n    return {\n        buffs,\n        activeBuffs,\n        applyEvent,\n        setBuffActive,\n        activateBuffsBySource,\n        deactivateBuffsBySource,\n        triggerBuffBySource,\n        addBuff,\n        updateBuff,\n        removeBuff,\n        toggleBuff,\n        clearExpired,\n        getRemainingForBuff\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDckIsS0FBS3FCLE1BQU07Z0NBQUVwQixXQUFXLENBQUNELEtBQUtxQixNQUFNLEdBQUdyQixLQUFLQyxTQUFTLEdBQUc7NEJBQUssSUFDakZEOzs7UUFHVjsyQ0FDQTtRQUFDSTtLQUFTO0lBR1osTUFBTXVDLGVBQWV0RCxrREFBV0E7OENBQUM7WUFDL0IsTUFBTWlCLFVBQVVDLEtBQUtDLEdBQUc7WUFDeEJKO3NEQUFTLENBQUNhLFdBQ1JBLFNBQVNDLEdBQUc7OERBQUMsQ0FBQ2xCLE9BQ1pILDhEQUFhQSxDQUFDRyxNQUFNTSxXQUNoQjtnQ0FBRSxHQUFHTixJQUFJO2dDQUFFcUIsUUFBUTtnQ0FBT3BCLFdBQVc7NEJBQUssSUFDMUNEOzs7UUFHVjs2Q0FBRztRQUFDSTtLQUFTO0lBRWJkLGdEQUFTQTs4QkFBQztZQUNSLElBQUksSUFBNkIsRUFBRTtZQUNuQyxNQUFNc0QsV0FBV0MsT0FBT0MsV0FBVyxDQUFDSCxjQUFjLEtBQUs7WUFDdkQ7c0NBQU8sSUFBTUUsT0FBT0UsYUFBYSxDQUFDSDs7UUFDcEM7NkJBQUc7UUFBQ0Q7S0FBYTtJQUVqQixNQUFNSyxzQkFBc0IzRCxrREFBV0E7cURBQ3JDLENBQUNXLE1BQVlpRCxLQUFnQnRELGlFQUFnQkEsQ0FBQ0ssTUFBTWlELE1BQU0xQyxLQUFLQyxHQUFHO29EQUNsRSxFQUFFO0lBR0osT0FBTztRQUNMTDtRQUNBRTtRQUNBSztRQUNBa0I7UUFDQUM7UUFDQUU7UUFDQUM7UUFDQUk7UUFDQUc7UUFDQUU7UUFDQUM7UUFDQUM7UUFDQUs7SUFDRjtBQUNGIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXGhvb2tzXFx1c2VCdWZmcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZU1lbW8gfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZVBlcnNpc3RlbnRTdGF0ZSB9IGZyb20gXCIuL3VzZVBlcnNpc3RlbnRTdGF0ZVwiO1xuaW1wb3J0IHtcbiAgYXBwbHlCdWZmcyxcbiAgY2xvbmVEZWZhdWx0QnVmZnMsXG4gIGNvbXB1dGVSZW1haW5pbmcsXG4gIGlzQnVmZkFjdGl2ZSxcbiAgaXNCdWZmRXhwaXJlZCxcbiAgcGFyc2VEdXJhdGlvbixcbiAgdHlwZSBCdWZmLFxuICB0eXBlIEJ1ZmZFdmVudCxcbiAgdHlwZSBCdWZmVHlwZSxcbn0gZnJvbSBcIi4uL2xpYi9idWZmRW5naW5lXCI7XG5cbmZ1bmN0aW9uIG5vcm1hbGlzZUJ1ZmYoYnVmZjogQnVmZik6IEJ1ZmYge1xuICByZXR1cm4ge1xuICAgIC4uLmJ1ZmYsXG4gICAgZXhwaXJlc0F0OiB0eXBlb2YgYnVmZi5leHBpcmVzQXQgPT09IFwibnVtYmVyXCIgPyBidWZmLmV4cGlyZXNBdCA6IG51bGwsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VCdWZmcygpIHtcbiAgY29uc3QgW2J1ZmZzLCBzZXRCdWZmc10gPSB1c2VQZXJzaXN0ZW50U3RhdGU8QnVmZltdPihcImJ1ZmZzXCIsIGNsb25lRGVmYXVsdEJ1ZmZzKTtcblxuICBjb25zdCBhY3RpdmVCdWZmcyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBEYXRlLm5vdygpO1xuICAgIHJldHVybiBidWZmcy5maWx0ZXIoKGJ1ZmYpID0+IGlzQnVmZkFjdGl2ZShidWZmLCBjdXJyZW50KSk7XG4gIH0sIFtidWZmc10pO1xuXG4gIGNvbnN0IGFwcGx5RXZlbnQgPSB1c2VDYWxsYmFjayhcbiAgICAoZXZlbnQ6IEJ1ZmZFdmVudCwgYmFzZVZhbHVlOiBudW1iZXIpID0+IHtcbiAgICAgIGlmIChiYXNlVmFsdWUgPD0gMCkgcmV0dXJuIDA7XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGJ1ZmZzO1xuICAgICAgY29uc3QgeyB2YWx1ZSwgZXhwaXJlZElkcyB9ID0gYXBwbHlCdWZmcyhzbmFwc2hvdCwgZXZlbnQsIGJhc2VWYWx1ZSwgRGF0ZS5ub3coKSk7XG5cbiAgICAgIGlmIChleHBpcmVkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc2V0QnVmZnMoKHByZXZpb3VzKSA9PlxuICAgICAgICAgIHByZXZpb3VzLm1hcCgoYnVmZikgPT5cbiAgICAgICAgICAgIGV4cGlyZWRJZHMuaW5jbHVkZXMoYnVmZi5pZClcbiAgICAgICAgICAgICAgPyB7IC4uLmJ1ZmYsIGFjdGl2ZTogZmFsc2UsIGV4cGlyZXNBdDogbnVsbCB9XG4gICAgICAgICAgICAgIDogYnVmZlxuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc2hvdWxkUm91bmQgPSBldmVudCAhPT0gXCJjbGFyaXR5XCI7XG4gICAgICBjb25zdCByb3VuZGVkID0gc2hvdWxkUm91bmQgPyBNYXRoLnJvdW5kKHZhbHVlKSA6IE51bWJlcih2YWx1ZS50b0ZpeGVkKDIpKTtcbiAgICAgIHJldHVybiByb3VuZGVkID4gMCA/IHJvdW5kZWQgOiAwO1xuICAgIH0sXG4gICAgW2J1ZmZzLCBzZXRCdWZmc11cbiAgKTtcblxuICBjb25zdCBzZXRCdWZmQWN0aXZlID0gdXNlQ2FsbGJhY2soXG4gICAgKGlkOiBzdHJpbmcsIGFjdGl2ZTogYm9vbGVhbikgPT4ge1xuICAgICAgc2V0QnVmZnMoKHByZXZpb3VzKSA9PlxuICAgICAgICBwcmV2aW91cy5tYXAoKGJ1ZmYpID0+XG4gICAgICAgICAgYnVmZi5pZCA9PT0gaWRcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIC4uLmJ1ZmYsXG4gICAgICAgICAgICAgICAgYWN0aXZlLFxuICAgICAgICAgICAgICAgIGV4cGlyZXNBdDogYWN0aXZlID8gYnVmZi5leHBpcmVzQXQgPz8gbnVsbCA6IG51bGwsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogYnVmZlxuICAgICAgICApXG4gICAgICApO1xuICAgIH0sXG4gICAgW3NldEJ1ZmZzXVxuICApO1xuXG4gIGNvbnN0IGFjdGl2YXRlQnVmZnNCeVNvdXJjZSA9IHVzZUNhbGxiYWNrKFxuICAgIChzb3VyY2U6IHN0cmluZykgPT4ge1xuICAgICAgc2V0QnVmZnMoKHByZXZpb3VzKSA9PlxuICAgICAgICBwcmV2aW91cy5tYXAoKGJ1ZmYpID0+XG4gICAgICAgICAgYnVmZi5zb3VyY2UgPT09IHNvdXJjZVxuICAgICAgICAgICAgPyB7IC4uLmJ1ZmYsIGFjdGl2ZTogdHJ1ZSB9XG4gICAgICAgICAgICA6IGJ1ZmZcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9LFxuICAgIFtzZXRCdWZmc11cbiAgKTtcblxuICBjb25zdCBkZWFjdGl2YXRlQnVmZnNCeVNvdXJjZSA9IHVzZUNhbGxiYWNrKFxuICAgIChzb3VyY2U6IHN0cmluZykgPT4ge1xuICAgICAgc2V0QnVmZnMoKHByZXZpb3VzKSA9PlxuICAgICAgICBwcmV2aW91cy5tYXAoKGJ1ZmYpID0+XG4gICAgICAgICAgYnVmZi5zb3VyY2UgPT09IHNvdXJjZVxuICAgICAgICAgICAgPyB7IC4uLmJ1ZmYsIGFjdGl2ZTogZmFsc2UsIGV4cGlyZXNBdDogbnVsbCB9XG4gICAgICAgICAgICA6IGJ1ZmZcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9LFxuICAgIFtzZXRCdWZmc11cbiAgKTtcblxuICBjb25zdCB0cmlnZ2VyQnVmZkJ5U291cmNlID0gdXNlQ2FsbGJhY2soXG4gICAgKHNvdXJjZTogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCBhY3RpdmF0ZWRBdCA9IERhdGUubm93KCk7XG4gICAgICBzZXRCdWZmcygocHJldmlvdXMpID0+XG4gICAgICAgIHByZXZpb3VzLm1hcCgoYnVmZikgPT4ge1xuICAgICAgICAgIGlmIChidWZmLnNvdXJjZSAhPT0gc291cmNlKSByZXR1cm4gYnVmZjtcbiAgICAgICAgICBjb25zdCBkdXJhdGlvbk1zID0gcGFyc2VEdXJhdGlvbihidWZmLmR1cmF0aW9uKTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uYnVmZixcbiAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICAgIGV4cGlyZXNBdDogZHVyYXRpb25NcyA/IGFjdGl2YXRlZEF0ICsgZHVyYXRpb25NcyA6IGJ1ZmYuZXhwaXJlc0F0ID8/IG51bGwsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSxcbiAgICBbc2V0QnVmZnNdXG4gICk7XG5cbiAgY29uc3QgYWRkQnVmZiA9IHVzZUNhbGxiYWNrKFxuICAgIChidWZmOiBCdWZmKSA9PiB7XG4gICAgICBzZXRCdWZmcygocHJldmlvdXMpID0+IHtcbiAgICAgICAgaWYgKHByZXZpb3VzLnNvbWUoKGVudHJ5KSA9PiBlbnRyeS5pZCA9PT0gYnVmZi5pZCkpIHtcbiAgICAgICAgICByZXR1cm4gcHJldmlvdXMubWFwKChlbnRyeSkgPT4gKGVudHJ5LmlkID09PSBidWZmLmlkID8gbm9ybWFsaXNlQnVmZihidWZmKSA6IGVudHJ5KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFsuLi5wcmV2aW91cywgbm9ybWFsaXNlQnVmZihidWZmKV07XG4gICAgICB9KTtcbiAgICB9LFxuICAgIFtzZXRCdWZmc11cbiAgKTtcblxuICBjb25zdCB1cGRhdGVCdWZmID0gdXNlQ2FsbGJhY2soXG4gICAgKGlkOiBzdHJpbmcsIHBhdGNoOiBQYXJ0aWFsPEJ1ZmY+KSA9PiB7XG4gICAgICBzZXRCdWZmcygocHJldmlvdXMpID0+XG4gICAgICAgIHByZXZpb3VzLm1hcCgoYnVmZikgPT5cbiAgICAgICAgICBidWZmLmlkID09PSBpZFxuICAgICAgICAgICAgPyBub3JtYWxpc2VCdWZmKHsgLi4uYnVmZiwgLi4ucGF0Y2ggfSlcbiAgICAgICAgICAgIDogYnVmZlxuICAgICAgICApXG4gICAgICApO1xuICAgIH0sXG4gICAgW3NldEJ1ZmZzXVxuICApO1xuXG4gIGNvbnN0IHJlbW92ZUJ1ZmYgPSB1c2VDYWxsYmFjayhcbiAgICAoaWQ6IHN0cmluZykgPT4ge1xuICAgICAgc2V0QnVmZnMoKHByZXZpb3VzKSA9PiBwcmV2aW91cy5maWx0ZXIoKGJ1ZmYpID0+IGJ1ZmYuaWQgIT09IGlkKSk7XG4gICAgfSxcbiAgICBbc2V0QnVmZnNdXG4gICk7XG5cbiAgY29uc3QgdG9nZ2xlQnVmZiA9IHVzZUNhbGxiYWNrKFxuICAgIChpZDogc3RyaW5nKSA9PiB7XG4gICAgICBzZXRCdWZmcygocHJldmlvdXMpID0+XG4gICAgICAgIHByZXZpb3VzLm1hcCgoYnVmZikgPT5cbiAgICAgICAgICBidWZmLmlkID09PSBpZFxuICAgICAgICAgICAgPyB7IC4uLmJ1ZmYsIGFjdGl2ZTogIWJ1ZmYuYWN0aXZlLCBleHBpcmVzQXQ6ICFidWZmLmFjdGl2ZSA/IGJ1ZmYuZXhwaXJlc0F0IDogbnVsbCB9XG4gICAgICAgICAgICA6IGJ1ZmZcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9LFxuICAgIFtzZXRCdWZmc11cbiAgKTtcblxuICBjb25zdCBjbGVhckV4cGlyZWQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgY3VycmVudCA9IERhdGUubm93KCk7XG4gICAgc2V0QnVmZnMoKHByZXZpb3VzKSA9PlxuICAgICAgcHJldmlvdXMubWFwKChidWZmKSA9PlxuICAgICAgICBpc0J1ZmZFeHBpcmVkKGJ1ZmYsIGN1cnJlbnQpXG4gICAgICAgICAgPyB7IC4uLmJ1ZmYsIGFjdGl2ZTogZmFsc2UsIGV4cGlyZXNBdDogbnVsbCB9XG4gICAgICAgICAgOiBidWZmXG4gICAgICApXG4gICAgKTtcbiAgfSwgW3NldEJ1ZmZzXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xuICAgIGNvbnN0IGludGVydmFsID0gd2luZG93LnNldEludGVydmFsKGNsZWFyRXhwaXJlZCwgNjAgKiAxMDAwKTtcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LmNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICB9LCBbY2xlYXJFeHBpcmVkXSk7XG5cbiAgY29uc3QgZ2V0UmVtYWluaW5nRm9yQnVmZiA9IHVzZUNhbGxiYWNrKFxuICAgIChidWZmOiBCdWZmLCBhdD86IG51bWJlcikgPT4gY29tcHV0ZVJlbWFpbmluZyhidWZmLCBhdCA/PyBEYXRlLm5vdygpKSxcbiAgICBbXVxuICApO1xuXG4gIHJldHVybiB7XG4gICAgYnVmZnMsXG4gICAgYWN0aXZlQnVmZnMsXG4gICAgYXBwbHlFdmVudCxcbiAgICBzZXRCdWZmQWN0aXZlLFxuICAgIGFjdGl2YXRlQnVmZnNCeVNvdXJjZSxcbiAgICBkZWFjdGl2YXRlQnVmZnNCeVNvdXJjZSxcbiAgICB0cmlnZ2VyQnVmZkJ5U291cmNlLFxuICAgIGFkZEJ1ZmYsXG4gICAgdXBkYXRlQnVmZixcbiAgICByZW1vdmVCdWZmLFxuICAgIHRvZ2dsZUJ1ZmYsXG4gICAgY2xlYXJFeHBpcmVkLFxuICAgIGdldFJlbWFpbmluZ0ZvckJ1ZmYsXG4gIH07XG59XG4iXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJ1c2VFZmZlY3QiLCJ1c2VNZW1vIiwidXNlUGVyc2lzdGVudFN0YXRlIiwiYXBwbHlCdWZmcyIsImNsb25lRGVmYXVsdEJ1ZmZzIiwiY29tcHV0ZVJlbWFpbmluZyIsImlzQnVmZkFjdGl2ZSIsImlzQnVmZkV4cGlyZWQiLCJwYXJzZUR1cmF0aW9uIiwibm9ybWFsaXNlQnVmZiIsImJ1ZmYiLCJleHBpcmVzQXQiLCJ1c2VCdWZmcyIsImJ1ZmZzIiwic2V0QnVmZnMiLCJhY3RpdmVCdWZmcyIsImN1cnJlbnQiLCJEYXRlIiwibm93IiwiZmlsdGVyIiwiYXBwbHlFdmVudCIsImV2ZW50IiwiYmFzZVZhbHVlIiwic25hcHNob3QiLCJ2YWx1ZSIsImV4cGlyZWRJZHMiLCJsZW5ndGgiLCJwcmV2aW91cyIsIm1hcCIsImluY2x1ZGVzIiwiaWQiLCJhY3RpdmUiLCJzaG91bGRSb3VuZCIsInJvdW5kZWQiLCJNYXRoIiwicm91bmQiLCJOdW1iZXIiLCJ0b0ZpeGVkIiwic2V0QnVmZkFjdGl2ZSIsImFjdGl2YXRlQnVmZnNCeVNvdXJjZSIsInNvdXJjZSIsImRlYWN0aXZhdGVCdWZmc0J5U291cmNlIiwidHJpZ2dlckJ1ZmZCeVNvdXJjZSIsImFjdGl2YXRlZEF0IiwiZHVyYXRpb25NcyIsImR1cmF0aW9uIiwiYWRkQnVmZiIsInNvbWUiLCJlbnRyeSIsInVwZGF0ZUJ1ZmYiLCJwYXRjaCIsInJlbW92ZUJ1ZmYiLCJ0b2dnbGVCdWZmIiwiY2xlYXJFeHBpcmVkIiwiaW50ZXJ2YWwiLCJ3aW5kb3ciLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJnZXRSZW1haW5pbmdGb3JCdWZmIiwiYXQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useBuffs.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useCompanionAchievements.ts":
/*!***********************************************!*\
  !*** ./app/hooks/useCompanionAchievements.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useCompanionAchievements: () => (/* binding */ useCompanionAchievements)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _useAchievements__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useAchievements */ \"(ssr)/./app/hooks/useAchievements.ts\");\n/* harmony import */ var _useCompanions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useCompanions */ \"(ssr)/./app/hooks/useCompanions.ts\");\n/* __next_internal_client_entry_do_not_use__ useCompanionAchievements auto */ \n\n\n/**\r\n * A custom hook to manage companion-related achievements.\r\n * It listens to changes in companion state and unlocks achievements when their triggers are met.\r\n */ function useCompanionAchievements() {\n    const { achievements, unlockAchievement } = (0,_useAchievements__WEBPACK_IMPORTED_MODULE_1__.useAchievements)();\n    const { companions } = (0,_useCompanions__WEBPACK_IMPORTED_MODULE_2__.useCompanions)();\n    const evolvedCompanionsCount = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useCompanionAchievements.useMemo[evolvedCompanionsCount]\": ()=>{\n            const list = companions ?? [];\n            // A companion is considered \"evolved\" if it has more than one form in the evolution tree.\n            return list.filter({\n                \"useCompanionAchievements.useMemo[evolvedCompanionsCount]\": (c)=>Array.isArray(c.evolutionTree) && c.evolutionTree.length > 1\n            }[\"useCompanionAchievements.useMemo[evolvedCompanionsCount]\"]).length;\n        }\n    }[\"useCompanionAchievements.useMemo[evolvedCompanionsCount]\"], [\n        companions\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useCompanionAchievements.useEffect\": ()=>{\n            if (!achievements || achievements.length === 0) return;\n            const companionAchievements = achievements.filter({\n                \"useCompanionAchievements.useEffect.companionAchievements\": (a)=>!a.unlocked && a.category === 'Companion'\n            }[\"useCompanionAchievements.useEffect.companionAchievements\"]);\n            if (companionAchievements.length === 0) return;\n            companionAchievements.forEach({\n                \"useCompanionAchievements.useEffect\": (achievement)=>{\n                    const { trigger } = achievement;\n                    let conditionMet = false;\n                    if (trigger?.type === 'COMPANION_EVOLVED' && evolvedCompanionsCount >= (trigger.value ?? 1)) {\n                        conditionMet = true;\n                    }\n                    if (conditionMet) {\n                        unlockAchievement(achievement.id);\n                    }\n                }\n            }[\"useCompanionAchievements.useEffect\"]);\n        }\n    }[\"useCompanionAchievements.useEffect\"], [\n        evolvedCompanionsCount,\n        achievements,\n        unlockAchievement\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvaG9va3MvdXNlQ29tcGFuaW9uQWNoaWV2ZW1lbnRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OzhFQUUyQztBQUNTO0FBQ0o7QUFFaEQ7OztDQUdDLEdBQ00sU0FBU0k7SUFDZCxNQUFNLEVBQUVDLFlBQVksRUFBRUMsaUJBQWlCLEVBQUUsR0FBR0osaUVBQWVBO0lBQzNELE1BQU0sRUFBRUssVUFBVSxFQUFFLEdBQUdKLDZEQUFhQTtJQUVwQyxNQUFNSyx5QkFBeUJQLDhDQUFPQTtvRUFBQztZQUNyQyxNQUFNUSxPQUFPRixjQUFjLEVBQUU7WUFDN0IsMEZBQTBGO1lBQzFGLE9BQU9FLEtBQUtDLE1BQU07NEVBQUMsQ0FBQ0MsSUFBV0MsTUFBTUMsT0FBTyxDQUFDLEVBQVdDLGFBQWEsS0FBSyxFQUFXQSxhQUFhLENBQUNDLE1BQU0sR0FBRzsyRUFBR0EsTUFBTTtRQUN2SDttRUFBRztRQUFDUjtLQUFXO0lBRWZQLGdEQUFTQTs4Q0FBQztZQUNSLElBQUksQ0FBQ0ssZ0JBQWdCQSxhQUFhVSxNQUFNLEtBQUssR0FBRztZQUVoRCxNQUFNQyx3QkFBd0JYLGFBQWFLLE1BQU07NEVBQy9DLENBQUNPLElBQU0sQ0FBQ0EsRUFBRUMsUUFBUSxJQUFJRCxFQUFFRSxRQUFRLEtBQUs7O1lBR3ZDLElBQUlILHNCQUFzQkQsTUFBTSxLQUFLLEdBQUc7WUFFeENDLHNCQUFzQkksT0FBTztzREFBQyxDQUFDQztvQkFDN0IsTUFBTSxFQUFFQyxPQUFPLEVBQUUsR0FBR0Q7b0JBQ3BCLElBQUlFLGVBQWU7b0JBRW5CLElBQUlELFNBQVNFLFNBQVMsdUJBQXVCaEIsMEJBQTJCYyxDQUFBQSxRQUFRRyxLQUFLLElBQUksSUFBSTt3QkFDM0ZGLGVBQWU7b0JBQ2pCO29CQUVBLElBQUlBLGNBQWM7d0JBQ2hCakIsa0JBQWtCZSxZQUFZSyxFQUFFO29CQUNsQztnQkFDRjs7UUFDRjs2Q0FBRztRQUFDbEI7UUFBd0JIO1FBQWNDO0tBQWtCO0FBQzlEIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXGhvb2tzXFx1c2VDb21wYW5pb25BY2hpZXZlbWVudHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xyXG5cclxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyB1c2VBY2hpZXZlbWVudHMgfSBmcm9tICcuL3VzZUFjaGlldmVtZW50cyc7XHJcbmltcG9ydCB7IHVzZUNvbXBhbmlvbnMgfSBmcm9tICcuL3VzZUNvbXBhbmlvbnMnO1xyXG5cclxuLyoqXHJcbiAqIEEgY3VzdG9tIGhvb2sgdG8gbWFuYWdlIGNvbXBhbmlvbi1yZWxhdGVkIGFjaGlldmVtZW50cy5cclxuICogSXQgbGlzdGVucyB0byBjaGFuZ2VzIGluIGNvbXBhbmlvbiBzdGF0ZSBhbmQgdW5sb2NrcyBhY2hpZXZlbWVudHMgd2hlbiB0aGVpciB0cmlnZ2VycyBhcmUgbWV0LlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZUNvbXBhbmlvbkFjaGlldmVtZW50cygpIHtcclxuICBjb25zdCB7IGFjaGlldmVtZW50cywgdW5sb2NrQWNoaWV2ZW1lbnQgfSA9IHVzZUFjaGlldmVtZW50cygpO1xyXG4gIGNvbnN0IHsgY29tcGFuaW9ucyB9ID0gdXNlQ29tcGFuaW9ucygpO1xyXG5cclxuICBjb25zdCBldm9sdmVkQ29tcGFuaW9uc0NvdW50ID0gdXNlTWVtbygoKSA9PiB7XHJcbiAgICBjb25zdCBsaXN0ID0gY29tcGFuaW9ucyA/PyBbXTtcclxuICAgIC8vIEEgY29tcGFuaW9uIGlzIGNvbnNpZGVyZWQgXCJldm9sdmVkXCIgaWYgaXQgaGFzIG1vcmUgdGhhbiBvbmUgZm9ybSBpbiB0aGUgZXZvbHV0aW9uIHRyZWUuXHJcbiAgICByZXR1cm4gbGlzdC5maWx0ZXIoKGM6IGFueSkgPT4gQXJyYXkuaXNBcnJheSgoYyBhcyBhbnkpLmV2b2x1dGlvblRyZWUpICYmIChjIGFzIGFueSkuZXZvbHV0aW9uVHJlZS5sZW5ndGggPiAxKS5sZW5ndGg7XHJcbiAgfSwgW2NvbXBhbmlvbnNdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmICghYWNoaWV2ZW1lbnRzIHx8IGFjaGlldmVtZW50cy5sZW5ndGggPT09IDApIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBjb21wYW5pb25BY2hpZXZlbWVudHMgPSBhY2hpZXZlbWVudHMuZmlsdGVyKFxyXG4gICAgICAoYSkgPT4gIWEudW5sb2NrZWQgJiYgYS5jYXRlZ29yeSA9PT0gJ0NvbXBhbmlvbidcclxuICAgICk7XHJcblxyXG4gICAgaWYgKGNvbXBhbmlvbkFjaGlldmVtZW50cy5sZW5ndGggPT09IDApIHJldHVybjtcclxuXHJcbiAgICBjb21wYW5pb25BY2hpZXZlbWVudHMuZm9yRWFjaCgoYWNoaWV2ZW1lbnQpID0+IHtcclxuICAgICAgY29uc3QgeyB0cmlnZ2VyIH0gPSBhY2hpZXZlbWVudCBhcyBhbnk7XHJcbiAgICAgIGxldCBjb25kaXRpb25NZXQgPSBmYWxzZTtcclxuXHJcbiAgICAgIGlmICh0cmlnZ2VyPy50eXBlID09PSAnQ09NUEFOSU9OX0VWT0xWRUQnICYmIGV2b2x2ZWRDb21wYW5pb25zQ291bnQgPj0gKHRyaWdnZXIudmFsdWUgPz8gMSkpIHtcclxuICAgICAgICBjb25kaXRpb25NZXQgPSB0cnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoY29uZGl0aW9uTWV0KSB7XHJcbiAgICAgICAgdW5sb2NrQWNoaWV2ZW1lbnQoYWNoaWV2ZW1lbnQuaWQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9LCBbZXZvbHZlZENvbXBhbmlvbnNDb3VudCwgYWNoaWV2ZW1lbnRzLCB1bmxvY2tBY2hpZXZlbWVudF0pO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VNZW1vIiwidXNlQWNoaWV2ZW1lbnRzIiwidXNlQ29tcGFuaW9ucyIsInVzZUNvbXBhbmlvbkFjaGlldmVtZW50cyIsImFjaGlldmVtZW50cyIsInVubG9ja0FjaGlldmVtZW50IiwiY29tcGFuaW9ucyIsImV2b2x2ZWRDb21wYW5pb25zQ291bnQiLCJsaXN0IiwiZmlsdGVyIiwiYyIsIkFycmF5IiwiaXNBcnJheSIsImV2b2x1dGlvblRyZWUiLCJsZW5ndGgiLCJjb21wYW5pb25BY2hpZXZlbWVudHMiLCJhIiwidW5sb2NrZWQiLCJjYXRlZ29yeSIsImZvckVhY2giLCJhY2hpZXZlbWVudCIsInRyaWdnZXIiLCJjb25kaXRpb25NZXQiLCJ0eXBlIiwidmFsdWUiLCJpZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useCompanionAchievements.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useCompanions.ts":
/*!************************************!*\
  !*** ./app/hooks/useCompanions.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useCompanions: () => (/* binding */ useCompanions)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _lib_companions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/companions */ \"(ssr)/./app/lib/companions.ts\");\n/* __next_internal_client_entry_do_not_use__ useCompanions auto */ \n\n\nfunction useCompanions() {\n    const [companions, setCompanions] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)('companions', _lib_companions__WEBPACK_IMPORTED_MODULE_2__.cloneDefaultCompanions);\n    const gainXp = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useCompanions.useCallback[gainXp]\": (companionId, source, amount)=>{\n            setCompanions({\n                \"useCompanions.useCallback[gainXp]\": (prev)=>{\n                    const companionIndex = prev.findIndex({\n                        \"useCompanions.useCallback[gainXp].companionIndex\": (c)=>c.id === companionId\n                    }[\"useCompanions.useCallback[gainXp].companionIndex\"]);\n                    if (companionIndex === -1) return prev;\n                    const updatedCompanions = [\n                        ...prev\n                    ];\n                    const companion = {\n                        ...updatedCompanions[companionIndex]\n                    };\n                    let newXp = companion.xp + amount;\n                    let newLevel = companion.level;\n                    let neededXp = (0,_lib_companions__WEBPACK_IMPORTED_MODULE_2__.xpNeededForLevel)(newLevel + 1);\n                    while(newXp >= neededXp){\n                        newXp -= neededXp;\n                        newLevel++;\n                        neededXp = (0,_lib_companions__WEBPACK_IMPORTED_MODULE_2__.xpNeededForLevel)(newLevel + 1);\n                    }\n                    companion.xp = newXp;\n                    companion.level = newLevel;\n                    // Check for auto-evolution\n                    if (companion.autoEvolve) {\n                        const nextForm = (0,_lib_companions__WEBPACK_IMPORTED_MODULE_2__.getNextForm)(companion);\n                        if (nextForm && (0,_lib_companions__WEBPACK_IMPORTED_MODULE_2__.canEvolve)(companion)) {\n                            companion.currentForm = nextForm.id;\n                        }\n                    }\n                    updatedCompanions[companionIndex] = companion;\n                    return updatedCompanions;\n                }\n            }[\"useCompanions.useCallback[gainXp]\"]);\n        }\n    }[\"useCompanions.useCallback[gainXp]\"], [\n        setCompanions\n    ]);\n    const changeForm = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useCompanions.useCallback[changeForm]\": (companionId, formId)=>{\n            setCompanions({\n                \"useCompanions.useCallback[changeForm]\": (prev)=>prev.map({\n                        \"useCompanions.useCallback[changeForm]\": (c)=>{\n                            if (c.id === companionId) {\n                                const targetForm = c.evolutionTree.find({\n                                    \"useCompanions.useCallback[changeForm].targetForm\": (f)=>f.id === formId\n                                }[\"useCompanions.useCallback[changeForm].targetForm\"]);\n                                // Only allow changing to an unlocked form\n                                if (targetForm && c.level >= targetForm.unlockLevel) {\n                                    return {\n                                        ...c,\n                                        currentForm: formId\n                                    };\n                                }\n                            }\n                            return c;\n                        }\n                    }[\"useCompanions.useCallback[changeForm]\"])\n            }[\"useCompanions.useCallback[changeForm]\"]);\n        }\n    }[\"useCompanions.useCallback[changeForm]\"], [\n        setCompanions\n    ]);\n    const adjustBond = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useCompanions.useCallback[adjustBond]\": (companionId, amount)=>{\n            setCompanions({\n                \"useCompanions.useCallback[adjustBond]\": (prev)=>prev.map({\n                        \"useCompanions.useCallback[adjustBond]\": (c)=>{\n                            if (c.id === companionId) {\n                                const newBond = Math.max(0, Math.min(100, c.bond + amount));\n                                return {\n                                    ...c,\n                                    bond: newBond\n                                };\n                            }\n                            return c;\n                        }\n                    }[\"useCompanions.useCallback[adjustBond]\"])\n            }[\"useCompanions.useCallback[adjustBond]\"]);\n        }\n    }[\"useCompanions.useCallback[adjustBond]\"], [\n        setCompanions\n    ]);\n    const gainXpForCompanions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useCompanions.useCallback[gainXpForCompanions]\": (source, amount)=>{\n            companions.forEach({\n                \"useCompanions.useCallback[gainXpForCompanions]\": (c)=>gainXp(c.id, source, amount)\n            }[\"useCompanions.useCallback[gainXpForCompanions]\"]);\n        }\n    }[\"useCompanions.useCallback[gainXpForCompanions]\"], [\n        companions,\n        gainXp\n    ]);\n    return {\n        companions: companions ?? [],\n        gainXp,\n        gainXpForCompanions,\n        changeForm,\n        adjustBond\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFDQVE7SUFDRjtBQUNGIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXGhvb2tzXFx1c2VDb21wYW5pb25zLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuaW1wb3J0IHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VQZXJzaXN0ZW50U3RhdGUgfSBmcm9tICcuL3VzZVBlcnNpc3RlbnRTdGF0ZSc7XG5pbXBvcnQgeyB1c2VCdWZmcyB9IGZyb20gJy4vdXNlQnVmZnMnO1xuaW1wb3J0IHtcbiAgY2xvbmVEZWZhdWx0Q29tcGFuaW9ucyxcbiAgeHBOZWVkZWRGb3JMZXZlbCxcbiAgY2FuRXZvbHZlLFxuICBnZXROZXh0Rm9ybSxcbiAgdHlwZSBDb21wYW5pb24sXG4gIHR5cGUgQ29tcGFuaW9uWHBFdmVudCxcbn0gZnJvbSAnLi4vbGliL2NvbXBhbmlvbnMnO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlQ29tcGFuaW9ucygpIHtcbiAgY29uc3QgW2NvbXBhbmlvbnMsIHNldENvbXBhbmlvbnNdID0gdXNlUGVyc2lzdGVudFN0YXRlPENvbXBhbmlvbltdPihcbiAgICAnY29tcGFuaW9ucycsXG4gICAgY2xvbmVEZWZhdWx0Q29tcGFuaW9uc1xuICApO1xuXG4gIGNvbnN0IGdhaW5YcCA9IHVzZUNhbGxiYWNrKFxuICAgIChjb21wYW5pb25JZDogc3RyaW5nLCBzb3VyY2U6IENvbXBhbmlvblhwRXZlbnQsIGFtb3VudDogbnVtYmVyKSA9PiB7XG4gICAgICBzZXRDb21wYW5pb25zKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbXBhbmlvbkluZGV4ID0gcHJldi5maW5kSW5kZXgoKGMpID0+IGMuaWQgPT09IGNvbXBhbmlvbklkKTtcbiAgICAgICAgaWYgKGNvbXBhbmlvbkluZGV4ID09PSAtMSkgcmV0dXJuIHByZXY7XG5cbiAgICAgICAgY29uc3QgdXBkYXRlZENvbXBhbmlvbnMgPSBbLi4ucHJldl07XG4gICAgICAgIGNvbnN0IGNvbXBhbmlvbiA9IHsgLi4udXBkYXRlZENvbXBhbmlvbnNbY29tcGFuaW9uSW5kZXhdIH07XG5cbiAgICAgICAgbGV0IG5ld1hwID0gY29tcGFuaW9uLnhwICsgYW1vdW50O1xuICAgICAgICBsZXQgbmV3TGV2ZWwgPSBjb21wYW5pb24ubGV2ZWw7XG4gICAgICAgIGxldCBuZWVkZWRYcCA9IHhwTmVlZGVkRm9yTGV2ZWwobmV3TGV2ZWwgKyAxKTtcblxuICAgICAgICB3aGlsZSAobmV3WHAgPj0gbmVlZGVkWHApIHtcbiAgICAgICAgICBuZXdYcCAtPSBuZWVkZWRYcDtcbiAgICAgICAgICBuZXdMZXZlbCsrO1xuICAgICAgICAgIG5lZWRlZFhwID0geHBOZWVkZWRGb3JMZXZlbChuZXdMZXZlbCArIDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29tcGFuaW9uLnhwID0gbmV3WHA7XG4gICAgICAgIGNvbXBhbmlvbi5sZXZlbCA9IG5ld0xldmVsO1xuXG4gICAgICAgIC8vIENoZWNrIGZvciBhdXRvLWV2b2x1dGlvblxuICAgICAgICBpZiAoY29tcGFuaW9uLmF1dG9Fdm9sdmUpIHtcbiAgICAgICAgICBjb25zdCBuZXh0Rm9ybSA9IGdldE5leHRGb3JtKGNvbXBhbmlvbik7XG4gICAgICAgICAgaWYgKG5leHRGb3JtICYmIGNhbkV2b2x2ZShjb21wYW5pb24pKSB7XG4gICAgICAgICAgICBjb21wYW5pb24uY3VycmVudEZvcm0gPSBuZXh0Rm9ybS5pZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB1cGRhdGVkQ29tcGFuaW9uc1tjb21wYW5pb25JbmRleF0gPSBjb21wYW5pb247XG4gICAgICAgIHJldHVybiB1cGRhdGVkQ29tcGFuaW9ucztcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW3NldENvbXBhbmlvbnNdXG4gICk7XG5cbiAgY29uc3QgY2hhbmdlRm9ybSA9IHVzZUNhbGxiYWNrKFxuICAgIChjb21wYW5pb25JZDogc3RyaW5nLCBmb3JtSWQ6IHN0cmluZykgPT4ge1xuICAgICAgc2V0Q29tcGFuaW9ucygocHJldikgPT5cbiAgICAgICAgcHJldi5tYXAoKGMpID0+IHtcbiAgICAgICAgICBpZiAoYy5pZCA9PT0gY29tcGFuaW9uSWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldEZvcm0gPSBjLmV2b2x1dGlvblRyZWUuZmluZCgoZikgPT4gZi5pZCA9PT0gZm9ybUlkKTtcbiAgICAgICAgICAgIC8vIE9ubHkgYWxsb3cgY2hhbmdpbmcgdG8gYW4gdW5sb2NrZWQgZm9ybVxuICAgICAgICAgICAgaWYgKHRhcmdldEZvcm0gJiYgYy5sZXZlbCA+PSB0YXJnZXRGb3JtLnVubG9ja0xldmVsKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7IC4uLmMsIGN1cnJlbnRGb3JtOiBmb3JtSWQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGM7XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0sXG4gICAgW3NldENvbXBhbmlvbnNdXG4gICk7XG5cbiAgY29uc3QgYWRqdXN0Qm9uZCA9IHVzZUNhbGxiYWNrKFxuICAgIChjb21wYW5pb25JZDogc3RyaW5nLCBhbW91bnQ6IG51bWJlcikgPT4ge1xuICAgICAgc2V0Q29tcGFuaW9ucygocHJldikgPT5cbiAgICAgICAgcHJldi5tYXAoKGMpID0+IHtcbiAgICAgICAgICBpZiAoYy5pZCA9PT0gY29tcGFuaW9uSWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0JvbmQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIGMuYm9uZCArIGFtb3VudCkpO1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uYywgYm9uZDogbmV3Qm9uZCB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gYztcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSxcbiAgICBbc2V0Q29tcGFuaW9uc11cbiAgKTtcblxuICBjb25zdCBnYWluWHBGb3JDb21wYW5pb25zID0gdXNlQ2FsbGJhY2soXG4gICAgKHNvdXJjZTogQ29tcGFuaW9uWHBFdmVudCwgYW1vdW50OiBudW1iZXIpID0+IHtcbiAgICAgIGNvbXBhbmlvbnMuZm9yRWFjaCgoYykgPT4gZ2FpblhwKGMuaWQsIHNvdXJjZSwgYW1vdW50KSk7XG4gICAgfSxcbiAgICBbY29tcGFuaW9ucywgZ2FpblhwXVxuICApO1xuXG4gIHJldHVybiB7XG4gICAgY29tcGFuaW9uczogY29tcGFuaW9ucyA/PyBbXSxcbiAgICBnYWluWHAsXG4gICAgZ2FpblhwRm9yQ29tcGFuaW9ucyxcbiAgICBjaGFuZ2VGb3JtLFxuICAgIGFkanVzdEJvbmQsXG4gIH07XG59XG4iXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJ1c2VQZXJzaXN0ZW50U3RhdGUiLCJjbG9uZURlZmF1bHRDb21wYW5pb25zIiwieHBOZWVkZWRGb3JMZXZlbCIsImNhbkV2b2x2ZSIsImdldE5leHRGb3JtIiwidXNlQ29tcGFuaW9ucyIsImNvbXBhbmlvbnMiLCJzZXRDb21wYW5pb25zIiwiZ2FpblhwIiwiY29tcGFuaW9uSWQiLCJzb3VyY2UiLCJhbW91bnQiLCJwcmV2IiwiY29tcGFuaW9uSW5kZXgiLCJmaW5kSW5kZXgiLCJjIiwiaWQiLCJ1cGRhdGVkQ29tcGFuaW9ucyIsImNvbXBhbmlvbiIsIm5ld1hwIiwieHAiLCJuZXdMZXZlbCIsImxldmVsIiwibmVlZGVkWHAiLCJhdXRvRXZvbHZlIiwibmV4dEZvcm0iLCJjdXJyZW50Rm9ybSIsImNoYW5nZUZvcm0iLCJmb3JtSWQiLCJtYXAiLCJ0YXJnZXRGb3JtIiwiZXZvbHV0aW9uVHJlZSIsImZpbmQiLCJmIiwidW5sb2NrTGV2ZWwiLCJhZGp1c3RCb25kIiwibmV3Qm9uZCIsIk1hdGgiLCJtYXgiLCJtaW4iLCJib25kIiwiZ2FpblhwRm9yQ29tcGFuaW9ucyIsImZvckVhY2giXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useCompanions.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useDreamJournal.ts":
/*!**************************************!*\
  !*** ./app/hooks/useDreamJournal.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useDreamJournal: () => (/* binding */ useDreamJournal)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _useInventory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useInventory */ \"(ssr)/./app/hooks/useInventory.ts\");\n/* harmony import */ var _useCompanions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useCompanions */ \"(ssr)/./app/hooks/useCompanions.ts\");\n/* harmony import */ var _types_journal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../types/journal */ \"(ssr)/./app/types/journal.ts\");\n/* harmony import */ var _data_journal_json__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../data/journal.json */ \"(ssr)/./data/journal.json\");\n/* __next_internal_client_entry_do_not_use__ useDreamJournal auto */ \n\n\n\n\n\nconst JOURNAL_KEY = 'dreamJournal';\nconst STREAK_KEY = 'journalStreak';\nconst XP_CONFIG_KEY = 'journalXpConfig';\nconst ACHIEVEMENTS_KEY = 'journalAchievements';\nfunction useDreamJournal() {\n    const [entries, setEntries] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(JOURNAL_KEY, {\n        \"useDreamJournal.usePersistentState\": ()=>_data_journal_json__WEBPACK_IMPORTED_MODULE_5__\n    }[\"useDreamJournal.usePersistentState\"]);\n    const [streak, setStreak] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(STREAK_KEY, {\n        \"useDreamJournal.usePersistentState\": ()=>({\n                current: 0,\n                longest: 0,\n                lastEntryDate: null\n            })\n    }[\"useDreamJournal.usePersistentState\"]);\n    const [xpConfig, setXpConfig] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(XP_CONFIG_KEY, {\n        \"useDreamJournal.usePersistentState\": ()=>_types_journal__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_XP_CONFIG\n    }[\"useDreamJournal.usePersistentState\"]);\n    const [achievements, setAchievements] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(ACHIEVEMENTS_KEY, {\n        \"useDreamJournal.usePersistentState\": ()=>[]\n    }[\"useDreamJournal.usePersistentState\"]);\n    const { awardXp } = (0,_useInventory__WEBPACK_IMPORTED_MODULE_2__.useInventory)();\n    const { gainXpForCompanions } = (0,_useCompanions__WEBPACK_IMPORTED_MODULE_3__.useCompanions)();\n    const calculateEntryXp = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDreamJournal.useCallback[calculateEntryXp]\": (entry)=>{\n            let xp = xpConfig.baseEntry;\n            entry.tags.forEach({\n                \"useDreamJournal.useCallback[calculateEntryXp]\": (tag)=>{\n                    switch(tag.toLowerCase()){\n                        case 'lucid':\n                            xp += xpConfig.lucidTag;\n                            break;\n                        case 'ritual':\n                            xp += xpConfig.ritualTag;\n                            break;\n                        case 'panty':\n                            xp += xpConfig.pantyTag;\n                            break;\n                        case 'temple':\n                            xp += xpConfig.templeTag;\n                            break;\n                        case 'quest':\n                            xp += xpConfig.questTag;\n                            break;\n                    }\n                }\n            }[\"useDreamJournal.useCallback[calculateEntryXp]\"]);\n            return xp;\n        }\n    }[\"useDreamJournal.useCallback[calculateEntryXp]\"], [\n        xpConfig\n    ]);\n    const updateStreak = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDreamJournal.useCallback[updateStreak]\": (entryDate)=>{\n            const today = new Date().toISOString().split('T')[0];\n            const yesterday = new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString().split('T')[0];\n            setStreak({\n                \"useDreamJournal.useCallback[updateStreak]\": (prev)=>{\n                    let newCurrent = prev.current;\n                    let newLongest = prev.longest;\n                    if (prev.lastEntryDate === yesterday || prev.lastEntryDate === null) {\n                        newCurrent = prev.current + 1;\n                    } else if (prev.lastEntryDate !== today) {\n                        newCurrent = 1;\n                    }\n                    if (newCurrent > newLongest) {\n                        newLongest = newCurrent;\n                    }\n                    return {\n                        current: newCurrent,\n                        longest: newLongest,\n                        lastEntryDate: entryDate\n                    };\n                }\n            }[\"useDreamJournal.useCallback[updateStreak]\"]);\n            // Award streak bonus XP\n            if (streak.current > 0) {\n                const streakBonus = xpConfig.streakBonus * Math.min(streak.current, 10); // Cap bonus at 10 days\n                awardXp(streakBonus);\n                gainXpForCompanions('dream', streakBonus);\n            }\n        }\n    }[\"useDreamJournal.useCallback[updateStreak]\"], [\n        streak.current,\n        xpConfig.streakBonus,\n        awardXp,\n        setStreak,\n        gainXpForCompanions\n    ]);\n    const checkAchievements = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDreamJournal.useCallback[checkAchievements]\": (newEntries)=>{\n            const newAchievements = [];\n            // First Entry\n            if (newEntries.length === 1 && !achievements.includes('First Entry')) {\n                newAchievements.push('First Entry');\n                awardXp(50);\n            }\n            // 10-Day Streak\n            if (streak.current >= 10 && !achievements.includes('10-Day Streak')) {\n                newAchievements.push('10-Day Streak');\n            }\n            // 100 Dreams Logged\n            if (newEntries.length >= 100 && !achievements.includes('100 Dreams Logged')) {\n                newAchievements.push('100 Dreams Logged');\n            }\n            // Panty Dream Lord\n            const pantyEntries = newEntries.filter({\n                \"useDreamJournal.useCallback[checkAchievements].pantyEntries\": (e)=>e.tags.includes('panty')\n            }[\"useDreamJournal.useCallback[checkAchievements].pantyEntries\"]);\n            if (pantyEntries.length >= 50 && !achievements.includes('Panty Dream Lord')) {\n                newAchievements.push('Panty Dream Lord');\n            }\n            if (newAchievements.length > 0) {\n                setAchievements({\n                    \"useDreamJournal.useCallback[checkAchievements]\": (prev)=>[\n                            ...prev,\n                            ...newAchievements\n                        ]\n                }[\"useDreamJournal.useCallback[checkAchievements]\"]);\n            }\n        }\n    }[\"useDreamJournal.useCallback[checkAchievements]\"], [\n        achievements,\n        streak.current,\n        awardXp,\n        setAchievements\n    ]);\n    const addEntry = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDreamJournal.useCallback[addEntry]\": (entry)=>{\n            const newEntry = {\n                ...entry,\n                id: `d${Date.now()}-${Math.random().toString(36).slice(2, 7)}`,\n                xpEarned: 0,\n                createdAt: new Date().toISOString(),\n                updatedAt: new Date().toISOString()\n            };\n            newEntry.xpEarned = calculateEntryXp(newEntry);\n            const updatedEntries = [\n                ...entries,\n                newEntry\n            ].sort({\n                \"useDreamJournal.useCallback[addEntry].updatedEntries\": (a, b)=>new Date(b.date).getTime() - new Date(a.date).getTime()\n            }[\"useDreamJournal.useCallback[addEntry].updatedEntries\"]);\n            setEntries(updatedEntries);\n            updateStreak(newEntry.date);\n            awardXp(newEntry.xpEarned);\n            gainXpForCompanions('dream', newEntry.xpEarned);\n            checkAchievements(updatedEntries);\n            return newEntry;\n        }\n    }[\"useDreamJournal.useCallback[addEntry]\"], [\n        entries,\n        calculateEntryXp,\n        setEntries,\n        updateStreak,\n        awardXp,\n        checkAchievements,\n        gainXpForCompanions\n    ]);\n    const updateEntry = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDreamJournal.useCallback[updateEntry]\": (id, updates)=>{\n            let xpDifference = 0;\n            setEntries({\n                \"useDreamJournal.useCallback[updateEntry]\": (prev)=>prev.map({\n                        \"useDreamJournal.useCallback[updateEntry]\": (entry)=>{\n                            if (entry.id === id) {\n                                const originalXp = entry.xpEarned;\n                                const updated = {\n                                    ...entry,\n                                    ...updates,\n                                    updatedAt: new Date().toISOString()\n                                };\n                                updated.xpEarned = calculateEntryXp(updated);\n                                xpDifference = updated.xpEarned - originalXp;\n                                return updated;\n                            }\n                            return entry;\n                        }\n                    }[\"useDreamJournal.useCallback[updateEntry]\"])\n            }[\"useDreamJournal.useCallback[updateEntry]\"]);\n            if (xpDifference !== 0) {\n                awardXp(xpDifference);\n                gainXpForCompanions('dream', xpDifference);\n            }\n        }\n    }[\"useDreamJournal.useCallback[updateEntry]\"], [\n        setEntries,\n        calculateEntryXp,\n        awardXp,\n        gainXpForCompanions\n    ]);\n    const deleteEntry = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDreamJournal.useCallback[deleteEntry]\": (id)=>{\n            const entryToDelete = entries.find({\n                \"useDreamJournal.useCallback[deleteEntry].entryToDelete\": (entry)=>entry.id === id\n            }[\"useDreamJournal.useCallback[deleteEntry].entryToDelete\"]);\n            if (entryToDelete) {\n                awardXp(-entryToDelete.xpEarned);\n                gainXpForCompanions('dream', -entryToDelete.xpEarned);\n            }\n            setEntries({\n                \"useDreamJournal.useCallback[deleteEntry]\": (prev)=>prev.filter({\n                        \"useDreamJournal.useCallback[deleteEntry]\": (entry)=>entry.id !== id\n                    }[\"useDreamJournal.useCallback[deleteEntry]\"])\n            }[\"useDreamJournal.useCallback[deleteEntry]\"]);\n        }\n    }[\"useDreamJournal.useCallback[deleteEntry]\"], [\n        setEntries,\n        entries,\n        awardXp,\n        gainXpForCompanions\n    ]);\n    const filterEntries = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDreamJournal.useCallback[filterEntries]\": (filter)=>{\n            return entries.filter({\n                \"useDreamJournal.useCallback[filterEntries]\": (entry)=>{\n                    if (filter.searchText) {\n                        const search = filter.searchText.toLowerCase();\n                        if (!entry.title.toLowerCase().includes(search) && !entry.content.toLowerCase().includes(search)) {\n                            return false;\n                        }\n                    }\n                    if (filter.tags?.length && !filter.tags.some({\n                        \"useDreamJournal.useCallback[filterEntries]\": (tag)=>entry.tags.includes(tag)\n                    }[\"useDreamJournal.useCallback[filterEntries]\"])) {\n                        return false;\n                    }\n                    if (filter.companions?.length && !filter.companions.some({\n                        \"useDreamJournal.useCallback[filterEntries]\": (comp)=>entry.companions.includes(comp)\n                    }[\"useDreamJournal.useCallback[filterEntries]\"])) {\n                        return false;\n                    }\n                    if (filter.places?.length && !filter.places.some({\n                        \"useDreamJournal.useCallback[filterEntries]\": (place)=>entry.places.includes(place)\n                    }[\"useDreamJournal.useCallback[filterEntries]\"])) {\n                        return false;\n                    }\n                    if (filter.dateFrom && entry.date < filter.dateFrom) {\n                        return false;\n                    }\n                    if (filter.dateTo && entry.date > filter.dateTo) {\n                        return false;\n                    }\n                    if (filter.minXp && entry.xpEarned < filter.minXp) {\n                        return false;\n                    }\n                    if (filter.maxXp && entry.xpEarned > filter.maxXp) {\n                        return false;\n                    }\n                    return true;\n                }\n            }[\"useDreamJournal.useCallback[filterEntries]\"]);\n        }\n    }[\"useDreamJournal.useCallback[filterEntries]\"], [\n        entries\n    ]);\n    const stats = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useDreamJournal.useMemo[stats]\": ()=>{\n            const totalEntries = entries.length;\n            const totalXpEarned = entries.reduce({\n                \"useDreamJournal.useMemo[stats].totalXpEarned\": (sum, entry)=>sum + entry.xpEarned\n            }[\"useDreamJournal.useMemo[stats].totalXpEarned\"], 0);\n            const averageXpPerEntry = totalEntries > 0 ? totalXpEarned / totalEntries : 0;\n            const tagCounts = new Map();\n            const companionCounts = new Map();\n            const placeCounts = new Map();\n            entries.forEach({\n                \"useDreamJournal.useMemo[stats]\": (entry)=>{\n                    entry.tags.forEach({\n                        \"useDreamJournal.useMemo[stats]\": (tag)=>tagCounts.set(tag, (tagCounts.get(tag) || 0) + 1)\n                    }[\"useDreamJournal.useMemo[stats]\"]);\n                    entry.companions.forEach({\n                        \"useDreamJournal.useMemo[stats]\": (comp)=>companionCounts.set(comp, (companionCounts.get(comp) || 0) + 1)\n                    }[\"useDreamJournal.useMemo[stats]\"]);\n                    entry.places.forEach({\n                        \"useDreamJournal.useMemo[stats]\": (place)=>placeCounts.set(place, (placeCounts.get(place) || 0) + 1)\n                    }[\"useDreamJournal.useMemo[stats]\"]);\n                }\n            }[\"useDreamJournal.useMemo[stats]\"]);\n            const currentMonth = new Date().toISOString().slice(0, 7);\n            const entriesThisMonth = entries.filter({\n                \"useDreamJournal.useMemo[stats]\": (entry)=>entry.date.startsWith(currentMonth)\n            }[\"useDreamJournal.useMemo[stats]\"]).length;\n            const lucidDreamCount = entries.filter({\n                \"useDreamJournal.useMemo[stats]\": (entry)=>entry.tags.includes('lucid')\n            }[\"useDreamJournal.useMemo[stats]\"]).length;\n            return {\n                totalEntries,\n                totalXpEarned,\n                averageXpPerEntry,\n                mostUsedTags: Array.from(tagCounts.entries()).map({\n                    \"useDreamJournal.useMemo[stats]\": ([tag, count])=>({\n                            tag,\n                            count\n                        })\n                }[\"useDreamJournal.useMemo[stats]\"]).sort({\n                    \"useDreamJournal.useMemo[stats]\": (a, b)=>b.count - a.count\n                }[\"useDreamJournal.useMemo[stats]\"]).slice(0, 10),\n                favoriteCompanions: Array.from(companionCounts.entries()).map({\n                    \"useDreamJournal.useMemo[stats]\": ([name, count])=>({\n                            name,\n                            count\n                        })\n                }[\"useDreamJournal.useMemo[stats]\"]).sort({\n                    \"useDreamJournal.useMemo[stats]\": (a, b)=>b.count - a.count\n                }[\"useDreamJournal.useMemo[stats]\"]).slice(0, 10),\n                favoriteLocations: Array.from(placeCounts.entries()).map({\n                    \"useDreamJournal.useMemo[stats]\": ([place, count])=>({\n                            place,\n                            count\n                        })\n                }[\"useDreamJournal.useMemo[stats]\"]).sort({\n                    \"useDreamJournal.useMemo[stats]\": (a, b)=>b.count - a.count\n                }[\"useDreamJournal.useMemo[stats]\"]).slice(0, 10),\n                entriesThisMonth,\n                lucidDreamCount\n            };\n        }\n    }[\"useDreamJournal.useMemo[stats]\"], [\n        entries\n    ]);\n    const exportJournal = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDreamJournal.useCallback[exportJournal]\": ()=>{\n            const data = JSON.stringify(entries, null, 2);\n            const blob = new Blob([\n                data\n            ], {\n                type: 'application/json'\n            });\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = `dream-journal-export-${new Date().toISOString().split('T')[0]}.json`;\n            document.body.appendChild(a);\n            a.click();\n            document.body.removeChild(a);\n            URL.revokeObjectURL(url);\n        }\n    }[\"useDreamJournal.useCallback[exportJournal]\"], [\n        entries\n    ]);\n    const importJournal = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDreamJournal.useCallback[importJournal]\": (jsonData)=>{\n            try {\n                const imported = JSON.parse(jsonData);\n                const errors = [];\n                let importedCount = 0;\n                imported.forEach({\n                    \"useDreamJournal.useCallback[importJournal]\": (entry, index)=>{\n                        try {\n                            if (!entry.id || !entry.title || !entry.date || !entry.content) {\n                                errors.push(`Entry ${index + 1}: Missing required fields`);\n                                return;\n                            }\n                            const existingEntry = entries.find({\n                                \"useDreamJournal.useCallback[importJournal].existingEntry\": (e)=>e.id === entry.id\n                            }[\"useDreamJournal.useCallback[importJournal].existingEntry\"]);\n                            if (!existingEntry) {\n                                addEntry(entry);\n                                importedCount++;\n                            }\n                        } catch (err) {\n                            errors.push(`Entry ${index + 1}: ${err}`);\n                        }\n                    }\n                }[\"useDreamJournal.useCallback[importJournal]\"]);\n                return {\n                    success: true,\n                    imported: importedCount,\n                    errors\n                };\n            } catch (err) {\n                return {\n                    success: false,\n                    imported: 0,\n                    errors: [\n                        `Invalid JSON: ${err}`\n                    ]\n                };\n            }\n        }\n    }[\"useDreamJournal.useCallback[importJournal]\"], [\n        entries,\n        addEntry\n    ]);\n    return {\n        entries,\n        streak,\n        stats,\n        achievements,\n        xpConfig,\n        addEntry,\n        updateEntry,\n        deleteEntry,\n        filterEntries,\n        exportJournal,\n        importJournal,\n        setXpConfig,\n        calculateEntryXp\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxcaG9va3NcXHVzZURyZWFtSm91cm5hbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XHJcblxyXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlUGVyc2lzdGVudFN0YXRlIH0gZnJvbSAnLi91c2VQZXJzaXN0ZW50U3RhdGUnO1xyXG5pbXBvcnQgeyB1c2VJbnZlbnRvcnkgfSBmcm9tICcuL3VzZUludmVudG9yeSc7XHJcbmltcG9ydCB7IHVzZUNvbXBhbmlvbnMgfSBmcm9tICcuL3VzZUNvbXBhbmlvbnMnO1xyXG5pbXBvcnQgeyBcclxuICBEcmVhbUpvdXJuYWxFbnRyeSwgXHJcbiAgSm91cm5hbFN0cmVhaywgXHJcbiAgSm91cm5hbFN0YXRzLCBcclxuICBKb3VybmFsRmlsdGVyLFxyXG4gIFhwUmV3YXJkQ29uZmlnLFxyXG4gIERFRkFVTFRfWFBfQ09ORklHIFxyXG59IGZyb20gJy4uL3R5cGVzL2pvdXJuYWwnO1xyXG5pbXBvcnQgam91cm5hbERhdGEgZnJvbSAnLi4vLi4vZGF0YS9qb3VybmFsLmpzb24nO1xyXG5cclxuY29uc3QgSk9VUk5BTF9LRVkgPSAnZHJlYW1Kb3VybmFsJztcclxuY29uc3QgU1RSRUFLX0tFWSA9ICdqb3VybmFsU3RyZWFrJztcclxuY29uc3QgWFBfQ09ORklHX0tFWSA9ICdqb3VybmFsWHBDb25maWcnO1xyXG5jb25zdCBBQ0hJRVZFTUVOVFNfS0VZID0gJ2pvdXJuYWxBY2hpZXZlbWVudHMnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZURyZWFtSm91cm5hbCgpIHtcclxuICBjb25zdCBbZW50cmllcywgc2V0RW50cmllc10gPSB1c2VQZXJzaXN0ZW50U3RhdGU8RHJlYW1Kb3VybmFsRW50cnlbXT4oXHJcbiAgICBKT1VSTkFMX0tFWSwgXHJcbiAgICAoKSA9PiBqb3VybmFsRGF0YSBhcyBEcmVhbUpvdXJuYWxFbnRyeVtdXHJcbiAgKTtcclxuICBcclxuICBjb25zdCBbc3RyZWFrLCBzZXRTdHJlYWtdID0gdXNlUGVyc2lzdGVudFN0YXRlPEpvdXJuYWxTdHJlYWs+KFxyXG4gICAgU1RSRUFLX0tFWSxcclxuICAgICgpID0+ICh7IGN1cnJlbnQ6IDAsIGxvbmdlc3Q6IDAsIGxhc3RFbnRyeURhdGU6IG51bGwgfSlcclxuICApO1xyXG4gIFxyXG4gIGNvbnN0IFt4cENvbmZpZywgc2V0WHBDb25maWddID0gdXNlUGVyc2lzdGVudFN0YXRlPFhwUmV3YXJkQ29uZmlnPihcclxuICAgIFhQX0NPTkZJR19LRVksXHJcbiAgICAoKSA9PiBERUZBVUxUX1hQX0NPTkZJR1xyXG4gICk7XHJcbiAgXHJcbiAgY29uc3QgW2FjaGlldmVtZW50cywgc2V0QWNoaWV2ZW1lbnRzXSA9IHVzZVBlcnNpc3RlbnRTdGF0ZTxzdHJpbmdbXT4oXHJcbiAgICBBQ0hJRVZFTUVOVFNfS0VZLFxyXG4gICAgKCkgPT4gW11cclxuICApO1xyXG5cclxuICBjb25zdCB7IGF3YXJkWHAgfSA9IHVzZUludmVudG9yeSgpO1xyXG4gIGNvbnN0IHsgZ2FpblhwRm9yQ29tcGFuaW9ucyB9ID0gdXNlQ29tcGFuaW9ucygpO1xyXG5cclxuICBjb25zdCBjYWxjdWxhdGVFbnRyeVhwID0gdXNlQ2FsbGJhY2soKGVudHJ5OiBEcmVhbUpvdXJuYWxFbnRyeSk6IG51bWJlciA9PiB7XHJcbiAgICBsZXQgeHAgPSB4cENvbmZpZy5iYXNlRW50cnk7XHJcbiAgICBcclxuICAgIGVudHJ5LnRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xyXG4gICAgICBzd2l0Y2ggKHRhZy50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgY2FzZSAnbHVjaWQnOlxyXG4gICAgICAgICAgeHAgKz0geHBDb25maWcubHVjaWRUYWc7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdyaXR1YWwnOlxyXG4gICAgICAgICAgeHAgKz0geHBDb25maWcucml0dWFsVGFnO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAncGFudHknOlxyXG4gICAgICAgICAgeHAgKz0geHBDb25maWcucGFudHlUYWc7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd0ZW1wbGUnOlxyXG4gICAgICAgICAgeHAgKz0geHBDb25maWcudGVtcGxlVGFnO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAncXVlc3QnOlxyXG4gICAgICAgICAgeHAgKz0geHBDb25maWcucXVlc3RUYWc7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHJldHVybiB4cDtcclxuICB9LCBbeHBDb25maWddKTtcclxuXHJcbiAgY29uc3QgdXBkYXRlU3RyZWFrID0gdXNlQ2FsbGJhY2soKGVudHJ5RGF0ZTogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xyXG4gICAgY29uc3QgeWVzdGVyZGF5ID0gbmV3IERhdGUoRGF0ZS5ub3coKSAtIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcclxuICAgIFxyXG4gICAgc2V0U3RyZWFrKHByZXYgPT4ge1xyXG4gICAgICBsZXQgbmV3Q3VycmVudCA9IHByZXYuY3VycmVudDtcclxuICAgICAgbGV0IG5ld0xvbmdlc3QgPSBwcmV2Lmxvbmdlc3Q7XHJcbiAgICAgIFxyXG4gICAgICBpZiAocHJldi5sYXN0RW50cnlEYXRlID09PSB5ZXN0ZXJkYXkgfHwgcHJldi5sYXN0RW50cnlEYXRlID09PSBudWxsKSB7XHJcbiAgICAgICAgbmV3Q3VycmVudCA9IHByZXYuY3VycmVudCArIDE7XHJcbiAgICAgIH0gZWxzZSBpZiAocHJldi5sYXN0RW50cnlEYXRlICE9PSB0b2RheSkge1xyXG4gICAgICAgIG5ld0N1cnJlbnQgPSAxO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBpZiAobmV3Q3VycmVudCA+IG5ld0xvbmdlc3QpIHtcclxuICAgICAgICBuZXdMb25nZXN0ID0gbmV3Q3VycmVudDtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBjdXJyZW50OiBuZXdDdXJyZW50LFxyXG4gICAgICAgIGxvbmdlc3Q6IG5ld0xvbmdlc3QsXHJcbiAgICAgICAgbGFzdEVudHJ5RGF0ZTogZW50cnlEYXRlXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gQXdhcmQgc3RyZWFrIGJvbnVzIFhQXHJcbiAgICBpZiAoc3RyZWFrLmN1cnJlbnQgPiAwKSB7XHJcbiAgICAgIGNvbnN0IHN0cmVha0JvbnVzID0geHBDb25maWcuc3RyZWFrQm9udXMgKiBNYXRoLm1pbihzdHJlYWsuY3VycmVudCwgMTApOyAvLyBDYXAgYm9udXMgYXQgMTAgZGF5c1xyXG4gICAgICBhd2FyZFhwKHN0cmVha0JvbnVzKTtcclxuICAgICAgZ2FpblhwRm9yQ29tcGFuaW9ucygnZHJlYW0nLCBzdHJlYWtCb251cyk7XHJcbiAgICB9XHJcbiAgfSwgW3N0cmVhay5jdXJyZW50LCB4cENvbmZpZy5zdHJlYWtCb251cywgYXdhcmRYcCwgc2V0U3RyZWFrLCBnYWluWHBGb3JDb21wYW5pb25zXSk7XHJcblxyXG4gIGNvbnN0IGNoZWNrQWNoaWV2ZW1lbnRzID0gdXNlQ2FsbGJhY2soKG5ld0VudHJpZXM6IERyZWFtSm91cm5hbEVudHJ5W10pID0+IHtcclxuICAgIGNvbnN0IG5ld0FjaGlldmVtZW50czogc3RyaW5nW10gPSBbXTtcclxuICAgIFxyXG4gICAgLy8gRmlyc3QgRW50cnlcclxuICAgIGlmIChuZXdFbnRyaWVzLmxlbmd0aCA9PT0gMSAmJiAhYWNoaWV2ZW1lbnRzLmluY2x1ZGVzKCdGaXJzdCBFbnRyeScpKSB7XHJcbiAgICAgIG5ld0FjaGlldmVtZW50cy5wdXNoKCdGaXJzdCBFbnRyeScpO1xyXG4gICAgICBhd2FyZFhwKDUwKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gMTAtRGF5IFN0cmVha1xyXG4gICAgaWYgKHN0cmVhay5jdXJyZW50ID49IDEwICYmICFhY2hpZXZlbWVudHMuaW5jbHVkZXMoJzEwLURheSBTdHJlYWsnKSkge1xyXG4gICAgICBuZXdBY2hpZXZlbWVudHMucHVzaCgnMTAtRGF5IFN0cmVhaycpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyAxMDAgRHJlYW1zIExvZ2dlZFxyXG4gICAgaWYgKG5ld0VudHJpZXMubGVuZ3RoID49IDEwMCAmJiAhYWNoaWV2ZW1lbnRzLmluY2x1ZGVzKCcxMDAgRHJlYW1zIExvZ2dlZCcpKSB7XHJcbiAgICAgIG5ld0FjaGlldmVtZW50cy5wdXNoKCcxMDAgRHJlYW1zIExvZ2dlZCcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBQYW50eSBEcmVhbSBMb3JkXHJcbiAgICBjb25zdCBwYW50eUVudHJpZXMgPSBuZXdFbnRyaWVzLmZpbHRlcihlID0+IGUudGFncy5pbmNsdWRlcygncGFudHknKSk7XHJcbiAgICBpZiAocGFudHlFbnRyaWVzLmxlbmd0aCA+PSA1MCAmJiAhYWNoaWV2ZW1lbnRzLmluY2x1ZGVzKCdQYW50eSBEcmVhbSBMb3JkJykpIHtcclxuICAgICAgbmV3QWNoaWV2ZW1lbnRzLnB1c2goJ1BhbnR5IERyZWFtIExvcmQnKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKG5ld0FjaGlldmVtZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHNldEFjaGlldmVtZW50cyhwcmV2ID0+IFsuLi5wcmV2LCAuLi5uZXdBY2hpZXZlbWVudHNdKTtcclxuICAgIH1cclxuICB9LCBbYWNoaWV2ZW1lbnRzLCBzdHJlYWsuY3VycmVudCwgYXdhcmRYcCwgc2V0QWNoaWV2ZW1lbnRzXSk7XHJcblxyXG4gIGNvbnN0IGFkZEVudHJ5ID0gdXNlQ2FsbGJhY2soKGVudHJ5OiBPbWl0PERyZWFtSm91cm5hbEVudHJ5LCAnaWQnIHwgJ3hwRWFybmVkJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCc+KSA9PiB7XHJcbiAgICBjb25zdCBuZXdFbnRyeTogRHJlYW1Kb3VybmFsRW50cnkgPSB7XHJcbiAgICAgIC4uLmVudHJ5LFxyXG4gICAgICBpZDogYGQke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMiwgNyl9YCxcclxuICAgICAgeHBFYXJuZWQ6IDAsXHJcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgIH07XHJcbiAgICBcclxuICAgIG5ld0VudHJ5LnhwRWFybmVkID0gY2FsY3VsYXRlRW50cnlYcChuZXdFbnRyeSk7XHJcbiAgICBcclxuICAgIGNvbnN0IHVwZGF0ZWRFbnRyaWVzID0gWy4uLmVudHJpZXMsIG5ld0VudHJ5XS5zb3J0KChhLCBiKSA9PiBcclxuICAgICAgbmV3IERhdGUoYi5kYXRlKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLmRhdGUpLmdldFRpbWUoKVxyXG4gICAgKTtcclxuICAgIFxyXG4gICAgc2V0RW50cmllcyh1cGRhdGVkRW50cmllcyk7XHJcbiAgICB1cGRhdGVTdHJlYWsobmV3RW50cnkuZGF0ZSk7XHJcbiAgICBhd2FyZFhwKG5ld0VudHJ5LnhwRWFybmVkKTtcclxuICAgIGdhaW5YcEZvckNvbXBhbmlvbnMoJ2RyZWFtJywgbmV3RW50cnkueHBFYXJuZWQpO1xyXG4gICAgY2hlY2tBY2hpZXZlbWVudHModXBkYXRlZEVudHJpZXMpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gbmV3RW50cnk7XHJcbiAgfSwgW2VudHJpZXMsIGNhbGN1bGF0ZUVudHJ5WHAsIHNldEVudHJpZXMsIHVwZGF0ZVN0cmVhaywgYXdhcmRYcCwgY2hlY2tBY2hpZXZlbWVudHMsIGdhaW5YcEZvckNvbXBhbmlvbnNdKTtcclxuXHJcbiAgY29uc3QgdXBkYXRlRW50cnkgPSB1c2VDYWxsYmFjaygoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxEcmVhbUpvdXJuYWxFbnRyeT4pID0+IHtcclxuICAgIGxldCB4cERpZmZlcmVuY2UgPSAwO1xyXG4gICAgc2V0RW50cmllcyhwcmV2ID0+IHByZXYubWFwKGVudHJ5ID0+IHtcclxuICAgICAgaWYgKGVudHJ5LmlkID09PSBpZCkge1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsWHAgPSBlbnRyeS54cEVhcm5lZDtcclxuICAgICAgICBjb25zdCB1cGRhdGVkID0geyBcclxuICAgICAgICAgIC4uLmVudHJ5LCBcclxuICAgICAgICAgIC4uLnVwZGF0ZXMsIFxyXG4gICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgXHJcbiAgICAgICAgfTtcclxuICAgICAgICB1cGRhdGVkLnhwRWFybmVkID0gY2FsY3VsYXRlRW50cnlYcCh1cGRhdGVkKTtcclxuICAgICAgICB4cERpZmZlcmVuY2UgPSB1cGRhdGVkLnhwRWFybmVkIC0gb3JpZ2luYWxYcDtcclxuICAgICAgICByZXR1cm4gdXBkYXRlZDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZW50cnk7XHJcbiAgICB9KSk7XHJcblxyXG4gICAgaWYgKHhwRGlmZmVyZW5jZSAhPT0gMCkge1xyXG4gICAgICBhd2FyZFhwKHhwRGlmZmVyZW5jZSk7XHJcbiAgICAgIGdhaW5YcEZvckNvbXBhbmlvbnMoJ2RyZWFtJywgeHBEaWZmZXJlbmNlKTtcclxuICAgIH1cclxuICB9LCBbc2V0RW50cmllcywgY2FsY3VsYXRlRW50cnlYcCwgYXdhcmRYcCwgZ2FpblhwRm9yQ29tcGFuaW9uc10pO1xyXG5cclxuICBjb25zdCBkZWxldGVFbnRyeSA9IHVzZUNhbGxiYWNrKChpZDogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCBlbnRyeVRvRGVsZXRlID0gZW50cmllcy5maW5kKGVudHJ5ID0+IGVudHJ5LmlkID09PSBpZCk7XHJcbiAgICBpZiAoZW50cnlUb0RlbGV0ZSkge1xyXG4gICAgICBhd2FyZFhwKC1lbnRyeVRvRGVsZXRlLnhwRWFybmVkKTtcclxuICAgICAgZ2FpblhwRm9yQ29tcGFuaW9ucygnZHJlYW0nLCAtZW50cnlUb0RlbGV0ZS54cEVhcm5lZCk7XHJcbiAgICB9XHJcbiAgICBzZXRFbnRyaWVzKHByZXYgPT4gcHJldi5maWx0ZXIoZW50cnkgPT4gZW50cnkuaWQgIT09IGlkKSk7XHJcbiAgfSwgW3NldEVudHJpZXMsIGVudHJpZXMsIGF3YXJkWHAsIGdhaW5YcEZvckNvbXBhbmlvbnNdKTtcclxuXHJcbiAgY29uc3QgZmlsdGVyRW50cmllcyA9IHVzZUNhbGxiYWNrKChmaWx0ZXI6IFBhcnRpYWw8Sm91cm5hbEZpbHRlcj4pID0+IHtcclxuICAgIHJldHVybiBlbnRyaWVzLmZpbHRlcihlbnRyeSA9PiB7XHJcbiAgICAgIGlmIChmaWx0ZXIuc2VhcmNoVGV4dCkge1xyXG4gICAgICAgIGNvbnN0IHNlYXJjaCA9IGZpbHRlci5zZWFyY2hUZXh0LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgaWYgKCFlbnRyeS50aXRsZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaCkgJiYgXHJcbiAgICAgICAgICAgICFlbnRyeS5jb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoKSkge1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKGZpbHRlci50YWdzPy5sZW5ndGggJiYgIWZpbHRlci50YWdzLnNvbWUodGFnID0+IGVudHJ5LnRhZ3MuaW5jbHVkZXModGFnKSkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmIChmaWx0ZXIuY29tcGFuaW9ucz8ubGVuZ3RoICYmICFmaWx0ZXIuY29tcGFuaW9ucy5zb21lKGNvbXAgPT4gZW50cnkuY29tcGFuaW9ucy5pbmNsdWRlcyhjb21wKSkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmIChmaWx0ZXIucGxhY2VzPy5sZW5ndGggJiYgIWZpbHRlci5wbGFjZXMuc29tZShwbGFjZSA9PiBlbnRyeS5wbGFjZXMuaW5jbHVkZXMocGxhY2UpKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKGZpbHRlci5kYXRlRnJvbSAmJiBlbnRyeS5kYXRlIDwgZmlsdGVyLmRhdGVGcm9tKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBpZiAoZmlsdGVyLmRhdGVUbyAmJiBlbnRyeS5kYXRlID4gZmlsdGVyLmRhdGVUbykge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKGZpbHRlci5taW5YcCAmJiBlbnRyeS54cEVhcm5lZCA8IGZpbHRlci5taW5YcCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKGZpbHRlci5tYXhYcCAmJiBlbnRyeS54cEVhcm5lZCA+IGZpbHRlci5tYXhYcCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9KTtcclxuICB9LCBbZW50cmllc10pO1xyXG5cclxuICBjb25zdCBzdGF0cyA9IHVzZU1lbW8oKCk6IEpvdXJuYWxTdGF0cyA9PiB7XHJcbiAgICBjb25zdCB0b3RhbEVudHJpZXMgPSBlbnRyaWVzLmxlbmd0aDtcclxuICAgIGNvbnN0IHRvdGFsWHBFYXJuZWQgPSBlbnRyaWVzLnJlZHVjZSgoc3VtLCBlbnRyeSkgPT4gc3VtICsgZW50cnkueHBFYXJuZWQsIDApO1xyXG4gICAgY29uc3QgYXZlcmFnZVhwUGVyRW50cnkgPSB0b3RhbEVudHJpZXMgPiAwID8gdG90YWxYcEVhcm5lZCAvIHRvdGFsRW50cmllcyA6IDA7XHJcbiAgICBcclxuICAgIGNvbnN0IHRhZ0NvdW50cyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XHJcbiAgICBjb25zdCBjb21wYW5pb25Db3VudHMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xyXG4gICAgY29uc3QgcGxhY2VDb3VudHMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xyXG4gICAgXHJcbiAgICBlbnRyaWVzLmZvckVhY2goZW50cnkgPT4ge1xyXG4gICAgICBlbnRyeS50YWdzLmZvckVhY2godGFnID0+IHRhZ0NvdW50cy5zZXQodGFnLCAodGFnQ291bnRzLmdldCh0YWcpIHx8IDApICsgMSkpO1xyXG4gICAgICBlbnRyeS5jb21wYW5pb25zLmZvckVhY2goY29tcCA9PiBjb21wYW5pb25Db3VudHMuc2V0KGNvbXAsIChjb21wYW5pb25Db3VudHMuZ2V0KGNvbXApIHx8IDApICsgMSkpO1xyXG4gICAgICBlbnRyeS5wbGFjZXMuZm9yRWFjaChwbGFjZSA9PiBwbGFjZUNvdW50cy5zZXQocGxhY2UsIChwbGFjZUNvdW50cy5nZXQocGxhY2UpIHx8IDApICsgMSkpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGNvbnN0IGN1cnJlbnRNb250aCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCA3KTtcclxuICAgIGNvbnN0IGVudHJpZXNUaGlzTW9udGggPSBlbnRyaWVzLmZpbHRlcihlbnRyeSA9PiBlbnRyeS5kYXRlLnN0YXJ0c1dpdGgoY3VycmVudE1vbnRoKSkubGVuZ3RoO1xyXG4gICAgY29uc3QgbHVjaWREcmVhbUNvdW50ID0gZW50cmllcy5maWx0ZXIoZW50cnkgPT4gZW50cnkudGFncy5pbmNsdWRlcygnbHVjaWQnKSkubGVuZ3RoO1xyXG4gICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0b3RhbEVudHJpZXMsXHJcbiAgICAgIHRvdGFsWHBFYXJuZWQsXHJcbiAgICAgIGF2ZXJhZ2VYcFBlckVudHJ5LFxyXG4gICAgICBtb3N0VXNlZFRhZ3M6IEFycmF5LmZyb20odGFnQ291bnRzLmVudHJpZXMoKSlcclxuICAgICAgICAubWFwKChbdGFnLCBjb3VudF0pID0+ICh7IHRhZywgY291bnQgfSkpXHJcbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IGIuY291bnQgLSBhLmNvdW50KVxyXG4gICAgICAgIC5zbGljZSgwLCAxMCksXHJcbiAgICAgIGZhdm9yaXRlQ29tcGFuaW9uczogQXJyYXkuZnJvbShjb21wYW5pb25Db3VudHMuZW50cmllcygpKVxyXG4gICAgICAgIC5tYXAoKFtuYW1lLCBjb3VudF0pID0+ICh7IG5hbWUsIGNvdW50IH0pKVxyXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmNvdW50IC0gYS5jb3VudClcclxuICAgICAgICAuc2xpY2UoMCwgMTApLFxyXG4gICAgICBmYXZvcml0ZUxvY2F0aW9uczogQXJyYXkuZnJvbShwbGFjZUNvdW50cy5lbnRyaWVzKCkpXHJcbiAgICAgICAgLm1hcCgoW3BsYWNlLCBjb3VudF0pID0+ICh7IHBsYWNlLCBjb3VudCB9KSlcclxuICAgICAgICAuc29ydCgoYSwgYikgPT4gYi5jb3VudCAtIGEuY291bnQpXHJcbiAgICAgICAgLnNsaWNlKDAsIDEwKSxcclxuICAgICAgZW50cmllc1RoaXNNb250aCxcclxuICAgICAgbHVjaWREcmVhbUNvdW50LFxyXG4gICAgfTtcclxuICB9LCBbZW50cmllc10pO1xyXG5cclxuICBjb25zdCBleHBvcnRKb3VybmFsID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgY29uc3QgZGF0YSA9IEpTT04uc3RyaW5naWZ5KGVudHJpZXMsIG51bGwsIDIpO1xyXG4gICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtkYXRhXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vanNvbicgfSk7XHJcbiAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgIGEuaHJlZiA9IHVybDtcclxuICAgIGEuZG93bmxvYWQgPSBgZHJlYW0tam91cm5hbC1leHBvcnQtJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXX0uanNvbmA7XHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpO1xyXG4gICAgYS5jbGljaygpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKTtcclxuICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcclxuICB9LCBbZW50cmllc10pO1xyXG5cclxuICBjb25zdCBpbXBvcnRKb3VybmFsID0gdXNlQ2FsbGJhY2soKGpzb25EYXRhOiBzdHJpbmcpOiB7IHN1Y2Nlc3M6IGJvb2xlYW47IGltcG9ydGVkOiBudW1iZXI7IGVycm9yczogc3RyaW5nW10gfSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBpbXBvcnRlZCA9IEpTT04ucGFyc2UoanNvbkRhdGEpIGFzIERyZWFtSm91cm5hbEVudHJ5W107XHJcbiAgICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgbGV0IGltcG9ydGVkQ291bnQgPSAwO1xyXG4gICAgICBcclxuICAgICAgaW1wb3J0ZWQuZm9yRWFjaCgoZW50cnksIGluZGV4KSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGlmICghZW50cnkuaWQgfHwgIWVudHJ5LnRpdGxlIHx8ICFlbnRyeS5kYXRlIHx8ICFlbnRyeS5jb250ZW50KSB7XHJcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKGBFbnRyeSAke2luZGV4ICsgMX06IE1pc3NpbmcgcmVxdWlyZWQgZmllbGRzYCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgY29uc3QgZXhpc3RpbmdFbnRyeSA9IGVudHJpZXMuZmluZChlID0+IGUuaWQgPT09IGVudHJ5LmlkKTtcclxuICAgICAgICAgIGlmICghZXhpc3RpbmdFbnRyeSkge1xyXG4gICAgICAgICAgICBhZGRFbnRyeShlbnRyeSk7XHJcbiAgICAgICAgICAgIGltcG9ydGVkQ291bnQrKztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgIGVycm9ycy5wdXNoKGBFbnRyeSAke2luZGV4ICsgMX06ICR7ZXJyfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBpbXBvcnRlZDogaW1wb3J0ZWRDb3VudCwgZXJyb3JzIH07XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGltcG9ydGVkOiAwLCBlcnJvcnM6IFtgSW52YWxpZCBKU09OOiAke2Vycn1gXSB9O1xyXG4gICAgfVxyXG4gIH0sIFtlbnRyaWVzLCBhZGRFbnRyeV0pO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgZW50cmllcyxcclxuICAgIHN0cmVhayxcclxuICAgIHN0YXRzLFxyXG4gICAgYWNoaWV2ZW1lbnRzLFxyXG4gICAgeHBDb25maWcsXHJcbiAgICBhZGRFbnRyeSxcclxuICAgIHVwZGF0ZUVudHJ5LFxyXG4gICAgZGVsZXRlRW50cnksXHJcbiAgICBmaWx0ZXJFbnRyaWVzLFxyXG4gICAgZXhwb3J0Sm91cm5hbCxcclxuICAgIGltcG9ydEpvdXJuYWwsXHJcbiAgICBzZXRYcENvbmZpZyxcclxuICAgIGNhbGN1bGF0ZUVudHJ5WHAsXHJcbiAgfSBhcyBjb25zdDtcclxufSJdLCJuYW1lcyI6WyJ1c2VDYWxsYmFjayIsInVzZU1lbW8iLCJ1c2VQZXJzaXN0ZW50U3RhdGUiLCJ1c2VJbnZlbnRvcnkiLCJ1c2VDb21wYW5pb25zIiwiREVGQVVMVF9YUF9DT05GSUciLCJqb3VybmFsRGF0YSIsIkpPVVJOQUxfS0VZIiwiU1RSRUFLX0tFWSIsIlhQX0NPTkZJR19LRVkiLCJBQ0hJRVZFTUVOVFNfS0VZIiwidXNlRHJlYW1Kb3VybmFsIiwiZW50cmllcyIsInNldEVudHJpZXMiLCJzdHJlYWsiLCJzZXRTdHJlYWsiLCJjdXJyZW50IiwibG9uZ2VzdCIsImxhc3RFbnRyeURhdGUiLCJ4cENvbmZpZyIsInNldFhwQ29uZmlnIiwiYWNoaWV2ZW1lbnRzIiwic2V0QWNoaWV2ZW1lbnRzIiwiYXdhcmRYcCIsImdhaW5YcEZvckNvbXBhbmlvbnMiLCJjYWxjdWxhdGVFbnRyeVhwIiwiZW50cnkiLCJ4cCIsImJhc2VFbnRyeSIsInRhZ3MiLCJmb3JFYWNoIiwidGFnIiwidG9Mb3dlckNhc2UiLCJsdWNpZFRhZyIsInJpdHVhbFRhZyIsInBhbnR5VGFnIiwidGVtcGxlVGFnIiwicXVlc3RUYWciLCJ1cGRhdGVTdHJlYWsiLCJlbnRyeURhdGUiLCJ0b2RheSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwieWVzdGVyZGF5Iiwibm93IiwicHJldiIsIm5ld0N1cnJlbnQiLCJuZXdMb25nZXN0Iiwic3RyZWFrQm9udXMiLCJNYXRoIiwibWluIiwiY2hlY2tBY2hpZXZlbWVudHMiLCJuZXdFbnRyaWVzIiwibmV3QWNoaWV2ZW1lbnRzIiwibGVuZ3RoIiwiaW5jbHVkZXMiLCJwdXNoIiwicGFudHlFbnRyaWVzIiwiZmlsdGVyIiwiZSIsImFkZEVudHJ5IiwibmV3RW50cnkiLCJpZCIsInJhbmRvbSIsInRvU3RyaW5nIiwic2xpY2UiLCJ4cEVhcm5lZCIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsInVwZGF0ZWRFbnRyaWVzIiwic29ydCIsImEiLCJiIiwiZGF0ZSIsImdldFRpbWUiLCJ1cGRhdGVFbnRyeSIsInVwZGF0ZXMiLCJ4cERpZmZlcmVuY2UiLCJtYXAiLCJvcmlnaW5hbFhwIiwidXBkYXRlZCIsImRlbGV0ZUVudHJ5IiwiZW50cnlUb0RlbGV0ZSIsImZpbmQiLCJmaWx0ZXJFbnRyaWVzIiwic2VhcmNoVGV4dCIsInNlYXJjaCIsInRpdGxlIiwiY29udGVudCIsInNvbWUiLCJjb21wYW5pb25zIiwiY29tcCIsInBsYWNlcyIsInBsYWNlIiwiZGF0ZUZyb20iLCJkYXRlVG8iLCJtaW5YcCIsIm1heFhwIiwic3RhdHMiLCJ0b3RhbEVudHJpZXMiLCJ0b3RhbFhwRWFybmVkIiwicmVkdWNlIiwic3VtIiwiYXZlcmFnZVhwUGVyRW50cnkiLCJ0YWdDb3VudHMiLCJNYXAiLCJjb21wYW5pb25Db3VudHMiLCJwbGFjZUNvdW50cyIsInNldCIsImdldCIsImN1cnJlbnRNb250aCIsImVudHJpZXNUaGlzTW9udGgiLCJzdGFydHNXaXRoIiwibHVjaWREcmVhbUNvdW50IiwibW9zdFVzZWRUYWdzIiwiQXJyYXkiLCJmcm9tIiwiY291bnQiLCJmYXZvcml0ZUNvbXBhbmlvbnMiLCJuYW1lIiwiZmF2b3JpdGVMb2NhdGlvbnMiLCJleHBvcnRKb3VybmFsIiwiZGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJibG9iIiwiQmxvYiIsInR5cGUiLCJ1cmwiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJocmVmIiwiZG93bmxvYWQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJjbGljayIsInJlbW92ZUNoaWxkIiwicmV2b2tlT2JqZWN0VVJMIiwiaW1wb3J0Sm91cm5hbCIsImpzb25EYXRhIiwiaW1wb3J0ZWQiLCJwYXJzZSIsImVycm9ycyIsImltcG9ydGVkQ291bnQiLCJpbmRleCIsImV4aXN0aW5nRW50cnkiLCJlcnIiLCJzdWNjZXNzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useDreamJournal.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useDungeonAchievements.ts":
/*!*********************************************!*\
  !*** ./app/hooks/useDungeonAchievements.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useDungeonAchievements: () => (/* binding */ useDungeonAchievements)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _useAchievements__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useAchievements */ \"(ssr)/./app/hooks/useAchievements.ts\");\n/* harmony import */ var _useDungeons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useDungeons */ \"(ssr)/./app/hooks/useDungeons.ts\");\n/* __next_internal_client_entry_do_not_use__ useDungeonAchievements auto */ \n\n\n/**\r\n * A custom hook to manage dungeon-related achievements.\r\n * It listens to changes in dungeon state and unlocks achievements when their triggers are met.\r\n */ function useDungeonAchievements() {\n    const { achievements, unlockAchievement } = (0,_useAchievements__WEBPACK_IMPORTED_MODULE_1__.useAchievements)();\n    const { dungeons } = (0,_useDungeons__WEBPACK_IMPORTED_MODULE_2__.useDungeons)();\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useDungeonAchievements.useEffect\": ()=>{\n            // Don't run if achievements or dungeons haven't loaded yet\n            if (!achievements || achievements.length === 0 || !dungeons || dungeons.length === 0) return;\n            // Filter for only un-unlocked Dungeon achievements to check\n            const dungeonAchievements = achievements.filter({\n                \"useDungeonAchievements.useEffect.dungeonAchievements\": (a)=>!a.unlocked && a.category === 'Dungeon'\n            }[\"useDungeonAchievements.useEffect.dungeonAchievements\"]);\n            if (dungeonAchievements.length === 0) return;\n            const clearedDungeonsCount = dungeons.filter({\n                \"useDungeonAchievements.useEffect\": (d)=>d.completed\n            }[\"useDungeonAchievements.useEffect\"]).length;\n            dungeonAchievements.forEach({\n                \"useDungeonAchievements.useEffect\": (achievement)=>{\n                    const { trigger } = achievement;\n                    let conditionMet = false;\n                    if (trigger.type === 'DUNGEON_CLEARED' && clearedDungeonsCount >= trigger.value) {\n                        conditionMet = true;\n                    }\n                    if (conditionMet) {\n                        unlockAchievement(achievement.id);\n                    }\n                }\n            }[\"useDungeonAchievements.useEffect\"]);\n        // This effect should re-run whenever the player's dungeon progress changes.\n        }\n    }[\"useDungeonAchievements.useEffect\"], [\n        dungeons,\n        achievements,\n        unlockAchievement\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvaG9va3MvdXNlRHVuZ2VvbkFjaGlldmVtZW50cy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs0RUFFa0M7QUFDa0I7QUFDUjtBQUU1Qzs7O0NBR0MsR0FDTSxTQUFTRztJQUNkLE1BQU0sRUFBRUMsWUFBWSxFQUFFQyxpQkFBaUIsRUFBRSxHQUFHSixpRUFBZUE7SUFDM0QsTUFBTSxFQUFFSyxRQUFRLEVBQUUsR0FBR0oseURBQVdBO0lBRWhDRixnREFBU0E7NENBQUM7WUFDUiwyREFBMkQ7WUFDM0QsSUFBSSxDQUFDSSxnQkFBZ0JBLGFBQWFHLE1BQU0sS0FBSyxLQUFLLENBQUNELFlBQVlBLFNBQVNDLE1BQU0sS0FBSyxHQUFHO1lBRXRGLDREQUE0RDtZQUM1RCxNQUFNQyxzQkFBc0JKLGFBQWFLLE1BQU07d0VBQzdDQyxDQUFBQSxJQUFLLENBQUNBLEVBQUVDLFFBQVEsSUFBSUQsRUFBRUUsUUFBUSxLQUFLOztZQUdyQyxJQUFJSixvQkFBb0JELE1BQU0sS0FBSyxHQUFHO1lBRXRDLE1BQU1NLHVCQUF1QlAsU0FBU0csTUFBTTtvREFBQ0ssQ0FBQUEsSUFBS0EsRUFBRUMsU0FBUzttREFBRVIsTUFBTTtZQUVyRUMsb0JBQW9CUSxPQUFPO29EQUFDQyxDQUFBQTtvQkFDMUIsTUFBTSxFQUFFQyxPQUFPLEVBQUUsR0FBR0Q7b0JBQ3BCLElBQUlFLGVBQWU7b0JBRW5CLElBQUlELFFBQVFFLElBQUksS0FBSyxxQkFBcUJQLHdCQUF3QkssUUFBUUcsS0FBSyxFQUFFO3dCQUMvRUYsZUFBZTtvQkFDakI7b0JBRUEsSUFBSUEsY0FBYzt3QkFDaEJkLGtCQUFrQlksWUFBWUssRUFBRTtvQkFDbEM7Z0JBQ0Y7O1FBQ0EsNEVBQTRFO1FBQzlFOzJDQUFHO1FBQUNoQjtRQUFVRjtRQUFjQztLQUFrQjtBQUNoRCIsInNvdXJjZXMiOlsiQzpcXE1vbW15IEx1Y3lcXFByb2plY3RzXFxMdWNpZCBEcmVhbVxcYXBwXFxob29rc1xcdXNlRHVuZ2VvbkFjaGlldmVtZW50cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XHJcblxyXG5pbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVzZUFjaGlldmVtZW50cyB9IGZyb20gJy4vdXNlQWNoaWV2ZW1lbnRzJztcclxuaW1wb3J0IHsgdXNlRHVuZ2VvbnMgfSBmcm9tICcuL3VzZUR1bmdlb25zJztcclxuXHJcbi8qKlxyXG4gKiBBIGN1c3RvbSBob29rIHRvIG1hbmFnZSBkdW5nZW9uLXJlbGF0ZWQgYWNoaWV2ZW1lbnRzLlxyXG4gKiBJdCBsaXN0ZW5zIHRvIGNoYW5nZXMgaW4gZHVuZ2VvbiBzdGF0ZSBhbmQgdW5sb2NrcyBhY2hpZXZlbWVudHMgd2hlbiB0aGVpciB0cmlnZ2VycyBhcmUgbWV0LlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZUR1bmdlb25BY2hpZXZlbWVudHMoKSB7XHJcbiAgY29uc3QgeyBhY2hpZXZlbWVudHMsIHVubG9ja0FjaGlldmVtZW50IH0gPSB1c2VBY2hpZXZlbWVudHMoKTtcclxuICBjb25zdCB7IGR1bmdlb25zIH0gPSB1c2VEdW5nZW9ucygpO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gRG9uJ3QgcnVuIGlmIGFjaGlldmVtZW50cyBvciBkdW5nZW9ucyBoYXZlbid0IGxvYWRlZCB5ZXRcclxuICAgIGlmICghYWNoaWV2ZW1lbnRzIHx8IGFjaGlldmVtZW50cy5sZW5ndGggPT09IDAgfHwgIWR1bmdlb25zIHx8IGR1bmdlb25zLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG5cclxuICAgIC8vIEZpbHRlciBmb3Igb25seSB1bi11bmxvY2tlZCBEdW5nZW9uIGFjaGlldmVtZW50cyB0byBjaGVja1xyXG4gICAgY29uc3QgZHVuZ2VvbkFjaGlldmVtZW50cyA9IGFjaGlldmVtZW50cy5maWx0ZXIoXHJcbiAgICAgIGEgPT4gIWEudW5sb2NrZWQgJiYgYS5jYXRlZ29yeSA9PT0gJ0R1bmdlb24nXHJcbiAgICApO1xyXG5cclxuICAgIGlmIChkdW5nZW9uQWNoaWV2ZW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGNsZWFyZWREdW5nZW9uc0NvdW50ID0gZHVuZ2VvbnMuZmlsdGVyKGQgPT4gZC5jb21wbGV0ZWQpLmxlbmd0aDtcclxuXHJcbiAgICBkdW5nZW9uQWNoaWV2ZW1lbnRzLmZvckVhY2goYWNoaWV2ZW1lbnQgPT4ge1xyXG4gICAgICBjb25zdCB7IHRyaWdnZXIgfSA9IGFjaGlldmVtZW50O1xyXG4gICAgICBsZXQgY29uZGl0aW9uTWV0ID0gZmFsc2U7XHJcblxyXG4gICAgICBpZiAodHJpZ2dlci50eXBlID09PSAnRFVOR0VPTl9DTEVBUkVEJyAmJiBjbGVhcmVkRHVuZ2VvbnNDb3VudCA+PSB0cmlnZ2VyLnZhbHVlKSB7XHJcbiAgICAgICAgY29uZGl0aW9uTWV0ID0gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGNvbmRpdGlvbk1ldCkge1xyXG4gICAgICAgIHVubG9ja0FjaGlldmVtZW50KGFjaGlldmVtZW50LmlkKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvLyBUaGlzIGVmZmVjdCBzaG91bGQgcmUtcnVuIHdoZW5ldmVyIHRoZSBwbGF5ZXIncyBkdW5nZW9uIHByb2dyZXNzIGNoYW5nZXMuXHJcbiAgfSwgW2R1bmdlb25zLCBhY2hpZXZlbWVudHMsIHVubG9ja0FjaGlldmVtZW50XSk7XHJcbn1cclxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZUFjaGlldmVtZW50cyIsInVzZUR1bmdlb25zIiwidXNlRHVuZ2VvbkFjaGlldmVtZW50cyIsImFjaGlldmVtZW50cyIsInVubG9ja0FjaGlldmVtZW50IiwiZHVuZ2VvbnMiLCJsZW5ndGgiLCJkdW5nZW9uQWNoaWV2ZW1lbnRzIiwiZmlsdGVyIiwiYSIsInVubG9ja2VkIiwiY2F0ZWdvcnkiLCJjbGVhcmVkRHVuZ2VvbnNDb3VudCIsImQiLCJjb21wbGV0ZWQiLCJmb3JFYWNoIiwiYWNoaWV2ZW1lbnQiLCJ0cmlnZ2VyIiwiY29uZGl0aW9uTWV0IiwidHlwZSIsInZhbHVlIiwiaWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useDungeonAchievements.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useDungeons.ts":
/*!**********************************!*\
  !*** ./app/hooks/useDungeons.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useDungeons: () => (/* binding */ useDungeons)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _lib_dungeons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/dungeons */ \"(ssr)/./app/lib/dungeons.ts\");\n/* __next_internal_client_entry_do_not_use__ useDungeons auto */ \n\n\nfunction useDungeons() {\n    const [dungeons, setDungeons] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)('dungeons', _lib_dungeons__WEBPACK_IMPORTED_MODULE_2__.cloneDefaultDungeons);\n    const setSafe = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[setSafe]\": (updater)=>{\n            setDungeons({\n                \"useDungeons.useCallback[setSafe]\": (previous)=>updater(previous).map(_lib_dungeons__WEBPACK_IMPORTED_MODULE_2__.ensureDungeon)\n            }[\"useDungeons.useCallback[setSafe]\"]);\n        }\n    }[\"useDungeons.useCallback[setSafe]\"], [\n        setDungeons\n    ]);\n    const addDungeon = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[addDungeon]\": (dungeon)=>{\n            setSafe({\n                \"useDungeons.useCallback[addDungeon]\": (previous)=>{\n                    if (previous.some({\n                        \"useDungeons.useCallback[addDungeon]\": (entry)=>entry.id === dungeon.id\n                    }[\"useDungeons.useCallback[addDungeon]\"])) {\n                        return previous.map({\n                            \"useDungeons.useCallback[addDungeon]\": (entry)=>entry.id === dungeon.id ? (0,_lib_dungeons__WEBPACK_IMPORTED_MODULE_2__.ensureDungeon)(dungeon) : entry\n                        }[\"useDungeons.useCallback[addDungeon]\"]);\n                    }\n                    return [\n                        ...previous,\n                        (0,_lib_dungeons__WEBPACK_IMPORTED_MODULE_2__.ensureDungeon)(dungeon)\n                    ];\n                }\n            }[\"useDungeons.useCallback[addDungeon]\"]);\n        }\n    }[\"useDungeons.useCallback[addDungeon]\"], [\n        setSafe\n    ]);\n    const updateDungeon = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[updateDungeon]\": (dungeonId, updater)=>{\n            setSafe({\n                \"useDungeons.useCallback[updateDungeon]\": (previous)=>previous.map({\n                        \"useDungeons.useCallback[updateDungeon]\": (entry)=>entry.id === dungeonId ? (0,_lib_dungeons__WEBPACK_IMPORTED_MODULE_2__.ensureDungeon)(updater((0,_lib_dungeons__WEBPACK_IMPORTED_MODULE_2__.cloneDungeon)(entry))) : entry\n                    }[\"useDungeons.useCallback[updateDungeon]\"])\n            }[\"useDungeons.useCallback[updateDungeon]\"]);\n        }\n    }[\"useDungeons.useCallback[updateDungeon]\"], [\n        setSafe\n    ]);\n    const removeDungeon = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[removeDungeon]\": (dungeonId)=>{\n            setSafe({\n                \"useDungeons.useCallback[removeDungeon]\": (previous)=>previous.filter({\n                        \"useDungeons.useCallback[removeDungeon]\": (entry)=>entry.id !== dungeonId\n                    }[\"useDungeons.useCallback[removeDungeon]\"])\n            }[\"useDungeons.useCallback[removeDungeon]\"]);\n        }\n    }[\"useDungeons.useCallback[removeDungeon]\"], [\n        setSafe\n    ]);\n    const addRoom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[addRoom]\": (dungeonId, room)=>{\n            updateDungeon(dungeonId, {\n                \"useDungeons.useCallback[addRoom]\": (dungeon)=>({\n                        ...dungeon,\n                        rooms: [\n                            ...dungeon.rooms,\n                            (0,_lib_dungeons__WEBPACK_IMPORTED_MODULE_2__.ensureRoom)(room)\n                        ]\n                    })\n            }[\"useDungeons.useCallback[addRoom]\"]);\n        }\n    }[\"useDungeons.useCallback[addRoom]\"], [\n        updateDungeon\n    ]);\n    const updateRoom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[updateRoom]\": (dungeonId, roomId, patch)=>{\n            updateDungeon(dungeonId, {\n                \"useDungeons.useCallback[updateRoom]\": (dungeon)=>({\n                        ...dungeon,\n                        rooms: dungeon.rooms.map({\n                            \"useDungeons.useCallback[updateRoom]\": (room)=>room.id === roomId ? (0,_lib_dungeons__WEBPACK_IMPORTED_MODULE_2__.ensureRoom)({\n                                    ...room,\n                                    ...patch\n                                }) : room\n                        }[\"useDungeons.useCallback[updateRoom]\"])\n                    })\n            }[\"useDungeons.useCallback[updateRoom]\"]);\n        }\n    }[\"useDungeons.useCallback[updateRoom]\"], [\n        updateDungeon\n    ]);\n    const removeRoom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[removeRoom]\": (dungeonId, roomId)=>{\n            updateDungeon(dungeonId, {\n                \"useDungeons.useCallback[removeRoom]\": (dungeon)=>({\n                        ...dungeon,\n                        rooms: dungeon.rooms.filter({\n                            \"useDungeons.useCallback[removeRoom]\": (room)=>room.id !== roomId\n                        }[\"useDungeons.useCallback[removeRoom]\"])\n                    })\n            }[\"useDungeons.useCallback[removeRoom]\"]);\n        }\n    }[\"useDungeons.useCallback[removeRoom]\"], [\n        updateDungeon\n    ]);\n    const resetDungeon = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[resetDungeon]\": (dungeonId)=>{\n            updateDungeon(dungeonId, {\n                \"useDungeons.useCallback[resetDungeon]\": (dungeon)=>({\n                        ...dungeon,\n                        completed: false\n                    })\n            }[\"useDungeons.useCallback[resetDungeon]\"]);\n        }\n    }[\"useDungeons.useCallback[resetDungeon]\"], [\n        updateDungeon\n    ]);\n    const markCompleted = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[markCompleted]\": (dungeonId)=>{\n            updateDungeon(dungeonId, {\n                \"useDungeons.useCallback[markCompleted]\": (dungeon)=>({\n                        ...dungeon,\n                        completed: true\n                    })\n            }[\"useDungeons.useCallback[markCompleted]\"]);\n        }\n    }[\"useDungeons.useCallback[markCompleted]\"], [\n        updateDungeon\n    ]);\n    const replaceAll = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[replaceAll]\": (next)=>{\n            setSafe({\n                \"useDungeons.useCallback[replaceAll]\": ()=>next\n            }[\"useDungeons.useCallback[replaceAll]\"]);\n        }\n    }[\"useDungeons.useCallback[replaceAll]\"], [\n        setSafe\n    ]);\n    return {\n        dungeons,\n        addDungeon,\n        updateDungeon,\n        removeDungeon,\n        addRoom,\n        updateRoom,\n        removeRoom,\n        resetDungeon,\n        markCompleted,\n        replaceAll\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBQ0Y7aURBQ0E7UUFBQ1o7S0FBYztJQUdqQixNQUFNYyxhQUFhaEMsa0RBQVdBOytDQUM1QixDQUFDaUM7WUFDQ3hCO3VEQUFRLElBQU13Qjs7UUFDaEI7OENBQ0E7UUFBQ3hCO0tBQVE7SUFHWCxPQUFPO1FBQ0xGO1FBQ0FNO1FBQ0FLO1FBQ0FFO1FBQ0FFO1FBQ0FHO1FBQ0FHO1FBQ0FDO1FBQ0FFO1FBQ0FDO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiQzpcXE1vbW15IEx1Y3lcXFByb2plY3RzXFxMdWNpZCBEcmVhbVxcYXBwXFxob29rc1xcdXNlRHVuZ2VvbnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgeyB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVBlcnNpc3RlbnRTdGF0ZSB9IGZyb20gJy4vdXNlUGVyc2lzdGVudFN0YXRlJztcbmltcG9ydCB7IGNsb25lRHVuZ2VvbiwgY2xvbmVEZWZhdWx0RHVuZ2VvbnMsIGVuc3VyZUR1bmdlb24sIGVuc3VyZVJvb20sIHR5cGUgRHVuZ2VvbiwgdHlwZSBEdW5nZW9uUm9vbSB9IGZyb20gJy4uL2xpYi9kdW5nZW9ucyc7XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VEdW5nZW9ucygpIHtcbiAgY29uc3QgW2R1bmdlb25zLCBzZXREdW5nZW9uc10gPSB1c2VQZXJzaXN0ZW50U3RhdGU8RHVuZ2VvbltdPihcbiAgICAnZHVuZ2VvbnMnLFxuICAgIGNsb25lRGVmYXVsdER1bmdlb25zXG4gICk7XG5cbiAgY29uc3Qgc2V0U2FmZSA9IHVzZUNhbGxiYWNrKFxuICAgICh1cGRhdGVyOiAocHJldmlvdXM6IER1bmdlb25bXSkgPT4gRHVuZ2VvbltdKSA9PiB7XG4gICAgICBzZXREdW5nZW9ucygocHJldmlvdXMpID0+IHVwZGF0ZXIocHJldmlvdXMpLm1hcChlbnN1cmVEdW5nZW9uKSk7XG4gICAgfSxcbiAgICBbc2V0RHVuZ2VvbnNdXG4gICk7XG5cbiAgY29uc3QgYWRkRHVuZ2VvbiA9IHVzZUNhbGxiYWNrKFxuICAgIChkdW5nZW9uOiBEdW5nZW9uKSA9PiB7XG4gICAgICBzZXRTYWZlKChwcmV2aW91cykgPT4ge1xuICAgICAgICBpZiAocHJldmlvdXMuc29tZSgoZW50cnkpID0+IGVudHJ5LmlkID09PSBkdW5nZW9uLmlkKSkge1xuICAgICAgICAgIHJldHVybiBwcmV2aW91cy5tYXAoKGVudHJ5KSA9PlxuICAgICAgICAgICAgZW50cnkuaWQgPT09IGR1bmdlb24uaWQgPyBlbnN1cmVEdW5nZW9uKGR1bmdlb24pIDogZW50cnlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbLi4ucHJldmlvdXMsIGVuc3VyZUR1bmdlb24oZHVuZ2VvbildO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBbc2V0U2FmZV1cbiAgKTtcblxuICBjb25zdCB1cGRhdGVEdW5nZW9uID0gdXNlQ2FsbGJhY2soXG4gICAgKGR1bmdlb25JZDogc3RyaW5nLCB1cGRhdGVyOiAoZHVuZ2VvbjogRHVuZ2VvbikgPT4gRHVuZ2VvbikgPT4ge1xuICAgICAgc2V0U2FmZSgocHJldmlvdXMpID0+XG4gICAgICAgIHByZXZpb3VzLm1hcCgoZW50cnkpID0+XG4gICAgICAgICAgZW50cnkuaWQgPT09IGR1bmdlb25JZCA/IGVuc3VyZUR1bmdlb24odXBkYXRlcihjbG9uZUR1bmdlb24oZW50cnkpKSkgOiBlbnRyeVxuICAgICAgICApXG4gICAgICApO1xuICAgIH0sXG4gICAgW3NldFNhZmVdXG4gICk7XG5cbiAgY29uc3QgcmVtb3ZlRHVuZ2VvbiA9IHVzZUNhbGxiYWNrKFxuICAgIChkdW5nZW9uSWQ6IHN0cmluZykgPT4ge1xuICAgICAgc2V0U2FmZSgocHJldmlvdXMpID0+IHByZXZpb3VzLmZpbHRlcigoZW50cnkpID0+IGVudHJ5LmlkICE9PSBkdW5nZW9uSWQpKTtcbiAgICB9LFxuICAgIFtzZXRTYWZlXVxuICApO1xuXG4gIGNvbnN0IGFkZFJvb20gPSB1c2VDYWxsYmFjayhcbiAgICAoZHVuZ2VvbklkOiBzdHJpbmcsIHJvb206IER1bmdlb25Sb29tKSA9PiB7XG4gICAgICB1cGRhdGVEdW5nZW9uKGR1bmdlb25JZCwgKGR1bmdlb24pID0+ICh7XG4gICAgICAgIC4uLmR1bmdlb24sXG4gICAgICAgIHJvb21zOiBbLi4uZHVuZ2Vvbi5yb29tcywgZW5zdXJlUm9vbShyb29tKV0sXG4gICAgICB9KSk7XG4gICAgfSxcbiAgICBbdXBkYXRlRHVuZ2Vvbl1cbiAgKTtcblxuICBjb25zdCB1cGRhdGVSb29tID0gdXNlQ2FsbGJhY2soXG4gICAgKGR1bmdlb25JZDogc3RyaW5nLCByb29tSWQ6IHN0cmluZywgcGF0Y2g6IFBhcnRpYWw8RHVuZ2VvblJvb20+KSA9PiB7XG4gICAgICB1cGRhdGVEdW5nZW9uKGR1bmdlb25JZCwgKGR1bmdlb24pID0+ICh7XG4gICAgICAgIC4uLmR1bmdlb24sXG4gICAgICAgIHJvb21zOiBkdW5nZW9uLnJvb21zLm1hcCgocm9vbSkgPT5cbiAgICAgICAgICByb29tLmlkID09PSByb29tSWQgPyBlbnN1cmVSb29tKHsgLi4ucm9vbSwgLi4ucGF0Y2ggfSkgOiByb29tXG4gICAgICAgICksXG4gICAgICB9KSk7XG4gICAgfSxcbiAgICBbdXBkYXRlRHVuZ2Vvbl1cbiAgKTtcblxuICBjb25zdCByZW1vdmVSb29tID0gdXNlQ2FsbGJhY2soXG4gICAgKGR1bmdlb25JZDogc3RyaW5nLCByb29tSWQ6IHN0cmluZykgPT4ge1xuICAgICAgdXBkYXRlRHVuZ2VvbihkdW5nZW9uSWQsIChkdW5nZW9uKSA9PiAoe1xuICAgICAgICAuLi5kdW5nZW9uLFxuICAgICAgICByb29tczogZHVuZ2Vvbi5yb29tcy5maWx0ZXIoKHJvb20pID0+IHJvb20uaWQgIT09IHJvb21JZCksXG4gICAgICB9KSk7XG4gICAgfSxcbiAgICBbdXBkYXRlRHVuZ2Vvbl1cbiAgKTtcblxuICBjb25zdCByZXNldER1bmdlb24gPSB1c2VDYWxsYmFjayhcbiAgICAoZHVuZ2VvbklkOiBzdHJpbmcpID0+IHtcbiAgICAgIHVwZGF0ZUR1bmdlb24oZHVuZ2VvbklkLCAoZHVuZ2VvbikgPT4gKHtcbiAgICAgICAgLi4uZHVuZ2VvbixcbiAgICAgICAgY29tcGxldGVkOiBmYWxzZSxcbiAgICAgIH0pKTtcbiAgICB9LFxuICAgIFt1cGRhdGVEdW5nZW9uXVxuICApO1xuXG4gIGNvbnN0IG1hcmtDb21wbGV0ZWQgPSB1c2VDYWxsYmFjayhcbiAgICAoZHVuZ2VvbklkOiBzdHJpbmcpID0+IHtcbiAgICAgIHVwZGF0ZUR1bmdlb24oZHVuZ2VvbklkLCAoZHVuZ2VvbikgPT4gKHtcbiAgICAgICAgLi4uZHVuZ2VvbixcbiAgICAgICAgY29tcGxldGVkOiB0cnVlLFxuICAgICAgfSkpO1xuICAgIH0sXG4gICAgW3VwZGF0ZUR1bmdlb25dXG4gICk7XG5cbiAgY29uc3QgcmVwbGFjZUFsbCA9IHVzZUNhbGxiYWNrKFxuICAgIChuZXh0OiBEdW5nZW9uW10pID0+IHtcbiAgICAgIHNldFNhZmUoKCkgPT4gbmV4dCk7XG4gICAgfSxcbiAgICBbc2V0U2FmZV1cbiAgKTtcblxuICByZXR1cm4ge1xuICAgIGR1bmdlb25zLFxuICAgIGFkZER1bmdlb24sXG4gICAgdXBkYXRlRHVuZ2VvbixcbiAgICByZW1vdmVEdW5nZW9uLFxuICAgIGFkZFJvb20sXG4gICAgdXBkYXRlUm9vbSxcbiAgICByZW1vdmVSb29tLFxuICAgIHJlc2V0RHVuZ2VvbixcbiAgICBtYXJrQ29tcGxldGVkLFxuICAgIHJlcGxhY2VBbGwsXG4gIH0gYXMgY29uc3Q7XG59XG4iXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJ1c2VQZXJzaXN0ZW50U3RhdGUiLCJjbG9uZUR1bmdlb24iLCJjbG9uZURlZmF1bHREdW5nZW9ucyIsImVuc3VyZUR1bmdlb24iLCJlbnN1cmVSb29tIiwidXNlRHVuZ2VvbnMiLCJkdW5nZW9ucyIsInNldER1bmdlb25zIiwic2V0U2FmZSIsInVwZGF0ZXIiLCJwcmV2aW91cyIsIm1hcCIsImFkZER1bmdlb24iLCJkdW5nZW9uIiwic29tZSIsImVudHJ5IiwiaWQiLCJ1cGRhdGVEdW5nZW9uIiwiZHVuZ2VvbklkIiwicmVtb3ZlRHVuZ2VvbiIsImZpbHRlciIsImFkZFJvb20iLCJyb29tIiwicm9vbXMiLCJ1cGRhdGVSb29tIiwicm9vbUlkIiwicGF0Y2giLCJyZW1vdmVSb29tIiwicmVzZXREdW5nZW9uIiwiY29tcGxldGVkIiwibWFya0NvbXBsZXRlZCIsInJlcGxhY2VBbGwiLCJuZXh0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useDungeons.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useInventory.ts":
/*!***********************************!*\
  !*** ./app/hooks/useInventory.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useInventory: () => (/* binding */ useInventory)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _useBuffs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useBuffs */ \"(ssr)/./app/hooks/useBuffs.ts\");\n/* harmony import */ var _lib_inventory__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/inventory */ \"(ssr)/./app/lib/inventory.ts\");\n/* __next_internal_client_entry_do_not_use__ useInventory auto */ \n\n\n\nconst MAX_EQUIPPED_RELICS = 2;\nconst ITEM_ACQUIRE_XP = 25;\nconst EQUIP_OBEDIENCE_RELIC = 6;\nconst EQUIP_OBEDIENCE_PANTY = 8;\nfunction normaliseIcon(item) {\n    if (!item.icon || item.icon.trim().length === 0) {\n        return {\n            ...item,\n            icon: (0,_lib_inventory__WEBPACK_IMPORTED_MODULE_3__.getDefaultIcon)(item.type)\n        };\n    }\n    return item;\n}\nfunction useInventory() {\n    const [inventory, setInventory] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(\"inventory\", _lib_inventory__WEBPACK_IMPORTED_MODULE_3__.cloneDefaultInventory);\n    const [xp, setXp] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(\"xpTotal\", {\n        \"useInventory.usePersistentState\": ()=>3400\n    }[\"useInventory.usePersistentState\"]);\n    const [obedience, setObedience] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(\"obediencePoints\", {\n        \"useInventory.usePersistentState\": ()=>0\n    }[\"useInventory.usePersistentState\"]);\n    const [tokens, setTokens] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(\"dirtyTokens\", {\n        \"useInventory.usePersistentState\": ()=>0\n    }[\"useInventory.usePersistentState\"]);\n    const { applyEvent, activateBuffsBySource, deactivateBuffsBySource, triggerBuffBySource } = (0,_useBuffs__WEBPACK_IMPORTED_MODULE_2__.useBuffs)();\n    const equippedRelicCount = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useInventory.useMemo[equippedRelicCount]\": ()=>inventory.filter({\n                \"useInventory.useMemo[equippedRelicCount]\": (item)=>item.type === \"relic\" && item.equipped\n            }[\"useInventory.useMemo[equippedRelicCount]\"]).length\n    }[\"useInventory.useMemo[equippedRelicCount]\"], [\n        inventory\n    ]);\n    const grouped = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useInventory.useMemo[grouped]\": ()=>{\n            return _lib_inventory__WEBPACK_IMPORTED_MODULE_3__.ITEM_TYPE_ORDER.reduce({\n                \"useInventory.useMemo[grouped]\": (acc, type)=>{\n                    acc[type] = inventory.filter({\n                        \"useInventory.useMemo[grouped]\": (item)=>item.type === type\n                    }[\"useInventory.useMemo[grouped]\"]).sort({\n                        \"useInventory.useMemo[grouped]\": (a, b)=>a.name.localeCompare(b.name)\n                    }[\"useInventory.useMemo[grouped]\"]);\n                    return acc;\n                }\n            }[\"useInventory.useMemo[grouped]\"], {\n                relic: [],\n                panty: [],\n                shard: [],\n                consumable: [],\n                quest: []\n            });\n        }\n    }[\"useInventory.useMemo[grouped]\"], [\n        inventory\n    ]);\n    const ensureItem = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[ensureItem]\": (id, template)=>{\n            const existing = inventory.find({\n                \"useInventory.useCallback[ensureItem].existing\": (item)=>item.id === id\n            }[\"useInventory.useCallback[ensureItem].existing\"]);\n            if (existing) return normaliseIcon(existing);\n            const base = template ? {\n                id,\n                name: template.name ?? `Item ${id}`,\n                type: template.type ?? \"quest\",\n                desc: template.desc ?? \"A mysterious item discovered in the temple.\",\n                owned: template.owned ?? 0,\n                icon: template.icon,\n                equipped: template.equipped ?? false\n            } : (0,_lib_inventory__WEBPACK_IMPORTED_MODULE_3__.getDefaultItemTemplate)(id);\n            if (!base) {\n                return normaliseIcon({\n                    id,\n                    name: `Item ${id}`,\n                    type: \"quest\",\n                    desc: \"A mysterious item discovered in the temple.\",\n                    owned: 0\n                });\n            }\n            return normaliseIcon(base);\n        }\n    }[\"useInventory.useCallback[ensureItem]\"], [\n        inventory\n    ]);\n    const setInventorySafe = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[setInventorySafe]\": (updater)=>{\n            setInventory({\n                \"useInventory.useCallback[setInventorySafe]\": (previous)=>{\n                    const next = updater(previous);\n                    return next.map(normaliseIcon);\n                }\n            }[\"useInventory.useCallback[setInventorySafe]\"]);\n        }\n    }[\"useInventory.useCallback[setInventorySafe]\"], [\n        setInventory\n    ]);\n    const awardXp = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[awardXp]\": (amount)=>{\n            if (amount <= 0) return 0;\n            const total = applyEvent(\"xp\", amount);\n            setXp({\n                \"useInventory.useCallback[awardXp]\": (prev)=>prev + total\n            }[\"useInventory.useCallback[awardXp]\"]);\n            return total;\n        }\n    }[\"useInventory.useCallback[awardXp]\"], [\n        applyEvent,\n        setXp\n    ]);\n    const spendXp = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[spendXp]\": (amount)=>{\n            if (amount <= 0) return 0;\n            let deducted = 0;\n            setXp({\n                \"useInventory.useCallback[spendXp]\": (previous)=>{\n                    const next = Math.max(0, previous - amount);\n                    deducted = previous - next;\n                    return next;\n                }\n            }[\"useInventory.useCallback[spendXp]\"]);\n            return deducted;\n        }\n    }[\"useInventory.useCallback[spendXp]\"], [\n        setXp\n    ]);\n    const awardObedience = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[awardObedience]\": (amount)=>{\n            if (amount <= 0) return 0;\n            const total = applyEvent(\"obedience\", amount);\n            setObedience({\n                \"useInventory.useCallback[awardObedience]\": (prev)=>prev + total\n            }[\"useInventory.useCallback[awardObedience]\"]);\n            return total;\n        }\n    }[\"useInventory.useCallback[awardObedience]\"], [\n        applyEvent,\n        setObedience\n    ]);\n    const awardTokens = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[awardTokens]\": (amount)=>{\n            if (amount <= 0) return 0;\n            const value = Math.max(0, Math.round(amount));\n            setTokens({\n                \"useInventory.useCallback[awardTokens]\": (previous)=>previous + value\n            }[\"useInventory.useCallback[awardTokens]\"]);\n            return value;\n        }\n    }[\"useInventory.useCallback[awardTokens]\"], [\n        setTokens\n    ]);\n    const spendTokens = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[spendTokens]\": (amount)=>{\n            if (amount <= 0) return 0;\n            let deducted = 0;\n            setTokens({\n                \"useInventory.useCallback[spendTokens]\": (previous)=>{\n                    const next = Math.max(0, previous - amount);\n                    deducted = previous - next;\n                    return next;\n                }\n            }[\"useInventory.useCallback[spendTokens]\"]);\n            return deducted;\n        }\n    }[\"useInventory.useCallback[spendTokens]\"], [\n        setTokens\n    ]);\n    const gainItem = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[gainItem]\": (id, amount = 1, template)=>{\n            if (!id || amount === 0) return;\n            setInventorySafe({\n                \"useInventory.useCallback[gainItem]\": (previous)=>{\n                    const ensured = ensureItem(id, template);\n                    const existing = previous.find({\n                        \"useInventory.useCallback[gainItem].existing\": (item)=>item.id === id\n                    }[\"useInventory.useCallback[gainItem].existing\"]);\n                    if (existing) {\n                        return previous.map({\n                            \"useInventory.useCallback[gainItem]\": (item)=>item.id === id ? {\n                                    ...item,\n                                    owned: Math.max(0, item.owned + amount)\n                                } : item\n                        }[\"useInventory.useCallback[gainItem]\"]);\n                    }\n                    return [\n                        ...previous,\n                        {\n                            ...ensured,\n                            owned: Math.max(0, ensured.owned + amount)\n                        }\n                    ];\n                }\n            }[\"useInventory.useCallback[gainItem]\"]);\n            awardXp(Math.max(1, amount) * ITEM_ACQUIRE_XP);\n        }\n    }[\"useInventory.useCallback[gainItem]\"], [\n        awardXp,\n        ensureItem,\n        setInventorySafe\n    ]);\n    const setOwned = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[setOwned]\": (id, owned)=>{\n            setInventorySafe({\n                \"useInventory.useCallback[setOwned]\": (previous)=>previous.map({\n                        \"useInventory.useCallback[setOwned]\": (item)=>item.id === id ? {\n                                ...item,\n                                owned: Math.max(0, Math.round(Number.isFinite(owned) ? owned : item.owned))\n                            } : item\n                    }[\"useInventory.useCallback[setOwned]\"])\n            }[\"useInventory.useCallback[setOwned]\"]);\n        }\n    }[\"useInventory.useCallback[setOwned]\"], [\n        setInventorySafe\n    ]);\n    const adjustOwned = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[adjustOwned]\": (id, delta)=>{\n            if (!delta) return;\n            setInventorySafe({\n                \"useInventory.useCallback[adjustOwned]\": (previous)=>previous.map({\n                        \"useInventory.useCallback[adjustOwned]\": (item)=>item.id === id ? {\n                                ...item,\n                                owned: Math.max(0, item.owned + delta)\n                            } : item\n                    }[\"useInventory.useCallback[adjustOwned]\"])\n            }[\"useInventory.useCallback[adjustOwned]\"]);\n        }\n    }[\"useInventory.useCallback[adjustOwned]\"], [\n        setInventorySafe\n    ]);\n    const updateItem = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[updateItem]\": (id, patch)=>{\n            setInventorySafe({\n                \"useInventory.useCallback[updateItem]\": (previous)=>previous.map({\n                        \"useInventory.useCallback[updateItem]\": (item)=>item.id === id ? {\n                                ...item,\n                                ...patch\n                            } : item\n                    }[\"useInventory.useCallback[updateItem]\"])\n            }[\"useInventory.useCallback[updateItem]\"]);\n        }\n    }[\"useInventory.useCallback[updateItem]\"], [\n        setInventorySafe\n    ]);\n    const addOrReplaceItem = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[addOrReplaceItem]\": (item)=>{\n            const normalised = normaliseIcon(item);\n            setInventorySafe({\n                \"useInventory.useCallback[addOrReplaceItem]\": (previous)=>{\n                    const exists = previous.some({\n                        \"useInventory.useCallback[addOrReplaceItem].exists\": (entry)=>entry.id === normalised.id\n                    }[\"useInventory.useCallback[addOrReplaceItem].exists\"]);\n                    return exists ? previous.map({\n                        \"useInventory.useCallback[addOrReplaceItem]\": (entry)=>entry.id === normalised.id ? {\n                                ...entry,\n                                ...normalised\n                            } : entry\n                    }[\"useInventory.useCallback[addOrReplaceItem]\"]) : [\n                        ...previous,\n                        normalised\n                    ];\n                }\n            }[\"useInventory.useCallback[addOrReplaceItem]\"]);\n            if ((0,_lib_inventory__WEBPACK_IMPORTED_MODULE_3__.isEquippable)(normalised)) {\n                if (normalised.equipped) {\n                    activateBuffsBySource(normalised.name);\n                } else {\n                    deactivateBuffsBySource(normalised.name);\n                }\n            }\n        }\n    }[\"useInventory.useCallback[addOrReplaceItem]\"], [\n        activateBuffsBySource,\n        deactivateBuffsBySource,\n        setInventorySafe\n    ]);\n    const removeItem = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[removeItem]\": (id)=>{\n            const item = inventory.find({\n                \"useInventory.useCallback[removeItem].item\": (entry)=>entry.id === id\n            }[\"useInventory.useCallback[removeItem].item\"]);\n            if (item && (0,_lib_inventory__WEBPACK_IMPORTED_MODULE_3__.isEquippable)(item)) {\n                deactivateBuffsBySource(item.name);\n            }\n            setInventorySafe({\n                \"useInventory.useCallback[removeItem]\": (previous)=>previous.filter({\n                        \"useInventory.useCallback[removeItem]\": (item)=>item.id !== id\n                    }[\"useInventory.useCallback[removeItem]\"])\n            }[\"useInventory.useCallback[removeItem]\"]);\n        }\n    }[\"useInventory.useCallback[removeItem]\"], [\n        deactivateBuffsBySource,\n        inventory,\n        setInventorySafe\n    ]);\n    const toggleEquip = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[toggleEquip]\": (id)=>{\n            const item = inventory.find({\n                \"useInventory.useCallback[toggleEquip].item\": (entry)=>entry.id === id\n            }[\"useInventory.useCallback[toggleEquip].item\"]);\n            if (!item || !(0,_lib_inventory__WEBPACK_IMPORTED_MODULE_3__.isEquippable)(item)) {\n                return \"no-change\";\n            }\n            if (item.type === \"relic\") {\n                if (!item.equipped && equippedRelicCount >= MAX_EQUIPPED_RELICS) {\n                    return \"limit-reached\";\n                }\n            }\n            const nextEquipped = !item.equipped;\n            setInventorySafe({\n                \"useInventory.useCallback[toggleEquip]\": (previous)=>previous.map({\n                        \"useInventory.useCallback[toggleEquip]\": (entry)=>entry.id === id ? {\n                                ...entry,\n                                equipped: nextEquipped\n                            } : entry\n                    }[\"useInventory.useCallback[toggleEquip]\"])\n            }[\"useInventory.useCallback[toggleEquip]\"]);\n            if (nextEquipped) {\n                awardObedience(item.type === \"panty\" ? EQUIP_OBEDIENCE_PANTY : EQUIP_OBEDIENCE_RELIC);\n                activateBuffsBySource(item.name);\n            } else {\n                deactivateBuffsBySource(item.name);\n            }\n            return nextEquipped ? \"equipped\" : \"unequipped\";\n        }\n    }[\"useInventory.useCallback[toggleEquip]\"], [\n        activateBuffsBySource,\n        awardObedience,\n        deactivateBuffsBySource,\n        equippedRelicCount,\n        inventory,\n        setInventorySafe\n    ]);\n    const unequipAllOfType = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[unequipAllOfType]\": (type)=>{\n            const affectedNames = inventory.filter({\n                \"useInventory.useCallback[unequipAllOfType].affectedNames\": (item)=>item.type === type && item.equipped\n            }[\"useInventory.useCallback[unequipAllOfType].affectedNames\"]).map({\n                \"useInventory.useCallback[unequipAllOfType].affectedNames\": (item)=>item.name\n            }[\"useInventory.useCallback[unequipAllOfType].affectedNames\"]);\n            setInventorySafe({\n                \"useInventory.useCallback[unequipAllOfType]\": (previous)=>previous.map({\n                        \"useInventory.useCallback[unequipAllOfType]\": (item)=>item.type === type && item.equipped ? {\n                                ...item,\n                                equipped: false\n                            } : item\n                    }[\"useInventory.useCallback[unequipAllOfType]\"])\n            }[\"useInventory.useCallback[unequipAllOfType]\"]);\n            if (type === \"relic\" || type === \"panty\") {\n                affectedNames.forEach({\n                    \"useInventory.useCallback[unequipAllOfType]\": (name)=>deactivateBuffsBySource(name)\n                }[\"useInventory.useCallback[unequipAllOfType]\"]);\n            }\n        }\n    }[\"useInventory.useCallback[unequipAllOfType]\"], [\n        deactivateBuffsBySource,\n        inventory,\n        setInventorySafe\n    ]);\n    const consumeItem = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[consumeItem]\": (id)=>{\n            const item = inventory.find({\n                \"useInventory.useCallback[consumeItem].item\": (entry)=>entry.id === id\n            }[\"useInventory.useCallback[consumeItem].item\"]);\n            if (!item || item.owned <= 0) {\n                return false;\n            }\n            adjustOwned(id, -1);\n            if (item.type === \"consumable\") {\n                triggerBuffBySource(item.name);\n            }\n            return true;\n        }\n    }[\"useInventory.useCallback[consumeItem]\"], [\n        adjustOwned,\n        inventory,\n        triggerBuffBySource\n    ]);\n    const replaceInventory = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[replaceInventory]\": (items)=>{\n            setInventory(items.map({\n                \"useInventory.useCallback[replaceInventory]\": (entry)=>normaliseIcon({\n                        ...entry\n                    })\n            }[\"useInventory.useCallback[replaceInventory]\"]));\n            items.forEach({\n                \"useInventory.useCallback[replaceInventory]\": (item)=>{\n                    if (!(0,_lib_inventory__WEBPACK_IMPORTED_MODULE_3__.isEquippable)(item)) return;\n                    if (item.equipped) {\n                        activateBuffsBySource(item.name);\n                    } else {\n                        deactivateBuffsBySource(item.name);\n                    }\n                }\n            }[\"useInventory.useCallback[replaceInventory]\"]);\n        }\n    }[\"useInventory.useCallback[replaceInventory]\"], [\n        activateBuffsBySource,\n        deactivateBuffsBySource,\n        setInventory\n    ]);\n    const clearInventory = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[clearInventory]\": ()=>{\n            const equippedNames = inventory.filter({\n                \"useInventory.useCallback[clearInventory].equippedNames\": (item)=>(0,_lib_inventory__WEBPACK_IMPORTED_MODULE_3__.isEquippable)(item) && item.equipped\n            }[\"useInventory.useCallback[clearInventory].equippedNames\"]).map({\n                \"useInventory.useCallback[clearInventory].equippedNames\": (item)=>item.name\n            }[\"useInventory.useCallback[clearInventory].equippedNames\"]);\n            setInventory((0,_lib_inventory__WEBPACK_IMPORTED_MODULE_3__.cloneDefaultInventory)());\n            equippedNames.forEach({\n                \"useInventory.useCallback[clearInventory]\": (name)=>deactivateBuffsBySource(name)\n            }[\"useInventory.useCallback[clearInventory]\"]);\n        }\n    }[\"useInventory.useCallback[clearInventory]\"], [\n        deactivateBuffsBySource,\n        inventory,\n        setInventory\n    ]);\n    return {\n        inventory,\n        grouped,\n        labels: _lib_inventory__WEBPACK_IMPORTED_MODULE_3__.ITEM_TYPE_LABELS,\n        xp,\n        obedience,\n        tokens,\n        equippedRelicCount,\n        maxRelics: MAX_EQUIPPED_RELICS,\n        gainItem,\n        setOwned,\n        adjustOwned,\n        updateItem,\n        addOrReplaceItem,\n        removeItem,\n        toggleEquip,\n        unequipAllOfType,\n        consumeItem,\n        replaceInventory,\n        clearInventory,\n        awardXp,\n        spendXp,\n        awardTokens,\n        spendTokens,\n        awardObedience\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvaG9va3MvdXNlSW52ZW50b3J5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztrRUFFNkM7QUFDYTtBQUNwQjtBQVVaO0FBRTFCLE1BQU1VLHNCQUFzQjtBQUM1QixNQUFNQyxrQkFBa0I7QUFDeEIsTUFBTUMsd0JBQXdCO0FBQzlCLE1BQU1DLHdCQUF3QjtBQU05QixTQUFTQyxjQUFjQyxJQUFtQjtJQUN4QyxJQUFJLENBQUNBLEtBQUtDLElBQUksSUFBSUQsS0FBS0MsSUFBSSxDQUFDQyxJQUFJLEdBQUdDLE1BQU0sS0FBSyxHQUFHO1FBQy9DLE9BQU87WUFBRSxHQUFHSCxJQUFJO1lBQUVDLE1BQU1WLDhEQUFjQSxDQUFDUyxLQUFLSSxJQUFJO1FBQUU7SUFDcEQ7SUFDQSxPQUFPSjtBQUNUO0FBRU8sU0FBU0s7SUFDZCxNQUFNLENBQUNDLFdBQVdDLGFBQWEsR0FBR3BCLHVFQUFrQkEsQ0FDbEQsYUFDQUUsaUVBQXFCQTtJQUV2QixNQUFNLENBQUNtQixJQUFJQyxNQUFNLEdBQUd0Qix1RUFBa0JBLENBQVM7MkNBQVcsSUFBTTs7SUFDaEUsTUFBTSxDQUFDdUIsV0FBV0MsYUFBYSxHQUFHeEIsdUVBQWtCQSxDQUFTOzJDQUFtQixJQUFNOztJQUN0RixNQUFNLENBQUN5QixRQUFRQyxVQUFVLEdBQUcxQix1RUFBa0JBLENBQVM7MkNBQWUsSUFBTTs7SUFDNUUsTUFBTSxFQUNKMkIsVUFBVSxFQUNWQyxxQkFBcUIsRUFDckJDLHVCQUF1QixFQUN2QkMsbUJBQW1CLEVBQ3BCLEdBQUc3QixtREFBUUE7SUFFWixNQUFNOEIscUJBQXFCaEMsOENBQU9BO29EQUNoQyxJQUFNb0IsVUFBVWEsTUFBTTs0REFBQyxDQUFDbkIsT0FBU0EsS0FBS0ksSUFBSSxLQUFLLFdBQVdKLEtBQUtvQixRQUFROzJEQUFFakIsTUFBTTttREFDL0U7UUFBQ0c7S0FBVTtJQUdiLE1BQU1lLFVBQVVuQyw4Q0FBT0E7eUNBQW1CO1lBQ3hDLE9BQU9PLDJEQUFlQSxDQUFDNkIsTUFBTTtpREFBbUIsQ0FBQ0MsS0FBS25CO29CQUNwRG1CLEdBQUcsQ0FBQ25CLEtBQUssR0FBR0UsVUFDVGEsTUFBTTt5REFBQyxDQUFDbkIsT0FBU0EsS0FBS0ksSUFBSSxLQUFLQTt3REFDL0JvQixJQUFJO3lEQUFDLENBQUNDLEdBQUdDLElBQU1ELEVBQUVFLElBQUksQ0FBQ0MsYUFBYSxDQUFDRixFQUFFQyxJQUFJOztvQkFDN0MsT0FBT0o7Z0JBQ1Q7Z0RBQUc7Z0JBQ0RNLE9BQU8sRUFBRTtnQkFDVEMsT0FBTyxFQUFFO2dCQUNUQyxPQUFPLEVBQUU7Z0JBQ1RDLFlBQVksRUFBRTtnQkFDZEMsT0FBTyxFQUFFO1lBQ1g7UUFDRjt3Q0FBRztRQUFDM0I7S0FBVTtJQUVkLE1BQU00QixhQUFhakQsa0RBQVdBO2dEQUM1QixDQUFDa0QsSUFBWUM7WUFDWCxNQUFNQyxXQUFXL0IsVUFBVWdDLElBQUk7aUVBQUMsQ0FBQ3RDLE9BQVNBLEtBQUttQyxFQUFFLEtBQUtBOztZQUN0RCxJQUFJRSxVQUFVLE9BQU90QyxjQUFjc0M7WUFFbkMsTUFBTUUsT0FBT0gsV0FDUjtnQkFDQ0Q7Z0JBQ0FSLE1BQU1TLFNBQVNULElBQUksSUFBSSxDQUFDLEtBQUssRUFBRVEsSUFBSTtnQkFDbkMvQixNQUFNZ0MsU0FBU2hDLElBQUksSUFBSTtnQkFDdkJvQyxNQUFNSixTQUFTSSxJQUFJLElBQUk7Z0JBQ3ZCQyxPQUFPTCxTQUFTSyxLQUFLLElBQUk7Z0JBQ3pCeEMsTUFBTW1DLFNBQVNuQyxJQUFJO2dCQUNuQm1CLFVBQVVnQixTQUFTaEIsUUFBUSxJQUFJO1lBQ2pDLElBQ0E5QixzRUFBc0JBLENBQUM2QztZQUUzQixJQUFJLENBQUNJLE1BQU07Z0JBQ1QsT0FBT3hDLGNBQWM7b0JBQ25Cb0M7b0JBQ0FSLE1BQU0sQ0FBQyxLQUFLLEVBQUVRLElBQUk7b0JBQ2xCL0IsTUFBTTtvQkFDTm9DLE1BQU07b0JBQ05DLE9BQU87Z0JBQ1Q7WUFDRjtZQUVBLE9BQU8xQyxjQUFjd0M7UUFDdkI7K0NBQ0E7UUFBQ2pDO0tBQVU7SUFHYixNQUFNb0MsbUJBQW1CekQsa0RBQVdBO3NEQUNsQyxDQUFDMEQ7WUFDQ3BDOzhEQUFhLENBQUNxQztvQkFDWixNQUFNQyxPQUFPRixRQUFRQztvQkFDckIsT0FBT0MsS0FBS0MsR0FBRyxDQUFDL0M7Z0JBQ2xCOztRQUNGO3FEQUNBO1FBQUNRO0tBQWE7SUFHaEIsTUFBTXdDLFVBQVU5RCxrREFBV0E7NkNBQ3pCLENBQUMrRDtZQUNDLElBQUlBLFVBQVUsR0FBRyxPQUFPO1lBQ3hCLE1BQU1DLFFBQVFuQyxXQUFXLE1BQU1rQztZQUMvQnZDO3FEQUFNLENBQUN5QyxPQUFTQSxPQUFPRDs7WUFDdkIsT0FBT0E7UUFDVDs0Q0FDQTtRQUFDbkM7UUFBWUw7S0FBTTtJQUdyQixNQUFNMEMsVUFBVWxFLGtEQUFXQTs2Q0FDekIsQ0FBQytEO1lBQ0MsSUFBSUEsVUFBVSxHQUFHLE9BQU87WUFDeEIsSUFBSUksV0FBVztZQUNmM0M7cURBQU0sQ0FBQ21DO29CQUNMLE1BQU1DLE9BQU9RLEtBQUtDLEdBQUcsQ0FBQyxHQUFHVixXQUFXSTtvQkFDcENJLFdBQVdSLFdBQVdDO29CQUN0QixPQUFPQTtnQkFDVDs7WUFDQSxPQUFPTztRQUNUOzRDQUNBO1FBQUMzQztLQUFNO0lBR1QsTUFBTThDLGlCQUFpQnRFLGtEQUFXQTtvREFDaEMsQ0FBQytEO1lBQ0MsSUFBSUEsVUFBVSxHQUFHLE9BQU87WUFDeEIsTUFBTUMsUUFBUW5DLFdBQVcsYUFBYWtDO1lBQ3RDckM7NERBQWEsQ0FBQ3VDLE9BQVNBLE9BQU9EOztZQUM5QixPQUFPQTtRQUNUO21EQUNBO1FBQUNuQztRQUFZSDtLQUFhO0lBRzVCLE1BQU02QyxjQUFjdkUsa0RBQVdBO2lEQUM3QixDQUFDK0Q7WUFDQyxJQUFJQSxVQUFVLEdBQUcsT0FBTztZQUN4QixNQUFNUyxRQUFRSixLQUFLQyxHQUFHLENBQUMsR0FBR0QsS0FBS0ssS0FBSyxDQUFDVjtZQUNyQ25DO3lEQUFVLENBQUMrQixXQUFhQSxXQUFXYTs7WUFDbkMsT0FBT0E7UUFDVDtnREFDQTtRQUFDNUM7S0FBVTtJQUdiLE1BQU04QyxjQUFjMUUsa0RBQVdBO2lEQUM3QixDQUFDK0Q7WUFDQyxJQUFJQSxVQUFVLEdBQUcsT0FBTztZQUN4QixJQUFJSSxXQUFXO1lBQ2Z2Qzt5REFBVSxDQUFDK0I7b0JBQ1QsTUFBTUMsT0FBT1EsS0FBS0MsR0FBRyxDQUFDLEdBQUdWLFdBQVdJO29CQUNwQ0ksV0FBV1IsV0FBV0M7b0JBQ3RCLE9BQU9BO2dCQUNUOztZQUNBLE9BQU9PO1FBQ1Q7Z0RBQ0E7UUFBQ3ZDO0tBQVU7SUFHYixNQUFNK0MsV0FBVzNFLGtEQUFXQTs4Q0FDMUIsQ0FBQ2tELElBQVlhLFNBQVMsQ0FBQyxFQUFFWjtZQUN2QixJQUFJLENBQUNELE1BQU1hLFdBQVcsR0FBRztZQUN6Qk47c0RBQWlCLENBQUNFO29CQUNoQixNQUFNaUIsVUFBVTNCLFdBQVdDLElBQUlDO29CQUMvQixNQUFNQyxXQUFXTyxTQUFTTixJQUFJO3VFQUFDLENBQUN0QyxPQUFTQSxLQUFLbUMsRUFBRSxLQUFLQTs7b0JBQ3JELElBQUlFLFVBQVU7d0JBQ1osT0FBT08sU0FBU0UsR0FBRztrRUFBQyxDQUFDOUMsT0FDbkJBLEtBQUttQyxFQUFFLEtBQUtBLEtBQUs7b0NBQUUsR0FBR25DLElBQUk7b0NBQUV5QyxPQUFPWSxLQUFLQyxHQUFHLENBQUMsR0FBR3RELEtBQUt5QyxLQUFLLEdBQUdPO2dDQUFRLElBQUloRDs7b0JBRTVFO29CQUNBLE9BQU87MkJBQUk0Qzt3QkFBVTs0QkFBRSxHQUFHaUIsT0FBTzs0QkFBRXBCLE9BQU9ZLEtBQUtDLEdBQUcsQ0FBQyxHQUFHTyxRQUFRcEIsS0FBSyxHQUFHTzt3QkFBUTtxQkFBRTtnQkFDbEY7O1lBQ0FELFFBQVFNLEtBQUtDLEdBQUcsQ0FBQyxHQUFHTixVQUFVcEQ7UUFDaEM7NkNBQ0E7UUFBQ21EO1FBQVNiO1FBQVlRO0tBQWlCO0lBR3pDLE1BQU1vQixXQUFXN0Usa0RBQVdBOzhDQUMxQixDQUFDa0QsSUFBWU07WUFDWEM7c0RBQWlCLENBQUNFLFdBQ2hCQSxTQUFTRSxHQUFHOzhEQUFDLENBQUM5QyxPQUNaQSxLQUFLbUMsRUFBRSxLQUFLQSxLQUNSO2dDQUNFLEdBQUduQyxJQUFJO2dDQUNQeUMsT0FBT1ksS0FBS0MsR0FBRyxDQUFDLEdBQUdELEtBQUtLLEtBQUssQ0FBQ0ssT0FBT0MsUUFBUSxDQUFDdkIsU0FBU0EsUUFBUXpDLEtBQUt5QyxLQUFLOzRCQUMzRSxJQUNBekM7OztRQUdWOzZDQUNBO1FBQUMwQztLQUFpQjtJQUdwQixNQUFNdUIsY0FBY2hGLGtEQUFXQTtpREFDN0IsQ0FBQ2tELElBQVkrQjtZQUNYLElBQUksQ0FBQ0EsT0FBTztZQUNaeEI7eURBQWlCLENBQUNFLFdBQ2hCQSxTQUFTRSxHQUFHO2lFQUFDLENBQUM5QyxPQUNaQSxLQUFLbUMsRUFBRSxLQUFLQSxLQUNSO2dDQUFFLEdBQUduQyxJQUFJO2dDQUFFeUMsT0FBT1ksS0FBS0MsR0FBRyxDQUFDLEdBQUd0RCxLQUFLeUMsS0FBSyxHQUFHeUI7NEJBQU8sSUFDbERsRTs7O1FBR1Y7Z0RBQ0E7UUFBQzBDO0tBQWlCO0lBR3BCLE1BQU15QixhQUFhbEYsa0RBQVdBO2dEQUM1QixDQUFDa0QsSUFBWWlDO1lBQ1gxQjt3REFBaUIsQ0FBQ0UsV0FDaEJBLFNBQVNFLEdBQUc7Z0VBQUMsQ0FBQzlDLE9BQVVBLEtBQUttQyxFQUFFLEtBQUtBLEtBQUs7Z0NBQUUsR0FBR25DLElBQUk7Z0NBQUUsR0FBR29FLEtBQUs7NEJBQUMsSUFBSXBFOzs7UUFFckU7K0NBQ0E7UUFBQzBDO0tBQWlCO0lBR3BCLE1BQU0yQixtQkFBbUJwRixrREFBV0E7c0RBQ2xDLENBQUNlO1lBQ0MsTUFBTXNFLGFBQWF2RSxjQUFjQztZQUNqQzBDOzhEQUFpQixDQUFDRTtvQkFDaEIsTUFBTTJCLFNBQVMzQixTQUFTNEIsSUFBSTs2RUFBQyxDQUFDQyxRQUFVQSxNQUFNdEMsRUFBRSxLQUFLbUMsV0FBV25DLEVBQUU7O29CQUNsRSxPQUFPb0MsU0FDSDNCLFNBQVNFLEdBQUc7c0VBQUMsQ0FBQzJCLFFBQVdBLE1BQU10QyxFQUFFLEtBQUttQyxXQUFXbkMsRUFBRSxHQUFHO2dDQUFFLEdBQUdzQyxLQUFLO2dDQUFFLEdBQUdILFVBQVU7NEJBQUMsSUFBSUc7dUVBQ3BGOzJCQUFJN0I7d0JBQVUwQjtxQkFBVztnQkFDL0I7O1lBQ0EsSUFBSTVFLDREQUFZQSxDQUFDNEUsYUFBYTtnQkFDNUIsSUFBSUEsV0FBV2xELFFBQVEsRUFBRTtvQkFDdkJMLHNCQUFzQnVELFdBQVczQyxJQUFJO2dCQUN2QyxPQUFPO29CQUNMWCx3QkFBd0JzRCxXQUFXM0MsSUFBSTtnQkFDekM7WUFDRjtRQUNGO3FEQUNBO1FBQUNaO1FBQXVCQztRQUF5QjBCO0tBQWlCO0lBR3BFLE1BQU1nQyxhQUFhekYsa0RBQVdBO2dEQUM1QixDQUFDa0Q7WUFDQyxNQUFNbkMsT0FBT00sVUFBVWdDLElBQUk7NkRBQUMsQ0FBQ21DLFFBQVVBLE1BQU10QyxFQUFFLEtBQUtBOztZQUNwRCxJQUFJbkMsUUFBUU4sNERBQVlBLENBQUNNLE9BQU87Z0JBQzlCZ0Isd0JBQXdCaEIsS0FBSzJCLElBQUk7WUFDbkM7WUFDQWU7d0RBQWlCLENBQUNFLFdBQWFBLFNBQVN6QixNQUFNO2dFQUFDLENBQUNuQixPQUFTQSxLQUFLbUMsRUFBRSxLQUFLQTs7O1FBQ3ZFOytDQUNBO1FBQUNuQjtRQUF5QlY7UUFBV29DO0tBQWlCO0lBR3hELE1BQU1pQyxjQUFjMUYsa0RBQVdBO2lEQUM3QixDQUFDa0Q7WUFDQyxNQUFNbkMsT0FBT00sVUFBVWdDLElBQUk7OERBQUMsQ0FBQ21DLFFBQVVBLE1BQU10QyxFQUFFLEtBQUtBOztZQUNwRCxJQUFJLENBQUNuQyxRQUFRLENBQUNOLDREQUFZQSxDQUFDTSxPQUFPO2dCQUNoQyxPQUFPO1lBQ1Q7WUFFQSxJQUFJQSxLQUFLSSxJQUFJLEtBQUssU0FBUztnQkFDekIsSUFBSSxDQUFDSixLQUFLb0IsUUFBUSxJQUFJRixzQkFBc0J2QixxQkFBcUI7b0JBQy9ELE9BQU87Z0JBQ1Q7WUFDRjtZQUVBLE1BQU1pRixlQUFlLENBQUM1RSxLQUFLb0IsUUFBUTtZQUNuQ3NCO3lEQUFpQixDQUFDRSxXQUNoQkEsU0FBU0UsR0FBRztpRUFBQyxDQUFDMkIsUUFDWkEsTUFBTXRDLEVBQUUsS0FBS0EsS0FDVDtnQ0FDRSxHQUFHc0MsS0FBSztnQ0FDUnJELFVBQVV3RDs0QkFDWixJQUNBSDs7O1lBSVIsSUFBSUcsY0FBYztnQkFDaEJyQixlQUFldkQsS0FBS0ksSUFBSSxLQUFLLFVBQVVOLHdCQUF3QkQ7Z0JBQy9Ea0Isc0JBQXNCZixLQUFLMkIsSUFBSTtZQUNqQyxPQUFPO2dCQUNMWCx3QkFBd0JoQixLQUFLMkIsSUFBSTtZQUNuQztZQUVBLE9BQU9pRCxlQUFlLGFBQWE7UUFDckM7Z0RBQ0E7UUFBQzdEO1FBQXVCd0M7UUFBZ0J2QztRQUF5QkU7UUFBb0JaO1FBQVdvQztLQUFpQjtJQUduSCxNQUFNbUMsbUJBQW1CNUYsa0RBQVdBO3NEQUNsQyxDQUFDbUI7WUFDQyxNQUFNMEUsZ0JBQWdCeEUsVUFDbkJhLE1BQU07NEVBQUMsQ0FBQ25CLE9BQVNBLEtBQUtJLElBQUksS0FBS0EsUUFBUUosS0FBS29CLFFBQVE7MkVBQ3BEMEIsR0FBRzs0RUFBQyxDQUFDOUMsT0FBU0EsS0FBSzJCLElBQUk7O1lBQzFCZTs4REFBaUIsQ0FBQ0UsV0FDaEJBLFNBQVNFLEdBQUc7c0VBQUMsQ0FBQzlDLE9BQ1pBLEtBQUtJLElBQUksS0FBS0EsUUFBUUosS0FBS29CLFFBQVEsR0FBRztnQ0FBRSxHQUFHcEIsSUFBSTtnQ0FBRW9CLFVBQVU7NEJBQU0sSUFBSXBCOzs7WUFHekUsSUFBSUksU0FBUyxXQUFXQSxTQUFTLFNBQVM7Z0JBQ3hDMEUsY0FBY0MsT0FBTztrRUFBQyxDQUFDcEQsT0FBU1gsd0JBQXdCVzs7WUFDMUQ7UUFDRjtxREFDQTtRQUFDWDtRQUF5QlY7UUFBV29DO0tBQWlCO0lBR3hELE1BQU1zQyxjQUFjL0Ysa0RBQVdBO2lEQUM3QixDQUFDa0Q7WUFDQyxNQUFNbkMsT0FBT00sVUFBVWdDLElBQUk7OERBQUMsQ0FBQ21DLFFBQVVBLE1BQU10QyxFQUFFLEtBQUtBOztZQUNwRCxJQUFJLENBQUNuQyxRQUFRQSxLQUFLeUMsS0FBSyxJQUFJLEdBQUc7Z0JBQzVCLE9BQU87WUFDVDtZQUNBd0IsWUFBWTlCLElBQUksQ0FBQztZQUNqQixJQUFJbkMsS0FBS0ksSUFBSSxLQUFLLGNBQWM7Z0JBQzlCYSxvQkFBb0JqQixLQUFLMkIsSUFBSTtZQUMvQjtZQUNBLE9BQU87UUFDVDtnREFDQTtRQUFDc0M7UUFBYTNEO1FBQVdXO0tBQW9CO0lBRy9DLE1BQU1nRSxtQkFBbUJoRyxrREFBV0E7c0RBQ2xDLENBQUNpRztZQUNDM0UsYUFBYTJFLE1BQU1wQyxHQUFHOzhEQUFDLENBQUMyQixRQUFVMUUsY0FBYzt3QkFBRSxHQUFHMEUsS0FBSztvQkFBQzs7WUFDM0RTLE1BQU1ILE9BQU87OERBQUMsQ0FBQy9FO29CQUNiLElBQUksQ0FBQ04sNERBQVlBLENBQUNNLE9BQU87b0JBQ3pCLElBQUlBLEtBQUtvQixRQUFRLEVBQUU7d0JBQ2pCTCxzQkFBc0JmLEtBQUsyQixJQUFJO29CQUNqQyxPQUFPO3dCQUNMWCx3QkFBd0JoQixLQUFLMkIsSUFBSTtvQkFDbkM7Z0JBQ0Y7O1FBQ0Y7cURBQ0E7UUFBQ1o7UUFBdUJDO1FBQXlCVDtLQUFhO0lBR2hFLE1BQU00RSxpQkFBaUJsRyxrREFBV0E7b0RBQUM7WUFDakMsTUFBTW1HLGdCQUFnQjlFLFVBQ25CYSxNQUFNOzBFQUFDLENBQUNuQixPQUFTTiw0REFBWUEsQ0FBQ00sU0FBU0EsS0FBS29CLFFBQVE7eUVBQ3BEMEIsR0FBRzswRUFBQyxDQUFDOUMsT0FBU0EsS0FBSzJCLElBQUk7O1lBQzFCcEIsYUFBYWxCLHFFQUFxQkE7WUFDbEMrRixjQUFjTCxPQUFPOzREQUFDLENBQUNwRCxPQUFTWCx3QkFBd0JXOztRQUMxRDttREFBRztRQUFDWDtRQUF5QlY7UUFBV0M7S0FBYTtJQUVyRCxPQUFPO1FBQ0xEO1FBQ0FlO1FBQ0FnRSxRQUFRN0YsNERBQWdCQTtRQUN4QmdCO1FBQ0FFO1FBQ0FFO1FBQ0FNO1FBQ0FvRSxXQUFXM0Y7UUFDWGlFO1FBQ0FFO1FBQ0FHO1FBQ0FFO1FBQ0FFO1FBQ0FLO1FBQ0FDO1FBQ0FFO1FBQ0FHO1FBQ0FDO1FBQ0FFO1FBQ0FwQztRQUNBSTtRQUNBSztRQUNBRztRQUNBSjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxNb21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxcaG9va3NcXHVzZUludmVudG9yeS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VNZW1vIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VQZXJzaXN0ZW50U3RhdGUgfSBmcm9tIFwiLi91c2VQZXJzaXN0ZW50U3RhdGVcIjtcbmltcG9ydCB7IHVzZUJ1ZmZzIH0gZnJvbSBcIi4vdXNlQnVmZnNcIjtcbmltcG9ydCB7XG4gIGNsb25lRGVmYXVsdEludmVudG9yeSxcbiAgZ2V0RGVmYXVsdEl0ZW1UZW1wbGF0ZSxcbiAgZ2V0RGVmYXVsdEljb24sXG4gIEludmVudG9yeUl0ZW0sXG4gIElURU1fVFlQRV9MQUJFTFMsXG4gIElURU1fVFlQRV9PUkRFUixcbiAgSXRlbVR5cGUsXG4gIGlzRXF1aXBwYWJsZSxcbn0gZnJvbSBcIi4uL2xpYi9pbnZlbnRvcnlcIjtcblxuY29uc3QgTUFYX0VRVUlQUEVEX1JFTElDUyA9IDI7XG5jb25zdCBJVEVNX0FDUVVJUkVfWFAgPSAyNTtcbmNvbnN0IEVRVUlQX09CRURJRU5DRV9SRUxJQyA9IDY7XG5jb25zdCBFUVVJUF9PQkVESUVOQ0VfUEFOVFkgPSA4O1xuXG5leHBvcnQgdHlwZSBFcXVpcFJlc3VsdCA9IFwiZXF1aXBwZWRcIiB8IFwidW5lcXVpcHBlZFwiIHwgXCJsaW1pdC1yZWFjaGVkXCIgfCBcIm5vLWNoYW5nZVwiO1xuXG5leHBvcnQgdHlwZSBJbnZlbnRvcnlHcm91cGVkID0gUmVjb3JkPEl0ZW1UeXBlLCBJbnZlbnRvcnlJdGVtW10+O1xuXG5mdW5jdGlvbiBub3JtYWxpc2VJY29uKGl0ZW06IEludmVudG9yeUl0ZW0pOiBJbnZlbnRvcnlJdGVtIHtcbiAgaWYgKCFpdGVtLmljb24gfHwgaXRlbS5pY29uLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4geyAuLi5pdGVtLCBpY29uOiBnZXREZWZhdWx0SWNvbihpdGVtLnR5cGUpIH07XG4gIH1cbiAgcmV0dXJuIGl0ZW07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VJbnZlbnRvcnkoKSB7XG4gIGNvbnN0IFtpbnZlbnRvcnksIHNldEludmVudG9yeV0gPSB1c2VQZXJzaXN0ZW50U3RhdGU8SW52ZW50b3J5SXRlbVtdPihcbiAgICBcImludmVudG9yeVwiLFxuICAgIGNsb25lRGVmYXVsdEludmVudG9yeVxuICApO1xuICBjb25zdCBbeHAsIHNldFhwXSA9IHVzZVBlcnNpc3RlbnRTdGF0ZTxudW1iZXI+KFwieHBUb3RhbFwiLCAoKSA9PiAzNDAwKTtcbiAgY29uc3QgW29iZWRpZW5jZSwgc2V0T2JlZGllbmNlXSA9IHVzZVBlcnNpc3RlbnRTdGF0ZTxudW1iZXI+KFwib2JlZGllbmNlUG9pbnRzXCIsICgpID0+IDApO1xuICBjb25zdCBbdG9rZW5zLCBzZXRUb2tlbnNdID0gdXNlUGVyc2lzdGVudFN0YXRlPG51bWJlcj4oXCJkaXJ0eVRva2Vuc1wiLCAoKSA9PiAwKTtcbiAgY29uc3Qge1xuICAgIGFwcGx5RXZlbnQsXG4gICAgYWN0aXZhdGVCdWZmc0J5U291cmNlLFxuICAgIGRlYWN0aXZhdGVCdWZmc0J5U291cmNlLFxuICAgIHRyaWdnZXJCdWZmQnlTb3VyY2UsXG4gIH0gPSB1c2VCdWZmcygpO1xuXG4gIGNvbnN0IGVxdWlwcGVkUmVsaWNDb3VudCA9IHVzZU1lbW8oXG4gICAgKCkgPT4gaW52ZW50b3J5LmZpbHRlcigoaXRlbSkgPT4gaXRlbS50eXBlID09PSBcInJlbGljXCIgJiYgaXRlbS5lcXVpcHBlZCkubGVuZ3RoLFxuICAgIFtpbnZlbnRvcnldXG4gICk7XG5cbiAgY29uc3QgZ3JvdXBlZCA9IHVzZU1lbW88SW52ZW50b3J5R3JvdXBlZD4oKCkgPT4ge1xuICAgIHJldHVybiBJVEVNX1RZUEVfT1JERVIucmVkdWNlPEludmVudG9yeUdyb3VwZWQ+KChhY2MsIHR5cGUpID0+IHtcbiAgICAgIGFjY1t0eXBlXSA9IGludmVudG9yeVxuICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtLnR5cGUgPT09IHR5cGUpXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKTtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge1xuICAgICAgcmVsaWM6IFtdLFxuICAgICAgcGFudHk6IFtdLFxuICAgICAgc2hhcmQ6IFtdLFxuICAgICAgY29uc3VtYWJsZTogW10sXG4gICAgICBxdWVzdDogW10sXG4gICAgfSk7XG4gIH0sIFtpbnZlbnRvcnldKTtcblxuICBjb25zdCBlbnN1cmVJdGVtID0gdXNlQ2FsbGJhY2soXG4gICAgKGlkOiBzdHJpbmcsIHRlbXBsYXRlPzogUGFydGlhbDxJbnZlbnRvcnlJdGVtPikgPT4ge1xuICAgICAgY29uc3QgZXhpc3RpbmcgPSBpbnZlbnRvcnkuZmluZCgoaXRlbSkgPT4gaXRlbS5pZCA9PT0gaWQpO1xuICAgICAgaWYgKGV4aXN0aW5nKSByZXR1cm4gbm9ybWFsaXNlSWNvbihleGlzdGluZyk7XG5cbiAgICAgIGNvbnN0IGJhc2UgPSB0ZW1wbGF0ZVxuICAgICAgICA/ICh7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIG5hbWU6IHRlbXBsYXRlLm5hbWUgPz8gYEl0ZW0gJHtpZH1gLFxuICAgICAgICAgICAgdHlwZTogdGVtcGxhdGUudHlwZSA/PyBcInF1ZXN0XCIsXG4gICAgICAgICAgICBkZXNjOiB0ZW1wbGF0ZS5kZXNjID8/IFwiQSBteXN0ZXJpb3VzIGl0ZW0gZGlzY292ZXJlZCBpbiB0aGUgdGVtcGxlLlwiLFxuICAgICAgICAgICAgb3duZWQ6IHRlbXBsYXRlLm93bmVkID8/IDAsXG4gICAgICAgICAgICBpY29uOiB0ZW1wbGF0ZS5pY29uLFxuICAgICAgICAgICAgZXF1aXBwZWQ6IHRlbXBsYXRlLmVxdWlwcGVkID8/IGZhbHNlLFxuICAgICAgICAgIH0gYXMgSW52ZW50b3J5SXRlbSlcbiAgICAgICAgOiBnZXREZWZhdWx0SXRlbVRlbXBsYXRlKGlkKTtcblxuICAgICAgaWYgKCFiYXNlKSB7XG4gICAgICAgIHJldHVybiBub3JtYWxpc2VJY29uKHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBuYW1lOiBgSXRlbSAke2lkfWAsXG4gICAgICAgICAgdHlwZTogXCJxdWVzdFwiLFxuICAgICAgICAgIGRlc2M6IFwiQSBteXN0ZXJpb3VzIGl0ZW0gZGlzY292ZXJlZCBpbiB0aGUgdGVtcGxlLlwiLFxuICAgICAgICAgIG93bmVkOiAwLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5vcm1hbGlzZUljb24oYmFzZSk7XG4gICAgfSxcbiAgICBbaW52ZW50b3J5XVxuICApO1xuXG4gIGNvbnN0IHNldEludmVudG9yeVNhZmUgPSB1c2VDYWxsYmFjayhcbiAgICAodXBkYXRlcjogKHByZXZpb3VzOiBJbnZlbnRvcnlJdGVtW10pID0+IEludmVudG9yeUl0ZW1bXSkgPT4ge1xuICAgICAgc2V0SW52ZW50b3J5KChwcmV2aW91cykgPT4ge1xuICAgICAgICBjb25zdCBuZXh0ID0gdXBkYXRlcihwcmV2aW91cyk7XG4gICAgICAgIHJldHVybiBuZXh0Lm1hcChub3JtYWxpc2VJY29uKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW3NldEludmVudG9yeV1cbiAgKTtcblxuICBjb25zdCBhd2FyZFhwID0gdXNlQ2FsbGJhY2soXG4gICAgKGFtb3VudDogbnVtYmVyKSA9PiB7XG4gICAgICBpZiAoYW1vdW50IDw9IDApIHJldHVybiAwO1xuICAgICAgY29uc3QgdG90YWwgPSBhcHBseUV2ZW50KFwieHBcIiwgYW1vdW50KTtcbiAgICAgIHNldFhwKChwcmV2KSA9PiBwcmV2ICsgdG90YWwpO1xuICAgICAgcmV0dXJuIHRvdGFsO1xuICAgIH0sXG4gICAgW2FwcGx5RXZlbnQsIHNldFhwXVxuICApO1xuXG4gIGNvbnN0IHNwZW5kWHAgPSB1c2VDYWxsYmFjayhcbiAgICAoYW1vdW50OiBudW1iZXIpID0+IHtcbiAgICAgIGlmIChhbW91bnQgPD0gMCkgcmV0dXJuIDA7XG4gICAgICBsZXQgZGVkdWN0ZWQgPSAwO1xuICAgICAgc2V0WHAoKHByZXZpb3VzKSA9PiB7XG4gICAgICAgIGNvbnN0IG5leHQgPSBNYXRoLm1heCgwLCBwcmV2aW91cyAtIGFtb3VudCk7XG4gICAgICAgIGRlZHVjdGVkID0gcHJldmlvdXMgLSBuZXh0O1xuICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRlZHVjdGVkO1xuICAgIH0sXG4gICAgW3NldFhwXVxuICApO1xuXG4gIGNvbnN0IGF3YXJkT2JlZGllbmNlID0gdXNlQ2FsbGJhY2soXG4gICAgKGFtb3VudDogbnVtYmVyKSA9PiB7XG4gICAgICBpZiAoYW1vdW50IDw9IDApIHJldHVybiAwO1xuICAgICAgY29uc3QgdG90YWwgPSBhcHBseUV2ZW50KFwib2JlZGllbmNlXCIsIGFtb3VudCk7XG4gICAgICBzZXRPYmVkaWVuY2UoKHByZXYpID0+IHByZXYgKyB0b3RhbCk7XG4gICAgICByZXR1cm4gdG90YWw7XG4gICAgfSxcbiAgICBbYXBwbHlFdmVudCwgc2V0T2JlZGllbmNlXVxuICApO1xuXG4gIGNvbnN0IGF3YXJkVG9rZW5zID0gdXNlQ2FsbGJhY2soXG4gICAgKGFtb3VudDogbnVtYmVyKSA9PiB7XG4gICAgICBpZiAoYW1vdW50IDw9IDApIHJldHVybiAwO1xuICAgICAgY29uc3QgdmFsdWUgPSBNYXRoLm1heCgwLCBNYXRoLnJvdW5kKGFtb3VudCkpO1xuICAgICAgc2V0VG9rZW5zKChwcmV2aW91cykgPT4gcHJldmlvdXMgKyB2YWx1ZSk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBbc2V0VG9rZW5zXVxuICApO1xuXG4gIGNvbnN0IHNwZW5kVG9rZW5zID0gdXNlQ2FsbGJhY2soXG4gICAgKGFtb3VudDogbnVtYmVyKSA9PiB7XG4gICAgICBpZiAoYW1vdW50IDw9IDApIHJldHVybiAwO1xuICAgICAgbGV0IGRlZHVjdGVkID0gMDtcbiAgICAgIHNldFRva2VucygocHJldmlvdXMpID0+IHtcbiAgICAgICAgY29uc3QgbmV4dCA9IE1hdGgubWF4KDAsIHByZXZpb3VzIC0gYW1vdW50KTtcbiAgICAgICAgZGVkdWN0ZWQgPSBwcmV2aW91cyAtIG5leHQ7XG4gICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGVkdWN0ZWQ7XG4gICAgfSxcbiAgICBbc2V0VG9rZW5zXVxuICApO1xuXG4gIGNvbnN0IGdhaW5JdGVtID0gdXNlQ2FsbGJhY2soXG4gICAgKGlkOiBzdHJpbmcsIGFtb3VudCA9IDEsIHRlbXBsYXRlPzogUGFydGlhbDxJbnZlbnRvcnlJdGVtPikgPT4ge1xuICAgICAgaWYgKCFpZCB8fCBhbW91bnQgPT09IDApIHJldHVybjtcbiAgICAgIHNldEludmVudG9yeVNhZmUoKHByZXZpb3VzKSA9PiB7XG4gICAgICAgIGNvbnN0IGVuc3VyZWQgPSBlbnN1cmVJdGVtKGlkLCB0ZW1wbGF0ZSk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gcHJldmlvdXMuZmluZCgoaXRlbSkgPT4gaXRlbS5pZCA9PT0gaWQpO1xuICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICByZXR1cm4gcHJldmlvdXMubWFwKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5pZCA9PT0gaWQgPyB7IC4uLml0ZW0sIG93bmVkOiBNYXRoLm1heCgwLCBpdGVtLm93bmVkICsgYW1vdW50KSB9IDogaXRlbVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFsuLi5wcmV2aW91cywgeyAuLi5lbnN1cmVkLCBvd25lZDogTWF0aC5tYXgoMCwgZW5zdXJlZC5vd25lZCArIGFtb3VudCkgfV07XG4gICAgICB9KTtcbiAgICAgIGF3YXJkWHAoTWF0aC5tYXgoMSwgYW1vdW50KSAqIElURU1fQUNRVUlSRV9YUCk7XG4gICAgfSxcbiAgICBbYXdhcmRYcCwgZW5zdXJlSXRlbSwgc2V0SW52ZW50b3J5U2FmZV1cbiAgKTtcblxuICBjb25zdCBzZXRPd25lZCA9IHVzZUNhbGxiYWNrKFxuICAgIChpZDogc3RyaW5nLCBvd25lZDogbnVtYmVyKSA9PiB7XG4gICAgICBzZXRJbnZlbnRvcnlTYWZlKChwcmV2aW91cykgPT5cbiAgICAgICAgcHJldmlvdXMubWFwKChpdGVtKSA9PlxuICAgICAgICAgIGl0ZW0uaWQgPT09IGlkXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgICAgIG93bmVkOiBNYXRoLm1heCgwLCBNYXRoLnJvdW5kKE51bWJlci5pc0Zpbml0ZShvd25lZCkgPyBvd25lZCA6IGl0ZW0ub3duZWQpKSxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiBpdGVtXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfSxcbiAgICBbc2V0SW52ZW50b3J5U2FmZV1cbiAgKTtcblxuICBjb25zdCBhZGp1c3RPd25lZCA9IHVzZUNhbGxiYWNrKFxuICAgIChpZDogc3RyaW5nLCBkZWx0YTogbnVtYmVyKSA9PiB7XG4gICAgICBpZiAoIWRlbHRhKSByZXR1cm47XG4gICAgICBzZXRJbnZlbnRvcnlTYWZlKChwcmV2aW91cykgPT5cbiAgICAgICAgcHJldmlvdXMubWFwKChpdGVtKSA9PlxuICAgICAgICAgIGl0ZW0uaWQgPT09IGlkXG4gICAgICAgICAgICA/IHsgLi4uaXRlbSwgb3duZWQ6IE1hdGgubWF4KDAsIGl0ZW0ub3duZWQgKyBkZWx0YSkgfVxuICAgICAgICAgICAgOiBpdGVtXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfSxcbiAgICBbc2V0SW52ZW50b3J5U2FmZV1cbiAgKTtcblxuICBjb25zdCB1cGRhdGVJdGVtID0gdXNlQ2FsbGJhY2soXG4gICAgKGlkOiBzdHJpbmcsIHBhdGNoOiBQYXJ0aWFsPEludmVudG9yeUl0ZW0+KSA9PiB7XG4gICAgICBzZXRJbnZlbnRvcnlTYWZlKChwcmV2aW91cykgPT5cbiAgICAgICAgcHJldmlvdXMubWFwKChpdGVtKSA9PiAoaXRlbS5pZCA9PT0gaWQgPyB7IC4uLml0ZW0sIC4uLnBhdGNoIH0gOiBpdGVtKSlcbiAgICAgICk7XG4gICAgfSxcbiAgICBbc2V0SW52ZW50b3J5U2FmZV1cbiAgKTtcblxuICBjb25zdCBhZGRPclJlcGxhY2VJdGVtID0gdXNlQ2FsbGJhY2soXG4gICAgKGl0ZW06IEludmVudG9yeUl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IG5vcm1hbGlzZWQgPSBub3JtYWxpc2VJY29uKGl0ZW0pO1xuICAgICAgc2V0SW52ZW50b3J5U2FmZSgocHJldmlvdXMpID0+IHtcbiAgICAgICAgY29uc3QgZXhpc3RzID0gcHJldmlvdXMuc29tZSgoZW50cnkpID0+IGVudHJ5LmlkID09PSBub3JtYWxpc2VkLmlkKTtcbiAgICAgICAgcmV0dXJuIGV4aXN0c1xuICAgICAgICAgID8gcHJldmlvdXMubWFwKChlbnRyeSkgPT4gKGVudHJ5LmlkID09PSBub3JtYWxpc2VkLmlkID8geyAuLi5lbnRyeSwgLi4ubm9ybWFsaXNlZCB9IDogZW50cnkpKVxuICAgICAgICAgIDogWy4uLnByZXZpb3VzLCBub3JtYWxpc2VkXTtcbiAgICAgIH0pO1xuICAgICAgaWYgKGlzRXF1aXBwYWJsZShub3JtYWxpc2VkKSkge1xuICAgICAgICBpZiAobm9ybWFsaXNlZC5lcXVpcHBlZCkge1xuICAgICAgICAgIGFjdGl2YXRlQnVmZnNCeVNvdXJjZShub3JtYWxpc2VkLm5hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlYWN0aXZhdGVCdWZmc0J5U291cmNlKG5vcm1hbGlzZWQubmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIFthY3RpdmF0ZUJ1ZmZzQnlTb3VyY2UsIGRlYWN0aXZhdGVCdWZmc0J5U291cmNlLCBzZXRJbnZlbnRvcnlTYWZlXVxuICApO1xuXG4gIGNvbnN0IHJlbW92ZUl0ZW0gPSB1c2VDYWxsYmFjayhcbiAgICAoaWQ6IHN0cmluZykgPT4ge1xuICAgICAgY29uc3QgaXRlbSA9IGludmVudG9yeS5maW5kKChlbnRyeSkgPT4gZW50cnkuaWQgPT09IGlkKTtcbiAgICAgIGlmIChpdGVtICYmIGlzRXF1aXBwYWJsZShpdGVtKSkge1xuICAgICAgICBkZWFjdGl2YXRlQnVmZnNCeVNvdXJjZShpdGVtLm5hbWUpO1xuICAgICAgfVxuICAgICAgc2V0SW52ZW50b3J5U2FmZSgocHJldmlvdXMpID0+IHByZXZpb3VzLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5pZCAhPT0gaWQpKTtcbiAgICB9LFxuICAgIFtkZWFjdGl2YXRlQnVmZnNCeVNvdXJjZSwgaW52ZW50b3J5LCBzZXRJbnZlbnRvcnlTYWZlXVxuICApO1xuXG4gIGNvbnN0IHRvZ2dsZUVxdWlwID0gdXNlQ2FsbGJhY2soXG4gICAgKGlkOiBzdHJpbmcpOiBFcXVpcFJlc3VsdCA9PiB7XG4gICAgICBjb25zdCBpdGVtID0gaW52ZW50b3J5LmZpbmQoKGVudHJ5KSA9PiBlbnRyeS5pZCA9PT0gaWQpO1xuICAgICAgaWYgKCFpdGVtIHx8ICFpc0VxdWlwcGFibGUoaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuIFwibm8tY2hhbmdlXCI7XG4gICAgICB9XG5cbiAgICAgIGlmIChpdGVtLnR5cGUgPT09IFwicmVsaWNcIikge1xuICAgICAgICBpZiAoIWl0ZW0uZXF1aXBwZWQgJiYgZXF1aXBwZWRSZWxpY0NvdW50ID49IE1BWF9FUVVJUFBFRF9SRUxJQ1MpIHtcbiAgICAgICAgICByZXR1cm4gXCJsaW1pdC1yZWFjaGVkXCI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgbmV4dEVxdWlwcGVkID0gIWl0ZW0uZXF1aXBwZWQ7XG4gICAgICBzZXRJbnZlbnRvcnlTYWZlKChwcmV2aW91cykgPT5cbiAgICAgICAgcHJldmlvdXMubWFwKChlbnRyeSkgPT5cbiAgICAgICAgICBlbnRyeS5pZCA9PT0gaWRcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIC4uLmVudHJ5LFxuICAgICAgICAgICAgICAgIGVxdWlwcGVkOiBuZXh0RXF1aXBwZWQsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogZW50cnlcbiAgICAgICAgKVxuICAgICAgKTtcblxuICAgICAgaWYgKG5leHRFcXVpcHBlZCkge1xuICAgICAgICBhd2FyZE9iZWRpZW5jZShpdGVtLnR5cGUgPT09IFwicGFudHlcIiA/IEVRVUlQX09CRURJRU5DRV9QQU5UWSA6IEVRVUlQX09CRURJRU5DRV9SRUxJQyk7XG4gICAgICAgIGFjdGl2YXRlQnVmZnNCeVNvdXJjZShpdGVtLm5hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVhY3RpdmF0ZUJ1ZmZzQnlTb3VyY2UoaXRlbS5uYW1lKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5leHRFcXVpcHBlZCA/IFwiZXF1aXBwZWRcIiA6IFwidW5lcXVpcHBlZFwiO1xuICAgIH0sXG4gICAgW2FjdGl2YXRlQnVmZnNCeVNvdXJjZSwgYXdhcmRPYmVkaWVuY2UsIGRlYWN0aXZhdGVCdWZmc0J5U291cmNlLCBlcXVpcHBlZFJlbGljQ291bnQsIGludmVudG9yeSwgc2V0SW52ZW50b3J5U2FmZV1cbiAgKTtcblxuICBjb25zdCB1bmVxdWlwQWxsT2ZUeXBlID0gdXNlQ2FsbGJhY2soXG4gICAgKHR5cGU6IEl0ZW1UeXBlKSA9PiB7XG4gICAgICBjb25zdCBhZmZlY3RlZE5hbWVzID0gaW52ZW50b3J5XG4gICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udHlwZSA9PT0gdHlwZSAmJiBpdGVtLmVxdWlwcGVkKVxuICAgICAgICAubWFwKChpdGVtKSA9PiBpdGVtLm5hbWUpO1xuICAgICAgc2V0SW52ZW50b3J5U2FmZSgocHJldmlvdXMpID0+XG4gICAgICAgIHByZXZpb3VzLm1hcCgoaXRlbSkgPT5cbiAgICAgICAgICBpdGVtLnR5cGUgPT09IHR5cGUgJiYgaXRlbS5lcXVpcHBlZCA/IHsgLi4uaXRlbSwgZXF1aXBwZWQ6IGZhbHNlIH0gOiBpdGVtXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgICBpZiAodHlwZSA9PT0gXCJyZWxpY1wiIHx8IHR5cGUgPT09IFwicGFudHlcIikge1xuICAgICAgICBhZmZlY3RlZE5hbWVzLmZvckVhY2goKG5hbWUpID0+IGRlYWN0aXZhdGVCdWZmc0J5U291cmNlKG5hbWUpKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtkZWFjdGl2YXRlQnVmZnNCeVNvdXJjZSwgaW52ZW50b3J5LCBzZXRJbnZlbnRvcnlTYWZlXVxuICApO1xuXG4gIGNvbnN0IGNvbnN1bWVJdGVtID0gdXNlQ2FsbGJhY2soXG4gICAgKGlkOiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBpbnZlbnRvcnkuZmluZCgoZW50cnkpID0+IGVudHJ5LmlkID09PSBpZCk7XG4gICAgICBpZiAoIWl0ZW0gfHwgaXRlbS5vd25lZCA8PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGFkanVzdE93bmVkKGlkLCAtMSk7XG4gICAgICBpZiAoaXRlbS50eXBlID09PSBcImNvbnN1bWFibGVcIikge1xuICAgICAgICB0cmlnZ2VyQnVmZkJ5U291cmNlKGl0ZW0ubmFtZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIFthZGp1c3RPd25lZCwgaW52ZW50b3J5LCB0cmlnZ2VyQnVmZkJ5U291cmNlXVxuICApO1xuXG4gIGNvbnN0IHJlcGxhY2VJbnZlbnRvcnkgPSB1c2VDYWxsYmFjayhcbiAgICAoaXRlbXM6IEludmVudG9yeUl0ZW1bXSkgPT4ge1xuICAgICAgc2V0SW52ZW50b3J5KGl0ZW1zLm1hcCgoZW50cnkpID0+IG5vcm1hbGlzZUljb24oeyAuLi5lbnRyeSB9KSkpO1xuICAgICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICBpZiAoIWlzRXF1aXBwYWJsZShpdGVtKSkgcmV0dXJuO1xuICAgICAgICBpZiAoaXRlbS5lcXVpcHBlZCkge1xuICAgICAgICAgIGFjdGl2YXRlQnVmZnNCeVNvdXJjZShpdGVtLm5hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlYWN0aXZhdGVCdWZmc0J5U291cmNlKGl0ZW0ubmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW2FjdGl2YXRlQnVmZnNCeVNvdXJjZSwgZGVhY3RpdmF0ZUJ1ZmZzQnlTb3VyY2UsIHNldEludmVudG9yeV1cbiAgKTtcblxuICBjb25zdCBjbGVhckludmVudG9yeSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBlcXVpcHBlZE5hbWVzID0gaW52ZW50b3J5XG4gICAgICAuZmlsdGVyKChpdGVtKSA9PiBpc0VxdWlwcGFibGUoaXRlbSkgJiYgaXRlbS5lcXVpcHBlZClcbiAgICAgIC5tYXAoKGl0ZW0pID0+IGl0ZW0ubmFtZSk7XG4gICAgc2V0SW52ZW50b3J5KGNsb25lRGVmYXVsdEludmVudG9yeSgpKTtcbiAgICBlcXVpcHBlZE5hbWVzLmZvckVhY2goKG5hbWUpID0+IGRlYWN0aXZhdGVCdWZmc0J5U291cmNlKG5hbWUpKTtcbiAgfSwgW2RlYWN0aXZhdGVCdWZmc0J5U291cmNlLCBpbnZlbnRvcnksIHNldEludmVudG9yeV0pO1xuXG4gIHJldHVybiB7XG4gICAgaW52ZW50b3J5LFxuICAgIGdyb3VwZWQsXG4gICAgbGFiZWxzOiBJVEVNX1RZUEVfTEFCRUxTLFxuICAgIHhwLFxuICAgIG9iZWRpZW5jZSxcbiAgICB0b2tlbnMsXG4gICAgZXF1aXBwZWRSZWxpY0NvdW50LFxuICAgIG1heFJlbGljczogTUFYX0VRVUlQUEVEX1JFTElDUyxcbiAgICBnYWluSXRlbSxcbiAgICBzZXRPd25lZCxcbiAgICBhZGp1c3RPd25lZCxcbiAgICB1cGRhdGVJdGVtLFxuICAgIGFkZE9yUmVwbGFjZUl0ZW0sXG4gICAgcmVtb3ZlSXRlbSxcbiAgICB0b2dnbGVFcXVpcCxcbiAgICB1bmVxdWlwQWxsT2ZUeXBlLFxuICAgIGNvbnN1bWVJdGVtLFxuICAgIHJlcGxhY2VJbnZlbnRvcnksXG4gICAgY2xlYXJJbnZlbnRvcnksXG4gICAgYXdhcmRYcCxcbiAgICBzcGVuZFhwLFxuICAgIGF3YXJkVG9rZW5zLFxuICAgIHNwZW5kVG9rZW5zLFxuICAgIGF3YXJkT2JlZGllbmNlLFxuICB9O1xufVxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlTWVtbyIsInVzZVBlcnNpc3RlbnRTdGF0ZSIsInVzZUJ1ZmZzIiwiY2xvbmVEZWZhdWx0SW52ZW50b3J5IiwiZ2V0RGVmYXVsdEl0ZW1UZW1wbGF0ZSIsImdldERlZmF1bHRJY29uIiwiSVRFTV9UWVBFX0xBQkVMUyIsIklURU1fVFlQRV9PUkRFUiIsImlzRXF1aXBwYWJsZSIsIk1BWF9FUVVJUFBFRF9SRUxJQ1MiLCJJVEVNX0FDUVVJUkVfWFAiLCJFUVVJUF9PQkVESUVOQ0VfUkVMSUMiLCJFUVVJUF9PQkVESUVOQ0VfUEFOVFkiLCJub3JtYWxpc2VJY29uIiwiaXRlbSIsImljb24iLCJ0cmltIiwibGVuZ3RoIiwidHlwZSIsInVzZUludmVudG9yeSIsImludmVudG9yeSIsInNldEludmVudG9yeSIsInhwIiwic2V0WHAiLCJvYmVkaWVuY2UiLCJzZXRPYmVkaWVuY2UiLCJ0b2tlbnMiLCJzZXRUb2tlbnMiLCJhcHBseUV2ZW50IiwiYWN0aXZhdGVCdWZmc0J5U291cmNlIiwiZGVhY3RpdmF0ZUJ1ZmZzQnlTb3VyY2UiLCJ0cmlnZ2VyQnVmZkJ5U291cmNlIiwiZXF1aXBwZWRSZWxpY0NvdW50IiwiZmlsdGVyIiwiZXF1aXBwZWQiLCJncm91cGVkIiwicmVkdWNlIiwiYWNjIiwic29ydCIsImEiLCJiIiwibmFtZSIsImxvY2FsZUNvbXBhcmUiLCJyZWxpYyIsInBhbnR5Iiwic2hhcmQiLCJjb25zdW1hYmxlIiwicXVlc3QiLCJlbnN1cmVJdGVtIiwiaWQiLCJ0ZW1wbGF0ZSIsImV4aXN0aW5nIiwiZmluZCIsImJhc2UiLCJkZXNjIiwib3duZWQiLCJzZXRJbnZlbnRvcnlTYWZlIiwidXBkYXRlciIsInByZXZpb3VzIiwibmV4dCIsIm1hcCIsImF3YXJkWHAiLCJhbW91bnQiLCJ0b3RhbCIsInByZXYiLCJzcGVuZFhwIiwiZGVkdWN0ZWQiLCJNYXRoIiwibWF4IiwiYXdhcmRPYmVkaWVuY2UiLCJhd2FyZFRva2VucyIsInZhbHVlIiwicm91bmQiLCJzcGVuZFRva2VucyIsImdhaW5JdGVtIiwiZW5zdXJlZCIsInNldE93bmVkIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJhZGp1c3RPd25lZCIsImRlbHRhIiwidXBkYXRlSXRlbSIsInBhdGNoIiwiYWRkT3JSZXBsYWNlSXRlbSIsIm5vcm1hbGlzZWQiLCJleGlzdHMiLCJzb21lIiwiZW50cnkiLCJyZW1vdmVJdGVtIiwidG9nZ2xlRXF1aXAiLCJuZXh0RXF1aXBwZWQiLCJ1bmVxdWlwQWxsT2ZUeXBlIiwiYWZmZWN0ZWROYW1lcyIsImZvckVhY2giLCJjb25zdW1lSXRlbSIsInJlcGxhY2VJbnZlbnRvcnkiLCJpdGVtcyIsImNsZWFySW52ZW50b3J5IiwiZXF1aXBwZWROYW1lcyIsImxhYmVscyIsIm1heFJlbGljcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useInventory.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useMap.ts":
/*!*****************************!*\
  !*** ./app/hooks/useMap.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useMap: () => (/* binding */ useMap)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _lib_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/map */ \"(ssr)/./app/lib/map.ts\");\n/* harmony import */ var _useInventory__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useInventory */ \"(ssr)/./app/hooks/useInventory.ts\");\n/* harmony import */ var _useShame__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useShame */ \"(ssr)/./app/hooks/useShame.ts\");\n/* harmony import */ var _useRitualsEngine__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useRitualsEngine */ \"(ssr)/./app/hooks/useRitualsEngine.ts\");\n/* harmony import */ var _useQuestlines__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./useQuestlines */ \"(ssr)/./app/hooks/useQuestlines.ts\");\n/* __next_internal_client_entry_do_not_use__ useMap auto */ \n\n\n\n\n\n\nfunction useMap() {\n    const [mapData, setMapData] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)('map', _lib_map__WEBPACK_IMPORTED_MODULE_2__.cloneDefaultMap);\n    const { awardXp } = (0,_useInventory__WEBPACK_IMPORTED_MODULE_3__.useInventory)();\n    const { shame } = (0,_useShame__WEBPACK_IMPORTED_MODULE_4__.useShame)();\n    const { logs: ritualLogs } = (0,_useRitualsEngine__WEBPACK_IMPORTED_MODULE_5__.useRitualsEngine)();\n    const { questlines } = (0,_useQuestlines__WEBPACK_IMPORTED_MODULE_6__.useQuestlines)();\n    const checkUnlockCondition = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMap.useCallback[checkUnlockCondition]\": (condition)=>{\n            switch(condition.type){\n                case 'shame':\n                    // This is a placeholder for shame level logic.\n                    // Let's assume total shame points / 100 is the level.\n                    const shameLevel = (shame.pantiesSniffed + shame.ritualsFailed + shame.dirtyTokensBurned) / 100;\n                    return shameLevel >= (condition.level ?? 999);\n                case 'ritual':\n                    return ritualLogs.some({\n                        \"useMap.useCallback[checkUnlockCondition]\": (log)=>log.ritualId === condition.id\n                    }[\"useMap.useCallback[checkUnlockCondition]\"]);\n                case 'quest':\n                    const quest = questlines.find({\n                        \"useMap.useCallback[checkUnlockCondition].quest\": (q)=>q.id === condition.id\n                    }[\"useMap.useCallback[checkUnlockCondition].quest\"]);\n                    return quest?.completed ?? false;\n                case 'item':\n                    // Placeholder for inventory check\n                    return false;\n                default:\n                    return false;\n            }\n        }\n    }[\"useMap.useCallback[checkUnlockCondition]\"], [\n        shame,\n        ritualLogs,\n        questlines\n    ]);\n    const unlockNode = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMap.useCallback[unlockNode]\": (nodeId)=>{\n            let nodeWasUnlocked = false;\n            setMapData({\n                \"useMap.useCallback[unlockNode]\": (prev)=>{\n                    const node = prev.nodes.find({\n                        \"useMap.useCallback[unlockNode].node\": (n)=>n.id === nodeId\n                    }[\"useMap.useCallback[unlockNode].node\"]);\n                    if (!node || node.unlocked) {\n                        return prev;\n                    }\n                    nodeWasUnlocked = true;\n                    const newNodes = prev.nodes.map({\n                        \"useMap.useCallback[unlockNode].newNodes\": (n)=>n.id === nodeId ? {\n                                ...n,\n                                unlocked: true\n                            } : n\n                    }[\"useMap.useCallback[unlockNode].newNodes\"]);\n                    const newLinks = prev.links.map({\n                        \"useMap.useCallback[unlockNode].newLinks\": (l)=>{\n                            if (l.from === nodeId) {\n                                // Check if the 'to' node is unlocked\n                                const toNode = newNodes.find({\n                                    \"useMap.useCallback[unlockNode].newLinks.toNode\": (n)=>n.id === l.to\n                                }[\"useMap.useCallback[unlockNode].newLinks.toNode\"]);\n                                if (toNode?.unlocked) {\n                                    return {\n                                        ...l,\n                                        locked: false\n                                    };\n                                }\n                            }\n                            if (l.to === nodeId) {\n                                // Check if the 'from' node is unlocked\n                                const fromNode = newNodes.find({\n                                    \"useMap.useCallback[unlockNode].newLinks.fromNode\": (n)=>n.id === l.from\n                                }[\"useMap.useCallback[unlockNode].newLinks.fromNode\"]);\n                                if (fromNode?.unlocked) {\n                                    return {\n                                        ...l,\n                                        locked: false\n                                    };\n                                }\n                            }\n                            return l;\n                        }\n                    }[\"useMap.useCallback[unlockNode].newLinks\"]);\n                    return {\n                        nodes: newNodes,\n                        links: newLinks\n                    };\n                }\n            }[\"useMap.useCallback[unlockNode]\"]);\n            if (nodeWasUnlocked) {\n                // Grant XP for unlocking a new node\n                awardXp(100);\n            }\n        }\n    }[\"useMap.useCallback[unlockNode]\"], [\n        setMapData,\n        awardXp\n    ]);\n    const attemptUnlockNode = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMap.useCallback[attemptUnlockNode]\": (nodeId)=>{\n            const node = mapData.nodes.find({\n                \"useMap.useCallback[attemptUnlockNode].node\": (n)=>n.id === nodeId\n            }[\"useMap.useCallback[attemptUnlockNode].node\"]);\n            if (!node || node.unlocked || !node.unlockCondition) {\n                return false;\n            }\n            if (checkUnlockCondition(node.unlockCondition)) {\n                unlockNode(nodeId);\n                return true;\n            }\n            return false;\n        }\n    }[\"useMap.useCallback[attemptUnlockNode]\"], [\n        mapData.nodes,\n        checkUnlockCondition,\n        unlockNode\n    ]);\n    const updateNodePosition = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMap.useCallback[updateNodePosition]\": (nodeId, coords)=>{\n            setMapData({\n                \"useMap.useCallback[updateNodePosition]\": (prev)=>({\n                        ...prev,\n                        nodes: prev.nodes.map({\n                            \"useMap.useCallback[updateNodePosition]\": (n)=>n.id === nodeId ? {\n                                    ...n,\n                                    coords\n                                } : n\n                        }[\"useMap.useCallback[updateNodePosition]\"])\n                    })\n            }[\"useMap.useCallback[updateNodePosition]\"]);\n        }\n    }[\"useMap.useCallback[updateNodePosition]\"], [\n        setMapData\n    ]);\n    return {\n        mapData,\n        unlockNode,\n        attemptUnlockNode,\n        checkUnlockCondition,\n        updateNodePosition,\n        setMapData\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDcEN2QixRQUFRO1lBQ1Y7UUFDRjt5Q0FDQTtRQUFDRDtRQUFZQztLQUFRO0lBR3ZCLE1BQU11QyxvQkFBb0JqRCxrREFBV0E7aURBQUMsQ0FBQ2dDO1lBQ3JDLE1BQU1HLE9BQU8zQixRQUFRNEIsS0FBSyxDQUFDUixJQUFJOzhEQUFDUyxDQUFBQSxJQUFLQSxFQUFFWCxFQUFFLEtBQUtNOztZQUM5QyxJQUFJLENBQUNHLFFBQVFBLEtBQUtHLFFBQVEsSUFBSSxDQUFDSCxLQUFLZSxlQUFlLEVBQUU7Z0JBQ25ELE9BQU87WUFDVDtZQUVBLElBQUluQyxxQkFBcUJvQixLQUFLZSxlQUFlLEdBQUc7Z0JBQzlDbkIsV0FBV0M7Z0JBQ1gsT0FBTztZQUNUO1lBRUEsT0FBTztRQUNUO2dEQUFHO1FBQUN4QixRQUFRNEIsS0FBSztRQUFFckI7UUFBc0JnQjtLQUFXO0lBRXBELE1BQU1vQixxQkFBcUJuRCxrREFBV0E7a0RBQUMsQ0FBQ2dDLFFBQWdCb0I7WUFDdEQzQzswREFBV3lCLENBQUFBLE9BQVM7d0JBQ2xCLEdBQUdBLElBQUk7d0JBQ1BFLE9BQU9GLEtBQUtFLEtBQUssQ0FBQ0ksR0FBRztzRUFBQ0gsQ0FBQUEsSUFBS0EsRUFBRVgsRUFBRSxLQUFLTSxTQUFTO29DQUFFLEdBQUdLLENBQUM7b0NBQUVlO2dDQUFPLElBQUlmOztvQkFDbEU7O1FBQ0Y7aURBQUc7UUFBQzVCO0tBQVc7SUFFZixPQUFPO1FBQ0xEO1FBQ0F1QjtRQUNBa0I7UUFDQWxDO1FBQ0FvQztRQUNBMUM7SUFDRjtBQUNGIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXGhvb2tzXFx1c2VNYXAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xyXG5cclxuaW1wb3J0IHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVzZVBlcnNpc3RlbnRTdGF0ZSB9IGZyb20gJy4vdXNlUGVyc2lzdGVudFN0YXRlJztcclxuaW1wb3J0IHsgY2xvbmVEZWZhdWx0TWFwLCB0eXBlIE1hcERhdGEsIHR5cGUgTWFwTm9kZSwgdHlwZSBVbmxvY2tDb25kaXRpb24gfSBmcm9tICcuLi9saWIvbWFwJztcclxuaW1wb3J0IHsgdXNlSW52ZW50b3J5IH0gZnJvbSAnLi91c2VJbnZlbnRvcnknO1xyXG5pbXBvcnQgeyB1c2VTaGFtZSB9IGZyb20gJy4vdXNlU2hhbWUnO1xyXG5pbXBvcnQgeyB1c2VSaXR1YWxzRW5naW5lIH0gZnJvbSAnLi91c2VSaXR1YWxzRW5naW5lJztcclxuaW1wb3J0IHsgdXNlUXVlc3RsaW5lcyB9IGZyb20gJy4vdXNlUXVlc3RsaW5lcyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlTWFwKCkge1xyXG4gIGNvbnN0IFttYXBEYXRhLCBzZXRNYXBEYXRhXSA9IHVzZVBlcnNpc3RlbnRTdGF0ZTxNYXBEYXRhPignbWFwJywgY2xvbmVEZWZhdWx0TWFwKTtcclxuICBjb25zdCB7IGF3YXJkWHAgfSA9IHVzZUludmVudG9yeSgpO1xyXG4gIGNvbnN0IHsgc2hhbWUgfSA9IHVzZVNoYW1lKCk7XHJcbiAgY29uc3QgeyBsb2dzOiByaXR1YWxMb2dzIH0gPSB1c2VSaXR1YWxzRW5naW5lKCk7XHJcbiAgY29uc3QgeyBxdWVzdGxpbmVzIH0gPSB1c2VRdWVzdGxpbmVzKCk7XHJcblxyXG4gIGNvbnN0IGNoZWNrVW5sb2NrQ29uZGl0aW9uID0gdXNlQ2FsbGJhY2soKGNvbmRpdGlvbjogVW5sb2NrQ29uZGl0aW9uKTogYm9vbGVhbiA9PiB7XHJcbiAgICBzd2l0Y2ggKGNvbmRpdGlvbi50eXBlKSB7XHJcbiAgICAgIGNhc2UgJ3NoYW1lJzpcclxuICAgICAgICAvLyBUaGlzIGlzIGEgcGxhY2Vob2xkZXIgZm9yIHNoYW1lIGxldmVsIGxvZ2ljLlxyXG4gICAgICAgIC8vIExldCdzIGFzc3VtZSB0b3RhbCBzaGFtZSBwb2ludHMgLyAxMDAgaXMgdGhlIGxldmVsLlxyXG4gICAgICAgIGNvbnN0IHNoYW1lTGV2ZWwgPSAoc2hhbWUucGFudGllc1NuaWZmZWQgKyBzaGFtZS5yaXR1YWxzRmFpbGVkICsgc2hhbWUuZGlydHlUb2tlbnNCdXJuZWQpIC8gMTAwO1xyXG4gICAgICAgIHJldHVybiBzaGFtZUxldmVsID49IChjb25kaXRpb24ubGV2ZWwgPz8gOTk5KTtcclxuICAgICAgY2FzZSAncml0dWFsJzpcclxuICAgICAgICByZXR1cm4gcml0dWFsTG9ncy5zb21lKGxvZyA9PiBsb2cucml0dWFsSWQgPT09IGNvbmRpdGlvbi5pZCk7XHJcbiAgICAgIGNhc2UgJ3F1ZXN0JzpcclxuICAgICAgICBjb25zdCBxdWVzdCA9IHF1ZXN0bGluZXMuZmluZChxID0+IHEuaWQgPT09IGNvbmRpdGlvbi5pZCk7XHJcbiAgICAgICAgcmV0dXJuIHF1ZXN0Py5jb21wbGV0ZWQgPz8gZmFsc2U7XHJcbiAgICAgIGNhc2UgJ2l0ZW0nOlxyXG4gICAgICAgIC8vIFBsYWNlaG9sZGVyIGZvciBpbnZlbnRvcnkgY2hlY2tcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH0sIFtzaGFtZSwgcml0dWFsTG9ncywgcXVlc3RsaW5lc10pO1xyXG5cclxuICBjb25zdCB1bmxvY2tOb2RlID0gdXNlQ2FsbGJhY2soXHJcbiAgICAobm9kZUlkOiBzdHJpbmcpID0+IHtcclxuICAgICAgbGV0IG5vZGVXYXNVbmxvY2tlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgc2V0TWFwRGF0YSgocHJldikgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5vZGUgPSBwcmV2Lm5vZGVzLmZpbmQoKG4pID0+IG4uaWQgPT09IG5vZGVJZCk7XHJcbiAgICAgICAgaWYgKCFub2RlIHx8IG5vZGUudW5sb2NrZWQpIHtcclxuICAgICAgICAgIHJldHVybiBwcmV2O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbm9kZVdhc1VubG9ja2VkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgY29uc3QgbmV3Tm9kZXMgPSBwcmV2Lm5vZGVzLm1hcCgobikgPT5cclxuICAgICAgICAgIG4uaWQgPT09IG5vZGVJZCA/IHsgLi4ubiwgdW5sb2NrZWQ6IHRydWUgfSA6IG5cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCBuZXdMaW5rcyA9IHByZXYubGlua3MubWFwKChsKSA9PiB7XHJcbiAgICAgICAgICBpZiAobC5mcm9tID09PSBub2RlSWQpIHtcclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlICd0bycgbm9kZSBpcyB1bmxvY2tlZFxyXG4gICAgICAgICAgICBjb25zdCB0b05vZGUgPSBuZXdOb2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gbC50byk7XHJcbiAgICAgICAgICAgIGlmICh0b05vZGU/LnVubG9ja2VkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ubCwgbG9ja2VkOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAobC50byA9PT0gbm9kZUlkKSB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSAnZnJvbScgbm9kZSBpcyB1bmxvY2tlZFxyXG4gICAgICAgICAgICBjb25zdCBmcm9tTm9kZSA9IG5ld05vZGVzLmZpbmQobiA9PiBuLmlkID09PSBsLmZyb20pO1xyXG4gICAgICAgICAgICBpZiAoZnJvbU5vZGU/LnVubG9ja2VkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ubCwgbG9ja2VkOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gbDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHsgbm9kZXM6IG5ld05vZGVzLCBsaW5rczogbmV3TGlua3MgfTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAobm9kZVdhc1VubG9ja2VkKSB7XHJcbiAgICAgICAgLy8gR3JhbnQgWFAgZm9yIHVubG9ja2luZyBhIG5ldyBub2RlXHJcbiAgICAgICAgYXdhcmRYcCgxMDApO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgW3NldE1hcERhdGEsIGF3YXJkWHBdXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgYXR0ZW1wdFVubG9ja05vZGUgPSB1c2VDYWxsYmFjaygobm9kZUlkOiBzdHJpbmcpOiBib29sZWFuID0+IHtcclxuICAgIGNvbnN0IG5vZGUgPSBtYXBEYXRhLm5vZGVzLmZpbmQobiA9PiBuLmlkID09PSBub2RlSWQpO1xyXG4gICAgaWYgKCFub2RlIHx8IG5vZGUudW5sb2NrZWQgfHwgIW5vZGUudW5sb2NrQ29uZGl0aW9uKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2hlY2tVbmxvY2tDb25kaXRpb24obm9kZS51bmxvY2tDb25kaXRpb24pKSB7XHJcbiAgICAgIHVubG9ja05vZGUobm9kZUlkKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH0sIFttYXBEYXRhLm5vZGVzLCBjaGVja1VubG9ja0NvbmRpdGlvbiwgdW5sb2NrTm9kZV0pO1xyXG5cclxuICBjb25zdCB1cGRhdGVOb2RlUG9zaXRpb24gPSB1c2VDYWxsYmFjaygobm9kZUlkOiBzdHJpbmcsIGNvb3JkczogW251bWJlciwgbnVtYmVyXSkgPT4ge1xyXG4gICAgc2V0TWFwRGF0YShwcmV2ID0+ICh7XHJcbiAgICAgIC4uLnByZXYsXHJcbiAgICAgIG5vZGVzOiBwcmV2Lm5vZGVzLm1hcChuID0+IG4uaWQgPT09IG5vZGVJZCA/IHsgLi4ubiwgY29vcmRzIH0gOiBuKVxyXG4gICAgfSkpO1xyXG4gIH0sIFtzZXRNYXBEYXRhXSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBtYXBEYXRhLFxyXG4gICAgdW5sb2NrTm9kZSxcclxuICAgIGF0dGVtcHRVbmxvY2tOb2RlLFxyXG4gICAgY2hlY2tVbmxvY2tDb25kaXRpb24sXHJcbiAgICB1cGRhdGVOb2RlUG9zaXRpb24sXHJcbiAgICBzZXRNYXBEYXRhLCAvLyBGb3IgQ29udHJvbCBOZXh1c1xyXG4gIH07XHJcbn1cclxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlUGVyc2lzdGVudFN0YXRlIiwiY2xvbmVEZWZhdWx0TWFwIiwidXNlSW52ZW50b3J5IiwidXNlU2hhbWUiLCJ1c2VSaXR1YWxzRW5naW5lIiwidXNlUXVlc3RsaW5lcyIsInVzZU1hcCIsIm1hcERhdGEiLCJzZXRNYXBEYXRhIiwiYXdhcmRYcCIsInNoYW1lIiwibG9ncyIsInJpdHVhbExvZ3MiLCJxdWVzdGxpbmVzIiwiY2hlY2tVbmxvY2tDb25kaXRpb24iLCJjb25kaXRpb24iLCJ0eXBlIiwic2hhbWVMZXZlbCIsInBhbnRpZXNTbmlmZmVkIiwicml0dWFsc0ZhaWxlZCIsImRpcnR5VG9rZW5zQnVybmVkIiwibGV2ZWwiLCJzb21lIiwibG9nIiwicml0dWFsSWQiLCJpZCIsInF1ZXN0IiwiZmluZCIsInEiLCJjb21wbGV0ZWQiLCJ1bmxvY2tOb2RlIiwibm9kZUlkIiwibm9kZVdhc1VubG9ja2VkIiwicHJldiIsIm5vZGUiLCJub2RlcyIsIm4iLCJ1bmxvY2tlZCIsIm5ld05vZGVzIiwibWFwIiwibmV3TGlua3MiLCJsaW5rcyIsImwiLCJmcm9tIiwidG9Ob2RlIiwidG8iLCJsb2NrZWQiLCJmcm9tTm9kZSIsImF0dGVtcHRVbmxvY2tOb2RlIiwidW5sb2NrQ29uZGl0aW9uIiwidXBkYXRlTm9kZVBvc2l0aW9uIiwiY29vcmRzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useMap.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useMapAchievements.ts":
/*!*****************************************!*\
  !*** ./app/hooks/useMapAchievements.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useMapAchievements: () => (/* binding */ useMapAchievements)\n/* harmony export */ });\n/* harmony import */ var _useMap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useMap */ \"(ssr)/./app/hooks/useMap.ts\");\n/* harmony import */ var _useAchievements__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useAchievements */ \"(ssr)/./app/hooks/useAchievements.ts\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* __next_internal_client_entry_do_not_use__ useMapAchievements auto */ \n\n\nfunction useMapAchievements() {\n    const { mapData } = (0,_useMap__WEBPACK_IMPORTED_MODULE_0__.useMap)();\n    const { triggerAchievement } = (0,_useAchievements__WEBPACK_IMPORTED_MODULE_1__.useAchievements)();\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"useMapAchievements.useEffect\": ()=>{\n            const unlockedNodes = mapData.nodes.filter({\n                \"useMapAchievements.useEffect.unlockedNodes\": (n)=>n.unlocked\n            }[\"useMapAchievements.useEffect.unlockedNodes\"]);\n            unlockedNodes.forEach({\n                \"useMapAchievements.useEffect\": (node)=>{\n                    triggerAchievement('MAP_NODE_UNLOCKED', node.id);\n                }\n            }[\"useMapAchievements.useEffect\"]);\n            const allNodesUnlocked = mapData.nodes.every({\n                \"useMapAchievements.useEffect.allNodesUnlocked\": (n)=>n.unlocked\n            }[\"useMapAchievements.useEffect.allNodesUnlocked\"]);\n            if (allNodesUnlocked && mapData.nodes.length > 0) {\n                triggerAchievement('MAP_ALL_NODES_UNLOCKED');\n            }\n        }\n    }[\"useMapAchievements.useEffect\"], [\n        mapData.nodes,\n        triggerAchievement\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvaG9va3MvdXNlTWFwQWNoaWV2ZW1lbnRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O3dFQUVrQztBQUNrQjtBQUNsQjtBQUUzQixTQUFTRztJQUNkLE1BQU0sRUFBRUMsT0FBTyxFQUFFLEdBQUdKLCtDQUFNQTtJQUMxQixNQUFNLEVBQUVLLGtCQUFrQixFQUFFLEdBQUdKLGlFQUFlQTtJQUU5Q0MsZ0RBQVNBO3dDQUFDO1lBQ1IsTUFBTUksZ0JBQWdCRixRQUFRRyxLQUFLLENBQUNDLE1BQU07OERBQUNDLENBQUFBLElBQUtBLEVBQUVDLFFBQVE7O1lBRTFESixjQUFjSyxPQUFPO2dEQUFDQyxDQUFBQTtvQkFDcEJQLG1CQUFtQixxQkFBcUJPLEtBQUtDLEVBQUU7Z0JBQ2pEOztZQUVBLE1BQU1DLG1CQUFtQlYsUUFBUUcsS0FBSyxDQUFDUSxLQUFLO2lFQUFDTixDQUFBQSxJQUFLQSxFQUFFQyxRQUFROztZQUM1RCxJQUFJSSxvQkFBb0JWLFFBQVFHLEtBQUssQ0FBQ1MsTUFBTSxHQUFHLEdBQUc7Z0JBQ2hEWCxtQkFBbUI7WUFDckI7UUFDRjt1Q0FBRztRQUFDRCxRQUFRRyxLQUFLO1FBQUVGO0tBQW1CO0FBQ3hDIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXGhvb2tzXFx1c2VNYXBBY2hpZXZlbWVudHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xyXG5cclxuaW1wb3J0IHsgdXNlTWFwIH0gZnJvbSAnLi91c2VNYXAnO1xyXG5pbXBvcnQgeyB1c2VBY2hpZXZlbWVudHMgfSBmcm9tICcuL3VzZUFjaGlldmVtZW50cyc7XHJcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VNYXBBY2hpZXZlbWVudHMoKSB7XHJcbiAgY29uc3QgeyBtYXBEYXRhIH0gPSB1c2VNYXAoKTtcclxuICBjb25zdCB7IHRyaWdnZXJBY2hpZXZlbWVudCB9ID0gdXNlQWNoaWV2ZW1lbnRzKCk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCB1bmxvY2tlZE5vZGVzID0gbWFwRGF0YS5ub2Rlcy5maWx0ZXIobiA9PiBuLnVubG9ja2VkKTtcclxuXHJcbiAgICB1bmxvY2tlZE5vZGVzLmZvckVhY2gobm9kZSA9PiB7XHJcbiAgICAgIHRyaWdnZXJBY2hpZXZlbWVudCgnTUFQX05PREVfVU5MT0NLRUQnLCBub2RlLmlkKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGFsbE5vZGVzVW5sb2NrZWQgPSBtYXBEYXRhLm5vZGVzLmV2ZXJ5KG4gPT4gbi51bmxvY2tlZCk7XHJcbiAgICBpZiAoYWxsTm9kZXNVbmxvY2tlZCAmJiBtYXBEYXRhLm5vZGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgdHJpZ2dlckFjaGlldmVtZW50KCdNQVBfQUxMX05PREVTX1VOTE9DS0VEJyk7XHJcbiAgICB9XHJcbiAgfSwgW21hcERhdGEubm9kZXMsIHRyaWdnZXJBY2hpZXZlbWVudF0pO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJ1c2VNYXAiLCJ1c2VBY2hpZXZlbWVudHMiLCJ1c2VFZmZlY3QiLCJ1c2VNYXBBY2hpZXZlbWVudHMiLCJtYXBEYXRhIiwidHJpZ2dlckFjaGlldmVtZW50IiwidW5sb2NrZWROb2RlcyIsIm5vZGVzIiwiZmlsdGVyIiwibiIsInVubG9ja2VkIiwiZm9yRWFjaCIsIm5vZGUiLCJpZCIsImFsbE5vZGVzVW5sb2NrZWQiLCJldmVyeSIsImxlbmd0aCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useMapAchievements.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useNpcs.ts":
/*!******************************!*\
  !*** ./app/hooks/useNpcs.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   useNpcs: () => (/* binding */ useNpcs)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _lib_npcs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/npcs */ \"(ssr)/./app/lib/npcs.ts\");\n/* harmony import */ var _useInventory__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useInventory */ \"(ssr)/./app/hooks/useInventory.ts\");\n/* __next_internal_client_entry_do_not_use__ useNpcs,default auto */ \n\n\n\nconst NPC_ACHIEVEMENTS_KEY = 'npcAchievements';\nfunction useNpcs() {\n    const [npcs, setNpcs] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)('npcs', _lib_npcs__WEBPACK_IMPORTED_MODULE_2__.cloneDefaultNpcs);\n    const [achievements, setAchievements] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(NPC_ACHIEVEMENTS_KEY, {\n        \"useNpcs.usePersistentState\": ()=>[]\n    }[\"useNpcs.usePersistentState\"]);\n    const [titles, setTitles] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)('titlesUnlocked', {\n        \"useNpcs.usePersistentState\": ()=>[]\n    }[\"useNpcs.usePersistentState\"]);\n    const { awardXp } = (0,_useInventory__WEBPACK_IMPORTED_MODULE_3__.useInventory)();\n    const setSafe = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useNpcs.useCallback[setSafe]\": (updater)=>{\n            setNpcs({\n                \"useNpcs.useCallback[setSafe]\": (previous)=>updater(previous).map({\n                        \"useNpcs.useCallback[setSafe]\": (npc)=>(0,_lib_npcs__WEBPACK_IMPORTED_MODULE_2__.normaliseNpc)(npc)\n                    }[\"useNpcs.useCallback[setSafe]\"])\n            }[\"useNpcs.useCallback[setSafe]\"]);\n        }\n    }[\"useNpcs.useCallback[setSafe]\"], [\n        setNpcs\n    ]);\n    const addNpc = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useNpcs.useCallback[addNpc]\": (npc)=>{\n            setSafe({\n                \"useNpcs.useCallback[addNpc]\": (previous)=>{\n                    const exists = previous.some({\n                        \"useNpcs.useCallback[addNpc].exists\": (entry)=>entry.id === npc.id\n                    }[\"useNpcs.useCallback[addNpc].exists\"]);\n                    return exists ? previous.map({\n                        \"useNpcs.useCallback[addNpc]\": (entry)=>entry.id === npc.id ? (0,_lib_npcs__WEBPACK_IMPORTED_MODULE_2__.normaliseNpc)({\n                                ...entry,\n                                ...npc\n                            }) : entry\n                    }[\"useNpcs.useCallback[addNpc]\"]) : [\n                        ...previous,\n                        (0,_lib_npcs__WEBPACK_IMPORTED_MODULE_2__.normaliseNpc)(npc)\n                    ];\n                }\n            }[\"useNpcs.useCallback[addNpc]\"]);\n            awardXp(10);\n        }\n    }[\"useNpcs.useCallback[addNpc]\"], [\n        awardXp,\n        setSafe\n    ]);\n    const updateNpc = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useNpcs.useCallback[updateNpc]\": (npcId, updater)=>{\n            setSafe({\n                \"useNpcs.useCallback[updateNpc]\": (previous)=>previous.map({\n                        \"useNpcs.useCallback[updateNpc]\": (entry)=>entry.id === npcId ? (0,_lib_npcs__WEBPACK_IMPORTED_MODULE_2__.normaliseNpc)(updater({\n                                ...entry\n                            })) : entry\n                    }[\"useNpcs.useCallback[updateNpc]\"])\n            }[\"useNpcs.useCallback[updateNpc]\"]);\n        }\n    }[\"useNpcs.useCallback[updateNpc]\"], [\n        setSafe\n    ]);\n    const removeNpc = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useNpcs.useCallback[removeNpc]\": (npcId)=>{\n            setSafe({\n                \"useNpcs.useCallback[removeNpc]\": (previous)=>previous.filter({\n                        \"useNpcs.useCallback[removeNpc]\": (npc)=>npc.id !== npcId\n                    }[\"useNpcs.useCallback[removeNpc]\"])\n            }[\"useNpcs.useCallback[removeNpc]\"]);\n        }\n    }[\"useNpcs.useCallback[removeNpc]\"], [\n        setSafe\n    ]);\n    const ensureNpcByName = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useNpcs.useCallback[ensureNpcByName]\": (name, role = 'Friend')=>{\n            const existing = npcs.find({\n                \"useNpcs.useCallback[ensureNpcByName].existing\": (npc)=>npc.name.toLowerCase() === name.toLowerCase()\n            }[\"useNpcs.useCallback[ensureNpcByName].existing\"]);\n            if (existing) return existing;\n            const id = `npc-${Date.now().toString(36)}-${Math.random().toString(36).slice(2, 6)}`;\n            const newNpc = {\n                id,\n                name,\n                role,\n                dreamCount: 0,\n                trust: 30,\n                shame: 10,\n                bio: '',\n                dialogues: []\n            };\n            const normalised = (0,_lib_npcs__WEBPACK_IMPORTED_MODULE_2__.normaliseNpc)(newNpc);\n            setSafe({\n                \"useNpcs.useCallback[ensureNpcByName]\": (previous)=>[\n                        ...previous,\n                        normalised\n                    ]\n            }[\"useNpcs.useCallback[ensureNpcByName]\"]);\n            return normalised;\n        }\n    }[\"useNpcs.useCallback[ensureNpcByName]\"], [\n        npcs,\n        setSafe\n    ]);\n    const incrementDreamCount = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useNpcs.useCallback[incrementDreamCount]\": (npcId, amount = 1)=>{\n            if (amount === 0) return;\n            updateNpc(npcId, {\n                \"useNpcs.useCallback[incrementDreamCount]\": (npc)=>({\n                        ...npc,\n                        dreamCount: Math.max(0, npc.dreamCount + amount)\n                    })\n            }[\"useNpcs.useCallback[incrementDreamCount]\"]);\n        }\n    }[\"useNpcs.useCallback[incrementDreamCount]\"], [\n        updateNpc\n    ]);\n    const adjustTrust = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useNpcs.useCallback[adjustTrust]\": (npcId, delta)=>{\n            if (delta === 0) return;\n            updateNpc(npcId, {\n                \"useNpcs.useCallback[adjustTrust]\": (npc)=>{\n                    const trust = (0,_lib_npcs__WEBPACK_IMPORTED_MODULE_2__.clampMeter)(npc.trust + delta);\n                    if (trust >= 100 && !achievements.includes('Bonded Dreamer')) {\n                        setAchievements({\n                            \"useNpcs.useCallback[adjustTrust]\": (previous)=>previous.includes('Bonded Dreamer') ? previous : [\n                                    ...previous,\n                                    'Bonded Dreamer'\n                                ]\n                        }[\"useNpcs.useCallback[adjustTrust]\"]);\n                        awardXp(25);\n                    }\n                    return {\n                        ...npc,\n                        trust\n                    };\n                }\n            }[\"useNpcs.useCallback[adjustTrust]\"]);\n        }\n    }[\"useNpcs.useCallback[adjustTrust]\"], [\n        achievements,\n        awardXp,\n        setAchievements,\n        updateNpc\n    ]);\n    const adjustShame = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useNpcs.useCallback[adjustShame]\": (npcId, delta)=>{\n            if (delta === 0) return;\n            updateNpc(npcId, {\n                \"useNpcs.useCallback[adjustShame]\": (npc)=>{\n                    const shame = (0,_lib_npcs__WEBPACK_IMPORTED_MODULE_2__.clampMeter)(npc.shame + delta);\n                    if (shame >= 100 && !titles.includes('Worthless Toy')) {\n                        setTitles({\n                            \"useNpcs.useCallback[adjustShame]\": (previous)=>previous.includes('Worthless Toy') ? previous : [\n                                    ...previous,\n                                    'Worthless Toy'\n                                ]\n                        }[\"useNpcs.useCallback[adjustShame]\"]);\n                    }\n                    return {\n                        ...npc,\n                        shame\n                    };\n                }\n            }[\"useNpcs.useCallback[adjustShame]\"]);\n        }\n    }[\"useNpcs.useCallback[adjustShame]\"], [\n        setTitles,\n        titles,\n        updateNpc\n    ]);\n    const addDialogue = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useNpcs.useCallback[addDialogue]\": (npcId, text, date = new Date().toISOString())=>{\n            if (!text.trim()) return;\n            const dialogue = (0,_lib_npcs__WEBPACK_IMPORTED_MODULE_2__.normaliseDialogue)({\n                id: `dlg-${Date.now().toString(36)}-${Math.random().toString(36).slice(2, 6)}`,\n                text: text.trim(),\n                date\n            });\n            let shouldAwardBonus = false;\n            updateNpc(npcId, {\n                \"useNpcs.useCallback[addDialogue]\": (npc)=>{\n                    shouldAwardBonus = npc.dialogues.length === 0;\n                    return {\n                        ...npc,\n                        dialogues: [\n                            ...npc.dialogues,\n                            dialogue\n                        ]\n                    };\n                }\n            }[\"useNpcs.useCallback[addDialogue]\"]);\n            if (shouldAwardBonus) {\n                awardXp(20);\n            }\n        }\n    }[\"useNpcs.useCallback[addDialogue]\"], [\n        awardXp,\n        updateNpc\n    ]);\n    const resetNpcs = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useNpcs.useCallback[resetNpcs]\": ()=>{\n            setNpcs((0,_lib_npcs__WEBPACK_IMPORTED_MODULE_2__.cloneDefaultNpcs)());\n            setAchievements([]);\n        }\n    }[\"useNpcs.useCallback[resetNpcs]\"], [\n        setAchievements,\n        setNpcs\n    ]);\n    return {\n        npcs,\n        achievements,\n        addNpc,\n        updateNpc,\n        removeNpc,\n        ensureNpcByName,\n        incrementDreamCount,\n        adjustTrust,\n        adjustShame,\n        addDialogue,\n        resetNpcs\n    };\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useNpcs);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0lBR2hDLE1BQU04QixjQUFjeEQsa0RBQVdBOzRDQUM3QixDQUFDMkIsT0FBZThCLE1BQWNDLE9BQWUsSUFBSXRCLE9BQU91QixXQUFXLEVBQUU7WUFDbkUsSUFBSSxDQUFDRixLQUFLRyxJQUFJLElBQUk7WUFDbEIsTUFBTUMsV0FBMEJ6RCw0REFBaUJBLENBQUM7Z0JBQ2hEcUIsSUFBSSxDQUFDLElBQUksRUFBRVcsS0FBS0MsR0FBRyxHQUFHQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUVDLEtBQUtDLE1BQU0sR0FBR0YsUUFBUSxDQUFDLElBQUlHLEtBQUssQ0FBQyxHQUFHLElBQUk7Z0JBQzlFZ0IsTUFBTUEsS0FBS0csSUFBSTtnQkFDZkY7WUFDRjtZQUNBLElBQUlJLG1CQUFtQjtZQUN2QnBDLFVBQVVDO29EQUFPLENBQUNQO29CQUNoQjBDLG1CQUFtQjFDLElBQUkyQixTQUFTLENBQUNnQixNQUFNLEtBQUs7b0JBQzVDLE9BQU87d0JBQ0wsR0FBRzNDLEdBQUc7d0JBQ04yQixXQUFXOytCQUFJM0IsSUFBSTJCLFNBQVM7NEJBQUVjO3lCQUFTO29CQUN6QztnQkFDRjs7WUFDQSxJQUFJQyxrQkFBa0I7Z0JBQ3BCL0MsUUFBUTtZQUNWO1FBQ0Y7MkNBQ0E7UUFBQ0E7UUFBU1c7S0FBVTtJQUd0QixNQUFNc0MsWUFBWWhFLGtEQUFXQTswQ0FBQztZQUM1QlUsUUFBUVIsMkRBQWdCQTtZQUN4QlUsZ0JBQWdCLEVBQUU7UUFDcEI7eUNBQUc7UUFBQ0E7UUFBaUJGO0tBQVE7SUFFN0IsT0FBTztRQUNMRDtRQUNBRTtRQUNBVTtRQUNBSztRQUNBRTtRQUNBRTtRQUNBbUI7UUFDQUc7UUFDQUc7UUFDQUM7UUFDQVE7SUFDRjtBQUNGO0FBRUEsaUVBQWV4RCxPQUFPQSxFQUFDIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXGhvb2tzXFx1c2VOcGNzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuaW1wb3J0IHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VQZXJzaXN0ZW50U3RhdGUgfSBmcm9tICcuL3VzZVBlcnNpc3RlbnRTdGF0ZSc7XG5pbXBvcnQgeyBjbG9uZURlZmF1bHROcGNzLCBjbGFtcE1ldGVyLCBub3JtYWxpc2VEaWFsb2d1ZSwgbm9ybWFsaXNlTnBjLCB0eXBlIERpYWxvZ3VlRW50cnksIHR5cGUgTnBjIH0gZnJvbSAnLi4vbGliL25wY3MnO1xuaW1wb3J0IHsgdXNlSW52ZW50b3J5IH0gZnJvbSAnLi91c2VJbnZlbnRvcnknO1xuXG5jb25zdCBOUENfQUNISUVWRU1FTlRTX0tFWSA9ICducGNBY2hpZXZlbWVudHMnO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlTnBjcygpIHtcbiAgY29uc3QgW25wY3MsIHNldE5wY3NdID0gdXNlUGVyc2lzdGVudFN0YXRlPE5wY1tdPignbnBjcycsIGNsb25lRGVmYXVsdE5wY3MpO1xuICBjb25zdCBbYWNoaWV2ZW1lbnRzLCBzZXRBY2hpZXZlbWVudHNdID0gdXNlUGVyc2lzdGVudFN0YXRlPHN0cmluZ1tdPihOUENfQUNISUVWRU1FTlRTX0tFWSwgKCkgPT4gW10pO1xuICBjb25zdCBbdGl0bGVzLCBzZXRUaXRsZXNdID0gdXNlUGVyc2lzdGVudFN0YXRlPHN0cmluZ1tdPigndGl0bGVzVW5sb2NrZWQnLCAoKSA9PiBbXSk7XG4gIGNvbnN0IHsgYXdhcmRYcCB9ID0gdXNlSW52ZW50b3J5KCk7XG5cbiAgY29uc3Qgc2V0U2FmZSA9IHVzZUNhbGxiYWNrKFxuICAgICh1cGRhdGVyOiAocHJldmlvdXM6IE5wY1tdKSA9PiBOcGNbXSkgPT4ge1xuICAgICAgc2V0TnBjcygocHJldmlvdXMpID0+IHVwZGF0ZXIocHJldmlvdXMpLm1hcCgobnBjKSA9PiBub3JtYWxpc2VOcGMobnBjKSkpO1xuICAgIH0sXG4gICAgW3NldE5wY3NdXG4gICk7XG5cbiAgY29uc3QgYWRkTnBjID0gdXNlQ2FsbGJhY2soXG4gICAgKG5wYzogTnBjKSA9PiB7XG4gICAgICBzZXRTYWZlKChwcmV2aW91cykgPT4ge1xuICAgICAgICBjb25zdCBleGlzdHMgPSBwcmV2aW91cy5zb21lKChlbnRyeSkgPT4gZW50cnkuaWQgPT09IG5wYy5pZCk7XG4gICAgICAgIHJldHVybiBleGlzdHNcbiAgICAgICAgICA/IHByZXZpb3VzLm1hcCgoZW50cnkpID0+IChlbnRyeS5pZCA9PT0gbnBjLmlkID8gbm9ybWFsaXNlTnBjKHsgLi4uZW50cnksIC4uLm5wYyB9KSA6IGVudHJ5KSlcbiAgICAgICAgICA6IFsuLi5wcmV2aW91cywgbm9ybWFsaXNlTnBjKG5wYyldO1xuICAgICAgfSk7XG4gICAgICBhd2FyZFhwKDEwKTtcbiAgICB9LFxuICAgIFthd2FyZFhwLCBzZXRTYWZlXVxuICApO1xuXG4gIGNvbnN0IHVwZGF0ZU5wYyA9IHVzZUNhbGxiYWNrKFxuICAgIChucGNJZDogc3RyaW5nLCB1cGRhdGVyOiAobnBjOiBOcGMpID0+IE5wYykgPT4ge1xuICAgICAgc2V0U2FmZSgocHJldmlvdXMpID0+XG4gICAgICAgIHByZXZpb3VzLm1hcCgoZW50cnkpID0+IChlbnRyeS5pZCA9PT0gbnBjSWQgPyBub3JtYWxpc2VOcGModXBkYXRlcih7IC4uLmVudHJ5IH0pKSA6IGVudHJ5KSlcbiAgICAgICk7XG4gICAgfSxcbiAgICBbc2V0U2FmZV1cbiAgKTtcblxuICBjb25zdCByZW1vdmVOcGMgPSB1c2VDYWxsYmFjayhcbiAgICAobnBjSWQ6IHN0cmluZykgPT4ge1xuICAgICAgc2V0U2FmZSgocHJldmlvdXMpID0+IHByZXZpb3VzLmZpbHRlcigobnBjKSA9PiBucGMuaWQgIT09IG5wY0lkKSk7XG4gICAgfSxcbiAgICBbc2V0U2FmZV1cbiAgKTtcblxuICBjb25zdCBlbnN1cmVOcGNCeU5hbWUgPSB1c2VDYWxsYmFjayhcbiAgICAobmFtZTogc3RyaW5nLCByb2xlOiBzdHJpbmcgPSAnRnJpZW5kJykgPT4ge1xuICAgICAgY29uc3QgZXhpc3RpbmcgPSBucGNzLmZpbmQoKG5wYykgPT4gbnBjLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIGlmIChleGlzdGluZykgcmV0dXJuIGV4aXN0aW5nO1xuICAgICAgY29uc3QgaWQgPSBgbnBjLSR7RGF0ZS5ub3coKS50b1N0cmluZygzNil9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMiwgNil9YDtcbiAgICAgIGNvbnN0IG5ld05wYzogTnBjID0ge1xuICAgICAgICBpZCxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgcm9sZSxcbiAgICAgICAgZHJlYW1Db3VudDogMCxcbiAgICAgICAgdHJ1c3Q6IDMwLFxuICAgICAgICBzaGFtZTogMTAsXG4gICAgICAgIGJpbzogJycsXG4gICAgICAgIGRpYWxvZ3VlczogW10sXG4gICAgICB9O1xuICAgICAgY29uc3Qgbm9ybWFsaXNlZCA9IG5vcm1hbGlzZU5wYyhuZXdOcGMpO1xuICAgICAgc2V0U2FmZSgocHJldmlvdXMpID0+IFsuLi5wcmV2aW91cywgbm9ybWFsaXNlZF0pO1xuICAgICAgcmV0dXJuIG5vcm1hbGlzZWQ7XG4gICAgfSxcbiAgICBbbnBjcywgc2V0U2FmZV1cbiAgKTtcblxuICBjb25zdCBpbmNyZW1lbnREcmVhbUNvdW50ID0gdXNlQ2FsbGJhY2soXG4gICAgKG5wY0lkOiBzdHJpbmcsIGFtb3VudDogbnVtYmVyID0gMSkgPT4ge1xuICAgICAgaWYgKGFtb3VudCA9PT0gMCkgcmV0dXJuO1xuICAgICAgdXBkYXRlTnBjKG5wY0lkLCAobnBjKSA9PiAoe1xuICAgICAgICAuLi5ucGMsXG4gICAgICAgIGRyZWFtQ291bnQ6IE1hdGgubWF4KDAsIG5wYy5kcmVhbUNvdW50ICsgYW1vdW50KSxcbiAgICAgIH0pKTtcbiAgICB9LFxuICAgIFt1cGRhdGVOcGNdXG4gICk7XG5cbiAgY29uc3QgYWRqdXN0VHJ1c3QgPSB1c2VDYWxsYmFjayhcbiAgICAobnBjSWQ6IHN0cmluZywgZGVsdGE6IG51bWJlcikgPT4ge1xuICAgICAgaWYgKGRlbHRhID09PSAwKSByZXR1cm47XG4gICAgICB1cGRhdGVOcGMobnBjSWQsIChucGMpID0+IHtcbiAgICAgICAgY29uc3QgdHJ1c3QgPSBjbGFtcE1ldGVyKG5wYy50cnVzdCArIGRlbHRhKTtcbiAgICAgICAgaWYgKHRydXN0ID49IDEwMCAmJiAhYWNoaWV2ZW1lbnRzLmluY2x1ZGVzKCdCb25kZWQgRHJlYW1lcicpKSB7XG4gICAgICAgICAgc2V0QWNoaWV2ZW1lbnRzKChwcmV2aW91cykgPT4gKHByZXZpb3VzLmluY2x1ZGVzKCdCb25kZWQgRHJlYW1lcicpID8gcHJldmlvdXMgOiBbLi4ucHJldmlvdXMsICdCb25kZWQgRHJlYW1lciddKSk7XG4gICAgICAgICAgYXdhcmRYcCgyNSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgLi4ubnBjLCB0cnVzdCB9O1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBbYWNoaWV2ZW1lbnRzLCBhd2FyZFhwLCBzZXRBY2hpZXZlbWVudHMsIHVwZGF0ZU5wY11cbiAgKTtcblxuICBjb25zdCBhZGp1c3RTaGFtZSA9IHVzZUNhbGxiYWNrKFxuICAgIChucGNJZDogc3RyaW5nLCBkZWx0YTogbnVtYmVyKSA9PiB7XG4gICAgICBpZiAoZGVsdGEgPT09IDApIHJldHVybjtcbiAgICAgIHVwZGF0ZU5wYyhucGNJZCwgKG5wYykgPT4ge1xuICAgICAgICBjb25zdCBzaGFtZSA9IGNsYW1wTWV0ZXIobnBjLnNoYW1lICsgZGVsdGEpO1xuICAgICAgICBpZiAoc2hhbWUgPj0gMTAwICYmICF0aXRsZXMuaW5jbHVkZXMoJ1dvcnRobGVzcyBUb3knKSkge1xuICAgICAgICAgIHNldFRpdGxlcygocHJldmlvdXMpID0+IChwcmV2aW91cy5pbmNsdWRlcygnV29ydGhsZXNzIFRveScpID8gcHJldmlvdXMgOiBbLi4ucHJldmlvdXMsICdXb3J0aGxlc3MgVG95J10pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyAuLi5ucGMsIHNoYW1lIH07XG4gICAgICB9KTtcbiAgICB9LFxuICAgIFtzZXRUaXRsZXMsIHRpdGxlcywgdXBkYXRlTnBjXVxuICApO1xuXG4gIGNvbnN0IGFkZERpYWxvZ3VlID0gdXNlQ2FsbGJhY2soXG4gICAgKG5wY0lkOiBzdHJpbmcsIHRleHQ6IHN0cmluZywgZGF0ZTogc3RyaW5nID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpKSA9PiB7XG4gICAgICBpZiAoIXRleHQudHJpbSgpKSByZXR1cm47XG4gICAgICBjb25zdCBkaWFsb2d1ZTogRGlhbG9ndWVFbnRyeSA9IG5vcm1hbGlzZURpYWxvZ3VlKHtcbiAgICAgICAgaWQ6IGBkbGctJHtEYXRlLm5vdygpLnRvU3RyaW5nKDM2KX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyLCA2KX1gLFxuICAgICAgICB0ZXh0OiB0ZXh0LnRyaW0oKSxcbiAgICAgICAgZGF0ZSxcbiAgICAgIH0pO1xuICAgICAgbGV0IHNob3VsZEF3YXJkQm9udXMgPSBmYWxzZTtcbiAgICAgIHVwZGF0ZU5wYyhucGNJZCwgKG5wYykgPT4ge1xuICAgICAgICBzaG91bGRBd2FyZEJvbnVzID0gbnBjLmRpYWxvZ3Vlcy5sZW5ndGggPT09IDA7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ubnBjLFxuICAgICAgICAgIGRpYWxvZ3VlczogWy4uLm5wYy5kaWFsb2d1ZXMsIGRpYWxvZ3VlXSxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgICAgaWYgKHNob3VsZEF3YXJkQm9udXMpIHtcbiAgICAgICAgYXdhcmRYcCgyMCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbYXdhcmRYcCwgdXBkYXRlTnBjXVxuICApO1xuXG4gIGNvbnN0IHJlc2V0TnBjcyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXROcGNzKGNsb25lRGVmYXVsdE5wY3MoKSk7XG4gICAgc2V0QWNoaWV2ZW1lbnRzKFtdKTtcbiAgfSwgW3NldEFjaGlldmVtZW50cywgc2V0TnBjc10pO1xuXG4gIHJldHVybiB7XG4gICAgbnBjcyxcbiAgICBhY2hpZXZlbWVudHMsXG4gICAgYWRkTnBjLFxuICAgIHVwZGF0ZU5wYyxcbiAgICByZW1vdmVOcGMsXG4gICAgZW5zdXJlTnBjQnlOYW1lLFxuICAgIGluY3JlbWVudERyZWFtQ291bnQsXG4gICAgYWRqdXN0VHJ1c3QsXG4gICAgYWRqdXN0U2hhbWUsXG4gICAgYWRkRGlhbG9ndWUsXG4gICAgcmVzZXROcGNzLFxuICB9IGFzIGNvbnN0O1xufVxuXG5leHBvcnQgZGVmYXVsdCB1c2VOcGNzO1xuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlUGVyc2lzdGVudFN0YXRlIiwiY2xvbmVEZWZhdWx0TnBjcyIsImNsYW1wTWV0ZXIiLCJub3JtYWxpc2VEaWFsb2d1ZSIsIm5vcm1hbGlzZU5wYyIsInVzZUludmVudG9yeSIsIk5QQ19BQ0hJRVZFTUVOVFNfS0VZIiwidXNlTnBjcyIsIm5wY3MiLCJzZXROcGNzIiwiYWNoaWV2ZW1lbnRzIiwic2V0QWNoaWV2ZW1lbnRzIiwidGl0bGVzIiwic2V0VGl0bGVzIiwiYXdhcmRYcCIsInNldFNhZmUiLCJ1cGRhdGVyIiwicHJldmlvdXMiLCJtYXAiLCJucGMiLCJhZGROcGMiLCJleGlzdHMiLCJzb21lIiwiZW50cnkiLCJpZCIsInVwZGF0ZU5wYyIsIm5wY0lkIiwicmVtb3ZlTnBjIiwiZmlsdGVyIiwiZW5zdXJlTnBjQnlOYW1lIiwibmFtZSIsInJvbGUiLCJleGlzdGluZyIsImZpbmQiLCJ0b0xvd2VyQ2FzZSIsIkRhdGUiLCJub3ciLCJ0b1N0cmluZyIsIk1hdGgiLCJyYW5kb20iLCJzbGljZSIsIm5ld05wYyIsImRyZWFtQ291bnQiLCJ0cnVzdCIsInNoYW1lIiwiYmlvIiwiZGlhbG9ndWVzIiwibm9ybWFsaXNlZCIsImluY3JlbWVudERyZWFtQ291bnQiLCJhbW91bnQiLCJtYXgiLCJhZGp1c3RUcnVzdCIsImRlbHRhIiwiaW5jbHVkZXMiLCJhZGp1c3RTaGFtZSIsImFkZERpYWxvZ3VlIiwidGV4dCIsImRhdGUiLCJ0b0lTT1N0cmluZyIsInRyaW0iLCJkaWFsb2d1ZSIsInNob3VsZEF3YXJkQm9udXMiLCJsZW5ndGgiLCJyZXNldE5wY3MiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useNpcs.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/usePersistentState.ts":
/*!*****************************************!*\
  !*** ./app/hooks/usePersistentState.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   usePersistentState: () => (/* binding */ usePersistentState)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* __next_internal_client_entry_do_not_use__ usePersistentState auto */ \nfunction usePersistentState(key, initializer) {\n    const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        \"usePersistentState.useState\": ()=>{\n            if (true) {\n                return initializer();\n            }\n            try {\n                const raw = window.localStorage.getItem(key);\n                if (!raw) {\n                    const value = initializer();\n                    window.localStorage.setItem(key, JSON.stringify(value));\n                    return value;\n                }\n                return JSON.parse(raw);\n            } catch (error) {\n                console.warn(`[usePersistentState] failed to read ${key}`, error);\n                const value = initializer();\n                if (false) {}\n                return value;\n            }\n        }\n    }[\"usePersistentState.useState\"]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"usePersistentState.useEffect\": ()=>{\n            if (true) return;\n            try {\n                window.localStorage.setItem(key, JSON.stringify(state));\n            } catch (error) {\n                console.warn(`[usePersistentState] failed to persist ${key}`, error);\n            }\n        }\n    }[\"usePersistentState.useEffect\"], [\n        key,\n        state\n    ]);\n    return [\n        state,\n        setState\n    ];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvaG9va3MvdXNlUGVyc2lzdGVudFN0YXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozt3RUFFNEM7QUFJckMsU0FBU0UsbUJBQ2RDLEdBQVcsRUFDWEMsV0FBMkI7SUFFM0IsTUFBTSxDQUFDQyxPQUFPQyxTQUFTLEdBQUdMLCtDQUFRQTt1Q0FBSTtZQUNwQyxJQUFJLElBQTZCLEVBQUU7Z0JBQ2pDLE9BQU9HO1lBQ1Q7WUFDQSxJQUFJO2dCQUNGLE1BQU1HLE1BQU1DLE9BQU9DLFlBQVksQ0FBQ0MsT0FBTyxDQUFDUDtnQkFDeEMsSUFBSSxDQUFDSSxLQUFLO29CQUNSLE1BQU1JLFFBQVFQO29CQUNkSSxPQUFPQyxZQUFZLENBQUNHLE9BQU8sQ0FBQ1QsS0FBS1UsS0FBS0MsU0FBUyxDQUFDSDtvQkFDaEQsT0FBT0E7Z0JBQ1Q7Z0JBQ0EsT0FBT0UsS0FBS0UsS0FBSyxDQUFDUjtZQUNwQixFQUFFLE9BQU9TLE9BQU87Z0JBQ2RDLFFBQVFDLElBQUksQ0FBQyxDQUFDLG9DQUFvQyxFQUFFZixLQUFLLEVBQUVhO2dCQUMzRCxNQUFNTCxRQUFRUDtnQkFDZCxJQUFJLEtBQTZCLEVBQUUsRUFNbEM7Z0JBQ0QsT0FBT087WUFDVDtRQUNGOztJQUVBWCxnREFBU0E7d0NBQUM7WUFDUixJQUFJLElBQTZCLEVBQUU7WUFDbkMsSUFBSTtnQkFDRlEsT0FBT0MsWUFBWSxDQUFDRyxPQUFPLENBQUNULEtBQUtVLEtBQUtDLFNBQVMsQ0FBQ1Q7WUFDbEQsRUFBRSxPQUFPVyxPQUFPO2dCQUNkQyxRQUFRQyxJQUFJLENBQUMsQ0FBQyx1Q0FBdUMsRUFBRWYsS0FBSyxFQUFFYTtZQUNoRTtRQUNGO3VDQUFHO1FBQUNiO1FBQUtFO0tBQU07SUFFZixPQUFPO1FBQUNBO1FBQU9DO0tBQVM7QUFDMUIiLCJzb3VyY2VzIjpbIkM6XFxNb21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxcaG9va3NcXHVzZVBlcnNpc3RlbnRTdGF0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcblxudHlwZSBJbml0aWFsaXplcjxUPiA9ICgpID0+IFQ7XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VQZXJzaXN0ZW50U3RhdGU8VD4oXG4gIGtleTogc3RyaW5nLFxuICBpbml0aWFsaXplcjogSW5pdGlhbGl6ZXI8VD5cbikge1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlPFQ+KCgpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuIGluaXRpYWxpemVyKCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBjb25zdCByYXcgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICAgIGlmICghcmF3KSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gaW5pdGlhbGl6ZXIoKTtcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIEpTT04ucGFyc2UocmF3KSBhcyBUO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oYFt1c2VQZXJzaXN0ZW50U3RhdGVdIGZhaWxlZCB0byByZWFkICR7a2V5fWAsIGVycm9yKTtcbiAgICAgIGNvbnN0IHZhbHVlID0gaW5pdGlhbGl6ZXIoKTtcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgICAgICAgfSBjYXRjaCAod3JpdGVFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUud2FybihgW3VzZVBlcnNpc3RlbnRTdGF0ZV0gZmFpbGVkIHRvIHdyaXRlIGZhbGxiYWNrIGZvciAke2tleX1gLCB3cml0ZUVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xuICAgIHRyeSB7XG4gICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShzdGF0ZSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oYFt1c2VQZXJzaXN0ZW50U3RhdGVdIGZhaWxlZCB0byBwZXJzaXN0ICR7a2V5fWAsIGVycm9yKTtcbiAgICB9XG4gIH0sIFtrZXksIHN0YXRlXSk7XG5cbiAgcmV0dXJuIFtzdGF0ZSwgc2V0U3RhdGVdIGFzIGNvbnN0O1xufVxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVN0YXRlIiwidXNlUGVyc2lzdGVudFN0YXRlIiwia2V5IiwiaW5pdGlhbGl6ZXIiLCJzdGF0ZSIsInNldFN0YXRlIiwicmF3Iiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInZhbHVlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwYXJzZSIsImVycm9yIiwiY29uc29sZSIsIndhcm4iLCJ3cml0ZUVycm9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/usePersistentState.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/usePunishments.ts":
/*!*************************************!*\
  !*** ./app/hooks/usePunishments.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   usePunishments: () => (/* binding */ usePunishments)\n/* harmony export */ });\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _data_punishments_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../data/punishments.json */ \"(ssr)/./data/punishments.json\");\n/* __next_internal_client_entry_do_not_use__ usePunishments auto */ \n\nconst PUNISHMENTS_STORAGE_KEY = 'punishments';\nconst ACTIVE_PUNISHMENTS_STORAGE_KEY = 'activePunishments';\nfunction usePunishments() {\n    const [punishments, setPunishments] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_0__.usePersistentState)(PUNISHMENTS_STORAGE_KEY, {\n        \"usePunishments.usePersistentState\": ()=>_data_punishments_json__WEBPACK_IMPORTED_MODULE_1__\n    }[\"usePunishments.usePersistentState\"]);\n    const [activePunishments, setActivePunishments] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_0__.usePersistentState)(ACTIVE_PUNISHMENTS_STORAGE_KEY, {\n        \"usePunishments.usePersistentState\": ()=>[]\n    }[\"usePunishments.usePersistentState\"]);\n    const assignPunishment = (punishmentId)=>{\n        const punishment = punishments.find((p)=>p.id === punishmentId);\n        if (punishment && !activePunishments.some((p)=>p.id === punishmentId)) {\n            const newActivePunishment = {\n                ...punishment,\n                assignedAt: new Date().toISOString()\n            };\n            setActivePunishments((prev)=>[\n                    ...prev,\n                    newActivePunishment\n                ]);\n            return newActivePunishment;\n        }\n        return null;\n    };\n    const completePunishment = (punishmentId)=>{\n        setActivePunishments((prev)=>prev.filter((p)=>p.id !== punishmentId));\n    };\n    return {\n        punishments,\n        activePunishments,\n        assignPunishment,\n        completePunishment\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvaG9va3MvdXNlUHVuaXNobWVudHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O29FQUUwRDtBQUNHO0FBWTdELE1BQU1FLDBCQUEwQjtBQUNoQyxNQUFNQyxpQ0FBaUM7QUFFaEMsU0FBU0M7SUFDZCxNQUFNLENBQUNDLGFBQWFDLGVBQWUsR0FBR04sdUVBQWtCQSxDQUN0REU7NkNBQ0EsSUFBTUQsbURBQWtCQTs7SUFHMUIsTUFBTSxDQUFDTSxtQkFBbUJDLHFCQUFxQixHQUFHUix1RUFBa0JBLENBQ2xFRzs2Q0FDQSxJQUFNLEVBQUU7O0lBR1YsTUFBTU0sbUJBQW1CLENBQUNDO1FBQ3hCLE1BQU1DLGFBQWFOLFlBQVlPLElBQUksQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRUMsRUFBRSxLQUFLSjtRQUNsRCxJQUFJQyxjQUFjLENBQUNKLGtCQUFrQlEsSUFBSSxDQUFDRixDQUFBQSxJQUFLQSxFQUFFQyxFQUFFLEtBQUtKLGVBQWU7WUFDckUsTUFBTU0sc0JBQXdDO2dCQUM1QyxHQUFHTCxVQUFVO2dCQUNiTSxZQUFZLElBQUlDLE9BQU9DLFdBQVc7WUFDcEM7WUFDQVgscUJBQXFCWSxDQUFBQSxPQUFRO3VCQUFJQTtvQkFBTUo7aUJBQW9CO1lBQzNELE9BQU9BO1FBQ1Q7UUFDQSxPQUFPO0lBQ1Q7SUFFQSxNQUFNSyxxQkFBcUIsQ0FBQ1g7UUFDMUJGLHFCQUFxQlksQ0FBQUEsT0FBUUEsS0FBS0UsTUFBTSxDQUFDVCxDQUFBQSxJQUFLQSxFQUFFQyxFQUFFLEtBQUtKO0lBQ3pEO0lBRUEsT0FBTztRQUNMTDtRQUNBRTtRQUNBRTtRQUNBWTtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxNb21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxcaG9va3NcXHVzZVB1bmlzaG1lbnRzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcclxuXHJcbmltcG9ydCB7IHVzZVBlcnNpc3RlbnRTdGF0ZSB9IGZyb20gJy4vdXNlUGVyc2lzdGVudFN0YXRlJztcclxuaW1wb3J0IGRlZmF1bHRQdW5pc2htZW50cyBmcm9tICcuLi8uLi9kYXRhL3B1bmlzaG1lbnRzLmpzb24nO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQdW5pc2htZW50IHtcclxuICBpZDogc3RyaW5nO1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFjdGl2ZVB1bmlzaG1lbnQgZXh0ZW5kcyBQdW5pc2htZW50IHtcclxuICBhc3NpZ25lZEF0OiBzdHJpbmc7XHJcbn1cclxuXHJcbmNvbnN0IFBVTklTSE1FTlRTX1NUT1JBR0VfS0VZID0gJ3B1bmlzaG1lbnRzJztcclxuY29uc3QgQUNUSVZFX1BVTklTSE1FTlRTX1NUT1JBR0VfS0VZID0gJ2FjdGl2ZVB1bmlzaG1lbnRzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VQdW5pc2htZW50cygpIHtcclxuICBjb25zdCBbcHVuaXNobWVudHMsIHNldFB1bmlzaG1lbnRzXSA9IHVzZVBlcnNpc3RlbnRTdGF0ZTxQdW5pc2htZW50W10+KFxyXG4gICAgUFVOSVNITUVOVFNfU1RPUkFHRV9LRVksXHJcbiAgICAoKSA9PiBkZWZhdWx0UHVuaXNobWVudHNcclxuICApO1xyXG5cclxuICBjb25zdCBbYWN0aXZlUHVuaXNobWVudHMsIHNldEFjdGl2ZVB1bmlzaG1lbnRzXSA9IHVzZVBlcnNpc3RlbnRTdGF0ZTxBY3RpdmVQdW5pc2htZW50W10+KFxyXG4gICAgQUNUSVZFX1BVTklTSE1FTlRTX1NUT1JBR0VfS0VZLFxyXG4gICAgKCkgPT4gW11cclxuICApO1xyXG5cclxuICBjb25zdCBhc3NpZ25QdW5pc2htZW50ID0gKHB1bmlzaG1lbnRJZDogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCBwdW5pc2htZW50ID0gcHVuaXNobWVudHMuZmluZChwID0+IHAuaWQgPT09IHB1bmlzaG1lbnRJZCk7XHJcbiAgICBpZiAocHVuaXNobWVudCAmJiAhYWN0aXZlUHVuaXNobWVudHMuc29tZShwID0+IHAuaWQgPT09IHB1bmlzaG1lbnRJZCkpIHtcclxuICAgICAgY29uc3QgbmV3QWN0aXZlUHVuaXNobWVudDogQWN0aXZlUHVuaXNobWVudCA9IHtcclxuICAgICAgICAuLi5wdW5pc2htZW50LFxyXG4gICAgICAgIGFzc2lnbmVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgfTtcclxuICAgICAgc2V0QWN0aXZlUHVuaXNobWVudHMocHJldiA9PiBbLi4ucHJldiwgbmV3QWN0aXZlUHVuaXNobWVudF0pO1xyXG4gICAgICByZXR1cm4gbmV3QWN0aXZlUHVuaXNobWVudDtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNvbXBsZXRlUHVuaXNobWVudCA9IChwdW5pc2htZW50SWQ6IHN0cmluZykgPT4ge1xyXG4gICAgc2V0QWN0aXZlUHVuaXNobWVudHMocHJldiA9PiBwcmV2LmZpbHRlcihwID0+IHAuaWQgIT09IHB1bmlzaG1lbnRJZCkpO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBwdW5pc2htZW50cyxcclxuICAgIGFjdGl2ZVB1bmlzaG1lbnRzLFxyXG4gICAgYXNzaWduUHVuaXNobWVudCxcclxuICAgIGNvbXBsZXRlUHVuaXNobWVudCxcclxuICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJ1c2VQZXJzaXN0ZW50U3RhdGUiLCJkZWZhdWx0UHVuaXNobWVudHMiLCJQVU5JU0hNRU5UU19TVE9SQUdFX0tFWSIsIkFDVElWRV9QVU5JU0hNRU5UU19TVE9SQUdFX0tFWSIsInVzZVB1bmlzaG1lbnRzIiwicHVuaXNobWVudHMiLCJzZXRQdW5pc2htZW50cyIsImFjdGl2ZVB1bmlzaG1lbnRzIiwic2V0QWN0aXZlUHVuaXNobWVudHMiLCJhc3NpZ25QdW5pc2htZW50IiwicHVuaXNobWVudElkIiwicHVuaXNobWVudCIsImZpbmQiLCJwIiwiaWQiLCJzb21lIiwibmV3QWN0aXZlUHVuaXNobWVudCIsImFzc2lnbmVkQXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJwcmV2IiwiY29tcGxldGVQdW5pc2htZW50IiwiZmlsdGVyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/usePunishments.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useQuestlines.ts":
/*!************************************!*\
  !*** ./app/hooks/useQuestlines.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useQuestlines: () => (/* binding */ useQuestlines)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _useBuffs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useBuffs */ \"(ssr)/./app/hooks/useBuffs.ts\");\n/* harmony import */ var _useInventory__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useInventory */ \"(ssr)/./app/hooks/useInventory.ts\");\n/* harmony import */ var _useCompanions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useCompanions */ \"(ssr)/./app/hooks/useCompanions.ts\");\n/* harmony import */ var _useNpcs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useNpcs */ \"(ssr)/./app/hooks/useNpcs.ts\");\n/* harmony import */ var _lib_questlines__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../lib/questlines */ \"(ssr)/./app/lib/questlines.ts\");\n/* __next_internal_client_entry_do_not_use__ useQuestlines auto */ \n\n\n\n\n\n\nconst TITLES_STORAGE_KEY = \"titlesUnlocked\";\nfunction cloneStage(stage) {\n    return {\n        ...stage,\n        branchChoices: stage.branchChoices?.map((branch)=>({\n                ...branch\n            })) ?? undefined\n    };\n}\nfunction useQuestlines() {\n    const [questlines, setQuestlines] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(\"questlines\", _lib_questlines__WEBPACK_IMPORTED_MODULE_6__.cloneDefaultQuestlines);\n    const [xp, setXp] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(\"xpTotal\", {\n        \"useQuestlines.usePersistentState\": ()=>3400\n    }[\"useQuestlines.usePersistentState\"]);\n    const [titles, setTitles] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(TITLES_STORAGE_KEY, {\n        \"useQuestlines.usePersistentState\": ()=>[]\n    }[\"useQuestlines.usePersistentState\"]);\n    const { applyEvent, triggerBuffBySource } = (0,_useBuffs__WEBPACK_IMPORTED_MODULE_2__.useBuffs)();\n    const { gainItem } = (0,_useInventory__WEBPACK_IMPORTED_MODULE_3__.useInventory)();\n    const { companions, gainXpForCompanions } = (0,_useCompanions__WEBPACK_IMPORTED_MODULE_4__.useCompanions)();\n    const { npcs, adjustTrust: adjustNpcTrust } = (0,_useNpcs__WEBPACK_IMPORTED_MODULE_5__.useNpcs)();\n    const awardTitle = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[awardTitle]\": (title)=>{\n            if (!title || title.trim().length === 0) return;\n            setTitles({\n                \"useQuestlines.useCallback[awardTitle]\": (prev)=>prev.includes(title) ? prev : [\n                        ...prev,\n                        title\n                    ]\n            }[\"useQuestlines.useCallback[awardTitle]\"]);\n        }\n    }[\"useQuestlines.useCallback[awardTitle]\"], [\n        setTitles\n    ]);\n    const awardReward = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[awardReward]\": (reward)=>{\n            if (!reward) return;\n            if (reward.xp && reward.xp > 0) {\n                const rewarded = applyEvent(\"xp\", reward.xp);\n                if (rewarded > 0) {\n                    setXp({\n                        \"useQuestlines.useCallback[awardReward]\": (prev)=>prev + rewarded\n                    }[\"useQuestlines.useCallback[awardReward]\"]);\n                }\n            }\n            if (reward.item) {\n                gainItem(reward.item, 1);\n            }\n            if (reward.buff) {\n                triggerBuffBySource(reward.buff);\n            }\n            if (reward.title) {\n                awardTitle(reward.title);\n            }\n        }\n    }[\"useQuestlines.useCallback[awardReward]\"], [\n        applyEvent,\n        awardTitle,\n        gainItem,\n        setXp,\n        triggerBuffBySource\n    ]);\n    const updateQuestline = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[updateQuestline]\": (questlineId, updater)=>{\n            setQuestlines({\n                \"useQuestlines.useCallback[updateQuestline]\": (previous)=>previous.map({\n                        \"useQuestlines.useCallback[updateQuestline]\": (questline)=>questline.id === questlineId ? updater((0,_lib_questlines__WEBPACK_IMPORTED_MODULE_6__.cloneQuestline)(questline)) : questline\n                    }[\"useQuestlines.useCallback[updateQuestline]\"])\n            }[\"useQuestlines.useCallback[updateQuestline]\"]);\n        }\n    }[\"useQuestlines.useCallback[updateQuestline]\"], [\n        setQuestlines\n    ]);\n    const mutateStage = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[mutateStage]\": (questlineId, stageId, mutator)=>{\n            updateQuestline(questlineId, {\n                \"useQuestlines.useCallback[mutateStage]\": (questline)=>({\n                        ...questline,\n                        stages: questline.stages.map({\n                            \"useQuestlines.useCallback[mutateStage]\": (stage)=>stage.id === stageId ? mutator(cloneStage(stage)) : stage\n                        }[\"useQuestlines.useCallback[mutateStage]\"])\n                    })\n            }[\"useQuestlines.useCallback[mutateStage]\"]);\n        }\n    }[\"useQuestlines.useCallback[mutateStage]\"], [\n        updateQuestline\n    ]);\n    const completeStage = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[completeStage]\": (questlineId, stageId, branchId)=>{\n            let completion = \"completed\";\n            setQuestlines({\n                \"useQuestlines.useCallback[completeStage]\": (previous)=>previous.map({\n                        \"useQuestlines.useCallback[completeStage]\": (questline)=>{\n                            if (questline.id !== questlineId) {\n                                return questline;\n                            }\n                            const working = (0,_lib_questlines__WEBPACK_IMPORTED_MODULE_6__.cloneQuestline)(questline);\n                            const located = (0,_lib_questlines__WEBPACK_IMPORTED_MODULE_6__.findStage)(working, stageId);\n                            if (!located) {\n                                return questline;\n                            }\n                            const { stage, index } = located;\n                            if (stage.completed) {\n                                completion = \"already-completed\";\n                                return questline;\n                            }\n                            if (stage.branchChoices && stage.branchChoices.length > 0) {\n                                const chosen = branchId ?? stage.chosenBranchId ?? undefined;\n                                if (!chosen) {\n                                    completion = \"branch-required\";\n                                    return questline;\n                                }\n                                stage.chosenBranchId = chosen;\n                                const branch = stage.branchChoices.find({\n                                    \"useQuestlines.useCallback[completeStage].branch\": (option)=>option.id === chosen\n                                }[\"useQuestlines.useCallback[completeStage].branch\"]);\n                                if (branch?.reward) {\n                                    awardReward(branch.reward);\n                                    if (branch.reward.xp) {\n                                        gainXpForCompanions(\"quest\", branch.reward.xp);\n                                    }\n                                }\n                            }\n                            stage.completed = true;\n                            const stageReward = {\n                                xp: stage.xp,\n                                ...stage.reward\n                            };\n                            awardReward(stageReward);\n                            if (stageReward.xp) {\n                                gainXpForCompanions(\"quest\", stageReward.xp);\n                            }\n                            const stageText = `${stage.title ?? ''} ${stage.description ?? ''} ${questline.name ?? ''}`.toLowerCase();\n                            npcs.forEach({\n                                \"useQuestlines.useCallback[completeStage]\": (npc)=>{\n                                    if (stageText.includes(npc.name.toLowerCase())) {\n                                        adjustNpcTrust(npc.id, 5);\n                                    }\n                                }\n                            }[\"useQuestlines.useCallback[completeStage]\"]);\n                            working.stages[index] = stage;\n                            if ((0,_lib_questlines__WEBPACK_IMPORTED_MODULE_6__.isQuestlineComplete)(working)) {\n                                working.completed = true;\n                                if (working.reward) {\n                                    awardReward(working.reward);\n                                    if (working.reward.xp) {\n                                        gainXpForCompanions(\"quest\", working.reward.xp);\n                                    }\n                                }\n                                completion = \"questline-completed\";\n                            }\n                            return working;\n                        }\n                    }[\"useQuestlines.useCallback[completeStage]\"])\n            }[\"useQuestlines.useCallback[completeStage]\"]);\n            return completion;\n        }\n    }[\"useQuestlines.useCallback[completeStage]\"], [\n        adjustNpcTrust,\n        awardReward,\n        gainXpForCompanions,\n        npcs,\n        setQuestlines\n    ]);\n    const chooseBranch = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[chooseBranch]\": (questlineId, stageId, branchId)=>{\n            mutateStage(questlineId, stageId, {\n                \"useQuestlines.useCallback[chooseBranch]\": (stage)=>({\n                        ...stage,\n                        chosenBranchId: branchId\n                    })\n            }[\"useQuestlines.useCallback[chooseBranch]\"]);\n        }\n    }[\"useQuestlines.useCallback[chooseBranch]\"], [\n        mutateStage\n    ]);\n    const resetQuestline = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[resetQuestline]\": (questlineId)=>{\n            updateQuestline(questlineId, {\n                \"useQuestlines.useCallback[resetQuestline]\": (questline)=>({\n                        ...questline,\n                        completed: false,\n                        stages: questline.stages.map({\n                            \"useQuestlines.useCallback[resetQuestline]\": (stage)=>({\n                                    ...stage,\n                                    completed: false,\n                                    chosenBranchId: stage.branchChoices ? null : stage.chosenBranchId\n                                })\n                        }[\"useQuestlines.useCallback[resetQuestline]\"])\n                    })\n            }[\"useQuestlines.useCallback[resetQuestline]\"]);\n        }\n    }[\"useQuestlines.useCallback[resetQuestline]\"], [\n        updateQuestline\n    ]);\n    const addQuestline = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[addQuestline]\": (questline)=>{\n            setQuestlines({\n                \"useQuestlines.useCallback[addQuestline]\": (previous)=>[\n                        ...previous,\n                        (0,_lib_questlines__WEBPACK_IMPORTED_MODULE_6__.cloneQuestline)(questline)\n                    ]\n            }[\"useQuestlines.useCallback[addQuestline]\"]);\n        }\n    }[\"useQuestlines.useCallback[addQuestline]\"], [\n        setQuestlines\n    ]);\n    const removeQuestline = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[removeQuestline]\": (questlineId)=>{\n            setQuestlines({\n                \"useQuestlines.useCallback[removeQuestline]\": (previous)=>previous.filter({\n                        \"useQuestlines.useCallback[removeQuestline]\": (questline)=>questline.id !== questlineId\n                    }[\"useQuestlines.useCallback[removeQuestline]\"])\n            }[\"useQuestlines.useCallback[removeQuestline]\"]);\n        }\n    }[\"useQuestlines.useCallback[removeQuestline]\"], [\n        setQuestlines\n    ]);\n    const addStage = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[addStage]\": (questlineId, stage)=>{\n            updateQuestline(questlineId, {\n                \"useQuestlines.useCallback[addStage]\": (questline)=>({\n                        ...questline,\n                        stages: [\n                            ...questline.stages,\n                            cloneStage(stage)\n                        ]\n                    })\n            }[\"useQuestlines.useCallback[addStage]\"]);\n        }\n    }[\"useQuestlines.useCallback[addStage]\"], [\n        updateQuestline\n    ]);\n    const updateStageFields = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[updateStageFields]\": (questlineId, stageId, patch)=>{\n            mutateStage(questlineId, stageId, {\n                \"useQuestlines.useCallback[updateStageFields]\": (stage)=>({\n                        ...stage,\n                        ...patch\n                    })\n            }[\"useQuestlines.useCallback[updateStageFields]\"]);\n        }\n    }[\"useQuestlines.useCallback[updateStageFields]\"], [\n        mutateStage\n    ]);\n    const removeStage = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[removeStage]\": (questlineId, stageId)=>{\n            updateQuestline(questlineId, {\n                \"useQuestlines.useCallback[removeStage]\": (questline)=>({\n                        ...questline,\n                        stages: questline.stages.filter({\n                            \"useQuestlines.useCallback[removeStage]\": (stage)=>stage.id !== stageId\n                        }[\"useQuestlines.useCallback[removeStage]\"])\n                    })\n            }[\"useQuestlines.useCallback[removeStage]\"]);\n        }\n    }[\"useQuestlines.useCallback[removeStage]\"], [\n        updateQuestline\n    ]);\n    const questlineSummaries = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useQuestlines.useMemo[questlineSummaries]\": ()=>questlines.map({\n                \"useQuestlines.useMemo[questlineSummaries]\": (questline)=>({\n                        questline,\n                        progress: (0,_lib_questlines__WEBPACK_IMPORTED_MODULE_6__.getQuestlineProgress)(questline),\n                        activeStage: (0,_lib_questlines__WEBPACK_IMPORTED_MODULE_6__.getActiveStage)(questline)\n                    })\n            }[\"useQuestlines.useMemo[questlineSummaries]\"])\n    }[\"useQuestlines.useMemo[questlineSummaries]\"], [\n        questlines\n    ]);\n    return {\n        questlines,\n        questlineSummaries,\n        completeStage,\n        chooseBranch,\n        resetQuestline,\n        addQuestline,\n        updateQuestline,\n        removeQuestline,\n        addStage,\n        updateStage: updateStageFields,\n        removeStage,\n        mutateStage\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzNDLEdBQUdBLFNBQVM7d0JBQ1pLLFFBQVFMLFVBQVVLLE1BQU0sQ0FBQ3VCLE1BQU07c0VBQUMsQ0FBQy9ELFFBQVVBLE1BQU1vQyxFQUFFLEtBQUtFOztvQkFDMUQ7O1FBQ0Y7aURBQ0E7UUFBQ1A7S0FBZ0I7SUFHbkIsTUFBTXFDLHFCQUFxQmxGLDhDQUFPQTtxREFDaEMsSUFDRW9CLFdBQVdKLEdBQUc7NkRBQUMsQ0FBQ2lDLFlBQWU7d0JBQzdCQTt3QkFDQWtDLFVBQVV6RSxxRUFBb0JBLENBQUN1Qzt3QkFDL0JtQyxhQUFhM0UsK0RBQWNBLENBQUN3QztvQkFDOUI7O29EQUNGO1FBQUM3QjtLQUFXO0lBR2QsT0FBTztRQUNMQTtRQUNBOEQ7UUFDQTNCO1FBQ0FrQjtRQUNBQztRQUNBQztRQUNBOUI7UUFDQStCO1FBQ0FFO1FBQ0FPLGFBQWFOO1FBQ2JFO1FBQ0E5QjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxNb21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxcaG9va3NcXHVzZVF1ZXN0bGluZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlUGVyc2lzdGVudFN0YXRlIH0gZnJvbSBcIi4vdXNlUGVyc2lzdGVudFN0YXRlXCI7XG5pbXBvcnQgeyB1c2VCdWZmcyB9IGZyb20gXCIuL3VzZUJ1ZmZzXCI7XG5pbXBvcnQgeyB1c2VJbnZlbnRvcnkgfSBmcm9tIFwiLi91c2VJbnZlbnRvcnlcIjtcbmltcG9ydCB7IHVzZUNvbXBhbmlvbnMgfSBmcm9tIFwiLi91c2VDb21wYW5pb25zXCI7XG5pbXBvcnQgeyB1c2VOcGNzIH0gZnJvbSBcIi4vdXNlTnBjc1wiO1xuaW1wb3J0IHtcbiAgY2xvbmVEZWZhdWx0UXVlc3RsaW5lcyxcbiAgY2xvbmVRdWVzdGxpbmUsXG4gIGZpbmRTdGFnZSxcbiAgZ2V0QWN0aXZlU3RhZ2UsXG4gIGdldFF1ZXN0bGluZVByb2dyZXNzLFxuICBpc1F1ZXN0bGluZUNvbXBsZXRlLFxuICB0eXBlIFF1ZXN0QnJhbmNoLFxuICB0eXBlIFF1ZXN0UmV3YXJkLFxuICB0eXBlIFF1ZXN0U3RhZ2UsXG4gIHR5cGUgUXVlc3RsaW5lLFxufSBmcm9tIFwiLi4vbGliL3F1ZXN0bGluZXNcIjtcblxuZXhwb3J0IHR5cGUgU3RhZ2VDb21wbGV0aW9uUmVzdWx0ID1cbiAgfCBcImNvbXBsZXRlZFwiXG4gIHwgXCJhbHJlYWR5LWNvbXBsZXRlZFwiXG4gIHwgXCJicmFuY2gtcmVxdWlyZWRcIlxuICB8IFwicXVlc3RsaW5lLWNvbXBsZXRlZFwiO1xuXG5jb25zdCBUSVRMRVNfU1RPUkFHRV9LRVkgPSBcInRpdGxlc1VubG9ja2VkXCI7XG5cbmZ1bmN0aW9uIGNsb25lU3RhZ2Uoc3RhZ2U6IFF1ZXN0U3RhZ2UpOiBRdWVzdFN0YWdlIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5zdGFnZSxcbiAgICBicmFuY2hDaG9pY2VzOiBzdGFnZS5icmFuY2hDaG9pY2VzPy5tYXAoKGJyYW5jaCkgPT4gKHsgLi4uYnJhbmNoIH0pKSA/PyB1bmRlZmluZWQsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VRdWVzdGxpbmVzKCkge1xuICBjb25zdCBbcXVlc3RsaW5lcywgc2V0UXVlc3RsaW5lc10gPSB1c2VQZXJzaXN0ZW50U3RhdGU8UXVlc3RsaW5lW10+KFxuICAgIFwicXVlc3RsaW5lc1wiLFxuICAgIGNsb25lRGVmYXVsdFF1ZXN0bGluZXNcbiAgKTtcbiAgY29uc3QgW3hwLCBzZXRYcF0gPSB1c2VQZXJzaXN0ZW50U3RhdGU8bnVtYmVyPihcInhwVG90YWxcIiwgKCkgPT4gMzQwMCk7XG4gIGNvbnN0IFt0aXRsZXMsIHNldFRpdGxlc10gPSB1c2VQZXJzaXN0ZW50U3RhdGU8c3RyaW5nW10+KFRJVExFU19TVE9SQUdFX0tFWSwgKCkgPT4gW10pO1xuICBjb25zdCB7IGFwcGx5RXZlbnQsIHRyaWdnZXJCdWZmQnlTb3VyY2UgfSA9IHVzZUJ1ZmZzKCk7XG4gIGNvbnN0IHsgZ2Fpbkl0ZW0gfSA9IHVzZUludmVudG9yeSgpO1xuICBjb25zdCB7IGNvbXBhbmlvbnMsIGdhaW5YcEZvckNvbXBhbmlvbnMgfSA9IHVzZUNvbXBhbmlvbnMoKTtcbiAgY29uc3QgeyBucGNzLCBhZGp1c3RUcnVzdDogYWRqdXN0TnBjVHJ1c3QgfSA9IHVzZU5wY3MoKTtcblxuICBjb25zdCBhd2FyZFRpdGxlID0gdXNlQ2FsbGJhY2soXG4gICAgKHRpdGxlPzogc3RyaW5nKSA9PiB7XG4gICAgICBpZiAoIXRpdGxlIHx8IHRpdGxlLnRyaW0oKS5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICAgIHNldFRpdGxlcygocHJldikgPT4gKHByZXYuaW5jbHVkZXModGl0bGUpID8gcHJldiA6IFsuLi5wcmV2LCB0aXRsZV0pKTtcbiAgICB9LFxuICAgIFtzZXRUaXRsZXNdXG4gICk7XG5cbiAgY29uc3QgYXdhcmRSZXdhcmQgPSB1c2VDYWxsYmFjayhcbiAgICAocmV3YXJkPzogUXVlc3RSZXdhcmQpID0+IHtcbiAgICAgIGlmICghcmV3YXJkKSByZXR1cm47XG4gICAgICBpZiAocmV3YXJkLnhwICYmIHJld2FyZC54cCA+IDApIHtcbiAgICAgICAgY29uc3QgcmV3YXJkZWQgPSBhcHBseUV2ZW50KFwieHBcIiwgcmV3YXJkLnhwKTtcbiAgICAgICAgaWYgKHJld2FyZGVkID4gMCkge1xuICAgICAgICAgIHNldFhwKChwcmV2KSA9PiBwcmV2ICsgcmV3YXJkZWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocmV3YXJkLml0ZW0pIHtcbiAgICAgICAgZ2Fpbkl0ZW0ocmV3YXJkLml0ZW0sIDEpO1xuICAgICAgfVxuICAgICAgaWYgKHJld2FyZC5idWZmKSB7XG4gICAgICAgIHRyaWdnZXJCdWZmQnlTb3VyY2UocmV3YXJkLmJ1ZmYpO1xuICAgICAgfVxuICAgICAgaWYgKHJld2FyZC50aXRsZSkge1xuICAgICAgICBhd2FyZFRpdGxlKHJld2FyZC50aXRsZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbYXBwbHlFdmVudCwgYXdhcmRUaXRsZSwgZ2Fpbkl0ZW0sIHNldFhwLCB0cmlnZ2VyQnVmZkJ5U291cmNlXVxuICApO1xuXG4gIGNvbnN0IHVwZGF0ZVF1ZXN0bGluZSA9IHVzZUNhbGxiYWNrKFxuICAgIChxdWVzdGxpbmVJZDogc3RyaW5nLCB1cGRhdGVyOiAocXVlc3RsaW5lOiBRdWVzdGxpbmUpID0+IFF1ZXN0bGluZSkgPT4ge1xuICAgICAgc2V0UXVlc3RsaW5lcygocHJldmlvdXMpID0+XG4gICAgICAgIHByZXZpb3VzLm1hcCgocXVlc3RsaW5lKSA9PlxuICAgICAgICAgIHF1ZXN0bGluZS5pZCA9PT0gcXVlc3RsaW5lSWQgPyB1cGRhdGVyKGNsb25lUXVlc3RsaW5lKHF1ZXN0bGluZSkpIDogcXVlc3RsaW5lXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfSxcbiAgICBbc2V0UXVlc3RsaW5lc11cbiAgKTtcblxuICBjb25zdCBtdXRhdGVTdGFnZSA9IHVzZUNhbGxiYWNrKFxuICAgIChcbiAgICAgIHF1ZXN0bGluZUlkOiBzdHJpbmcsXG4gICAgICBzdGFnZUlkOiBzdHJpbmcsXG4gICAgICBtdXRhdG9yOiAoc3RhZ2U6IFF1ZXN0U3RhZ2UpID0+IFF1ZXN0U3RhZ2VcbiAgICApID0+IHtcbiAgICAgIHVwZGF0ZVF1ZXN0bGluZShxdWVzdGxpbmVJZCwgKHF1ZXN0bGluZSkgPT4gKHtcbiAgICAgICAgLi4ucXVlc3RsaW5lLFxuICAgICAgICBzdGFnZXM6IHF1ZXN0bGluZS5zdGFnZXMubWFwKChzdGFnZSkgPT5cbiAgICAgICAgICBzdGFnZS5pZCA9PT0gc3RhZ2VJZCA/IG11dGF0b3IoY2xvbmVTdGFnZShzdGFnZSkpIDogc3RhZ2VcbiAgICAgICAgKSxcbiAgICAgIH0pKTtcbiAgICB9LFxuICAgIFt1cGRhdGVRdWVzdGxpbmVdXG4gICk7XG5cbiAgY29uc3QgY29tcGxldGVTdGFnZSA9IHVzZUNhbGxiYWNrKFxuICAgIChxdWVzdGxpbmVJZDogc3RyaW5nLCBzdGFnZUlkOiBzdHJpbmcsIGJyYW5jaElkPzogc3RyaW5nKTogU3RhZ2VDb21wbGV0aW9uUmVzdWx0ID0+IHtcbiAgICAgIGxldCBjb21wbGV0aW9uOiBTdGFnZUNvbXBsZXRpb25SZXN1bHQgPSBcImNvbXBsZXRlZFwiO1xuXG4gICAgICBzZXRRdWVzdGxpbmVzKChwcmV2aW91cykgPT5cbiAgICAgICAgcHJldmlvdXMubWFwKChxdWVzdGxpbmUpID0+IHtcbiAgICAgICAgICBpZiAocXVlc3RsaW5lLmlkICE9PSBxdWVzdGxpbmVJZCkge1xuICAgICAgICAgICAgcmV0dXJuIHF1ZXN0bGluZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCB3b3JraW5nID0gY2xvbmVRdWVzdGxpbmUocXVlc3RsaW5lKTtcbiAgICAgICAgICBjb25zdCBsb2NhdGVkID0gZmluZFN0YWdlKHdvcmtpbmcsIHN0YWdlSWQpO1xuICAgICAgICAgIGlmICghbG9jYXRlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHF1ZXN0bGluZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCB7IHN0YWdlLCBpbmRleCB9ID0gbG9jYXRlZDtcblxuICAgICAgICAgIGlmIChzdGFnZS5jb21wbGV0ZWQpIHtcbiAgICAgICAgICAgIGNvbXBsZXRpb24gPSBcImFscmVhZHktY29tcGxldGVkXCI7XG4gICAgICAgICAgICByZXR1cm4gcXVlc3RsaW5lO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzdGFnZS5icmFuY2hDaG9pY2VzICYmIHN0YWdlLmJyYW5jaENob2ljZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgY2hvc2VuID0gYnJhbmNoSWQgPz8gc3RhZ2UuY2hvc2VuQnJhbmNoSWQgPz8gdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKCFjaG9zZW4pIHtcbiAgICAgICAgICAgICAgY29tcGxldGlvbiA9IFwiYnJhbmNoLXJlcXVpcmVkXCI7XG4gICAgICAgICAgICAgIHJldHVybiBxdWVzdGxpbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdGFnZS5jaG9zZW5CcmFuY2hJZCA9IGNob3NlbjtcbiAgICAgICAgICAgIGNvbnN0IGJyYW5jaCA9IHN0YWdlLmJyYW5jaENob2ljZXMuZmluZCgob3B0aW9uKSA9PiBvcHRpb24uaWQgPT09IGNob3Nlbik7XG4gICAgICAgICAgICBpZiAoYnJhbmNoPy5yZXdhcmQpIHtcbiAgICAgICAgICAgICAgYXdhcmRSZXdhcmQoYnJhbmNoLnJld2FyZCk7XG4gICAgICAgICAgICAgIGlmIChicmFuY2gucmV3YXJkLnhwKSB7XG4gICAgICAgICAgICAgICAgZ2FpblhwRm9yQ29tcGFuaW9ucyhcInF1ZXN0XCIsIGJyYW5jaC5yZXdhcmQueHApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc3RhZ2UuY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICBjb25zdCBzdGFnZVJld2FyZCA9IHsgeHA6IHN0YWdlLnhwLCAuLi5zdGFnZS5yZXdhcmQgfTtcbiAgICAgICAgICBhd2FyZFJld2FyZChzdGFnZVJld2FyZCk7XG4gICAgICAgICAgaWYgKHN0YWdlUmV3YXJkLnhwKSB7XG4gICAgICAgICAgICBnYWluWHBGb3JDb21wYW5pb25zKFwicXVlc3RcIiwgc3RhZ2VSZXdhcmQueHApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHN0YWdlVGV4dCA9IGAke3N0YWdlLnRpdGxlID8/ICcnfSAke3N0YWdlLmRlc2NyaXB0aW9uID8/ICcnfSAke3F1ZXN0bGluZS5uYW1lID8/ICcnfWAudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICBucGNzLmZvckVhY2goKG5wYykgPT4ge1xuICAgICAgICAgICAgaWYgKHN0YWdlVGV4dC5pbmNsdWRlcyhucGMubmFtZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgICAgICBhZGp1c3ROcGNUcnVzdChucGMuaWQsIDUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgd29ya2luZy5zdGFnZXNbaW5kZXhdID0gc3RhZ2U7XG5cbiAgICAgICAgICBpZiAoaXNRdWVzdGxpbmVDb21wbGV0ZSh3b3JraW5nKSkge1xuICAgICAgICAgICAgd29ya2luZy5jb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHdvcmtpbmcucmV3YXJkKSB7XG4gICAgICAgICAgICAgIGF3YXJkUmV3YXJkKHdvcmtpbmcucmV3YXJkKTtcbiAgICAgICAgICAgICAgaWYgKHdvcmtpbmcucmV3YXJkLnhwKSB7XG4gICAgICAgICAgICAgICAgZ2FpblhwRm9yQ29tcGFuaW9ucyhcInF1ZXN0XCIsIHdvcmtpbmcucmV3YXJkLnhwKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcGxldGlvbiA9IFwicXVlc3RsaW5lLWNvbXBsZXRlZFwiO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB3b3JraW5nO1xuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIGNvbXBsZXRpb247XG4gICAgfSxcbiAgICBbYWRqdXN0TnBjVHJ1c3QsIGF3YXJkUmV3YXJkLCBnYWluWHBGb3JDb21wYW5pb25zLCBucGNzLCBzZXRRdWVzdGxpbmVzXVxuICApO1xuXG4gIGNvbnN0IGNob29zZUJyYW5jaCA9IHVzZUNhbGxiYWNrKFxuICAgIChxdWVzdGxpbmVJZDogc3RyaW5nLCBzdGFnZUlkOiBzdHJpbmcsIGJyYW5jaElkOiBzdHJpbmcpID0+IHtcbiAgICAgIG11dGF0ZVN0YWdlKHF1ZXN0bGluZUlkLCBzdGFnZUlkLCAoc3RhZ2UpID0+ICh7XG4gICAgICAgIC4uLnN0YWdlLFxuICAgICAgICBjaG9zZW5CcmFuY2hJZDogYnJhbmNoSWQsXG4gICAgICB9KSk7XG4gICAgfSxcbiAgICBbbXV0YXRlU3RhZ2VdXG4gICk7XG5cbiAgY29uc3QgcmVzZXRRdWVzdGxpbmUgPSB1c2VDYWxsYmFjayhcbiAgICAocXVlc3RsaW5lSWQ6IHN0cmluZykgPT4ge1xuICAgICAgdXBkYXRlUXVlc3RsaW5lKHF1ZXN0bGluZUlkLCAocXVlc3RsaW5lKSA9PiAoe1xuICAgICAgICAuLi5xdWVzdGxpbmUsXG4gICAgICAgIGNvbXBsZXRlZDogZmFsc2UsXG4gICAgICAgIHN0YWdlczogcXVlc3RsaW5lLnN0YWdlcy5tYXAoKHN0YWdlKSA9PiAoe1xuICAgICAgICAgIC4uLnN0YWdlLFxuICAgICAgICAgIGNvbXBsZXRlZDogZmFsc2UsXG4gICAgICAgICAgY2hvc2VuQnJhbmNoSWQ6IHN0YWdlLmJyYW5jaENob2ljZXMgPyBudWxsIDogc3RhZ2UuY2hvc2VuQnJhbmNoSWQsXG4gICAgICAgIH0pKSxcbiAgICAgIH0pKTtcbiAgICB9LFxuICAgIFt1cGRhdGVRdWVzdGxpbmVdXG4gICk7XG5cbiAgY29uc3QgYWRkUXVlc3RsaW5lID0gdXNlQ2FsbGJhY2soXG4gICAgKHF1ZXN0bGluZTogUXVlc3RsaW5lKSA9PiB7XG4gICAgICBzZXRRdWVzdGxpbmVzKChwcmV2aW91cykgPT4gWy4uLnByZXZpb3VzLCBjbG9uZVF1ZXN0bGluZShxdWVzdGxpbmUpXSk7XG4gICAgfSxcbiAgICBbc2V0UXVlc3RsaW5lc11cbiAgKTtcblxuICBjb25zdCByZW1vdmVRdWVzdGxpbmUgPSB1c2VDYWxsYmFjayhcbiAgICAocXVlc3RsaW5lSWQ6IHN0cmluZykgPT4ge1xuICAgICAgc2V0UXVlc3RsaW5lcygocHJldmlvdXMpID0+IHByZXZpb3VzLmZpbHRlcigocXVlc3RsaW5lKSA9PiBxdWVzdGxpbmUuaWQgIT09IHF1ZXN0bGluZUlkKSk7XG4gICAgfSxcbiAgICBbc2V0UXVlc3RsaW5lc11cbiAgKTtcblxuICBjb25zdCBhZGRTdGFnZSA9IHVzZUNhbGxiYWNrKFxuICAgIChxdWVzdGxpbmVJZDogc3RyaW5nLCBzdGFnZTogUXVlc3RTdGFnZSkgPT4ge1xuICAgICAgdXBkYXRlUXVlc3RsaW5lKHF1ZXN0bGluZUlkLCAocXVlc3RsaW5lKSA9PiAoe1xuICAgICAgICAuLi5xdWVzdGxpbmUsXG4gICAgICAgIHN0YWdlczogWy4uLnF1ZXN0bGluZS5zdGFnZXMsIGNsb25lU3RhZ2Uoc3RhZ2UpXSxcbiAgICAgIH0pKTtcbiAgICB9LFxuICAgIFt1cGRhdGVRdWVzdGxpbmVdXG4gICk7XG5cbiAgY29uc3QgdXBkYXRlU3RhZ2VGaWVsZHMgPSB1c2VDYWxsYmFjayhcbiAgICAocXVlc3RsaW5lSWQ6IHN0cmluZywgc3RhZ2VJZDogc3RyaW5nLCBwYXRjaDogUGFydGlhbDxRdWVzdFN0YWdlPikgPT4ge1xuICAgICAgbXV0YXRlU3RhZ2UocXVlc3RsaW5lSWQsIHN0YWdlSWQsIChzdGFnZSkgPT4gKHtcbiAgICAgICAgLi4uc3RhZ2UsXG4gICAgICAgIC4uLnBhdGNoLFxuICAgICAgfSkpO1xuICAgIH0sXG4gICAgW211dGF0ZVN0YWdlXVxuICApO1xuXG4gIGNvbnN0IHJlbW92ZVN0YWdlID0gdXNlQ2FsbGJhY2soXG4gICAgKHF1ZXN0bGluZUlkOiBzdHJpbmcsIHN0YWdlSWQ6IHN0cmluZykgPT4ge1xuICAgICAgdXBkYXRlUXVlc3RsaW5lKHF1ZXN0bGluZUlkLCAocXVlc3RsaW5lKSA9PiAoe1xuICAgICAgICAuLi5xdWVzdGxpbmUsXG4gICAgICAgIHN0YWdlczogcXVlc3RsaW5lLnN0YWdlcy5maWx0ZXIoKHN0YWdlKSA9PiBzdGFnZS5pZCAhPT0gc3RhZ2VJZCksXG4gICAgICB9KSk7XG4gICAgfSxcbiAgICBbdXBkYXRlUXVlc3RsaW5lXVxuICApO1xuXG4gIGNvbnN0IHF1ZXN0bGluZVN1bW1hcmllcyA9IHVzZU1lbW8oXG4gICAgKCkgPT5cbiAgICAgIHF1ZXN0bGluZXMubWFwKChxdWVzdGxpbmUpID0+ICh7XG4gICAgICAgIHF1ZXN0bGluZSxcbiAgICAgICAgcHJvZ3Jlc3M6IGdldFF1ZXN0bGluZVByb2dyZXNzKHF1ZXN0bGluZSksXG4gICAgICAgIGFjdGl2ZVN0YWdlOiBnZXRBY3RpdmVTdGFnZShxdWVzdGxpbmUpLFxuICAgICAgfSkpLFxuICAgIFtxdWVzdGxpbmVzXVxuICApO1xuXG4gIHJldHVybiB7XG4gICAgcXVlc3RsaW5lcyxcbiAgICBxdWVzdGxpbmVTdW1tYXJpZXMsXG4gICAgY29tcGxldGVTdGFnZSxcbiAgICBjaG9vc2VCcmFuY2gsXG4gICAgcmVzZXRRdWVzdGxpbmUsXG4gICAgYWRkUXVlc3RsaW5lLFxuICAgIHVwZGF0ZVF1ZXN0bGluZSxcbiAgICByZW1vdmVRdWVzdGxpbmUsXG4gICAgYWRkU3RhZ2UsXG4gICAgdXBkYXRlU3RhZ2U6IHVwZGF0ZVN0YWdlRmllbGRzLFxuICAgIHJlbW92ZVN0YWdlLFxuICAgIG11dGF0ZVN0YWdlLFxuICB9O1xufVxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlTWVtbyIsInVzZVBlcnNpc3RlbnRTdGF0ZSIsInVzZUJ1ZmZzIiwidXNlSW52ZW50b3J5IiwidXNlQ29tcGFuaW9ucyIsInVzZU5wY3MiLCJjbG9uZURlZmF1bHRRdWVzdGxpbmVzIiwiY2xvbmVRdWVzdGxpbmUiLCJmaW5kU3RhZ2UiLCJnZXRBY3RpdmVTdGFnZSIsImdldFF1ZXN0bGluZVByb2dyZXNzIiwiaXNRdWVzdGxpbmVDb21wbGV0ZSIsIlRJVExFU19TVE9SQUdFX0tFWSIsImNsb25lU3RhZ2UiLCJzdGFnZSIsImJyYW5jaENob2ljZXMiLCJtYXAiLCJicmFuY2giLCJ1bmRlZmluZWQiLCJ1c2VRdWVzdGxpbmVzIiwicXVlc3RsaW5lcyIsInNldFF1ZXN0bGluZXMiLCJ4cCIsInNldFhwIiwidGl0bGVzIiwic2V0VGl0bGVzIiwiYXBwbHlFdmVudCIsInRyaWdnZXJCdWZmQnlTb3VyY2UiLCJnYWluSXRlbSIsImNvbXBhbmlvbnMiLCJnYWluWHBGb3JDb21wYW5pb25zIiwibnBjcyIsImFkanVzdFRydXN0IiwiYWRqdXN0TnBjVHJ1c3QiLCJhd2FyZFRpdGxlIiwidGl0bGUiLCJ0cmltIiwibGVuZ3RoIiwicHJldiIsImluY2x1ZGVzIiwiYXdhcmRSZXdhcmQiLCJyZXdhcmQiLCJyZXdhcmRlZCIsIml0ZW0iLCJidWZmIiwidXBkYXRlUXVlc3RsaW5lIiwicXVlc3RsaW5lSWQiLCJ1cGRhdGVyIiwicHJldmlvdXMiLCJxdWVzdGxpbmUiLCJpZCIsIm11dGF0ZVN0YWdlIiwic3RhZ2VJZCIsIm11dGF0b3IiLCJzdGFnZXMiLCJjb21wbGV0ZVN0YWdlIiwiYnJhbmNoSWQiLCJjb21wbGV0aW9uIiwid29ya2luZyIsImxvY2F0ZWQiLCJpbmRleCIsImNvbXBsZXRlZCIsImNob3NlbiIsImNob3NlbkJyYW5jaElkIiwiZmluZCIsIm9wdGlvbiIsInN0YWdlUmV3YXJkIiwic3RhZ2VUZXh0IiwiZGVzY3JpcHRpb24iLCJuYW1lIiwidG9Mb3dlckNhc2UiLCJmb3JFYWNoIiwibnBjIiwiY2hvb3NlQnJhbmNoIiwicmVzZXRRdWVzdGxpbmUiLCJhZGRRdWVzdGxpbmUiLCJyZW1vdmVRdWVzdGxpbmUiLCJmaWx0ZXIiLCJhZGRTdGFnZSIsInVwZGF0ZVN0YWdlRmllbGRzIiwicGF0Y2giLCJyZW1vdmVTdGFnZSIsInF1ZXN0bGluZVN1bW1hcmllcyIsInByb2dyZXNzIiwiYWN0aXZlU3RhZ2UiLCJ1cGRhdGVTdGFnZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useQuestlines.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useRitualAchievements.ts":
/*!********************************************!*\
  !*** ./app/hooks/useRitualAchievements.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useRitualAchievements: () => (/* binding */ useRitualAchievements)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _useAchievements__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useAchievements */ \"(ssr)/./app/hooks/useAchievements.ts\");\n/* harmony import */ var _useRitualsEngine__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useRitualsEngine */ \"(ssr)/./app/hooks/useRitualsEngine.ts\");\n/* __next_internal_client_entry_do_not_use__ useRitualAchievements auto */ \n\n\n/**\r\n * A custom hook to manage ritual-related achievements.\r\n * It listens to changes in ritual progress and unlocks achievements when their triggers are met.\r\n */ function useRitualAchievements() {\n    const { achievements, unlockAchievement } = (0,_useAchievements__WEBPACK_IMPORTED_MODULE_1__.useAchievements)();\n    const { progressById } = (0,_useRitualsEngine__WEBPACK_IMPORTED_MODULE_2__.useRitualsEngine)();\n    const completedRitualsCount = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useRitualAchievements.useMemo[completedRitualsCount]\": ()=>{\n            if (!progressById) return 0;\n            // Count how many rituals have their 'completed' flag set to true.\n            return Object.values(progressById).filter({\n                \"useRitualAchievements.useMemo[completedRitualsCount]\": (p)=>p.completed\n            }[\"useRitualAchievements.useMemo[completedRitualsCount]\"]).length;\n        }\n    }[\"useRitualAchievements.useMemo[completedRitualsCount]\"], [\n        progressById\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useRitualAchievements.useEffect\": ()=>{\n            // Don't run if achievements or ritual progress haven't loaded yet\n            if (!achievements || achievements.length === 0 || !progressById) return;\n            // Filter for only un-unlocked Ritual achievements to check\n            const ritualAchievements = achievements.filter({\n                \"useRitualAchievements.useEffect.ritualAchievements\": (a)=>!a.unlocked && a.category === 'Ritual'\n            }[\"useRitualAchievements.useEffect.ritualAchievements\"]);\n            if (ritualAchievements.length === 0) return;\n            ritualAchievements.forEach({\n                \"useRitualAchievements.useEffect\": (achievement)=>{\n                    const { trigger } = achievement;\n                    let conditionMet = false;\n                    if (trigger.type === 'RITUAL_COMPLETED' && completedRitualsCount >= trigger.value) {\n                        conditionMet = true;\n                    }\n                    if (conditionMet) {\n                        unlockAchievement(achievement.id);\n                    }\n                }\n            }[\"useRitualAchievements.useEffect\"]);\n        // This effect should re-run whenever the player's ritual progress changes.\n        }\n    }[\"useRitualAchievements.useEffect\"], [\n        completedRitualsCount,\n        achievements,\n        unlockAchievement\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvaG9va3MvdXNlUml0dWFsQWNoaWV2ZW1lbnRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OzJFQUUyQztBQUNTO0FBQ0U7QUFFdEQ7OztDQUdDLEdBQ00sU0FBU0k7SUFDZCxNQUFNLEVBQUVDLFlBQVksRUFBRUMsaUJBQWlCLEVBQUUsR0FBR0osaUVBQWVBO0lBQzNELE1BQU0sRUFBRUssWUFBWSxFQUFFLEdBQUdKLG1FQUFnQkE7SUFFekMsTUFBTUssd0JBQXdCUCw4Q0FBT0E7Z0VBQUM7WUFDcEMsSUFBSSxDQUFDTSxjQUFjLE9BQU87WUFDMUIsa0VBQWtFO1lBQ2xFLE9BQU9FLE9BQU9DLE1BQU0sQ0FBQ0gsY0FBY0ksTUFBTTt3RUFBQ0MsQ0FBQUEsSUFBS0EsRUFBRUMsU0FBUzt1RUFBRUMsTUFBTTtRQUNwRTsrREFBRztRQUFDUDtLQUFhO0lBRWpCUCxnREFBU0E7MkNBQUM7WUFDUixrRUFBa0U7WUFDbEUsSUFBSSxDQUFDSyxnQkFBZ0JBLGFBQWFTLE1BQU0sS0FBSyxLQUFLLENBQUNQLGNBQWM7WUFFakUsMkRBQTJEO1lBQzNELE1BQU1RLHFCQUFxQlYsYUFBYU0sTUFBTTtzRUFDNUNLLENBQUFBLElBQUssQ0FBQ0EsRUFBRUMsUUFBUSxJQUFJRCxFQUFFRSxRQUFRLEtBQUs7O1lBR3JDLElBQUlILG1CQUFtQkQsTUFBTSxLQUFLLEdBQUc7WUFFckNDLG1CQUFtQkksT0FBTzttREFBQ0MsQ0FBQUE7b0JBQ3pCLE1BQU0sRUFBRUMsT0FBTyxFQUFFLEdBQUdEO29CQUNwQixJQUFJRSxlQUFlO29CQUVuQixJQUFJRCxRQUFRRSxJQUFJLEtBQUssc0JBQXNCZix5QkFBeUJhLFFBQVFHLEtBQUssRUFBRTt3QkFDakZGLGVBQWU7b0JBQ2pCO29CQUVBLElBQUlBLGNBQWM7d0JBQ2hCaEIsa0JBQWtCYyxZQUFZSyxFQUFFO29CQUNsQztnQkFDRjs7UUFDQSwyRUFBMkU7UUFDN0U7MENBQUc7UUFBQ2pCO1FBQXVCSDtRQUFjQztLQUFrQjtBQUM3RCIsInNvdXJjZXMiOlsiQzpcXE1vbW15IEx1Y3lcXFByb2plY3RzXFxMdWNpZCBEcmVhbVxcYXBwXFxob29rc1xcdXNlUml0dWFsQWNoaWV2ZW1lbnRzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcclxuXHJcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlQWNoaWV2ZW1lbnRzIH0gZnJvbSAnLi91c2VBY2hpZXZlbWVudHMnO1xyXG5pbXBvcnQgeyB1c2VSaXR1YWxzRW5naW5lIH0gZnJvbSAnLi91c2VSaXR1YWxzRW5naW5lJztcclxuXHJcbi8qKlxyXG4gKiBBIGN1c3RvbSBob29rIHRvIG1hbmFnZSByaXR1YWwtcmVsYXRlZCBhY2hpZXZlbWVudHMuXHJcbiAqIEl0IGxpc3RlbnMgdG8gY2hhbmdlcyBpbiByaXR1YWwgcHJvZ3Jlc3MgYW5kIHVubG9ja3MgYWNoaWV2ZW1lbnRzIHdoZW4gdGhlaXIgdHJpZ2dlcnMgYXJlIG1ldC5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VSaXR1YWxBY2hpZXZlbWVudHMoKSB7XHJcbiAgY29uc3QgeyBhY2hpZXZlbWVudHMsIHVubG9ja0FjaGlldmVtZW50IH0gPSB1c2VBY2hpZXZlbWVudHMoKTtcclxuICBjb25zdCB7IHByb2dyZXNzQnlJZCB9ID0gdXNlUml0dWFsc0VuZ2luZSgpO1xyXG5cclxuICBjb25zdCBjb21wbGV0ZWRSaXR1YWxzQ291bnQgPSB1c2VNZW1vKCgpID0+IHtcclxuICAgIGlmICghcHJvZ3Jlc3NCeUlkKSByZXR1cm4gMDtcclxuICAgIC8vIENvdW50IGhvdyBtYW55IHJpdHVhbHMgaGF2ZSB0aGVpciAnY29tcGxldGVkJyBmbGFnIHNldCB0byB0cnVlLlxyXG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXMocHJvZ3Jlc3NCeUlkKS5maWx0ZXIocCA9PiBwLmNvbXBsZXRlZCkubGVuZ3RoO1xyXG4gIH0sIFtwcm9ncmVzc0J5SWRdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIERvbid0IHJ1biBpZiBhY2hpZXZlbWVudHMgb3Igcml0dWFsIHByb2dyZXNzIGhhdmVuJ3QgbG9hZGVkIHlldFxyXG4gICAgaWYgKCFhY2hpZXZlbWVudHMgfHwgYWNoaWV2ZW1lbnRzLmxlbmd0aCA9PT0gMCB8fCAhcHJvZ3Jlc3NCeUlkKSByZXR1cm47XHJcblxyXG4gICAgLy8gRmlsdGVyIGZvciBvbmx5IHVuLXVubG9ja2VkIFJpdHVhbCBhY2hpZXZlbWVudHMgdG8gY2hlY2tcclxuICAgIGNvbnN0IHJpdHVhbEFjaGlldmVtZW50cyA9IGFjaGlldmVtZW50cy5maWx0ZXIoXHJcbiAgICAgIGEgPT4gIWEudW5sb2NrZWQgJiYgYS5jYXRlZ29yeSA9PT0gJ1JpdHVhbCdcclxuICAgICk7XHJcblxyXG4gICAgaWYgKHJpdHVhbEFjaGlldmVtZW50cy5sZW5ndGggPT09IDApIHJldHVybjtcclxuXHJcbiAgICByaXR1YWxBY2hpZXZlbWVudHMuZm9yRWFjaChhY2hpZXZlbWVudCA9PiB7XHJcbiAgICAgIGNvbnN0IHsgdHJpZ2dlciB9ID0gYWNoaWV2ZW1lbnQ7XHJcbiAgICAgIGxldCBjb25kaXRpb25NZXQgPSBmYWxzZTtcclxuXHJcbiAgICAgIGlmICh0cmlnZ2VyLnR5cGUgPT09ICdSSVRVQUxfQ09NUExFVEVEJyAmJiBjb21wbGV0ZWRSaXR1YWxzQ291bnQgPj0gdHJpZ2dlci52YWx1ZSkge1xyXG4gICAgICAgIGNvbmRpdGlvbk1ldCA9IHRydWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChjb25kaXRpb25NZXQpIHtcclxuICAgICAgICB1bmxvY2tBY2hpZXZlbWVudChhY2hpZXZlbWVudC5pZCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgLy8gVGhpcyBlZmZlY3Qgc2hvdWxkIHJlLXJ1biB3aGVuZXZlciB0aGUgcGxheWVyJ3Mgcml0dWFsIHByb2dyZXNzIGNoYW5nZXMuXHJcbiAgfSwgW2NvbXBsZXRlZFJpdHVhbHNDb3VudCwgYWNoaWV2ZW1lbnRzLCB1bmxvY2tBY2hpZXZlbWVudF0pO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VNZW1vIiwidXNlQWNoaWV2ZW1lbnRzIiwidXNlUml0dWFsc0VuZ2luZSIsInVzZVJpdHVhbEFjaGlldmVtZW50cyIsImFjaGlldmVtZW50cyIsInVubG9ja0FjaGlldmVtZW50IiwicHJvZ3Jlc3NCeUlkIiwiY29tcGxldGVkUml0dWFsc0NvdW50IiwiT2JqZWN0IiwidmFsdWVzIiwiZmlsdGVyIiwicCIsImNvbXBsZXRlZCIsImxlbmd0aCIsInJpdHVhbEFjaGlldmVtZW50cyIsImEiLCJ1bmxvY2tlZCIsImNhdGVnb3J5IiwiZm9yRWFjaCIsImFjaGlldmVtZW50IiwidHJpZ2dlciIsImNvbmRpdGlvbk1ldCIsInR5cGUiLCJ2YWx1ZSIsImlkIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useRitualAchievements.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useRitualsEngine.ts":
/*!***************************************!*\
  !*** ./app/hooks/useRitualsEngine.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useRitualsEngine: () => (/* binding */ useRitualsEngine)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _useBuffs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useBuffs */ \"(ssr)/./app/hooks/useBuffs.ts\");\n/* harmony import */ var _useCompanions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useCompanions */ \"(ssr)/./app/hooks/useCompanions.ts\");\n/* harmony import */ var _useNpcs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useNpcs */ \"(ssr)/./app/hooks/useNpcs.ts\");\n/* harmony import */ var _useShame__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useShame */ \"(ssr)/./app/hooks/useShame.ts\");\n/* harmony import */ var _lib_rituals__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../lib/rituals */ \"(ssr)/./app/lib/rituals.ts\");\n/* __next_internal_client_entry_do_not_use__ useRitualsEngine auto */ \n\n\n\n\n\n\nconst FALLBACK_ID = ()=>typeof crypto !== \"undefined\" && typeof crypto.randomUUID === \"function\" ? crypto.randomUUID() : 'ritual-' + Date.now().toString(36);\nfunction useRitualsEngine() {\n    const [rituals, setRituals] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(\"rituals\", _lib_rituals__WEBPACK_IMPORTED_MODULE_6__.cloneDefaultRituals);\n    const [logs, setLogs] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(\"ritualLogs\", _lib_rituals__WEBPACK_IMPORTED_MODULE_6__.cloneDefaultRitualLogs);\n    const [xp, setXp] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(\"xpTotal\", {\n        \"useRitualsEngine.usePersistentState\": ()=>3400\n    }[\"useRitualsEngine.usePersistentState\"]);\n    const [obedience, setObedience] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(\"obediencePoints\", {\n        \"useRitualsEngine.usePersistentState\": ()=>0\n    }[\"useRitualsEngine.usePersistentState\"]);\n    const { applyEvent, triggerBuffBySource } = (0,_useBuffs__WEBPACK_IMPORTED_MODULE_2__.useBuffs)();\n    const { companions, gainXpForCompanions } = (0,_useCompanions__WEBPACK_IMPORTED_MODULE_3__.useCompanions)();\n    const { npcs, adjustShame: adjustNpcShame } = (0,_useNpcs__WEBPACK_IMPORTED_MODULE_4__.useNpcs)();\n    const { incrementCounter } = (0,_useShame__WEBPACK_IMPORTED_MODULE_5__.useShame)();\n    const progressById = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useRitualsEngine.useMemo[progressById]\": ()=>{\n            const now = new Date();\n            return rituals.reduce({\n                \"useRitualsEngine.useMemo[progressById]\": (acc, ritual)=>{\n                    acc[ritual.id] = (0,_lib_rituals__WEBPACK_IMPORTED_MODULE_6__.computeRitualProgress)(ritual, logs, now);\n                    return acc;\n                }\n            }[\"useRitualsEngine.useMemo[progressById]\"], {});\n        }\n    }[\"useRitualsEngine.useMemo[progressById]\"], [\n        logs,\n        rituals\n    ]);\n    const readStreakMultiplierEnabled = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useRitualsEngine.useCallback[readStreakMultiplierEnabled]\": ()=>{\n            if (true) return true;\n            try {\n                const raw = window.localStorage.getItem(\"controlNexus\");\n                if (!raw) return true;\n                const parsed = JSON.parse(raw);\n                return parsed?.rituals?.streakMultiplierEnabled !== false;\n            } catch  {\n                return true;\n            }\n        }\n    }[\"useRitualsEngine.useCallback[readStreakMultiplierEnabled]\"], []);\n    const completeRitual = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useRitualsEngine.useCallback[completeRitual]\": (ritualId)=>{\n            const ritual = rituals.find({\n                \"useRitualsEngine.useCallback[completeRitual].ritual\": (item)=>item.id === ritualId\n            }[\"useRitualsEngine.useCallback[completeRitual].ritual\"]);\n            if (!ritual) {\n                return {\n                    status: \"not-found\"\n                };\n            }\n            const now = new Date();\n            let outcome = {\n                status: \"already-completed\",\n                ritual,\n                progress: (0,_lib_rituals__WEBPACK_IMPORTED_MODULE_6__.computeRitualProgress)(ritual, logs, now)\n            };\n            setLogs({\n                \"useRitualsEngine.useCallback[completeRitual]\": (previousLogs)=>{\n                    const progressBefore = (0,_lib_rituals__WEBPACK_IMPORTED_MODULE_6__.computeRitualProgress)(ritual, previousLogs, now);\n                    if (progressBefore.completed) {\n                        outcome = {\n                            status: \"already-completed\",\n                            ritual,\n                            progress: progressBefore\n                        };\n                        return previousLogs;\n                    }\n                    const baseLog = {\n                        id: FALLBACK_ID(),\n                        ritualId,\n                        timestamp: now.toISOString()\n                    };\n                    const tentativeLogs = [\n                        ...previousLogs,\n                        baseLog\n                    ];\n                    const progressAfter = (0,_lib_rituals__WEBPACK_IMPORTED_MODULE_6__.computeRitualProgress)(ritual, tentativeLogs, now);\n                    const multiplierEnabled = readStreakMultiplierEnabled();\n                    const appliedMultiplier = multiplierEnabled ? progressAfter.multiplier : 0;\n                    const xpWithBonus = Math.round(ritual.xp * (1 + appliedMultiplier));\n                    const obedienceAwarded = ritual.obedience;\n                    const finalXp = applyEvent(\"xp\", xpWithBonus);\n                    const finalObedience = applyEvent(\"obedience\", obedienceAwarded);\n                    const completedLog = {\n                        ...baseLog,\n                        xpAwarded: finalXp,\n                        obedienceAwarded: finalObedience,\n                        multiplierApplied: appliedMultiplier\n                    };\n                    const updatedLogs = [\n                        ...previousLogs,\n                        completedLog\n                    ];\n                    setXp({\n                        \"useRitualsEngine.useCallback[completeRitual]\": (prev)=>prev + finalXp\n                    }[\"useRitualsEngine.useCallback[completeRitual]\"]);\n                    gainXpForCompanions(\"ritual\", finalXp);\n                    setObedience({\n                        \"useRitualsEngine.useCallback[completeRitual]\": (prev)=>prev + finalObedience\n                    }[\"useRitualsEngine.useCallback[completeRitual]\"]);\n                    setRituals({\n                        \"useRitualsEngine.useCallback[completeRitual]\": (prev)=>prev.map({\n                                \"useRitualsEngine.useCallback[completeRitual]\": (item)=>item.id === ritualId ? {\n                                        ...item,\n                                        streak: progressAfter.streak\n                                    } : item\n                            }[\"useRitualsEngine.useCallback[completeRitual]\"])\n                    }[\"useRitualsEngine.useCallback[completeRitual]\"]);\n                    triggerBuffBySource(ritual.name);\n                    const ritualText = ritual.name.toLowerCase();\n                    npcs.forEach({\n                        \"useRitualsEngine.useCallback[completeRitual]\": (npc)=>{\n                            if (ritualText.includes(npc.name.toLowerCase())) {\n                                adjustNpcShame(npc.id, 5);\n                            }\n                        }\n                    }[\"useRitualsEngine.useCallback[completeRitual]\"]);\n                    outcome = {\n                        status: \"completed\",\n                        ritual,\n                        xpAwarded: finalXp,\n                        obedienceAwarded: finalObedience,\n                        progress: progressAfter,\n                        log: completedLog\n                    };\n                    return updatedLogs;\n                }\n            }[\"useRitualsEngine.useCallback[completeRitual]\"]);\n            return outcome;\n        }\n    }[\"useRitualsEngine.useCallback[completeRitual]\"], [\n        adjustNpcShame,\n        applyEvent,\n        gainXpForCompanions,\n        logs,\n        npcs,\n        readStreakMultiplierEnabled,\n        rituals,\n        setLogs,\n        setObedience,\n        setRituals,\n        setXp,\n        triggerBuffBySource\n    ]);\n    const resetRitualStreak = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useRitualsEngine.useCallback[resetRitualStreak]\": (ritualId)=>{\n            setRituals({\n                \"useRitualsEngine.useCallback[resetRitualStreak]\": (prev)=>prev.map({\n                        \"useRitualsEngine.useCallback[resetRitualStreak]\": (item)=>item.id === ritualId ? {\n                                ...item,\n                                streak: 0\n                            } : item\n                    }[\"useRitualsEngine.useCallback[resetRitualStreak]\"])\n            }[\"useRitualsEngine.useCallback[resetRitualStreak]\"]);\n            setLogs({\n                \"useRitualsEngine.useCallback[resetRitualStreak]\": (prev)=>prev.filter({\n                        \"useRitualsEngine.useCallback[resetRitualStreak]\": (log)=>log.ritualId !== ritualId\n                    }[\"useRitualsEngine.useCallback[resetRitualStreak]\"])\n            }[\"useRitualsEngine.useCallback[resetRitualStreak]\"]);\n        }\n    }[\"useRitualsEngine.useCallback[resetRitualStreak]\"], [\n        setLogs,\n        setRituals\n    ]);\n    const failRitual = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useRitualsEngine.useCallback[failRitual]\": (ritualId)=>{\n            incrementCounter('ritualsFailed', 1);\n            resetRitualStreak(ritualId);\n        }\n    }[\"useRitualsEngine.useCallback[failRitual]\"], [\n        incrementCounter,\n        resetRitualStreak\n    ]);\n    const addRitual = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useRitualsEngine.useCallback[addRitual]\": (ritual)=>{\n            setRituals({\n                \"useRitualsEngine.useCallback[addRitual]\": (prev)=>[\n                        ...prev,\n                        ritual\n                    ]\n            }[\"useRitualsEngine.useCallback[addRitual]\"]);\n        }\n    }[\"useRitualsEngine.useCallback[addRitual]\"], [\n        setRituals\n    ]);\n    const updateRitual = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useRitualsEngine.useCallback[updateRitual]\": (ritualId, patch)=>{\n            setRituals({\n                \"useRitualsEngine.useCallback[updateRitual]\": (prev)=>prev.map({\n                        \"useRitualsEngine.useCallback[updateRitual]\": (item)=>item.id === ritualId ? {\n                                ...item,\n                                ...patch\n                            } : item\n                    }[\"useRitualsEngine.useCallback[updateRitual]\"])\n            }[\"useRitualsEngine.useCallback[updateRitual]\"]);\n        }\n    }[\"useRitualsEngine.useCallback[updateRitual]\"], [\n        setRituals\n    ]);\n    const deleteRitual = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useRitualsEngine.useCallback[deleteRitual]\": (ritualId)=>{\n            setRituals({\n                \"useRitualsEngine.useCallback[deleteRitual]\": (prev)=>prev.filter({\n                        \"useRitualsEngine.useCallback[deleteRitual]\": (item)=>item.id !== ritualId\n                    }[\"useRitualsEngine.useCallback[deleteRitual]\"])\n            }[\"useRitualsEngine.useCallback[deleteRitual]\"]);\n            setLogs({\n                \"useRitualsEngine.useCallback[deleteRitual]\": (prev)=>prev.filter({\n                        \"useRitualsEngine.useCallback[deleteRitual]\": (log)=>log.ritualId !== ritualId\n                    }[\"useRitualsEngine.useCallback[deleteRitual]\"])\n            }[\"useRitualsEngine.useCallback[deleteRitual]\"]);\n        }\n    }[\"useRitualsEngine.useCallback[deleteRitual]\"], [\n        setLogs,\n        setRituals\n    ]);\n    const ritualLogsDescending = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useRitualsEngine.useMemo[ritualLogsDescending]\": ()=>{\n            return [\n                ...logs\n            ].sort({\n                \"useRitualsEngine.useMemo[ritualLogsDescending]\": (a, b)=>new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime()\n            }[\"useRitualsEngine.useMemo[ritualLogsDescending]\"]);\n        }\n    }[\"useRitualsEngine.useMemo[ritualLogsDescending]\"], [\n        logs\n    ]);\n    return {\n        rituals,\n        logs: ritualLogsDescending,\n        progressById,\n        completeRitual,\n        addRitual,\n        updateRitual,\n        deleteRitual,\n        resetRitualStreak,\n        failRitual,\n        xp,\n        obedience,\n        setXp,\n        setObedience\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLVyxNQUFNO3NFQUFDLENBQUNwQyxPQUFTQSxLQUFLYixFQUFFLEtBQUtXOzs7WUFDdkQ1Qjs4REFBUSxDQUFDdUQsT0FBU0EsS0FBS1csTUFBTTtzRUFBQyxDQUFDRixNQUFRQSxJQUFJcEMsUUFBUSxLQUFLQTs7O1FBQzFEO3FEQUNBO1FBQUM1QjtRQUFTRjtLQUFXO0lBR3ZCLE1BQU0wRSx1QkFBdUIzRiw4Q0FBT0E7MERBQUM7WUFDbkMsT0FBTzttQkFBSWtCO2FBQUssQ0FBQzBFLElBQUk7a0VBQUMsQ0FBQ0MsR0FBR0MsSUFBTSxJQUFJbEYsS0FBS2tGLEVBQUVyQyxTQUFTLEVBQUVzQyxPQUFPLEtBQUssSUFBSW5GLEtBQUtpRixFQUFFcEMsU0FBUyxFQUFFc0MsT0FBTzs7UUFDakc7eURBQUc7UUFBQzdFO0tBQUs7SUFFVCxPQUFPO1FBQ0xGO1FBQ0FFLE1BQU15RTtRQUNOM0Q7UUFDQWM7UUFDQXlDO1FBQ0FDO1FBQ0FFO1FBQ0FOO1FBQ0FFO1FBQ0FsRTtRQUNBRTtRQUNBRDtRQUNBRTtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxNb21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxcaG9va3NcXHVzZVJpdHVhbHNFbmdpbmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlUGVyc2lzdGVudFN0YXRlIH0gZnJvbSBcIi4vdXNlUGVyc2lzdGVudFN0YXRlXCI7XG5pbXBvcnQgeyB1c2VCdWZmcyB9IGZyb20gXCIuL3VzZUJ1ZmZzXCI7XG5pbXBvcnQgeyB1c2VDb21wYW5pb25zIH0gZnJvbSBcIi4vdXNlQ29tcGFuaW9uc1wiO1xuaW1wb3J0IHsgdXNlTnBjcyB9IGZyb20gXCIuL3VzZU5wY3NcIjtcbmltcG9ydCB7IHVzZVNoYW1lIH0gZnJvbSBcIi4vdXNlU2hhbWVcIjtcbmltcG9ydCB7XG4gIGNsb25lRGVmYXVsdFJpdHVhbExvZ3MsXG4gIGNsb25lRGVmYXVsdFJpdHVhbHMsXG4gIGNvbXB1dGVSaXR1YWxQcm9ncmVzcyxcbiAgdHlwZSBSaXR1YWwsXG4gIHR5cGUgUml0dWFsTG9nLFxuICB0eXBlIFJpdHVhbFByb2dyZXNzLFxufSBmcm9tIFwiLi4vbGliL3JpdHVhbHNcIjtcblxuZXhwb3J0IHR5cGUgQ29tcGxldGVSaXR1YWxPdXRjb21lID1cbiAgfCB7XG4gICAgICBzdGF0dXM6IFwiY29tcGxldGVkXCI7XG4gICAgICByaXR1YWw6IFJpdHVhbDtcbiAgICAgIHhwQXdhcmRlZDogbnVtYmVyO1xuICAgICAgb2JlZGllbmNlQXdhcmRlZDogbnVtYmVyO1xuICAgICAgcHJvZ3Jlc3M6IFJpdHVhbFByb2dyZXNzO1xuICAgICAgbG9nOiBSaXR1YWxMb2c7XG4gICAgfVxuICB8IHtcbiAgICAgIHN0YXR1czogXCJhbHJlYWR5LWNvbXBsZXRlZFwiO1xuICAgICAgcml0dWFsOiBSaXR1YWw7XG4gICAgICBwcm9ncmVzczogUml0dWFsUHJvZ3Jlc3M7XG4gICAgfVxuICB8IHtcbiAgICAgIHN0YXR1czogXCJub3QtZm91bmRcIjtcbiAgICB9O1xuXG5jb25zdCBGQUxMQkFDS19JRCA9ICgpID0+XG4gIHR5cGVvZiBjcnlwdG8gIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIGNyeXB0by5yYW5kb21VVUlEID09PSBcImZ1bmN0aW9uXCJcbiAgICA/IGNyeXB0by5yYW5kb21VVUlEKClcbiAgICA6ICdyaXR1YWwtJyArIERhdGUubm93KCkudG9TdHJpbmcoMzYpO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlUml0dWFsc0VuZ2luZSgpIHtcbiAgY29uc3QgW3JpdHVhbHMsIHNldFJpdHVhbHNdID0gdXNlUGVyc2lzdGVudFN0YXRlPFJpdHVhbFtdPihcInJpdHVhbHNcIiwgY2xvbmVEZWZhdWx0Uml0dWFscyk7XG4gIGNvbnN0IFtsb2dzLCBzZXRMb2dzXSA9IHVzZVBlcnNpc3RlbnRTdGF0ZTxSaXR1YWxMb2dbXT4oXCJyaXR1YWxMb2dzXCIsIGNsb25lRGVmYXVsdFJpdHVhbExvZ3MpO1xuICBjb25zdCBbeHAsIHNldFhwXSA9IHVzZVBlcnNpc3RlbnRTdGF0ZTxudW1iZXI+KFwieHBUb3RhbFwiLCAoKSA9PiAzNDAwKTtcbiAgY29uc3QgW29iZWRpZW5jZSwgc2V0T2JlZGllbmNlXSA9IHVzZVBlcnNpc3RlbnRTdGF0ZTxudW1iZXI+KFwib2JlZGllbmNlUG9pbnRzXCIsICgpID0+IDApO1xuICBjb25zdCB7IGFwcGx5RXZlbnQsIHRyaWdnZXJCdWZmQnlTb3VyY2UgfSA9IHVzZUJ1ZmZzKCk7XG4gIGNvbnN0IHsgY29tcGFuaW9ucywgZ2FpblhwRm9yQ29tcGFuaW9ucyB9ID0gdXNlQ29tcGFuaW9ucygpO1xuICBjb25zdCB7IG5wY3MsIGFkanVzdFNoYW1lOiBhZGp1c3ROcGNTaGFtZSB9ID0gdXNlTnBjcygpO1xuICBjb25zdCB7IGluY3JlbWVudENvdW50ZXIgfSA9IHVzZVNoYW1lKCk7XG5cbiAgY29uc3QgcHJvZ3Jlc3NCeUlkID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICByZXR1cm4gcml0dWFscy5yZWR1Y2U8UmVjb3JkPHN0cmluZywgUml0dWFsUHJvZ3Jlc3M+PigoYWNjLCByaXR1YWwpID0+IHtcbiAgICAgIGFjY1tyaXR1YWwuaWRdID0gY29tcHV0ZVJpdHVhbFByb2dyZXNzKHJpdHVhbCwgbG9ncywgbm93KTtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xuICB9LCBbbG9ncywgcml0dWFsc10pO1xuXG4gIGNvbnN0IHJlYWRTdHJlYWtNdWx0aXBsaWVyRW5hYmxlZCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIHRydWU7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJhdyA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImNvbnRyb2xOZXh1c1wiKTtcbiAgICAgIGlmICghcmF3KSByZXR1cm4gdHJ1ZTtcbiAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UocmF3KSBhcyB7IHJpdHVhbHM/OiB7IHN0cmVha011bHRpcGxpZXJFbmFibGVkPzogYm9vbGVhbiB9IH07XG4gICAgICByZXR1cm4gcGFyc2VkPy5yaXR1YWxzPy5zdHJlYWtNdWx0aXBsaWVyRW5hYmxlZCAhPT0gZmFsc2U7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCBjb21wbGV0ZVJpdHVhbCA9IHVzZUNhbGxiYWNrKFxuICAgIChyaXR1YWxJZDogc3RyaW5nKTogQ29tcGxldGVSaXR1YWxPdXRjb21lID0+IHtcbiAgICAgIGNvbnN0IHJpdHVhbCA9IHJpdHVhbHMuZmluZCgoaXRlbSkgPT4gaXRlbS5pZCA9PT0gcml0dWFsSWQpO1xuICAgICAgaWYgKCFyaXR1YWwpIHtcbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBcIm5vdC1mb3VuZFwiIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICBsZXQgb3V0Y29tZTogQ29tcGxldGVSaXR1YWxPdXRjb21lID0ge1xuICAgICAgICBzdGF0dXM6IFwiYWxyZWFkeS1jb21wbGV0ZWRcIixcbiAgICAgICAgcml0dWFsLFxuICAgICAgICBwcm9ncmVzczogY29tcHV0ZVJpdHVhbFByb2dyZXNzKHJpdHVhbCwgbG9ncywgbm93KSxcbiAgICAgIH07XG5cbiAgICAgIHNldExvZ3MoKHByZXZpb3VzTG9ncykgPT4ge1xuICAgICAgICBjb25zdCBwcm9ncmVzc0JlZm9yZSA9IGNvbXB1dGVSaXR1YWxQcm9ncmVzcyhyaXR1YWwsIHByZXZpb3VzTG9ncywgbm93KTtcbiAgICAgICAgaWYgKHByb2dyZXNzQmVmb3JlLmNvbXBsZXRlZCkge1xuICAgICAgICAgIG91dGNvbWUgPSB7IHN0YXR1czogXCJhbHJlYWR5LWNvbXBsZXRlZFwiLCByaXR1YWwsIHByb2dyZXNzOiBwcm9ncmVzc0JlZm9yZSB9O1xuICAgICAgICAgIHJldHVybiBwcmV2aW91c0xvZ3M7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBiYXNlTG9nOiBSaXR1YWxMb2cgPSB7XG4gICAgICAgICAgaWQ6IEZBTExCQUNLX0lEKCksXG4gICAgICAgICAgcml0dWFsSWQsXG4gICAgICAgICAgdGltZXN0YW1wOiBub3cudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCB0ZW50YXRpdmVMb2dzID0gWy4uLnByZXZpb3VzTG9ncywgYmFzZUxvZ107XG4gICAgICAgIGNvbnN0IHByb2dyZXNzQWZ0ZXIgPSBjb21wdXRlUml0dWFsUHJvZ3Jlc3Mocml0dWFsLCB0ZW50YXRpdmVMb2dzLCBub3cpO1xuICAgICAgICBjb25zdCBtdWx0aXBsaWVyRW5hYmxlZCA9IHJlYWRTdHJlYWtNdWx0aXBsaWVyRW5hYmxlZCgpO1xuICAgICAgICBjb25zdCBhcHBsaWVkTXVsdGlwbGllciA9IG11bHRpcGxpZXJFbmFibGVkID8gcHJvZ3Jlc3NBZnRlci5tdWx0aXBsaWVyIDogMDtcbiAgICAgICAgY29uc3QgeHBXaXRoQm9udXMgPSBNYXRoLnJvdW5kKHJpdHVhbC54cCAqICgxICsgYXBwbGllZE11bHRpcGxpZXIpKTtcbiAgICAgICAgY29uc3Qgb2JlZGllbmNlQXdhcmRlZCA9IHJpdHVhbC5vYmVkaWVuY2U7XG4gICAgICAgIGNvbnN0IGZpbmFsWHAgPSBhcHBseUV2ZW50KFwieHBcIiwgeHBXaXRoQm9udXMpO1xuICAgICAgICBjb25zdCBmaW5hbE9iZWRpZW5jZSA9IGFwcGx5RXZlbnQoXCJvYmVkaWVuY2VcIiwgb2JlZGllbmNlQXdhcmRlZCk7XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlZExvZzogUml0dWFsTG9nID0ge1xuICAgICAgICAgIC4uLmJhc2VMb2csXG4gICAgICAgICAgeHBBd2FyZGVkOiBmaW5hbFhwLFxuICAgICAgICAgIG9iZWRpZW5jZUF3YXJkZWQ6IGZpbmFsT2JlZGllbmNlLFxuICAgICAgICAgIG11bHRpcGxpZXJBcHBsaWVkOiBhcHBsaWVkTXVsdGlwbGllcixcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCB1cGRhdGVkTG9ncyA9IFsuLi5wcmV2aW91c0xvZ3MsIGNvbXBsZXRlZExvZ107XG5cbiAgICAgICAgc2V0WHAoKHByZXYpID0+IHByZXYgKyBmaW5hbFhwKTtcbiAgICAgICAgZ2FpblhwRm9yQ29tcGFuaW9ucyhcInJpdHVhbFwiLCBmaW5hbFhwKTtcbiAgICAgICAgc2V0T2JlZGllbmNlKChwcmV2KSA9PiBwcmV2ICsgZmluYWxPYmVkaWVuY2UpO1xuICAgICAgICBzZXRSaXR1YWxzKChwcmV2KSA9PlxuICAgICAgICAgIHByZXYubWFwKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5pZCA9PT0gcml0dWFsSWRcbiAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgICAgICAgc3RyZWFrOiBwcm9ncmVzc0FmdGVyLnN0cmVhayxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIDogaXRlbVxuICAgICAgICAgIClcbiAgICAgICAgKTtcblxuICAgICAgICB0cmlnZ2VyQnVmZkJ5U291cmNlKHJpdHVhbC5uYW1lKTtcblxuICAgICAgICBjb25zdCByaXR1YWxUZXh0ID0gcml0dWFsLm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgbnBjcy5mb3JFYWNoKChucGMpID0+IHtcbiAgICAgICAgICBpZiAocml0dWFsVGV4dC5pbmNsdWRlcyhucGMubmFtZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgICAgYWRqdXN0TnBjU2hhbWUobnBjLmlkLCA1KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG91dGNvbWUgPSB7XG4gICAgICAgICAgc3RhdHVzOiBcImNvbXBsZXRlZFwiLFxuICAgICAgICAgIHJpdHVhbCxcbiAgICAgICAgICB4cEF3YXJkZWQ6IGZpbmFsWHAsXG4gICAgICAgICAgb2JlZGllbmNlQXdhcmRlZDogZmluYWxPYmVkaWVuY2UsXG4gICAgICAgICAgcHJvZ3Jlc3M6IHByb2dyZXNzQWZ0ZXIsXG4gICAgICAgICAgbG9nOiBjb21wbGV0ZWRMb2csXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHVwZGF0ZWRMb2dzO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBvdXRjb21lO1xuICAgIH0sXG4gICAgW2FkanVzdE5wY1NoYW1lLCBhcHBseUV2ZW50LCBnYWluWHBGb3JDb21wYW5pb25zLCBsb2dzLCBucGNzLCByZWFkU3RyZWFrTXVsdGlwbGllckVuYWJsZWQsIHJpdHVhbHMsIHNldExvZ3MsIHNldE9iZWRpZW5jZSwgc2V0Uml0dWFscywgc2V0WHAsIHRyaWdnZXJCdWZmQnlTb3VyY2VdXG4gICk7XG5cbiAgY29uc3QgcmVzZXRSaXR1YWxTdHJlYWsgPSB1c2VDYWxsYmFjayhcbiAgICAocml0dWFsSWQ6IHN0cmluZykgPT4ge1xuICAgICAgc2V0Uml0dWFscygocHJldikgPT5cbiAgICAgICAgcHJldi5tYXAoKGl0ZW0pID0+XG4gICAgICAgICAgaXRlbS5pZCA9PT0gcml0dWFsSWRcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICAgICAgc3RyZWFrOiAwLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA6IGl0ZW1cbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIHNldExvZ3MoKHByZXYpID0+IHByZXYuZmlsdGVyKChsb2cpID0+IGxvZy5yaXR1YWxJZCAhPT0gcml0dWFsSWQpKTtcbiAgICB9LFxuICAgIFtzZXRMb2dzLCBzZXRSaXR1YWxzXVxuICApO1xuXG4gIGNvbnN0IGZhaWxSaXR1YWwgPSB1c2VDYWxsYmFjayhcbiAgICAocml0dWFsSWQ6IHN0cmluZykgPT4ge1xuICAgICAgaW5jcmVtZW50Q291bnRlcigncml0dWFsc0ZhaWxlZCcsIDEpO1xuICAgICAgcmVzZXRSaXR1YWxTdHJlYWsocml0dWFsSWQpO1xuICAgIH0sXG4gICAgW2luY3JlbWVudENvdW50ZXIsIHJlc2V0Uml0dWFsU3RyZWFrXVxuICApO1xuXG4gIGNvbnN0IGFkZFJpdHVhbCA9IHVzZUNhbGxiYWNrKFxuICAgIChyaXR1YWw6IFJpdHVhbCkgPT4ge1xuICAgICAgc2V0Uml0dWFscygocHJldikgPT4gWy4uLnByZXYsIHJpdHVhbF0pO1xuICAgIH0sXG4gICAgW3NldFJpdHVhbHNdXG4gICk7XG5cbiAgY29uc3QgdXBkYXRlUml0dWFsID0gdXNlQ2FsbGJhY2soXG4gICAgKHJpdHVhbElkOiBzdHJpbmcsIHBhdGNoOiBQYXJ0aWFsPFJpdHVhbD4pID0+IHtcbiAgICAgIHNldFJpdHVhbHMoKHByZXYpID0+XG4gICAgICAgIHByZXYubWFwKChpdGVtKSA9PlxuICAgICAgICAgIGl0ZW0uaWQgPT09IHJpdHVhbElkXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgICAgIC4uLnBhdGNoLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA6IGl0ZW1cbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9LFxuICAgIFtzZXRSaXR1YWxzXVxuICApO1xuXG4gIGNvbnN0IGRlbGV0ZVJpdHVhbCA9IHVzZUNhbGxiYWNrKFxuICAgIChyaXR1YWxJZDogc3RyaW5nKSA9PiB7XG4gICAgICBzZXRSaXR1YWxzKChwcmV2KSA9PiBwcmV2LmZpbHRlcigoaXRlbSkgPT4gaXRlbS5pZCAhPT0gcml0dWFsSWQpKTtcbiAgICAgIHNldExvZ3MoKHByZXYpID0+IHByZXYuZmlsdGVyKChsb2cpID0+IGxvZy5yaXR1YWxJZCAhPT0gcml0dWFsSWQpKTtcbiAgICB9LFxuICAgIFtzZXRMb2dzLCBzZXRSaXR1YWxzXVxuICApO1xuXG4gIGNvbnN0IHJpdHVhbExvZ3NEZXNjZW5kaW5nID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIFsuLi5sb2dzXS5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLnRpbWVzdGFtcCkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYS50aW1lc3RhbXApLmdldFRpbWUoKSk7XG4gIH0sIFtsb2dzXSk7XG5cbiAgcmV0dXJuIHtcbiAgICByaXR1YWxzLFxuICAgIGxvZ3M6IHJpdHVhbExvZ3NEZXNjZW5kaW5nLFxuICAgIHByb2dyZXNzQnlJZCxcbiAgICBjb21wbGV0ZVJpdHVhbCxcbiAgICBhZGRSaXR1YWwsXG4gICAgdXBkYXRlUml0dWFsLFxuICAgIGRlbGV0ZVJpdHVhbCxcbiAgICByZXNldFJpdHVhbFN0cmVhayxcbiAgICBmYWlsUml0dWFsLFxuICAgIHhwLFxuICAgIG9iZWRpZW5jZSxcbiAgICBzZXRYcCxcbiAgICBzZXRPYmVkaWVuY2UsXG4gIH07XG59XG4iXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJ1c2VNZW1vIiwidXNlUGVyc2lzdGVudFN0YXRlIiwidXNlQnVmZnMiLCJ1c2VDb21wYW5pb25zIiwidXNlTnBjcyIsInVzZVNoYW1lIiwiY2xvbmVEZWZhdWx0Uml0dWFsTG9ncyIsImNsb25lRGVmYXVsdFJpdHVhbHMiLCJjb21wdXRlUml0dWFsUHJvZ3Jlc3MiLCJGQUxMQkFDS19JRCIsImNyeXB0byIsInJhbmRvbVVVSUQiLCJEYXRlIiwibm93IiwidG9TdHJpbmciLCJ1c2VSaXR1YWxzRW5naW5lIiwicml0dWFscyIsInNldFJpdHVhbHMiLCJsb2dzIiwic2V0TG9ncyIsInhwIiwic2V0WHAiLCJvYmVkaWVuY2UiLCJzZXRPYmVkaWVuY2UiLCJhcHBseUV2ZW50IiwidHJpZ2dlckJ1ZmZCeVNvdXJjZSIsImNvbXBhbmlvbnMiLCJnYWluWHBGb3JDb21wYW5pb25zIiwibnBjcyIsImFkanVzdFNoYW1lIiwiYWRqdXN0TnBjU2hhbWUiLCJpbmNyZW1lbnRDb3VudGVyIiwicHJvZ3Jlc3NCeUlkIiwicmVkdWNlIiwiYWNjIiwicml0dWFsIiwiaWQiLCJyZWFkU3RyZWFrTXVsdGlwbGllckVuYWJsZWQiLCJyYXciLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicGFyc2VkIiwiSlNPTiIsInBhcnNlIiwic3RyZWFrTXVsdGlwbGllckVuYWJsZWQiLCJjb21wbGV0ZVJpdHVhbCIsInJpdHVhbElkIiwiZmluZCIsIml0ZW0iLCJzdGF0dXMiLCJvdXRjb21lIiwicHJvZ3Jlc3MiLCJwcmV2aW91c0xvZ3MiLCJwcm9ncmVzc0JlZm9yZSIsImNvbXBsZXRlZCIsImJhc2VMb2ciLCJ0aW1lc3RhbXAiLCJ0b0lTT1N0cmluZyIsInRlbnRhdGl2ZUxvZ3MiLCJwcm9ncmVzc0FmdGVyIiwibXVsdGlwbGllckVuYWJsZWQiLCJhcHBsaWVkTXVsdGlwbGllciIsIm11bHRpcGxpZXIiLCJ4cFdpdGhCb251cyIsIk1hdGgiLCJyb3VuZCIsIm9iZWRpZW5jZUF3YXJkZWQiLCJmaW5hbFhwIiwiZmluYWxPYmVkaWVuY2UiLCJjb21wbGV0ZWRMb2ciLCJ4cEF3YXJkZWQiLCJtdWx0aXBsaWVyQXBwbGllZCIsInVwZGF0ZWRMb2dzIiwicHJldiIsIm1hcCIsInN0cmVhayIsIm5hbWUiLCJyaXR1YWxUZXh0IiwidG9Mb3dlckNhc2UiLCJmb3JFYWNoIiwibnBjIiwiaW5jbHVkZXMiLCJsb2ciLCJyZXNldFJpdHVhbFN0cmVhayIsImZpbHRlciIsImZhaWxSaXR1YWwiLCJhZGRSaXR1YWwiLCJ1cGRhdGVSaXR1YWwiLCJwYXRjaCIsImRlbGV0ZVJpdHVhbCIsInJpdHVhbExvZ3NEZXNjZW5kaW5nIiwic29ydCIsImEiLCJiIiwiZ2V0VGltZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useRitualsEngine.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useShame.ts":
/*!*******************************!*\
  !*** ./app/hooks/useShame.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useShame: () => (/* binding */ useShame)\n/* harmony export */ });\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _data_shame_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../data/shame.json */ \"(ssr)/./data/shame.json\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* __next_internal_client_entry_do_not_use__ useShame auto */ \n\n\nfunction useShame() {\n    const [shame, setShame] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_0__.usePersistentState)('shame', {\n        \"useShame.usePersistentState\": ()=>_data_shame_json__WEBPACK_IMPORTED_MODULE_1__\n    }[\"useShame.usePersistentState\"]);\n    const addConfession = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)({\n        \"useShame.useCallback[addConfession]\": (text)=>{\n            const newConfession = {\n                id: `c${Date.now()}`,\n                text,\n                date: new Date().toISOString().split('T')[0]\n            };\n            setShame({\n                \"useShame.useCallback[addConfession]\": (prev)=>({\n                        ...prev,\n                        confessions: [\n                            ...prev.confessions,\n                            newConfession\n                        ]\n                    })\n            }[\"useShame.useCallback[addConfession]\"]);\n        }\n    }[\"useShame.useCallback[addConfession]\"], [\n        setShame\n    ]);\n    const incrementCounter = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)({\n        \"useShame.useCallback[incrementCounter]\": (counter, amount = 1)=>{\n            setShame({\n                \"useShame.useCallback[incrementCounter]\": (prev)=>{\n                    if (typeof prev[counter] === 'number') {\n                        return {\n                            ...prev,\n                            [counter]: prev[counter] + amount\n                        };\n                    }\n                    return prev;\n                }\n            }[\"useShame.useCallback[incrementCounter]\"]);\n        }\n    }[\"useShame.useCallback[incrementCounter]\"], [\n        setShame\n    ]);\n    const resetShame = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)({\n        \"useShame.useCallback[resetShame]\": ()=>{\n            setShame(_data_shame_json__WEBPACK_IMPORTED_MODULE_1__);\n        }\n    }[\"useShame.useCallback[resetShame]\"], [\n        setShame\n    ]);\n    return {\n        shame,\n        addConfession,\n        incrementCounter,\n        resetShame\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvaG9va3MvdXNlU2hhbWUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OERBRTBEO0FBQ1Q7QUFDYjtBQWU3QixTQUFTRztJQUNkLE1BQU0sQ0FBQ0MsT0FBT0MsU0FBUyxHQUFHTCx1RUFBa0JBLENBQWE7dUNBQVMsSUFBTUMsNkNBQVlBOztJQUVwRixNQUFNSyxnQkFBZ0JKLGtEQUFXQTsrQ0FBQyxDQUFDSztZQUNqQyxNQUFNQyxnQkFBNEI7Z0JBQ2hDQyxJQUFJLENBQUMsQ0FBQyxFQUFFQyxLQUFLQyxHQUFHLElBQUk7Z0JBQ3BCSjtnQkFDQUssTUFBTSxJQUFJRixPQUFPRyxXQUFXLEdBQUdDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUM5QztZQUNBVDt1REFBU1UsQ0FBQUEsT0FBUzt3QkFDaEIsR0FBR0EsSUFBSTt3QkFDUEMsYUFBYTsrQkFBSUQsS0FBS0MsV0FBVzs0QkFBRVI7eUJBQWM7b0JBQ25EOztRQUNGOzhDQUFHO1FBQUNIO0tBQVM7SUFFYixNQUFNWSxtQkFBbUJmLGtEQUFXQTtrREFBQyxDQUFDZ0IsU0FBMkJDLFNBQVMsQ0FBQztZQUN6RWQ7MERBQVNVLENBQUFBO29CQUNQLElBQUksT0FBT0EsSUFBSSxDQUFDRyxRQUFRLEtBQUssVUFBVTt3QkFDckMsT0FBTzs0QkFDTCxHQUFHSCxJQUFJOzRCQUNQLENBQUNHLFFBQVEsRUFBRSxJQUFLLENBQUNBLFFBQVEsR0FBY0M7d0JBQ3pDO29CQUNGO29CQUNBLE9BQU9KO2dCQUNUOztRQUNGO2lEQUFHO1FBQUNWO0tBQVM7SUFFYixNQUFNZSxhQUFhbEIsa0RBQVdBOzRDQUFDO1lBQzdCRyxTQUFTSiw2Q0FBWUE7UUFDdkI7MkNBQUc7UUFBQ0k7S0FBUztJQUViLE9BQU87UUFDTEQ7UUFDQUU7UUFDQVc7UUFDQUc7SUFDRjtBQUNGIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXGhvb2tzXFx1c2VTaGFtZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XHJcblxyXG5pbXBvcnQgeyB1c2VQZXJzaXN0ZW50U3RhdGUgfSBmcm9tICcuL3VzZVBlcnNpc3RlbnRTdGF0ZSc7XHJcbmltcG9ydCBkZWZhdWx0U2hhbWUgZnJvbSAnLi4vLi4vZGF0YS9zaGFtZS5qc29uJztcclxuaW1wb3J0IHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENvbmZlc3Npb24ge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgdGV4dDogc3RyaW5nO1xyXG4gIGRhdGU6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTaGFtZVN0YXRlIHtcclxuICBwYW50aWVzU25pZmZlZDogbnVtYmVyO1xyXG4gIHJpdHVhbHNGYWlsZWQ6IG51bWJlcjtcclxuICBkaXJ0eVRva2Vuc0J1cm5lZDogbnVtYmVyO1xyXG4gIGNvbmZlc3Npb25zOiBDb25mZXNzaW9uW107XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VTaGFtZSgpIHtcclxuICBjb25zdCBbc2hhbWUsIHNldFNoYW1lXSA9IHVzZVBlcnNpc3RlbnRTdGF0ZTxTaGFtZVN0YXRlPignc2hhbWUnLCAoKSA9PiBkZWZhdWx0U2hhbWUpO1xyXG5cclxuICBjb25zdCBhZGRDb25mZXNzaW9uID0gdXNlQ2FsbGJhY2soKHRleHQ6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgbmV3Q29uZmVzc2lvbjogQ29uZmVzc2lvbiA9IHtcclxuICAgICAgaWQ6IGBjJHtEYXRlLm5vdygpfWAsXHJcbiAgICAgIHRleHQsXHJcbiAgICAgIGRhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLFxyXG4gICAgfTtcclxuICAgIHNldFNoYW1lKHByZXYgPT4gKHtcclxuICAgICAgLi4ucHJldixcclxuICAgICAgY29uZmVzc2lvbnM6IFsuLi5wcmV2LmNvbmZlc3Npb25zLCBuZXdDb25mZXNzaW9uXSxcclxuICAgIH0pKTtcclxuICB9LCBbc2V0U2hhbWVdKTtcclxuXHJcbiAgY29uc3QgaW5jcmVtZW50Q291bnRlciA9IHVzZUNhbGxiYWNrKChjb3VudGVyOiBrZXlvZiBTaGFtZVN0YXRlLCBhbW91bnQgPSAxKSA9PiB7XHJcbiAgICBzZXRTaGFtZShwcmV2ID0+IHtcclxuICAgICAgaWYgKHR5cGVvZiBwcmV2W2NvdW50ZXJdID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAuLi5wcmV2LFxyXG4gICAgICAgICAgW2NvdW50ZXJdOiAocHJldltjb3VudGVyXSBhcyBudW1iZXIpICsgYW1vdW50LFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHByZXY7XHJcbiAgICB9KTtcclxuICB9LCBbc2V0U2hhbWVdKTtcclxuXHJcbiAgY29uc3QgcmVzZXRTaGFtZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIHNldFNoYW1lKGRlZmF1bHRTaGFtZSk7XHJcbiAgfSwgW3NldFNoYW1lXSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBzaGFtZSxcclxuICAgIGFkZENvbmZlc3Npb24sXHJcbiAgICBpbmNyZW1lbnRDb3VudGVyLFxyXG4gICAgcmVzZXRTaGFtZSxcclxuICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJ1c2VQZXJzaXN0ZW50U3RhdGUiLCJkZWZhdWx0U2hhbWUiLCJ1c2VDYWxsYmFjayIsInVzZVNoYW1lIiwic2hhbWUiLCJzZXRTaGFtZSIsImFkZENvbmZlc3Npb24iLCJ0ZXh0IiwibmV3Q29uZmVzc2lvbiIsImlkIiwiRGF0ZSIsIm5vdyIsImRhdGUiLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwicHJldiIsImNvbmZlc3Npb25zIiwiaW5jcmVtZW50Q291bnRlciIsImNvdW50ZXIiLCJhbW91bnQiLCJyZXNldFNoYW1lIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useShame.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useShameAchievements.ts":
/*!*******************************************!*\
  !*** ./app/hooks/useShameAchievements.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useShameAchievements: () => (/* binding */ useShameAchievements)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _useAchievements__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useAchievements */ \"(ssr)/./app/hooks/useAchievements.ts\");\n/* harmony import */ var _useShame__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useShame */ \"(ssr)/./app/hooks/useShame.ts\");\n/* harmony import */ var _usePunishments__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./usePunishments */ \"(ssr)/./app/hooks/usePunishments.ts\");\n/* __next_internal_client_entry_do_not_use__ useShameAchievements auto */ \n\n\n\n/**\r\n * A custom hook to manage shame-related achievements.\r\n * It listens to changes in shame state and unlocks achievements when their triggers are met.\r\n */ function useShameAchievements() {\n    const { achievements, unlockAchievement } = (0,_useAchievements__WEBPACK_IMPORTED_MODULE_1__.useAchievements)();\n    const { shame } = (0,_useShame__WEBPACK_IMPORTED_MODULE_2__.useShame)();\n    const { activePunishments } = (0,_usePunishments__WEBPACK_IMPORTED_MODULE_3__.usePunishments)();\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useShameAchievements.useEffect\": ()=>{\n            // Don't run if achievements haven't loaded yet\n            if (!achievements || achievements.length === 0) return;\n            // Filter for only un-unlocked Shame achievements to check\n            const shameAchievements = achievements.filter({\n                \"useShameAchievements.useEffect.shameAchievements\": (a)=>!a.unlocked && a.category === 'Shame'\n            }[\"useShameAchievements.useEffect.shameAchievements\"]);\n            if (shameAchievements.length === 0) return;\n            shameAchievements.forEach({\n                \"useShameAchievements.useEffect\": (achievement)=>{\n                    const { trigger } = achievement;\n                    let conditionMet = false;\n                    switch(trigger.type){\n                        case 'SHAME_COUNTER':\n                            // Ensure the counter exists on the shame object before checking\n                            if (trigger.counter in shame && shame[trigger.counter] >= trigger.value) {\n                                conditionMet = true;\n                            }\n                            break;\n                        case 'CONFESSION_LOGGED':\n                            if (shame.confessions.length >= trigger.value) {\n                                conditionMet = true;\n                            }\n                            break;\n                        case 'PUNISHMENT_TIER_REACHED':\n                            // The tier is determined by the number of active punishments\n                            if (activePunishments.length >= trigger.value) {\n                                conditionMet = true;\n                            }\n                            break;\n                        default:\n                            break;\n                    }\n                    if (conditionMet) {\n                        unlockAchievement(achievement.id);\n                    }\n                }\n            }[\"useShameAchievements.useEffect\"]);\n        // This effect should re-run whenever the player's shame or punishment status changes.\n        }\n    }[\"useShameAchievements.useEffect\"], [\n        shame,\n        activePunishments,\n        achievements,\n        unlockAchievement\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvaG9va3MvdXNlU2hhbWVBY2hpZXZlbWVudHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OzBFQUVrQztBQUNrQjtBQUNkO0FBQ1k7QUFFbEQ7OztDQUdDLEdBQ00sU0FBU0k7SUFDZCxNQUFNLEVBQUVDLFlBQVksRUFBRUMsaUJBQWlCLEVBQUUsR0FBR0wsaUVBQWVBO0lBQzNELE1BQU0sRUFBRU0sS0FBSyxFQUFFLEdBQUdMLG1EQUFRQTtJQUMxQixNQUFNLEVBQUVNLGlCQUFpQixFQUFFLEdBQUdMLCtEQUFjQTtJQUU1Q0gsZ0RBQVNBOzBDQUFDO1lBQ1IsK0NBQStDO1lBQy9DLElBQUksQ0FBQ0ssZ0JBQWdCQSxhQUFhSSxNQUFNLEtBQUssR0FBRztZQUVoRCwwREFBMEQ7WUFDMUQsTUFBTUMsb0JBQW9CTCxhQUFhTSxNQUFNO29FQUMzQ0MsQ0FBQUEsSUFBSyxDQUFDQSxFQUFFQyxRQUFRLElBQUlELEVBQUVFLFFBQVEsS0FBSzs7WUFHckMsSUFBSUosa0JBQWtCRCxNQUFNLEtBQUssR0FBRztZQUVwQ0Msa0JBQWtCSyxPQUFPO2tEQUFDQyxDQUFBQTtvQkFDeEIsTUFBTSxFQUFFQyxPQUFPLEVBQUUsR0FBR0Q7b0JBQ3BCLElBQUlFLGVBQWU7b0JBRW5CLE9BQVFELFFBQVFFLElBQUk7d0JBQ2xCLEtBQUs7NEJBQ0gsZ0VBQWdFOzRCQUNoRSxJQUFJRixRQUFRRyxPQUFPLElBQUliLFNBQVNBLEtBQUssQ0FBQ1UsUUFBUUcsT0FBTyxDQUFDLElBQUlILFFBQVFJLEtBQUssRUFBRTtnQ0FDdkVILGVBQWU7NEJBQ2pCOzRCQUNBO3dCQUNGLEtBQUs7NEJBQ0gsSUFBSVgsTUFBTWUsV0FBVyxDQUFDYixNQUFNLElBQUlRLFFBQVFJLEtBQUssRUFBRTtnQ0FDN0NILGVBQWU7NEJBQ2pCOzRCQUNBO3dCQUNGLEtBQUs7NEJBQ0YsNkRBQTZEOzRCQUM5RCxJQUFJVixrQkFBa0JDLE1BQU0sSUFBSVEsUUFBUUksS0FBSyxFQUFFO2dDQUM3Q0gsZUFBZTs0QkFDakI7NEJBQ0E7d0JBQ0Y7NEJBRUU7b0JBQ0o7b0JBRUEsSUFBSUEsY0FBYzt3QkFDaEJaLGtCQUFrQlUsWUFBWU8sRUFBRTtvQkFDbEM7Z0JBQ0Y7O1FBQ0Esc0ZBQXNGO1FBQ3hGO3lDQUFHO1FBQUNoQjtRQUFPQztRQUFtQkg7UUFBY0M7S0FBa0I7QUFDaEUiLCJzb3VyY2VzIjpbIkM6XFxNb21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxcaG9va3NcXHVzZVNoYW1lQWNoaWV2ZW1lbnRzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcclxuXHJcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlQWNoaWV2ZW1lbnRzIH0gZnJvbSAnLi91c2VBY2hpZXZlbWVudHMnO1xyXG5pbXBvcnQgeyB1c2VTaGFtZSB9IGZyb20gJy4vdXNlU2hhbWUnO1xyXG5pbXBvcnQgeyB1c2VQdW5pc2htZW50cyB9IGZyb20gJy4vdXNlUHVuaXNobWVudHMnO1xyXG5cclxuLyoqXHJcbiAqIEEgY3VzdG9tIGhvb2sgdG8gbWFuYWdlIHNoYW1lLXJlbGF0ZWQgYWNoaWV2ZW1lbnRzLlxyXG4gKiBJdCBsaXN0ZW5zIHRvIGNoYW5nZXMgaW4gc2hhbWUgc3RhdGUgYW5kIHVubG9ja3MgYWNoaWV2ZW1lbnRzIHdoZW4gdGhlaXIgdHJpZ2dlcnMgYXJlIG1ldC5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VTaGFtZUFjaGlldmVtZW50cygpIHtcclxuICBjb25zdCB7IGFjaGlldmVtZW50cywgdW5sb2NrQWNoaWV2ZW1lbnQgfSA9IHVzZUFjaGlldmVtZW50cygpO1xyXG4gIGNvbnN0IHsgc2hhbWUgfSA9IHVzZVNoYW1lKCk7XHJcbiAgY29uc3QgeyBhY3RpdmVQdW5pc2htZW50cyB9ID0gdXNlUHVuaXNobWVudHMoKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIERvbid0IHJ1biBpZiBhY2hpZXZlbWVudHMgaGF2ZW4ndCBsb2FkZWQgeWV0XHJcbiAgICBpZiAoIWFjaGlldmVtZW50cyB8fCBhY2hpZXZlbWVudHMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG4gICAgLy8gRmlsdGVyIGZvciBvbmx5IHVuLXVubG9ja2VkIFNoYW1lIGFjaGlldmVtZW50cyB0byBjaGVja1xyXG4gICAgY29uc3Qgc2hhbWVBY2hpZXZlbWVudHMgPSBhY2hpZXZlbWVudHMuZmlsdGVyKFxyXG4gICAgICBhID0+ICFhLnVubG9ja2VkICYmIGEuY2F0ZWdvcnkgPT09ICdTaGFtZSdcclxuICAgICk7XHJcblxyXG4gICAgaWYgKHNoYW1lQWNoaWV2ZW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG5cclxuICAgIHNoYW1lQWNoaWV2ZW1lbnRzLmZvckVhY2goYWNoaWV2ZW1lbnQgPT4ge1xyXG4gICAgICBjb25zdCB7IHRyaWdnZXIgfSA9IGFjaGlldmVtZW50O1xyXG4gICAgICBsZXQgY29uZGl0aW9uTWV0ID0gZmFsc2U7XHJcblxyXG4gICAgICBzd2l0Y2ggKHRyaWdnZXIudHlwZSkge1xyXG4gICAgICAgIGNhc2UgJ1NIQU1FX0NPVU5URVInOlxyXG4gICAgICAgICAgLy8gRW5zdXJlIHRoZSBjb3VudGVyIGV4aXN0cyBvbiB0aGUgc2hhbWUgb2JqZWN0IGJlZm9yZSBjaGVja2luZ1xyXG4gICAgICAgICAgaWYgKHRyaWdnZXIuY291bnRlciBpbiBzaGFtZSAmJiBzaGFtZVt0cmlnZ2VyLmNvdW50ZXJdID49IHRyaWdnZXIudmFsdWUpIHtcclxuICAgICAgICAgICAgY29uZGl0aW9uTWV0ID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ0NPTkZFU1NJT05fTE9HR0VEJzpcclxuICAgICAgICAgIGlmIChzaGFtZS5jb25mZXNzaW9ucy5sZW5ndGggPj0gdHJpZ2dlci52YWx1ZSkge1xyXG4gICAgICAgICAgICBjb25kaXRpb25NZXQgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnUFVOSVNITUVOVF9USUVSX1JFQUNIRUQnOlxyXG4gICAgICAgICAgIC8vIFRoZSB0aWVyIGlzIGRldGVybWluZWQgYnkgdGhlIG51bWJlciBvZiBhY3RpdmUgcHVuaXNobWVudHNcclxuICAgICAgICAgIGlmIChhY3RpdmVQdW5pc2htZW50cy5sZW5ndGggPj0gdHJpZ2dlci52YWx1ZSkge1xyXG4gICAgICAgICAgICBjb25kaXRpb25NZXQgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIC8vIFRoaXMgYWNoaWV2ZW1lbnQncyB0cmlnZ2VyIGlzIG5vdCBoYW5kbGVkIGJ5IHRoaXMgc3BlY2lmaWMgaG9va1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChjb25kaXRpb25NZXQpIHtcclxuICAgICAgICB1bmxvY2tBY2hpZXZlbWVudChhY2hpZXZlbWVudC5pZCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgLy8gVGhpcyBlZmZlY3Qgc2hvdWxkIHJlLXJ1biB3aGVuZXZlciB0aGUgcGxheWVyJ3Mgc2hhbWUgb3IgcHVuaXNobWVudCBzdGF0dXMgY2hhbmdlcy5cclxuICB9LCBbc2hhbWUsIGFjdGl2ZVB1bmlzaG1lbnRzLCBhY2hpZXZlbWVudHMsIHVubG9ja0FjaGlldmVtZW50XSk7XHJcbn1cclxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZUFjaGlldmVtZW50cyIsInVzZVNoYW1lIiwidXNlUHVuaXNobWVudHMiLCJ1c2VTaGFtZUFjaGlldmVtZW50cyIsImFjaGlldmVtZW50cyIsInVubG9ja0FjaGlldmVtZW50Iiwic2hhbWUiLCJhY3RpdmVQdW5pc2htZW50cyIsImxlbmd0aCIsInNoYW1lQWNoaWV2ZW1lbnRzIiwiZmlsdGVyIiwiYSIsInVubG9ja2VkIiwiY2F0ZWdvcnkiLCJmb3JFYWNoIiwiYWNoaWV2ZW1lbnQiLCJ0cmlnZ2VyIiwiY29uZGl0aW9uTWV0IiwidHlwZSIsImNvdW50ZXIiLCJ2YWx1ZSIsImNvbmZlc3Npb25zIiwiaWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useShameAchievements.ts\n");

/***/ }),

/***/ "(ssr)/./app/lib/buffEngine.ts":
/*!*******************************!*\
  !*** ./app/lib/buffEngine.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BUFF_TYPE_OPTIONS: () => (/* binding */ BUFF_TYPE_OPTIONS),\n/* harmony export */   applyBuffs: () => (/* binding */ applyBuffs),\n/* harmony export */   cloneDefaultBuffs: () => (/* binding */ cloneDefaultBuffs),\n/* harmony export */   computeRemaining: () => (/* binding */ computeRemaining),\n/* harmony export */   isBuffActive: () => (/* binding */ isBuffActive),\n/* harmony export */   isBuffExpired: () => (/* binding */ isBuffExpired),\n/* harmony export */   parseDuration: () => (/* binding */ parseDuration)\n/* harmony export */ });\n/* harmony import */ var _data_buffs_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../data/buffs.json */ \"(ssr)/./data/buffs.json\");\n\nconst EVENT_TO_TYPES = {\n    xp: [\n        \"xpMultiplier\"\n    ],\n    obedience: [\n        \"obedienceGain\"\n    ],\n    tokens: [\n        \"tokenMultiplier\"\n    ],\n    clarity: [\n        \"clarityBoost\"\n    ]\n};\nconst DEFAULT_BUFFS = _data_buffs_json__WEBPACK_IMPORTED_MODULE_0__.map((buff)=>({\n        ...buff\n    }));\nconst BUFF_TYPE_OPTIONS = [\n    \"xpMultiplier\",\n    \"obedienceGain\",\n    \"tokenMultiplier\",\n    \"clarityBoost\"\n];\nfunction cloneDefaultBuffs() {\n    return DEFAULT_BUFFS.map((buff)=>({\n            ...buff\n        }));\n}\nfunction isBuffExpired(buff, now) {\n    if (!buff.expiresAt) return false;\n    return buff.expiresAt <= now;\n}\nfunction isBuffActive(buff, now) {\n    return buff.active && !isBuffExpired(buff, now);\n}\nfunction applyBuffs(buffs, event, baseValue, now = Date.now()) {\n    const applicableTypes = EVENT_TO_TYPES[event];\n    if (!applicableTypes || applicableTypes.length === 0) {\n        return {\n            value: baseValue,\n            multiplier: 1,\n            applied: [],\n            expiredIds: []\n        };\n    }\n    let multiplier = 1;\n    const applied = [];\n    const expiredIds = [];\n    for (const buff of buffs){\n        if (isBuffExpired(buff, now)) {\n            expiredIds.push(buff.id);\n            continue;\n        }\n        if (!buff.active) continue;\n        if (!applicableTypes.includes(buff.type)) continue;\n        multiplier *= buff.value;\n        applied.push(buff);\n    }\n    return {\n        value: baseValue * multiplier,\n        multiplier,\n        applied,\n        expiredIds\n    };\n}\nfunction parseDuration(duration) {\n    if (!duration) return null;\n    const pattern = /([0-9]+)\\s*(d|h|m|s)/gi;\n    let match;\n    let total = 0;\n    while(match = pattern.exec(duration)){\n        const amount = Number(match[1]);\n        const unit = match[2].toLowerCase();\n        if (Number.isNaN(amount)) continue;\n        switch(unit){\n            case \"d\":\n                total += amount * 24 * 60 * 60 * 1000;\n                break;\n            case \"h\":\n                total += amount * 60 * 60 * 1000;\n                break;\n            case \"m\":\n                total += amount * 60 * 1000;\n                break;\n            case \"s\":\n                total += amount * 1000;\n                break;\n            default:\n                break;\n        }\n    }\n    return total > 0 ? total : null;\n}\nfunction computeRemaining(buff, now = Date.now()) {\n    if (!buff.expiresAt) return null;\n    const remaining = buff.expiresAt - now;\n    return remaining > 0 ? remaining : 0;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0Q7SUFDbkMsT0FBTytCLFlBQVksSUFBSUEsWUFBWTtBQUNyQyIsInNvdXJjZXMiOlsiQzpcXE1vbW15IEx1Y3lcXFByb2plY3RzXFxMdWNpZCBEcmVhbVxcYXBwXFxsaWJcXGJ1ZmZFbmdpbmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmF1bHRCdWZmcyBmcm9tIFwiLi4vLi4vZGF0YS9idWZmcy5qc29uXCI7XG5cbmV4cG9ydCB0eXBlIEJ1ZmZFdmVudCA9IFwieHBcIiB8IFwib2JlZGllbmNlXCIgfCBcInRva2Vuc1wiIHwgXCJjbGFyaXR5XCI7XG5cbmV4cG9ydCB0eXBlIEJ1ZmZUeXBlID0gXCJ4cE11bHRpcGxpZXJcIiB8IFwib2JlZGllbmNlR2FpblwiIHwgXCJ0b2tlbk11bHRpcGxpZXJcIiB8IFwiY2xhcml0eUJvb3N0XCI7XG5cbmV4cG9ydCB0eXBlIEJ1ZmYgPSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgc291cmNlOiBzdHJpbmc7XG4gIHR5cGU6IEJ1ZmZUeXBlO1xuICB2YWx1ZTogbnVtYmVyO1xuICBhY3RpdmU6IGJvb2xlYW47XG4gIGljb24/OiBzdHJpbmc7XG4gIGNvbG9yPzogc3RyaW5nO1xuICBkdXJhdGlvbj86IHN0cmluZztcbiAgZXhwaXJlc0F0PzogbnVtYmVyIHwgbnVsbDtcbn07XG5cbmNvbnN0IEVWRU5UX1RPX1RZUEVTOiBSZWNvcmQ8QnVmZkV2ZW50LCBCdWZmVHlwZVtdPiA9IHtcbiAgeHA6IFtcInhwTXVsdGlwbGllclwiXSxcbiAgb2JlZGllbmNlOiBbXCJvYmVkaWVuY2VHYWluXCJdLFxuICB0b2tlbnM6IFtcInRva2VuTXVsdGlwbGllclwiXSxcbiAgY2xhcml0eTogW1wiY2xhcml0eUJvb3N0XCJdLFxufTtcblxuY29uc3QgREVGQVVMVF9CVUZGUyA9IChkZWZhdWx0QnVmZnMgYXMgQnVmZltdKS5tYXAoKGJ1ZmYpID0+ICh7IC4uLmJ1ZmYgfSkpO1xuXG5leHBvcnQgY29uc3QgQlVGRl9UWVBFX09QVElPTlM6IEJ1ZmZUeXBlW10gPSBbXG4gIFwieHBNdWx0aXBsaWVyXCIsXG4gIFwib2JlZGllbmNlR2FpblwiLFxuICBcInRva2VuTXVsdGlwbGllclwiLFxuICBcImNsYXJpdHlCb29zdFwiLFxuXTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lRGVmYXVsdEJ1ZmZzKCk6IEJ1ZmZbXSB7XG4gIHJldHVybiBERUZBVUxUX0JVRkZTLm1hcCgoYnVmZikgPT4gKHsgLi4uYnVmZiB9KSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0J1ZmZFeHBpcmVkKGJ1ZmY6IEJ1ZmYsIG5vdzogbnVtYmVyKTogYm9vbGVhbiB7XG4gIGlmICghYnVmZi5leHBpcmVzQXQpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIGJ1ZmYuZXhwaXJlc0F0IDw9IG5vdztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQnVmZkFjdGl2ZShidWZmOiBCdWZmLCBub3c6IG51bWJlcik6IGJvb2xlYW4ge1xuICByZXR1cm4gYnVmZi5hY3RpdmUgJiYgIWlzQnVmZkV4cGlyZWQoYnVmZiwgbm93KTtcbn1cblxuZXhwb3J0IHR5cGUgQnVmZkNhbGN1bGF0aW9uUmVzdWx0ID0ge1xuICB2YWx1ZTogbnVtYmVyO1xuICBtdWx0aXBsaWVyOiBudW1iZXI7XG4gIGFwcGxpZWQ6IEJ1ZmZbXTtcbiAgZXhwaXJlZElkczogc3RyaW5nW107XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlCdWZmcyhcbiAgYnVmZnM6IEJ1ZmZbXSxcbiAgZXZlbnQ6IEJ1ZmZFdmVudCxcbiAgYmFzZVZhbHVlOiBudW1iZXIsXG4gIG5vdzogbnVtYmVyID0gRGF0ZS5ub3coKVxuKTogQnVmZkNhbGN1bGF0aW9uUmVzdWx0IHtcbiAgY29uc3QgYXBwbGljYWJsZVR5cGVzID0gRVZFTlRfVE9fVFlQRVNbZXZlbnRdO1xuICBpZiAoIWFwcGxpY2FibGVUeXBlcyB8fCBhcHBsaWNhYmxlVHlwZXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHsgdmFsdWU6IGJhc2VWYWx1ZSwgbXVsdGlwbGllcjogMSwgYXBwbGllZDogW10sIGV4cGlyZWRJZHM6IFtdIH07XG4gIH1cblxuICBsZXQgbXVsdGlwbGllciA9IDE7XG4gIGNvbnN0IGFwcGxpZWQ6IEJ1ZmZbXSA9IFtdO1xuICBjb25zdCBleHBpcmVkSWRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIGZvciAoY29uc3QgYnVmZiBvZiBidWZmcykge1xuICAgIGlmIChpc0J1ZmZFeHBpcmVkKGJ1ZmYsIG5vdykpIHtcbiAgICAgIGV4cGlyZWRJZHMucHVzaChidWZmLmlkKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoIWJ1ZmYuYWN0aXZlKSBjb250aW51ZTtcbiAgICBpZiAoIWFwcGxpY2FibGVUeXBlcy5pbmNsdWRlcyhidWZmLnR5cGUpKSBjb250aW51ZTtcbiAgICBtdWx0aXBsaWVyICo9IGJ1ZmYudmFsdWU7XG4gICAgYXBwbGllZC5wdXNoKGJ1ZmYpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB2YWx1ZTogYmFzZVZhbHVlICogbXVsdGlwbGllcixcbiAgICBtdWx0aXBsaWVyLFxuICAgIGFwcGxpZWQsXG4gICAgZXhwaXJlZElkcyxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRHVyYXRpb24oZHVyYXRpb24/OiBzdHJpbmcgfCBudWxsKTogbnVtYmVyIHwgbnVsbCB7XG4gIGlmICghZHVyYXRpb24pIHJldHVybiBudWxsO1xuICBjb25zdCBwYXR0ZXJuID0gLyhbMC05XSspXFxzKihkfGh8bXxzKS9naTtcbiAgbGV0IG1hdGNoOiBSZWdFeHBFeGVjQXJyYXkgfCBudWxsO1xuICBsZXQgdG90YWwgPSAwO1xuICB3aGlsZSAoKG1hdGNoID0gcGF0dGVybi5leGVjKGR1cmF0aW9uKSkpIHtcbiAgICBjb25zdCBhbW91bnQgPSBOdW1iZXIobWF0Y2hbMV0pO1xuICAgIGNvbnN0IHVuaXQgPSBtYXRjaFsyXS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChOdW1iZXIuaXNOYU4oYW1vdW50KSkgY29udGludWU7XG4gICAgc3dpdGNoICh1bml0KSB7XG4gICAgICBjYXNlIFwiZFwiOlxuICAgICAgICB0b3RhbCArPSBhbW91bnQgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJoXCI6XG4gICAgICAgIHRvdGFsICs9IGFtb3VudCAqIDYwICogNjAgKiAxMDAwO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJtXCI6XG4gICAgICAgIHRvdGFsICs9IGFtb3VudCAqIDYwICogMTAwMDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwic1wiOlxuICAgICAgICB0b3RhbCArPSBhbW91bnQgKiAxMDAwO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdG90YWwgPiAwID8gdG90YWwgOiBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZVJlbWFpbmluZyhidWZmOiBCdWZmLCBub3c6IG51bWJlciA9IERhdGUubm93KCkpOiBudW1iZXIgfCBudWxsIHtcbiAgaWYgKCFidWZmLmV4cGlyZXNBdCkgcmV0dXJuIG51bGw7XG4gIGNvbnN0IHJlbWFpbmluZyA9IGJ1ZmYuZXhwaXJlc0F0IC0gbm93O1xuICByZXR1cm4gcmVtYWluaW5nID4gMCA/IHJlbWFpbmluZyA6IDA7XG59XG4iXSwibmFtZXMiOlsiZGVmYXVsdEJ1ZmZzIiwiRVZFTlRfVE9fVFlQRVMiLCJ4cCIsIm9iZWRpZW5jZSIsInRva2VucyIsImNsYXJpdHkiLCJERUZBVUxUX0JVRkZTIiwibWFwIiwiYnVmZiIsIkJVRkZfVFlQRV9PUFRJT05TIiwiY2xvbmVEZWZhdWx0QnVmZnMiLCJpc0J1ZmZFeHBpcmVkIiwibm93IiwiZXhwaXJlc0F0IiwiaXNCdWZmQWN0aXZlIiwiYWN0aXZlIiwiYXBwbHlCdWZmcyIsImJ1ZmZzIiwiZXZlbnQiLCJiYXNlVmFsdWUiLCJEYXRlIiwiYXBwbGljYWJsZVR5cGVzIiwibGVuZ3RoIiwidmFsdWUiLCJtdWx0aXBsaWVyIiwiYXBwbGllZCIsImV4cGlyZWRJZHMiLCJwdXNoIiwiaWQiLCJpbmNsdWRlcyIsInR5cGUiLCJwYXJzZUR1cmF0aW9uIiwiZHVyYXRpb24iLCJwYXR0ZXJuIiwibWF0Y2giLCJ0b3RhbCIsImV4ZWMiLCJhbW91bnQiLCJOdW1iZXIiLCJ1bml0IiwidG9Mb3dlckNhc2UiLCJpc05hTiIsImNvbXB1dGVSZW1haW5pbmciLCJyZW1haW5pbmciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/lib/buffEngine.ts\n");

/***/ }),

/***/ "(ssr)/./app/lib/companions.ts":
/*!*******************************!*\
  !*** ./app/lib/companions.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   COMPANION_BUFF_KEYS: () => (/* binding */ COMPANION_BUFF_KEYS),\n/* harmony export */   XP_EVENT_VALUES: () => (/* binding */ XP_EVENT_VALUES),\n/* harmony export */   canEvolve: () => (/* binding */ canEvolve),\n/* harmony export */   cloneCompanion: () => (/* binding */ cloneCompanion),\n/* harmony export */   cloneDefaultCompanions: () => (/* binding */ cloneDefaultCompanions),\n/* harmony export */   getActiveForm: () => (/* binding */ getActiveForm),\n/* harmony export */   getNextForm: () => (/* binding */ getNextForm),\n/* harmony export */   getXpForEvent: () => (/* binding */ getXpForEvent),\n/* harmony export */   getXpProgression: () => (/* binding */ getXpProgression),\n/* harmony export */   levelForXp: () => (/* binding */ levelForXp),\n/* harmony export */   totalXpToReachLevel: () => (/* binding */ totalXpToReachLevel),\n/* harmony export */   xpNeededForLevel: () => (/* binding */ xpNeededForLevel)\n/* harmony export */ });\n/* harmony import */ var _data_companions_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../data/companions.json */ \"(ssr)/./data/companions.json\");\n\nconst COMPANION_BUFF_KEYS = [\n    \"xpMultiplier\",\n    \"obedienceGain\",\n    \"tokenMultiplier\",\n    \"clarityBoost\"\n];\nconst DEFAULT_COMPANIONS = _data_companions_json__WEBPACK_IMPORTED_MODULE_0__.map((companion)=>cloneCompanion(companion));\nfunction cloneCompanion(companion) {\n    const normalisedForms = [\n        ...companion.evolutionTree\n    ].map((form, index)=>normaliseForm(form, index)).sort((a, b)=>(a.unlockLevel ?? 0) - (b.unlockLevel ?? 0));\n    const currentForm = normalisedForms.find((form)=>form.id === companion.currentForm)?.id ?? normalisedForms[0]?.id ?? companion.currentForm;\n    const level = Math.max(1, Number(companion.level) || 1);\n    const carryOverXp = Math.max(0, Number(companion.xp) || 0);\n    const sanitisedXp = clampXp(carryOverXp, level);\n    return {\n        ...companion,\n        level,\n        xp: sanitisedXp,\n        autoEvolve: Boolean(companion.autoEvolve),\n        currentForm,\n        evolutionTree: normalisedForms\n    };\n}\nfunction cloneDefaultCompanions() {\n    return DEFAULT_COMPANIONS.map((companion)=>cloneCompanion(companion));\n}\nfunction normaliseForm(form, index) {\n    const unlockLevel = typeof form.unlockLevel === \"number\" ? Math.max(1, form.unlockLevel) : index === 0 ? 1 : 1 + index * 2;\n    return {\n        ...form,\n        unlockLevel,\n        buff: form.buff ? {\n            ...form.buff\n        } : undefined\n    };\n}\nfunction clampXp(xp, level) {\n    const capacity = xpNeededForLevel(level + 1);\n    if (capacity <= 0) return 0;\n    return Math.min(xp, capacity - 1);\n}\nfunction getActiveForm(companion) {\n    if (!companion || !companion.evolutionTree) {\n        return undefined;\n    }\n    return companion.evolutionTree.find((form)=>form.id === companion.currentForm);\n}\nfunction getNextForm(companion) {\n    // ✅ FIX: Guard against undefined evolutionTree\n    if (!companion?.evolutionTree) {\n        return undefined;\n    }\n    const next = companion.evolutionTree.filter((form)=>form.unlockLevel > (getActiveForm(companion)?.unlockLevel ?? 0)).sort((a, b)=>a.unlockLevel - b.unlockLevel)[0];\n    return next;\n}\nfunction canEvolve(companion) {\n    const next = getNextForm(companion);\n    if (!next) return false;\n    return companion.level >= next.unlockLevel;\n}\nconst XP_EVENT_VALUES = {\n    dream: 10,\n    ritual: 20,\n    quest: 50,\n    panty: 30\n};\nfunction getXpForEvent(event) {\n    return XP_EVENT_VALUES[event] ?? 0;\n}\nfunction levelForXp(level, xp) {\n    let currentLevel = level;\n    let remainingXp = xp;\n    while(remainingXp >= xpNeededForLevel(currentLevel + 1)){\n        remainingXp -= xpNeededForLevel(currentLevel + 1);\n        currentLevel += 1;\n    }\n    return currentLevel;\n}\nfunction xpNeededForLevel(targetLevel) {\n    if (targetLevel <= 1) return 0;\n    return Math.max(20, targetLevel * 20);\n}\nfunction totalXpToReachLevel(level) {\n    if (level <= 1) return 0;\n    let total = 0;\n    for(let current = 2; current <= level; current += 1){\n        total += xpNeededForLevel(current);\n    }\n    return total;\n}\nfunction getXpProgression(companion) {\n    const nextLevel = companion.level + 1;\n    const needed = xpNeededForLevel(nextLevel);\n    return {\n        level: companion.level,\n        current: companion.xp,\n        needed,\n        ratio: needed <= 0 ? 0 : Math.max(0, Math.min(1, companion.xp / needed))\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aWQgRHJlYW1cXGFwcFxcbGliXFxjb21wYW5pb25zLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkZWZhdWx0Q29tcGFuaW9ucyBmcm9tIFwiLi4vLi4vZGF0YS9jb21wYW5pb25zLmpzb25cIjtcblxuZXhwb3J0IHR5cGUgQ29tcGFuaW9uQnVmZiA9IHtcbiAgeHBNdWx0aXBsaWVyPzogbnVtYmVyO1xuICBvYmVkaWVuY2VHYWluPzogbnVtYmVyO1xuICB0b2tlbk11bHRpcGxpZXI/OiBudW1iZXI7XG4gIGNsYXJpdHlCb29zdD86IG51bWJlcjtcbn07XG5cbmV4cG9ydCB0eXBlIENvbXBhbmlvbkJ1ZmZLZXkgPSBrZXlvZiBDb21wYW5pb25CdWZmO1xuXG5leHBvcnQgY29uc3QgQ09NUEFOSU9OX0JVRkZfS0VZUzogQ29tcGFuaW9uQnVmZktleVtdID0gW1xuICBcInhwTXVsdGlwbGllclwiLFxuICBcIm9iZWRpZW5jZUdhaW5cIixcbiAgXCJ0b2tlbk11bHRpcGxpZXJcIixcbiAgXCJjbGFyaXR5Qm9vc3RcIixcbl07XG5cbmV4cG9ydCB0eXBlIENvbXBhbmlvbkZvcm0gPSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgdW5sb2NrTGV2ZWw6IG51bWJlcjtcbiAgYnVmZj86IENvbXBhbmlvbkJ1ZmY7XG4gIGljb24/OiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgQ29tcGFuaW9uID0ge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGxldmVsOiBudW1iZXI7XG4gIHhwOiBudW1iZXI7XG4gIGJvbmQ6IG51bWJlcjtcbiAgbG9yZT86IHN0cmluZztcbiAgZXZvbHV0aW9uVHJlZTogQ29tcGFuaW9uRm9ybVtdO1xuICBjdXJyZW50Rm9ybTogc3RyaW5nO1xuICBhdXRvRXZvbHZlPzogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCB0eXBlIENvbXBhbmlvblhwRXZlbnQgPSBcImRyZWFtXCIgfCBcInJpdHVhbFwiIHwgXCJxdWVzdFwiIHwgXCJwYW50eVwiO1xuXG5jb25zdCBERUZBVUxUX0NPTVBBTklPTlMgPSAoZGVmYXVsdENvbXBhbmlvbnMgYXMgQ29tcGFuaW9uW10pLm1hcCgoY29tcGFuaW9uKSA9PiBjbG9uZUNvbXBhbmlvbihjb21wYW5pb24pKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lQ29tcGFuaW9uKGNvbXBhbmlvbjogQ29tcGFuaW9uKTogQ29tcGFuaW9uIHtcbiAgY29uc3Qgbm9ybWFsaXNlZEZvcm1zID0gWy4uLmNvbXBhbmlvbi5ldm9sdXRpb25UcmVlXVxuICAgIC5tYXAoKGZvcm0sIGluZGV4KSA9PiBub3JtYWxpc2VGb3JtKGZvcm0sIGluZGV4KSlcbiAgICAuc29ydCgoYSwgYikgPT4gKGEudW5sb2NrTGV2ZWwgPz8gMCkgLSAoYi51bmxvY2tMZXZlbCA/PyAwKSk7XG5cbiAgY29uc3QgY3VycmVudEZvcm0gPSBub3JtYWxpc2VkRm9ybXMuZmluZCgoZm9ybSkgPT4gZm9ybS5pZCA9PT0gY29tcGFuaW9uLmN1cnJlbnRGb3JtKT8uaWRcbiAgICA/PyBub3JtYWxpc2VkRm9ybXNbMF0/LmlkXG4gICAgPz8gY29tcGFuaW9uLmN1cnJlbnRGb3JtO1xuXG4gIGNvbnN0IGxldmVsID0gTWF0aC5tYXgoMSwgTnVtYmVyKGNvbXBhbmlvbi5sZXZlbCkgfHwgMSk7XG4gIGNvbnN0IGNhcnJ5T3ZlclhwID0gTWF0aC5tYXgoMCwgTnVtYmVyKGNvbXBhbmlvbi54cCkgfHwgMCk7XG4gIGNvbnN0IHNhbml0aXNlZFhwID0gY2xhbXBYcChjYXJyeU92ZXJYcCwgbGV2ZWwpO1xuXG4gIHJldHVybiB7XG4gICAgLi4uY29tcGFuaW9uLFxuICAgIGxldmVsLFxuICAgIHhwOiBzYW5pdGlzZWRYcCxcbiAgICBhdXRvRXZvbHZlOiBCb29sZWFuKGNvbXBhbmlvbi5hdXRvRXZvbHZlKSxcbiAgICBjdXJyZW50Rm9ybSxcbiAgICBldm9sdXRpb25UcmVlOiBub3JtYWxpc2VkRm9ybXMsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZURlZmF1bHRDb21wYW5pb25zKCk6IENvbXBhbmlvbltdIHtcbiAgcmV0dXJuIERFRkFVTFRfQ09NUEFOSU9OUy5tYXAoKGNvbXBhbmlvbikgPT4gY2xvbmVDb21wYW5pb24oY29tcGFuaW9uKSk7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGlzZUZvcm0oZm9ybTogQ29tcGFuaW9uRm9ybSwgaW5kZXg6IG51bWJlcik6IENvbXBhbmlvbkZvcm0ge1xuICBjb25zdCB1bmxvY2tMZXZlbCA9IHR5cGVvZiBmb3JtLnVubG9ja0xldmVsID09PSBcIm51bWJlclwiXG4gICAgPyBNYXRoLm1heCgxLCBmb3JtLnVubG9ja0xldmVsKVxuICAgIDogaW5kZXggPT09IDBcbiAgICAgID8gMVxuICAgICAgOiAxICsgaW5kZXggKiAyO1xuXG4gIHJldHVybiB7XG4gICAgLi4uZm9ybSxcbiAgICB1bmxvY2tMZXZlbCxcbiAgICBidWZmOiBmb3JtLmJ1ZmYgPyB7IC4uLmZvcm0uYnVmZiB9IDogdW5kZWZpbmVkLFxuICB9O1xufVxuXG5mdW5jdGlvbiBjbGFtcFhwKHhwOiBudW1iZXIsIGxldmVsOiBudW1iZXIpOiBudW1iZXIge1xuICBjb25zdCBjYXBhY2l0eSA9IHhwTmVlZGVkRm9yTGV2ZWwobGV2ZWwgKyAxKTtcbiAgaWYgKGNhcGFjaXR5IDw9IDApIHJldHVybiAwO1xuICByZXR1cm4gTWF0aC5taW4oeHAsIGNhcGFjaXR5IC0gMSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBY3RpdmVGb3JtKGNvbXBhbmlvbjogQ29tcGFuaW9uKTogQ29tcGFuaW9uRm9ybSB8IHVuZGVmaW5lZCB7XG4gIGlmICghY29tcGFuaW9uIHx8ICFjb21wYW5pb24uZXZvbHV0aW9uVHJlZSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIGNvbXBhbmlvbi5ldm9sdXRpb25UcmVlLmZpbmQoKGZvcm0pID0+IGZvcm0uaWQgPT09IGNvbXBhbmlvbi5jdXJyZW50Rm9ybSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXROZXh0Rm9ybShjb21wYW5pb246IENvbXBhbmlvbik6IENvbXBhbmlvbkZvcm0gfCB1bmRlZmluZWQge1xuICAvLyDinIUgRklYOiBHdWFyZCBhZ2FpbnN0IHVuZGVmaW5lZCBldm9sdXRpb25UcmVlXG4gIGlmICghY29tcGFuaW9uPy5ldm9sdXRpb25UcmVlKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBcbiAgY29uc3QgbmV4dCA9IGNvbXBhbmlvbi5ldm9sdXRpb25UcmVlXG4gICAgLmZpbHRlcigoZm9ybSkgPT4gZm9ybS51bmxvY2tMZXZlbCA+IChnZXRBY3RpdmVGb3JtKGNvbXBhbmlvbik/LnVubG9ja0xldmVsID8/IDApKVxuICAgIC5zb3J0KChhLCBiKSA9PiBhLnVubG9ja0xldmVsIC0gYi51bmxvY2tMZXZlbClbMF07XG4gIHJldHVybiBuZXh0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FuRXZvbHZlKGNvbXBhbmlvbjogQ29tcGFuaW9uKTogYm9vbGVhbiB7XG4gIGNvbnN0IG5leHQgPSBnZXROZXh0Rm9ybShjb21wYW5pb24pO1xuICBpZiAoIW5leHQpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIGNvbXBhbmlvbi5sZXZlbCA+PSBuZXh0LnVubG9ja0xldmVsO1xufVxuXG5leHBvcnQgY29uc3QgWFBfRVZFTlRfVkFMVUVTOiBSZWNvcmQ8Q29tcGFuaW9uWHBFdmVudCwgbnVtYmVyPiA9IHtcbiAgZHJlYW06IDEwLFxuICByaXR1YWw6IDIwLFxuICBxdWVzdDogNTAsXG4gIHBhbnR5OiAzMCxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRYcEZvckV2ZW50KGV2ZW50OiBDb21wYW5pb25YcEV2ZW50KTogbnVtYmVyIHtcbiAgcmV0dXJuIFhQX0VWRU5UX1ZBTFVFU1tldmVudF0gPz8gMDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxldmVsRm9yWHAobGV2ZWw6IG51bWJlciwgeHA6IG51bWJlcik6IG51bWJlciB7XG4gIGxldCBjdXJyZW50TGV2ZWwgPSBsZXZlbDtcbiAgbGV0IHJlbWFpbmluZ1hwID0geHA7XG4gIHdoaWxlIChyZW1haW5pbmdYcCA+PSB4cE5lZWRlZEZvckxldmVsKGN1cnJlbnRMZXZlbCArIDEpKSB7XG4gICAgcmVtYWluaW5nWHAgLT0geHBOZWVkZWRGb3JMZXZlbChjdXJyZW50TGV2ZWwgKyAxKTtcbiAgICBjdXJyZW50TGV2ZWwgKz0gMTtcbiAgfVxuICByZXR1cm4gY3VycmVudExldmVsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24geHBOZWVkZWRGb3JMZXZlbCh0YXJnZXRMZXZlbDogbnVtYmVyKTogbnVtYmVyIHtcbiAgaWYgKHRhcmdldExldmVsIDw9IDEpIHJldHVybiAwO1xuICByZXR1cm4gTWF0aC5tYXgoMjAsIHRhcmdldExldmVsICogMjApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG90YWxYcFRvUmVhY2hMZXZlbChsZXZlbDogbnVtYmVyKTogbnVtYmVyIHtcbiAgaWYgKGxldmVsIDw9IDEpIHJldHVybiAwO1xuICBsZXQgdG90YWwgPSAwO1xuICBmb3IgKGxldCBjdXJyZW50ID0gMjsgY3VycmVudCA8PSBsZXZlbDsgY3VycmVudCArPSAxKSB7XG4gICAgdG90YWwgKz0geHBOZWVkZWRGb3JMZXZlbChjdXJyZW50KTtcbiAgfVxuICByZXR1cm4gdG90YWw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRYcFByb2dyZXNzaW9uKGNvbXBhbmlvbjogQ29tcGFuaW9uKSB7XG4gIGNvbnN0IG5leHRMZXZlbCA9IGNvbXBhbmlvbi5sZXZlbCArIDE7XG4gIGNvbnN0IG5lZWRlZCA9IHhwTmVlZGVkRm9yTGV2ZWwobmV4dExldmVsKTtcbiAgcmV0dXJuIHtcbiAgICBsZXZlbDogY29tcGFuaW9uLmxldmVsLFxuICAgIGN1cnJlbnQ6IGNvbXBhbmlvbi54cCxcbiAgICBuZWVkZWQsXG4gICAgcmF0aW86IG5lZWRlZCA8PSAwID8gMCA6IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIGNvbXBhbmlvbi54cCAvIG5lZWRlZCkpLFxuICB9O1xufVxuIl0sIm5hbWVzIjpbImRlZmF1bHRDb21wYW5pb25zIiwiQ09NUEFOSU9OX0JVRkZfS0VZUyIsIkRFRkFVTFRfQ09NUEFOSU9OUyIsIm1hcCIsImNvbXBhbmlvbiIsImNsb25lQ29tcGFuaW9uIiwibm9ybWFsaXNlZEZvcm1zIiwiZXZvbHV0aW9uVHJlZSIsImZvcm0iLCJpbmRleCIsIm5vcm1hbGlzZUZvcm0iLCJzb3J0IiwiYSIsImIiLCJ1bmxvY2tMZXZlbCIsImN1cnJlbnRGb3JtIiwiZmluZCIsImlkIiwibGV2ZWwiLCJNYXRoIiwibWF4IiwiTnVtYmVyIiwiY2FycnlPdmVyWHAiLCJ4cCIsInNhbml0aXNlZFhwIiwiY2xhbXBYcCIsImF1dG9Fdm9sdmUiLCJCb29sZWFuIiwiY2xvbmVEZWZhdWx0Q29tcGFuaW9ucyIsImJ1ZmYiLCJ1bmRlZmluZWQiLCJjYXBhY2l0eSIsInhwTmVlZGVkRm9yTGV2ZWwiLCJtaW4iLCJnZXRBY3RpdmVGb3JtIiwiZ2V0TmV4dEZvcm0iLCJuZXh0IiwiZmlsdGVyIiwiY2FuRXZvbHZlIiwiWFBfRVZFTlRfVkFMVUVTIiwiZHJlYW0iLCJyaXR1YWwiLCJxdWVzdCIsInBhbnR5IiwiZ2V0WHBGb3JFdmVudCIsImV2ZW50IiwibGV2ZWxGb3JYcCIsImN1cnJlbnRMZXZlbCIsInJlbWFpbmluZ1hwIiwidGFyZ2V0TGV2ZWwiLCJ0b3RhbFhwVG9SZWFjaExldmVsIiwidG90YWwiLCJjdXJyZW50IiwiZ2V0WHBQcm9ncmVzc2lvbiIsIm5leHRMZXZlbCIsIm5lZWRlZCIsInJhdGlvIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/lib/companions.ts\n");

/***/ }),

/***/ "(ssr)/./app/lib/dungeons.ts":
/*!*****************************!*\
  !*** ./app/lib/dungeons.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cloneDefaultDungeons: () => (/* binding */ cloneDefaultDungeons),\n/* harmony export */   cloneDungeon: () => (/* binding */ cloneDungeon),\n/* harmony export */   ensureDungeon: () => (/* binding */ ensureDungeon),\n/* harmony export */   ensureRoom: () => (/* binding */ ensureRoom)\n/* harmony export */ });\n/* harmony import */ var _data_dungeons_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../data/dungeons.json */ \"(ssr)/./data/dungeons.json\");\n\nconst DEFAULT_DUNGEONS = _data_dungeons_json__WEBPACK_IMPORTED_MODULE_0__.map((dungeon)=>cloneDungeon(dungeon));\nfunction cloneDungeon(dungeon) {\n    return {\n        ...dungeon,\n        rooms: dungeon.rooms.map((room)=>({\n                ...room,\n                loot: room.loot ? [\n                    ...room.loot\n                ] : undefined\n            })),\n        completed: Boolean(dungeon.completed)\n    };\n}\nfunction cloneDefaultDungeons() {\n    return DEFAULT_DUNGEONS.map((dungeon)=>cloneDungeon(dungeon));\n}\nfunction ensureRoom(room) {\n    return {\n        ...room,\n        loot: room.loot ? [\n            ...room.loot\n        ] : undefined,\n        xp: Math.max(0, Number(room.xp ?? 0))\n    };\n}\nfunction ensureDungeon(dungeon) {\n    return {\n        ...dungeon,\n        name: dungeon.name || \"Untitled Dungeon\",\n        rooms: dungeon.rooms.map(ensureRoom),\n        completed: Boolean(dungeon.completed)\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvbGliL2R1bmdlb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXVEO0FBbUJ2RCxNQUFNQyxtQkFBOEIsaURBQStCQyxHQUFHLENBQUMsQ0FBQ0MsVUFDdEVDLGFBQWFEO0FBR1IsU0FBU0MsYUFBYUQsT0FBZ0I7SUFDM0MsT0FBTztRQUNMLEdBQUdBLE9BQU87UUFDVkUsT0FBT0YsUUFBUUUsS0FBSyxDQUFDSCxHQUFHLENBQUMsQ0FBQ0ksT0FBVTtnQkFDbEMsR0FBR0EsSUFBSTtnQkFDUEMsTUFBTUQsS0FBS0MsSUFBSSxHQUFHO3VCQUFJRCxLQUFLQyxJQUFJO2lCQUFDLEdBQUdDO1lBQ3JDO1FBQ0FDLFdBQVdDLFFBQVFQLFFBQVFNLFNBQVM7SUFDdEM7QUFDRjtBQUVPLFNBQVNFO0lBQ2QsT0FBT1YsaUJBQWlCQyxHQUFHLENBQUMsQ0FBQ0MsVUFBWUMsYUFBYUQ7QUFDeEQ7QUFFTyxTQUFTUyxXQUFXTixJQUFpQjtJQUMxQyxPQUFPO1FBQ0wsR0FBR0EsSUFBSTtRQUNQQyxNQUFNRCxLQUFLQyxJQUFJLEdBQUc7ZUFBSUQsS0FBS0MsSUFBSTtTQUFDLEdBQUdDO1FBQ25DSyxJQUFJQyxLQUFLQyxHQUFHLENBQUMsR0FBR0MsT0FBT1YsS0FBS08sRUFBRSxJQUFJO0lBQ3BDO0FBQ0Y7QUFFTyxTQUFTSSxjQUFjZCxPQUFnQjtJQUM1QyxPQUFPO1FBQ0wsR0FBR0EsT0FBTztRQUNWZSxNQUFNZixRQUFRZSxJQUFJLElBQUk7UUFDdEJiLE9BQU9GLFFBQVFFLEtBQUssQ0FBQ0gsR0FBRyxDQUFDVTtRQUN6QkgsV0FBV0MsUUFBUVAsUUFBUU0sU0FBUztJQUN0QztBQUNGIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXGxpYlxcZHVuZ2VvbnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmF1bHREdW5nZW9ucyBmcm9tIFwiLi4vLi4vZGF0YS9kdW5nZW9ucy5qc29uXCI7XG5cbmV4cG9ydCB0eXBlIER1bmdlb25Sb29tVHlwZSA9IFwiZW5jb3VudGVyXCIgfCBcImV2ZW50XCIgfCBcImJvc3NcIjtcblxuZXhwb3J0IHR5cGUgRHVuZ2VvblJvb20gPSB7XG4gIGlkOiBzdHJpbmc7XG4gIHR5cGU6IER1bmdlb25Sb29tVHlwZTtcbiAgZGVzYzogc3RyaW5nO1xuICBsb290Pzogc3RyaW5nW107XG4gIHhwPzogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgRHVuZ2VvbiA9IHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICByb29tczogRHVuZ2VvblJvb21bXTtcbiAgY29tcGxldGVkPzogYm9vbGVhbjtcbn07XG5cbmNvbnN0IERFRkFVTFRfRFVOR0VPTlM6IER1bmdlb25bXSA9IChkZWZhdWx0RHVuZ2VvbnMgYXMgRHVuZ2VvbltdKS5tYXAoKGR1bmdlb24pID0+XG4gIGNsb25lRHVuZ2VvbihkdW5nZW9uKVxuKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lRHVuZ2VvbihkdW5nZW9uOiBEdW5nZW9uKTogRHVuZ2VvbiB7XG4gIHJldHVybiB7XG4gICAgLi4uZHVuZ2VvbixcbiAgICByb29tczogZHVuZ2Vvbi5yb29tcy5tYXAoKHJvb20pID0+ICh7XG4gICAgICAuLi5yb29tLFxuICAgICAgbG9vdDogcm9vbS5sb290ID8gWy4uLnJvb20ubG9vdF0gOiB1bmRlZmluZWQsXG4gICAgfSkpLFxuICAgIGNvbXBsZXRlZDogQm9vbGVhbihkdW5nZW9uLmNvbXBsZXRlZCksXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZURlZmF1bHREdW5nZW9ucygpOiBEdW5nZW9uW10ge1xuICByZXR1cm4gREVGQVVMVF9EVU5HRU9OUy5tYXAoKGR1bmdlb24pID0+IGNsb25lRHVuZ2VvbihkdW5nZW9uKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVSb29tKHJvb206IER1bmdlb25Sb29tKTogRHVuZ2VvblJvb20ge1xuICByZXR1cm4ge1xuICAgIC4uLnJvb20sXG4gICAgbG9vdDogcm9vbS5sb290ID8gWy4uLnJvb20ubG9vdF0gOiB1bmRlZmluZWQsXG4gICAgeHA6IE1hdGgubWF4KDAsIE51bWJlcihyb29tLnhwID8/IDApKSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZUR1bmdlb24oZHVuZ2VvbjogRHVuZ2Vvbik6IER1bmdlb24ge1xuICByZXR1cm4ge1xuICAgIC4uLmR1bmdlb24sXG4gICAgbmFtZTogZHVuZ2Vvbi5uYW1lIHx8IFwiVW50aXRsZWQgRHVuZ2VvblwiLFxuICAgIHJvb21zOiBkdW5nZW9uLnJvb21zLm1hcChlbnN1cmVSb29tKSxcbiAgICBjb21wbGV0ZWQ6IEJvb2xlYW4oZHVuZ2Vvbi5jb21wbGV0ZWQpLFxuICB9O1xufVxuIl0sIm5hbWVzIjpbImRlZmF1bHREdW5nZW9ucyIsIkRFRkFVTFRfRFVOR0VPTlMiLCJtYXAiLCJkdW5nZW9uIiwiY2xvbmVEdW5nZW9uIiwicm9vbXMiLCJyb29tIiwibG9vdCIsInVuZGVmaW5lZCIsImNvbXBsZXRlZCIsIkJvb2xlYW4iLCJjbG9uZURlZmF1bHREdW5nZW9ucyIsImVuc3VyZVJvb20iLCJ4cCIsIk1hdGgiLCJtYXgiLCJOdW1iZXIiLCJlbnN1cmVEdW5nZW9uIiwibmFtZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/lib/dungeons.ts\n");

/***/ }),

/***/ "(ssr)/./app/lib/inventory.ts":
/*!******************************!*\
  !*** ./app/lib/inventory.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ITEM_TYPE_LABELS: () => (/* binding */ ITEM_TYPE_LABELS),\n/* harmony export */   ITEM_TYPE_ORDER: () => (/* binding */ ITEM_TYPE_ORDER),\n/* harmony export */   cloneDefaultInventory: () => (/* binding */ cloneDefaultInventory),\n/* harmony export */   getDefaultIcon: () => (/* binding */ getDefaultIcon),\n/* harmony export */   getDefaultItemTemplate: () => (/* binding */ getDefaultItemTemplate),\n/* harmony export */   isEquippable: () => (/* binding */ isEquippable)\n/* harmony export */ });\n/* harmony import */ var _data_items_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../data/items.json */ \"(ssr)/./data/items.json\");\n\nconst ITEM_TYPE_LABELS = {\n    relic: \"Relics\",\n    panty: \"Panties\",\n    shard: \"Dream Shards\",\n    consumable: \"Consumables\",\n    quest: \"Quest Items\"\n};\nconst ITEM_TYPE_ORDER = [\n    \"relic\",\n    \"panty\",\n    \"shard\",\n    \"consumable\",\n    \"quest\"\n];\nconst DEFAULT_ITEMS = _data_items_json__WEBPACK_IMPORTED_MODULE_0__.map((item)=>({\n        ...item\n    }));\nfunction cloneDefaultInventory() {\n    return DEFAULT_ITEMS.map((item)=>({\n            ...item\n        }));\n}\nfunction getDefaultItemTemplate(id) {\n    const template = DEFAULT_ITEMS.find((item)=>item.id === id);\n    return template ? {\n        ...template\n    } : undefined;\n}\nfunction isEquippable(item) {\n    return item.type === \"relic\" || item.type === \"panty\";\n}\nfunction getDefaultIcon(type) {\n    switch(type){\n        case \"relic\":\n            return \"🪬\";\n        case \"panty\":\n            return \"🩲\";\n        case \"shard\":\n            return \"💎\";\n        case \"consumable\":\n            return \"🧪\";\n        case \"quest\":\n            return \"📜\";\n        default:\n            return \"✨\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvbGliL2ludmVudG9yeS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWlEO0FBYzFDLE1BQU1DLG1CQUE2QztJQUN4REMsT0FBTztJQUNQQyxPQUFPO0lBQ1BDLE9BQU87SUFDUEMsWUFBWTtJQUNaQyxPQUFPO0FBQ1QsRUFBRTtBQUVLLE1BQU1DLGtCQUE4QjtJQUN6QztJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0QsQ0FBQztBQUVGLE1BQU1DLGdCQUFnQiw4Q0FBa0NDLEdBQUcsQ0FBQyxDQUFDQyxPQUFVO1FBQUUsR0FBR0EsSUFBSTtJQUFDO0FBRTFFLFNBQVNDO0lBQ2QsT0FBT0gsY0FBY0MsR0FBRyxDQUFDLENBQUNDLE9BQVU7WUFBRSxHQUFHQSxJQUFJO1FBQUM7QUFDaEQ7QUFFTyxTQUFTRSx1QkFBdUJDLEVBQVU7SUFDL0MsTUFBTUMsV0FBV04sY0FBY08sSUFBSSxDQUFDLENBQUNMLE9BQVNBLEtBQUtHLEVBQUUsS0FBS0E7SUFDMUQsT0FBT0MsV0FBVztRQUFFLEdBQUdBLFFBQVE7SUFBQyxJQUFJRTtBQUN0QztBQUVPLFNBQVNDLGFBQWFQLElBQW1CO0lBQzlDLE9BQU9BLEtBQUtRLElBQUksS0FBSyxXQUFXUixLQUFLUSxJQUFJLEtBQUs7QUFDaEQ7QUFFTyxTQUFTQyxlQUFlRCxJQUFjO0lBQzNDLE9BQVFBO1FBQ04sS0FBSztZQUNILE9BQU87UUFDVCxLQUFLO1lBQ0gsT0FBTztRQUNULEtBQUs7WUFDSCxPQUFPO1FBQ1QsS0FBSztZQUNILE9BQU87UUFDVCxLQUFLO1lBQ0gsT0FBTztRQUNUO1lBQ0UsT0FBTztJQUNYO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxNb21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxcbGliXFxpbnZlbnRvcnkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmF1bHRJdGVtcyBmcm9tIFwiLi4vLi4vZGF0YS9pdGVtcy5qc29uXCI7XG5cbmV4cG9ydCB0eXBlIEl0ZW1UeXBlID0gXCJyZWxpY1wiIHwgXCJwYW50eVwiIHwgXCJzaGFyZFwiIHwgXCJjb25zdW1hYmxlXCIgfCBcInF1ZXN0XCI7XG5cbmV4cG9ydCB0eXBlIEludmVudG9yeUl0ZW0gPSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgdHlwZTogSXRlbVR5cGU7XG4gIGRlc2M6IHN0cmluZztcbiAgb3duZWQ6IG51bWJlcjtcbiAgaWNvbj86IHN0cmluZztcbiAgZXF1aXBwZWQ/OiBib29sZWFuO1xufTtcblxuZXhwb3J0IGNvbnN0IElURU1fVFlQRV9MQUJFTFM6IFJlY29yZDxJdGVtVHlwZSwgc3RyaW5nPiA9IHtcbiAgcmVsaWM6IFwiUmVsaWNzXCIsXG4gIHBhbnR5OiBcIlBhbnRpZXNcIixcbiAgc2hhcmQ6IFwiRHJlYW0gU2hhcmRzXCIsXG4gIGNvbnN1bWFibGU6IFwiQ29uc3VtYWJsZXNcIixcbiAgcXVlc3Q6IFwiUXVlc3QgSXRlbXNcIixcbn07XG5cbmV4cG9ydCBjb25zdCBJVEVNX1RZUEVfT1JERVI6IEl0ZW1UeXBlW10gPSBbXG4gIFwicmVsaWNcIixcbiAgXCJwYW50eVwiLFxuICBcInNoYXJkXCIsXG4gIFwiY29uc3VtYWJsZVwiLFxuICBcInF1ZXN0XCIsXG5dO1xuXG5jb25zdCBERUZBVUxUX0lURU1TID0gKGRlZmF1bHRJdGVtcyBhcyBJbnZlbnRvcnlJdGVtW10pLm1hcCgoaXRlbSkgPT4gKHsgLi4uaXRlbSB9KSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZURlZmF1bHRJbnZlbnRvcnkoKTogSW52ZW50b3J5SXRlbVtdIHtcbiAgcmV0dXJuIERFRkFVTFRfSVRFTVMubWFwKChpdGVtKSA9PiAoeyAuLi5pdGVtIH0pKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRJdGVtVGVtcGxhdGUoaWQ6IHN0cmluZyk6IEludmVudG9yeUl0ZW0gfCB1bmRlZmluZWQge1xuICBjb25zdCB0ZW1wbGF0ZSA9IERFRkFVTFRfSVRFTVMuZmluZCgoaXRlbSkgPT4gaXRlbS5pZCA9PT0gaWQpO1xuICByZXR1cm4gdGVtcGxhdGUgPyB7IC4uLnRlbXBsYXRlIH0gOiB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0VxdWlwcGFibGUoaXRlbTogSW52ZW50b3J5SXRlbSk6IGJvb2xlYW4ge1xuICByZXR1cm4gaXRlbS50eXBlID09PSBcInJlbGljXCIgfHwgaXRlbS50eXBlID09PSBcInBhbnR5XCI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0SWNvbih0eXBlOiBJdGVtVHlwZSk6IHN0cmluZyB7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgXCJyZWxpY1wiOlxuICAgICAgcmV0dXJuIFwi8J+qrFwiO1xuICAgIGNhc2UgXCJwYW50eVwiOlxuICAgICAgcmV0dXJuIFwi8J+pslwiO1xuICAgIGNhc2UgXCJzaGFyZFwiOlxuICAgICAgcmV0dXJuIFwi8J+SjlwiO1xuICAgIGNhc2UgXCJjb25zdW1hYmxlXCI6XG4gICAgICByZXR1cm4gXCLwn6eqXCI7XG4gICAgY2FzZSBcInF1ZXN0XCI6XG4gICAgICByZXR1cm4gXCLwn5OcXCI7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBcIuKcqFwiO1xuICB9XG59XG4iXSwibmFtZXMiOlsiZGVmYXVsdEl0ZW1zIiwiSVRFTV9UWVBFX0xBQkVMUyIsInJlbGljIiwicGFudHkiLCJzaGFyZCIsImNvbnN1bWFibGUiLCJxdWVzdCIsIklURU1fVFlQRV9PUkRFUiIsIkRFRkFVTFRfSVRFTVMiLCJtYXAiLCJpdGVtIiwiY2xvbmVEZWZhdWx0SW52ZW50b3J5IiwiZ2V0RGVmYXVsdEl0ZW1UZW1wbGF0ZSIsImlkIiwidGVtcGxhdGUiLCJmaW5kIiwidW5kZWZpbmVkIiwiaXNFcXVpcHBhYmxlIiwidHlwZSIsImdldERlZmF1bHRJY29uIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/lib/inventory.ts\n");

/***/ }),

/***/ "(ssr)/./app/lib/map.ts":
/*!************************!*\
  !*** ./app/lib/map.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cloneDefaultMap: () => (/* binding */ cloneDefaultMap)\n/* harmony export */ });\n/* harmony import */ var _data_map_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../data/map.json */ \"(ssr)/./data/map.json\");\n\nfunction cloneDefaultMap() {\n    // The defaultMap is already a JS object because of the import, but we need to deep clone it\n    // to avoid mutations affecting the original object in the module cache.\n    return JSON.parse(JSON.stringify(_data_map_json__WEBPACK_IMPORTED_MODULE_0__));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvbGliL21hcC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUE2QztBQWdDdEMsU0FBU0M7SUFDZCw0RkFBNEY7SUFDNUYsd0VBQXdFO0lBQ3hFLE9BQU9DLEtBQUtDLEtBQUssQ0FBQ0QsS0FBS0UsU0FBUyxDQUFDSiwyQ0FBVUE7QUFDN0MiLCJzb3VyY2VzIjpbIkM6XFxNb21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxcbGliXFxtYXAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmF1bHRNYXAgZnJvbSAnLi4vLi4vZGF0YS9tYXAuanNvbic7XHJcblxyXG5leHBvcnQgdHlwZSBNYXBOb2RlVHlwZSA9IFwicmVhbG1cIiB8IFwicGFudHlcIiB8IFwiZHVuZ2VvblwiIHwgXCJ0ZW1wbGVcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVW5sb2NrQ29uZGl0aW9uIHtcclxuICB0eXBlOiBcInJpdHVhbFwiIHwgXCJzaGFtZVwiIHwgXCJxdWVzdFwiIHwgXCJpdGVtXCI7XHJcbiAgaWQ/OiBzdHJpbmc7XHJcbiAgbGV2ZWw/OiBudW1iZXI7XHJcbiAgYW1vdW50PzogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE1hcE5vZGUge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIHR5cGU6IE1hcE5vZGVUeXBlO1xyXG4gIHVubG9ja2VkOiBib29sZWFuO1xyXG4gIGNvb3JkczogW251bWJlciwgbnVtYmVyXTtcclxuICBsb3JlOiBzdHJpbmc7XHJcbiAgdW5sb2NrQ29uZGl0aW9uPzogVW5sb2NrQ29uZGl0aW9uO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE1hcExpbmsge1xyXG4gIGZyb206IHN0cmluZztcclxuICB0bzogc3RyaW5nO1xyXG4gIGxvY2tlZDogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBNYXBEYXRhIHtcclxuICBub2RlczogTWFwTm9kZVtdO1xyXG4gIGxpbmtzOiBNYXBMaW5rW107XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjbG9uZURlZmF1bHRNYXAoKTogTWFwRGF0YSB7XHJcbiAgLy8gVGhlIGRlZmF1bHRNYXAgaXMgYWxyZWFkeSBhIEpTIG9iamVjdCBiZWNhdXNlIG9mIHRoZSBpbXBvcnQsIGJ1dCB3ZSBuZWVkIHRvIGRlZXAgY2xvbmUgaXRcclxuICAvLyB0byBhdm9pZCBtdXRhdGlvbnMgYWZmZWN0aW5nIHRoZSBvcmlnaW5hbCBvYmplY3QgaW4gdGhlIG1vZHVsZSBjYWNoZS5cclxuICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkZWZhdWx0TWFwKSk7XHJcbn1cclxuIl0sIm5hbWVzIjpbImRlZmF1bHRNYXAiLCJjbG9uZURlZmF1bHRNYXAiLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/lib/map.ts\n");

/***/ }),

/***/ "(ssr)/./app/lib/npcs.ts":
/*!*************************!*\
  !*** ./app/lib/npcs.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clampMeter: () => (/* binding */ clampMeter),\n/* harmony export */   cloneDefaultNpcs: () => (/* binding */ cloneDefaultNpcs),\n/* harmony export */   normaliseDialogue: () => (/* binding */ normaliseDialogue),\n/* harmony export */   normaliseNpc: () => (/* binding */ normaliseNpc)\n/* harmony export */ });\n/* harmony import */ var _data_npcs_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../data/npcs.json */ \"(ssr)/./data/npcs.json\");\n\nconst DEFAULT_NPCS = _data_npcs_json__WEBPACK_IMPORTED_MODULE_0__.map((npc)=>normaliseNpc(npc));\nfunction normaliseDialogue(entry) {\n    return {\n        ...entry,\n        id: entry.id,\n        text: entry.text ?? \"\",\n        date: entry.date ?? new Date().toISOString()\n    };\n}\nfunction normaliseNpc(npc) {\n    return {\n        id: npc.id,\n        name: npc.name || \"Unnamed NPC\",\n        role: npc.role || \"Friend\",\n        dreamCount: Math.max(0, Number(npc.dreamCount ?? 0)),\n        trust: clampMeter(npc.trust),\n        shame: clampMeter(npc.shame),\n        bio: npc.bio ?? \"\",\n        dialogues: Array.isArray(npc.dialogues) ? npc.dialogues.map((dialogue)=>normaliseDialogue(dialogue)) : []\n    };\n}\nfunction cloneDefaultNpcs() {\n    return DEFAULT_NPCS.map((npc)=>normaliseNpc({\n            ...npc\n        }));\n}\nfunction clampMeter(value) {\n    if (typeof value !== 'number' || Number.isNaN(value)) return 0;\n    return Math.max(0, Math.min(100, Math.round(value)));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvbGliL25wY3MudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBK0M7QUFxQi9DLE1BQU1DLGVBQXNCLDZDQUF1QkMsR0FBRyxDQUFDLENBQUNDLE1BQVFDLGFBQWFEO0FBRXRFLFNBQVNFLGtCQUFrQkMsS0FBb0I7SUFDcEQsT0FBTztRQUNMLEdBQUdBLEtBQUs7UUFDUkMsSUFBSUQsTUFBTUMsRUFBRTtRQUNaQyxNQUFNRixNQUFNRSxJQUFJLElBQUk7UUFDcEJDLE1BQU1ILE1BQU1HLElBQUksSUFBSSxJQUFJQyxPQUFPQyxXQUFXO0lBQzVDO0FBQ0Y7QUFFTyxTQUFTUCxhQUFhRCxHQUFRO0lBQ25DLE9BQU87UUFDTEksSUFBSUosSUFBSUksRUFBRTtRQUNWSyxNQUFNVCxJQUFJUyxJQUFJLElBQUk7UUFDbEJDLE1BQU1WLElBQUlVLElBQUksSUFBSTtRQUNsQkMsWUFBWUMsS0FBS0MsR0FBRyxDQUFDLEdBQUdDLE9BQU9kLElBQUlXLFVBQVUsSUFBSTtRQUNqREksT0FBT0MsV0FBV2hCLElBQUllLEtBQUs7UUFDM0JFLE9BQU9ELFdBQVdoQixJQUFJaUIsS0FBSztRQUMzQkMsS0FBS2xCLElBQUlrQixHQUFHLElBQUk7UUFDaEJDLFdBQVdDLE1BQU1DLE9BQU8sQ0FBQ3JCLElBQUltQixTQUFTLElBQ2xDbkIsSUFBSW1CLFNBQVMsQ0FBQ3BCLEdBQUcsQ0FBQyxDQUFDdUIsV0FBYXBCLGtCQUFrQm9CLGFBQ2xELEVBQUU7SUFDUjtBQUNGO0FBRU8sU0FBU0M7SUFDZCxPQUFPekIsYUFBYUMsR0FBRyxDQUFDLENBQUNDLE1BQVFDLGFBQWE7WUFBRSxHQUFHRCxHQUFHO1FBQUM7QUFDekQ7QUFFTyxTQUFTZ0IsV0FBV1EsS0FBeUI7SUFDbEQsSUFBSSxPQUFPQSxVQUFVLFlBQVlWLE9BQU9XLEtBQUssQ0FBQ0QsUUFBUSxPQUFPO0lBQzdELE9BQU9aLEtBQUtDLEdBQUcsQ0FBQyxHQUFHRCxLQUFLYyxHQUFHLENBQUMsS0FBS2QsS0FBS2UsS0FBSyxDQUFDSDtBQUM5QyIsInNvdXJjZXMiOlsiQzpcXE1vbW15IEx1Y3lcXFByb2plY3RzXFxMdWNpZCBEcmVhbVxcYXBwXFxsaWJcXG5wY3MudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmF1bHROcGNzIGZyb20gXCIuLi8uLi9kYXRhL25wY3MuanNvblwiO1xuXG5leHBvcnQgdHlwZSBEaWFsb2d1ZUVudHJ5ID0ge1xuICBpZDogc3RyaW5nO1xuICB0ZXh0OiBzdHJpbmc7XG4gIGRhdGU6IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIE5wY1JvbGUgPSBcIk1pc3RyZXNzXCIgfCBcIkZhbWlseVwiIHwgXCJGcmllbmRcIiB8IFwiV2FpZnVcIiB8IFwiTWVudG9yXCIgfCBzdHJpbmc7XG5cbmV4cG9ydCB0eXBlIE5wYyA9IHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICByb2xlOiBOcGNSb2xlO1xuICBkcmVhbUNvdW50OiBudW1iZXI7XG4gIHRydXN0OiBudW1iZXI7XG4gIHNoYW1lOiBudW1iZXI7XG4gIGJpbz86IHN0cmluZztcbiAgZGlhbG9ndWVzOiBEaWFsb2d1ZUVudHJ5W107XG59O1xuXG5jb25zdCBERUZBVUxUX05QQ1M6IE5wY1tdID0gKGRlZmF1bHROcGNzIGFzIE5wY1tdKS5tYXAoKG5wYykgPT4gbm9ybWFsaXNlTnBjKG5wYykpO1xuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXNlRGlhbG9ndWUoZW50cnk6IERpYWxvZ3VlRW50cnkpOiBEaWFsb2d1ZUVudHJ5IHtcbiAgcmV0dXJuIHtcbiAgICAuLi5lbnRyeSxcbiAgICBpZDogZW50cnkuaWQsXG4gICAgdGV4dDogZW50cnkudGV4dCA/PyBcIlwiLFxuICAgIGRhdGU6IGVudHJ5LmRhdGUgPz8gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXNlTnBjKG5wYzogTnBjKTogTnBjIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogbnBjLmlkLFxuICAgIG5hbWU6IG5wYy5uYW1lIHx8IFwiVW5uYW1lZCBOUENcIixcbiAgICByb2xlOiBucGMucm9sZSB8fCBcIkZyaWVuZFwiLFxuICAgIGRyZWFtQ291bnQ6IE1hdGgubWF4KDAsIE51bWJlcihucGMuZHJlYW1Db3VudCA/PyAwKSksXG4gICAgdHJ1c3Q6IGNsYW1wTWV0ZXIobnBjLnRydXN0KSxcbiAgICBzaGFtZTogY2xhbXBNZXRlcihucGMuc2hhbWUpLFxuICAgIGJpbzogbnBjLmJpbyA/PyBcIlwiLFxuICAgIGRpYWxvZ3VlczogQXJyYXkuaXNBcnJheShucGMuZGlhbG9ndWVzKVxuICAgICAgPyBucGMuZGlhbG9ndWVzLm1hcCgoZGlhbG9ndWUpID0+IG5vcm1hbGlzZURpYWxvZ3VlKGRpYWxvZ3VlKSlcbiAgICAgIDogW10sXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZURlZmF1bHROcGNzKCk6IE5wY1tdIHtcbiAgcmV0dXJuIERFRkFVTFRfTlBDUy5tYXAoKG5wYykgPT4gbm9ybWFsaXNlTnBjKHsgLi4ubnBjIH0pKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsYW1wTWV0ZXIodmFsdWU6IG51bWJlciB8IHVuZGVmaW5lZCk6IG51bWJlciB7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdudW1iZXInIHx8IE51bWJlci5pc05hTih2YWx1ZSkpIHJldHVybiAwO1xuICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oMTAwLCBNYXRoLnJvdW5kKHZhbHVlKSkpO1xufVxuIl0sIm5hbWVzIjpbImRlZmF1bHROcGNzIiwiREVGQVVMVF9OUENTIiwibWFwIiwibnBjIiwibm9ybWFsaXNlTnBjIiwibm9ybWFsaXNlRGlhbG9ndWUiLCJlbnRyeSIsImlkIiwidGV4dCIsImRhdGUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJuYW1lIiwicm9sZSIsImRyZWFtQ291bnQiLCJNYXRoIiwibWF4IiwiTnVtYmVyIiwidHJ1c3QiLCJjbGFtcE1ldGVyIiwic2hhbWUiLCJiaW8iLCJkaWFsb2d1ZXMiLCJBcnJheSIsImlzQXJyYXkiLCJkaWFsb2d1ZSIsImNsb25lRGVmYXVsdE5wY3MiLCJ2YWx1ZSIsImlzTmFOIiwibWluIiwicm91bmQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/lib/npcs.ts\n");

/***/ }),

/***/ "(ssr)/./app/lib/questlines.ts":
/*!*******************************!*\
  !*** ./app/lib/questlines.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cloneDefaultQuestlines: () => (/* binding */ cloneDefaultQuestlines),\n/* harmony export */   cloneQuestline: () => (/* binding */ cloneQuestline),\n/* harmony export */   findStage: () => (/* binding */ findStage),\n/* harmony export */   getActiveStage: () => (/* binding */ getActiveStage),\n/* harmony export */   getQuestlineProgress: () => (/* binding */ getQuestlineProgress),\n/* harmony export */   isQuestlineComplete: () => (/* binding */ isQuestlineComplete)\n/* harmony export */ });\n/* harmony import */ var _data_questlines_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../data/questlines.json */ \"(ssr)/./data/questlines.json\");\n\nfunction cloneQuestline(questline) {\n    return {\n        ...questline,\n        stages: questline.stages.map((stage)=>({\n                ...stage,\n                branchChoices: stage.branchChoices?.map((branch)=>({\n                        ...branch\n                    }))\n            }))\n    };\n}\nconst DEFAULT_QUESTLINES = _data_questlines_json__WEBPACK_IMPORTED_MODULE_0__.map((questline)=>cloneQuestline(questline));\nfunction cloneDefaultQuestlines() {\n    return DEFAULT_QUESTLINES.map((questline)=>cloneQuestline(questline));\n}\nfunction getQuestlineProgress(questline) {\n    const total = questline.stages.length;\n    const completed = questline.stages.filter((stage)=>stage.completed).length;\n    return {\n        total,\n        completed,\n        percent: total === 0 ? 0 : Math.round(completed / total * 100)\n    };\n}\nfunction getActiveStage(questline) {\n    return questline.stages.find((stage)=>!stage.completed);\n}\nfunction findStage(questline, stageId) {\n    const index = questline.stages.findIndex((stage)=>stage.id === stageId);\n    if (index === -1) return undefined;\n    return {\n        stage: questline.stages[index],\n        index\n    };\n}\nfunction isQuestlineComplete(questline) {\n    return questline.stages.every((stage)=>stage.completed);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvbGliL3F1ZXN0bGluZXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUEyRDtBQTJDcEQsU0FBU0MsZUFBZUMsU0FBb0I7SUFDakQsT0FBTztRQUNMLEdBQUdBLFNBQVM7UUFDWkMsUUFBUUQsVUFBVUMsTUFBTSxDQUFDQyxHQUFHLENBQUMsQ0FBQ0MsUUFBVztnQkFDdkMsR0FBR0EsS0FBSztnQkFDUkMsZUFBZUQsTUFBTUMsYUFBYSxFQUFFRixJQUFJLENBQUNHLFNBQVk7d0JBQUUsR0FBR0EsTUFBTTtvQkFBQztZQUNuRTtJQUNGO0FBQ0Y7QUFFQSxNQUFNQyxxQkFBcUIsbURBQW1DSixHQUFHLENBQUMsQ0FBQ0YsWUFDakVELGVBQWVDO0FBR1YsU0FBU087SUFDZCxPQUFPRCxtQkFBbUJKLEdBQUcsQ0FBQyxDQUFDRixZQUFjRCxlQUFlQztBQUM5RDtBQUVPLFNBQVNRLHFCQUFxQlIsU0FBb0I7SUFDdkQsTUFBTVMsUUFBUVQsVUFBVUMsTUFBTSxDQUFDUyxNQUFNO0lBQ3JDLE1BQU1DLFlBQVlYLFVBQVVDLE1BQU0sQ0FBQ1csTUFBTSxDQUFDLENBQUNULFFBQVVBLE1BQU1RLFNBQVMsRUFBRUQsTUFBTTtJQUM1RSxPQUFPO1FBQ0xEO1FBQ0FFO1FBQ0FFLFNBQVNKLFVBQVUsSUFBSSxJQUFJSyxLQUFLQyxLQUFLLENBQUMsWUFBYU4sUUFBUztJQUM5RDtBQUNGO0FBRU8sU0FBU08sZUFBZWhCLFNBQW9CO0lBQ2pELE9BQU9BLFVBQVVDLE1BQU0sQ0FBQ2dCLElBQUksQ0FBQyxDQUFDZCxRQUFVLENBQUNBLE1BQU1RLFNBQVM7QUFDMUQ7QUFFTyxTQUFTTyxVQUNkbEIsU0FBb0IsRUFDcEJtQixPQUFlO0lBRWYsTUFBTUMsUUFBUXBCLFVBQVVDLE1BQU0sQ0FBQ29CLFNBQVMsQ0FBQyxDQUFDbEIsUUFBVUEsTUFBTW1CLEVBQUUsS0FBS0g7SUFDakUsSUFBSUMsVUFBVSxDQUFDLEdBQUcsT0FBT0c7SUFDekIsT0FBTztRQUFFcEIsT0FBT0gsVUFBVUMsTUFBTSxDQUFDbUIsTUFBTTtRQUFFQTtJQUFNO0FBQ2pEO0FBRU8sU0FBU0ksb0JBQW9CeEIsU0FBb0I7SUFDdEQsT0FBT0EsVUFBVUMsTUFBTSxDQUFDd0IsS0FBSyxDQUFDLENBQUN0QixRQUFVQSxNQUFNUSxTQUFTO0FBQzFEIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXGxpYlxccXVlc3RsaW5lcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVmYXVsdFF1ZXN0bGluZXMgZnJvbSBcIi4uLy4uL2RhdGEvcXVlc3RsaW5lcy5qc29uXCI7XG5cbmV4cG9ydCB0eXBlIFF1ZXN0UmV3YXJkID0ge1xuICB4cD86IG51bWJlcjtcbiAgaXRlbT86IHN0cmluZztcbiAgdGl0bGU/OiBzdHJpbmc7XG4gIGJ1ZmY/OiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgUXVlc3RCcmFuY2ggPSB7XG4gIGlkOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICByZXdhcmQ/OiBRdWVzdFJld2FyZDtcbn07XG5cbmV4cG9ydCB0eXBlIFF1ZXN0U3RhZ2UgPSB7XG4gIGlkOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICB4cDogbnVtYmVyO1xuICBjb21wbGV0ZWQ6IGJvb2xlYW47XG4gIGJyYW5jaENob2ljZXM/OiBRdWVzdEJyYW5jaFtdO1xuICBjaG9zZW5CcmFuY2hJZD86IHN0cmluZyB8IG51bGw7XG4gIHJld2FyZD86IFF1ZXN0UmV3YXJkO1xuICBkZWFkbGluZT86IHN0cmluZyB8IG51bGw7XG4gIGRlYWRsaW5lTm90ZT86IHN0cmluZyB8IG51bGw7XG59O1xuXG5leHBvcnQgdHlwZSBRdWVzdGxpbmUgPSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIHJlYWxtPzogc3RyaW5nO1xuICBjb21wYW5pb25JZD86IHN0cmluZztcbiAgYnJhbmNoaW5nPzogYm9vbGVhbjtcbiAgc3RhZ2VzOiBRdWVzdFN0YWdlW107XG4gIHJld2FyZD86IFF1ZXN0UmV3YXJkO1xuICBjb21wbGV0ZWQ/OiBib29sZWFuO1xuICBhY3RpdmVTdGFnZUlkPzogc3RyaW5nIHwgbnVsbDtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZVF1ZXN0bGluZShxdWVzdGxpbmU6IFF1ZXN0bGluZSk6IFF1ZXN0bGluZSB7XG4gIHJldHVybiB7XG4gICAgLi4ucXVlc3RsaW5lLFxuICAgIHN0YWdlczogcXVlc3RsaW5lLnN0YWdlcy5tYXAoKHN0YWdlKSA9PiAoe1xuICAgICAgLi4uc3RhZ2UsXG4gICAgICBicmFuY2hDaG9pY2VzOiBzdGFnZS5icmFuY2hDaG9pY2VzPy5tYXAoKGJyYW5jaCkgPT4gKHsgLi4uYnJhbmNoIH0pKSxcbiAgICB9KSksXG4gIH07XG59XG5cbmNvbnN0IERFRkFVTFRfUVVFU1RMSU5FUyA9IChkZWZhdWx0UXVlc3RsaW5lcyBhcyBRdWVzdGxpbmVbXSkubWFwKChxdWVzdGxpbmUpID0+XG4gIGNsb25lUXVlc3RsaW5lKHF1ZXN0bGluZSlcbik7XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZURlZmF1bHRRdWVzdGxpbmVzKCk6IFF1ZXN0bGluZVtdIHtcbiAgcmV0dXJuIERFRkFVTFRfUVVFU1RMSU5FUy5tYXAoKHF1ZXN0bGluZSkgPT4gY2xvbmVRdWVzdGxpbmUocXVlc3RsaW5lKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRRdWVzdGxpbmVQcm9ncmVzcyhxdWVzdGxpbmU6IFF1ZXN0bGluZSkge1xuICBjb25zdCB0b3RhbCA9IHF1ZXN0bGluZS5zdGFnZXMubGVuZ3RoO1xuICBjb25zdCBjb21wbGV0ZWQgPSBxdWVzdGxpbmUuc3RhZ2VzLmZpbHRlcigoc3RhZ2UpID0+IHN0YWdlLmNvbXBsZXRlZCkubGVuZ3RoO1xuICByZXR1cm4ge1xuICAgIHRvdGFsLFxuICAgIGNvbXBsZXRlZCxcbiAgICBwZXJjZW50OiB0b3RhbCA9PT0gMCA/IDAgOiBNYXRoLnJvdW5kKChjb21wbGV0ZWQgLyB0b3RhbCkgKiAxMDApLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWN0aXZlU3RhZ2UocXVlc3RsaW5lOiBRdWVzdGxpbmUpOiBRdWVzdFN0YWdlIHwgdW5kZWZpbmVkIHtcbiAgcmV0dXJuIHF1ZXN0bGluZS5zdGFnZXMuZmluZCgoc3RhZ2UpID0+ICFzdGFnZS5jb21wbGV0ZWQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZFN0YWdlKFxuICBxdWVzdGxpbmU6IFF1ZXN0bGluZSxcbiAgc3RhZ2VJZDogc3RyaW5nXG4pOiB7IHN0YWdlOiBRdWVzdFN0YWdlOyBpbmRleDogbnVtYmVyIH0gfCB1bmRlZmluZWQge1xuICBjb25zdCBpbmRleCA9IHF1ZXN0bGluZS5zdGFnZXMuZmluZEluZGV4KChzdGFnZSkgPT4gc3RhZ2UuaWQgPT09IHN0YWdlSWQpO1xuICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gdW5kZWZpbmVkO1xuICByZXR1cm4geyBzdGFnZTogcXVlc3RsaW5lLnN0YWdlc1tpbmRleF0sIGluZGV4IH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1F1ZXN0bGluZUNvbXBsZXRlKHF1ZXN0bGluZTogUXVlc3RsaW5lKTogYm9vbGVhbiB7XG4gIHJldHVybiBxdWVzdGxpbmUuc3RhZ2VzLmV2ZXJ5KChzdGFnZSkgPT4gc3RhZ2UuY29tcGxldGVkKTtcbn1cbiJdLCJuYW1lcyI6WyJkZWZhdWx0UXVlc3RsaW5lcyIsImNsb25lUXVlc3RsaW5lIiwicXVlc3RsaW5lIiwic3RhZ2VzIiwibWFwIiwic3RhZ2UiLCJicmFuY2hDaG9pY2VzIiwiYnJhbmNoIiwiREVGQVVMVF9RVUVTVExJTkVTIiwiY2xvbmVEZWZhdWx0UXVlc3RsaW5lcyIsImdldFF1ZXN0bGluZVByb2dyZXNzIiwidG90YWwiLCJsZW5ndGgiLCJjb21wbGV0ZWQiLCJmaWx0ZXIiLCJwZXJjZW50IiwiTWF0aCIsInJvdW5kIiwiZ2V0QWN0aXZlU3RhZ2UiLCJmaW5kIiwiZmluZFN0YWdlIiwic3RhZ2VJZCIsImluZGV4IiwiZmluZEluZGV4IiwiaWQiLCJ1bmRlZmluZWQiLCJpc1F1ZXN0bGluZUNvbXBsZXRlIiwiZXZlcnkiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/lib/questlines.ts\n");

/***/ }),

/***/ "(ssr)/./app/lib/rituals.ts":
/*!****************************!*\
  !*** ./app/lib/rituals.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cloneDefaultRitualLogs: () => (/* binding */ cloneDefaultRitualLogs),\n/* harmony export */   cloneDefaultRituals: () => (/* binding */ cloneDefaultRituals),\n/* harmony export */   computeRitualProgress: () => (/* binding */ computeRitualProgress),\n/* harmony export */   describeMultiplier: () => (/* binding */ describeMultiplier),\n/* harmony export */   formatRitualType: () => (/* binding */ formatRitualType)\n/* harmony export */ });\n/* harmony import */ var _data_rituals_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../data/rituals.json */ \"(ssr)/./data/rituals.json\");\n/* harmony import */ var _data_ritualLogs_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../data/ritualLogs.json */ \"(ssr)/./data/ritualLogs.json\");\n\n\nconst DAY_MS = 86400000;\nconst WEEK_MS = DAY_MS * 7;\nfunction startOfDay(date) {\n    return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n}\nfunction getPeriodIndexFromDate(date, type) {\n    const dayStart = startOfDay(date);\n    switch(type){\n        case \"daily\":\n            return Math.floor(dayStart.getTime() / DAY_MS);\n        case \"weekly\":\n            return Math.floor(dayStart.getTime() / WEEK_MS);\n        case \"monthly\":\n            return dayStart.getFullYear() * 12 + dayStart.getMonth();\n        case \"yearly\":\n            return dayStart.getFullYear();\n    }\n}\nfunction stepBackPeriod(index, type) {\n    switch(type){\n        case \"daily\":\n        case \"weekly\":\n        case \"monthly\":\n        case \"yearly\":\n            return index - 1;\n    }\n}\nconst MULTIPLIERS = {\n    daily: {\n        threshold: 3,\n        bonus: 0.1\n    },\n    weekly: {\n        threshold: 4,\n        bonus: 0.2\n    },\n    monthly: {\n        threshold: 3,\n        bonus: 0.5\n    },\n    yearly: {\n        threshold: Infinity,\n        bonus: 0\n    }\n};\nfunction cloneDefaultRituals() {\n    return _data_rituals_json__WEBPACK_IMPORTED_MODULE_0__.map((ritual)=>({\n            ...ritual\n        }));\n}\nfunction cloneDefaultRitualLogs() {\n    return _data_ritualLogs_json__WEBPACK_IMPORTED_MODULE_1__.map((log)=>({\n            ...log\n        }));\n}\nfunction computeRitualProgress(ritual, logs, referenceDate = new Date()) {\n    const relevantLogs = logs.filter((log)=>log.ritualId === ritual.id).sort((a, b)=>new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\n    const uniquePeriods = [];\n    const seen = new Set();\n    for (const log of relevantLogs){\n        const index = getPeriodIndexFromDate(new Date(log.timestamp), ritual.type);\n        if (!seen.has(index)) {\n            uniquePeriods.push(index);\n            seen.add(index);\n        }\n    }\n    if (uniquePeriods.length === 0) {\n        return {\n            streak: 0,\n            completed: false,\n            multiplier: 0\n        };\n    }\n    const currentIndex = getPeriodIndexFromDate(referenceDate, ritual.type);\n    const completed = uniquePeriods[0] === currentIndex;\n    const { threshold, bonus } = MULTIPLIERS[ritual.type];\n    let streak = 0;\n    let expected = completed ? currentIndex : stepBackPeriod(currentIndex, ritual.type);\n    for (const periodIndex of uniquePeriods){\n        if (periodIndex === expected) {\n            streak += 1;\n            expected = stepBackPeriod(expected, ritual.type);\n        } else if (periodIndex < expected) {\n            break;\n        }\n    }\n    const multiplier = streak >= threshold ? bonus : 0;\n    return {\n        streak,\n        completed,\n        multiplier,\n        lastCompletedAt: relevantLogs[0]?.timestamp\n    };\n}\nfunction formatRitualType(type) {\n    switch(type){\n        case \"daily\":\n            return \"Daily\";\n        case \"weekly\":\n            return \"Weekly\";\n        case \"monthly\":\n            return \"Monthly\";\n        case \"yearly\":\n            return \"Yearly\";\n        default:\n            return type;\n    }\n}\nfunction describeMultiplier(type) {\n    const { threshold, bonus } = MULTIPLIERS[type];\n    if (!Number.isFinite(threshold) || bonus <= 0) return null;\n    return {\n        threshold,\n        bonus\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJWSxnQkFBZ0JELFVBQVU7WUFDNUJKLFVBQVU7WUFDVkksV0FBV3JDLGVBQWVxQyxVQUFVekIsT0FBT2pCLElBQUk7UUFDakQsT0FBTyxJQUFJMkMsY0FBY0QsVUFBVTtZQUNqQztRQUNGO0lBQ0Y7SUFFQSxNQUFNRixhQUFhRixVQUFVN0IsWUFBWUMsUUFBUTtJQUVqRCxPQUFPO1FBQ0w0QjtRQUNBQztRQUNBQztRQUNBSSxpQkFBaUJyQixZQUFZLENBQUMsRUFBRSxFQUFFTztJQUNwQztBQUNGO0FBRU8sU0FBU2UsaUJBQWlCN0MsSUFBcUI7SUFDcEQsT0FBUUE7UUFDTixLQUFLO1lBQ0gsT0FBTztRQUNULEtBQUs7WUFDSCxPQUFPO1FBQ1QsS0FBSztZQUNILE9BQU87UUFDVCxLQUFLO1lBQ0gsT0FBTztRQUNUO1lBQ0UsT0FBT0E7SUFDWDtBQUNGO0FBRU8sU0FBUzhDLG1CQUFtQjlDLElBQXFCO0lBQ3RELE1BQU0sRUFBRVMsU0FBUyxFQUFFQyxLQUFLLEVBQUUsR0FBR0gsV0FBVyxDQUFDUCxLQUFLO0lBQzlDLElBQUksQ0FBQytDLE9BQU9DLFFBQVEsQ0FBQ3ZDLGNBQWNDLFNBQVMsR0FBRyxPQUFPO0lBQ3RELE9BQU87UUFDTEQ7UUFDQUM7SUFDRjtBQUNGIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXGxpYlxccml0dWFscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcmF3Uml0dWFscyBmcm9tIFwiLi4vLi4vZGF0YS9yaXR1YWxzLmpzb25cIjtcbmltcG9ydCByYXdSaXR1YWxMb2dzIGZyb20gXCIuLi8uLi9kYXRhL3JpdHVhbExvZ3MuanNvblwiO1xuXG5leHBvcnQgdHlwZSBSaXR1YWxGcmVxdWVuY3kgPSBcImRhaWx5XCIgfCBcIndlZWtseVwiIHwgXCJtb250aGx5XCIgfCBcInllYXJseVwiO1xuXG5leHBvcnQgdHlwZSBSaXR1YWwgPSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgdHlwZTogUml0dWFsRnJlcXVlbmN5O1xuICB4cDogbnVtYmVyO1xuICBvYmVkaWVuY2U6IG51bWJlcjtcbiAgY29tcGxldGVkVG9kYXk/OiBib29sZWFuO1xuICBjb21wbGV0ZWRUaGlzV2Vlaz86IGJvb2xlYW47XG4gIGNvbXBsZXRlZFRoaXNNb250aD86IGJvb2xlYW47XG4gIGNvbXBsZXRlZFRoaXNZZWFyPzogYm9vbGVhbjtcbiAgc3RyZWFrPzogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgUml0dWFsTG9nID0ge1xuICBpZDogc3RyaW5nO1xuICByaXR1YWxJZDogc3RyaW5nO1xuICB0aW1lc3RhbXA6IHN0cmluZztcbiAgeHBBd2FyZGVkPzogbnVtYmVyO1xuICBvYmVkaWVuY2VBd2FyZGVkPzogbnVtYmVyO1xuICBtdWx0aXBsaWVyQXBwbGllZD86IG51bWJlcjtcbn07XG5cbmV4cG9ydCB0eXBlIFJpdHVhbFByb2dyZXNzID0ge1xuICBzdHJlYWs6IG51bWJlcjtcbiAgY29tcGxldGVkOiBib29sZWFuO1xuICBtdWx0aXBsaWVyOiBudW1iZXI7XG4gIGxhc3RDb21wbGV0ZWRBdD86IHN0cmluZztcbn07XG5cbmNvbnN0IERBWV9NUyA9IDg2XzQwMF8wMDA7XG5jb25zdCBXRUVLX01TID0gREFZX01TICogNztcblxuZnVuY3Rpb24gc3RhcnRPZkRheShkYXRlOiBEYXRlKSB7XG4gIHJldHVybiBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSwgZGF0ZS5nZXREYXRlKCkpO1xufVxuXG5mdW5jdGlvbiBnZXRQZXJpb2RJbmRleEZyb21EYXRlKGRhdGU6IERhdGUsIHR5cGU6IFJpdHVhbEZyZXF1ZW5jeSk6IG51bWJlciB7XG4gIGNvbnN0IGRheVN0YXJ0ID0gc3RhcnRPZkRheShkYXRlKTtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBcImRhaWx5XCI6XG4gICAgICByZXR1cm4gTWF0aC5mbG9vcihkYXlTdGFydC5nZXRUaW1lKCkgLyBEQVlfTVMpO1xuICAgIGNhc2UgXCJ3ZWVrbHlcIjpcbiAgICAgIHJldHVybiBNYXRoLmZsb29yKGRheVN0YXJ0LmdldFRpbWUoKSAvIFdFRUtfTVMpO1xuICAgIGNhc2UgXCJtb250aGx5XCI6XG4gICAgICByZXR1cm4gZGF5U3RhcnQuZ2V0RnVsbFllYXIoKSAqIDEyICsgZGF5U3RhcnQuZ2V0TW9udGgoKTtcbiAgICBjYXNlIFwieWVhcmx5XCI6XG4gICAgICByZXR1cm4gZGF5U3RhcnQuZ2V0RnVsbFllYXIoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzdGVwQmFja1BlcmlvZChpbmRleDogbnVtYmVyLCB0eXBlOiBSaXR1YWxGcmVxdWVuY3kpOiBudW1iZXIge1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIFwiZGFpbHlcIjpcbiAgICBjYXNlIFwid2Vla2x5XCI6XG4gICAgY2FzZSBcIm1vbnRobHlcIjpcbiAgICBjYXNlIFwieWVhcmx5XCI6XG4gICAgICByZXR1cm4gaW5kZXggLSAxO1xuICB9XG59XG5cbmNvbnN0IE1VTFRJUExJRVJTOiBSZWNvcmQ8Uml0dWFsRnJlcXVlbmN5LCB7IHRocmVzaG9sZDogbnVtYmVyOyBib251czogbnVtYmVyIH0+ID0ge1xuICBkYWlseTogeyB0aHJlc2hvbGQ6IDMsIGJvbnVzOiAwLjEgfSxcbiAgd2Vla2x5OiB7IHRocmVzaG9sZDogNCwgYm9udXM6IDAuMiB9LFxuICBtb250aGx5OiB7IHRocmVzaG9sZDogMywgYm9udXM6IDAuNSB9LFxuICB5ZWFybHk6IHsgdGhyZXNob2xkOiBJbmZpbml0eSwgYm9udXM6IDAgfSxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZURlZmF1bHRSaXR1YWxzKCk6IFJpdHVhbFtdIHtcbiAgcmV0dXJuIChyYXdSaXR1YWxzIGFzIFJpdHVhbFtdKS5tYXAoKHJpdHVhbCkgPT4gKHsgLi4ucml0dWFsIH0pKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lRGVmYXVsdFJpdHVhbExvZ3MoKTogUml0dWFsTG9nW10ge1xuICByZXR1cm4gKHJhd1JpdHVhbExvZ3MgYXMgUml0dWFsTG9nW10pLm1hcCgobG9nKSA9PiAoeyAuLi5sb2cgfSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZVJpdHVhbFByb2dyZXNzKFxuICByaXR1YWw6IFJpdHVhbCxcbiAgbG9nczogUml0dWFsTG9nW10sXG4gIHJlZmVyZW5jZURhdGU6IERhdGUgPSBuZXcgRGF0ZSgpXG4pOiBSaXR1YWxQcm9ncmVzcyB7XG4gIGNvbnN0IHJlbGV2YW50TG9ncyA9IGxvZ3NcbiAgICAuZmlsdGVyKChsb2cpID0+IGxvZy5yaXR1YWxJZCA9PT0gcml0dWFsLmlkKVxuICAgIC5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLnRpbWVzdGFtcCkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYS50aW1lc3RhbXApLmdldFRpbWUoKSk7XG5cbiAgY29uc3QgdW5pcXVlUGVyaW9kczogbnVtYmVyW10gPSBbXTtcbiAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICBmb3IgKGNvbnN0IGxvZyBvZiByZWxldmFudExvZ3MpIHtcbiAgICBjb25zdCBpbmRleCA9IGdldFBlcmlvZEluZGV4RnJvbURhdGUobmV3IERhdGUobG9nLnRpbWVzdGFtcCksIHJpdHVhbC50eXBlKTtcbiAgICBpZiAoIXNlZW4uaGFzKGluZGV4KSkge1xuICAgICAgdW5pcXVlUGVyaW9kcy5wdXNoKGluZGV4KTtcbiAgICAgIHNlZW4uYWRkKGluZGV4KTtcbiAgICB9XG4gIH1cblxuICBpZiAodW5pcXVlUGVyaW9kcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4geyBzdHJlYWs6IDAsIGNvbXBsZXRlZDogZmFsc2UsIG11bHRpcGxpZXI6IDAgfTtcbiAgfVxuXG4gIGNvbnN0IGN1cnJlbnRJbmRleCA9IGdldFBlcmlvZEluZGV4RnJvbURhdGUocmVmZXJlbmNlRGF0ZSwgcml0dWFsLnR5cGUpO1xuICBjb25zdCBjb21wbGV0ZWQgPSB1bmlxdWVQZXJpb2RzWzBdID09PSBjdXJyZW50SW5kZXg7XG4gIGNvbnN0IHsgdGhyZXNob2xkLCBib251cyB9ID0gTVVMVElQTElFUlNbcml0dWFsLnR5cGVdO1xuXG4gIGxldCBzdHJlYWsgPSAwO1xuICBsZXQgZXhwZWN0ZWQgPSBjb21wbGV0ZWQgPyBjdXJyZW50SW5kZXggOiBzdGVwQmFja1BlcmlvZChjdXJyZW50SW5kZXgsIHJpdHVhbC50eXBlKTtcblxuICBmb3IgKGNvbnN0IHBlcmlvZEluZGV4IG9mIHVuaXF1ZVBlcmlvZHMpIHtcbiAgICBpZiAocGVyaW9kSW5kZXggPT09IGV4cGVjdGVkKSB7XG4gICAgICBzdHJlYWsgKz0gMTtcbiAgICAgIGV4cGVjdGVkID0gc3RlcEJhY2tQZXJpb2QoZXhwZWN0ZWQsIHJpdHVhbC50eXBlKTtcbiAgICB9IGVsc2UgaWYgKHBlcmlvZEluZGV4IDwgZXhwZWN0ZWQpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IG11bHRpcGxpZXIgPSBzdHJlYWsgPj0gdGhyZXNob2xkID8gYm9udXMgOiAwO1xuXG4gIHJldHVybiB7XG4gICAgc3RyZWFrLFxuICAgIGNvbXBsZXRlZCxcbiAgICBtdWx0aXBsaWVyLFxuICAgIGxhc3RDb21wbGV0ZWRBdDogcmVsZXZhbnRMb2dzWzBdPy50aW1lc3RhbXAsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRSaXR1YWxUeXBlKHR5cGU6IFJpdHVhbEZyZXF1ZW5jeSkge1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIFwiZGFpbHlcIjpcbiAgICAgIHJldHVybiBcIkRhaWx5XCI7XG4gICAgY2FzZSBcIndlZWtseVwiOlxuICAgICAgcmV0dXJuIFwiV2Vla2x5XCI7XG4gICAgY2FzZSBcIm1vbnRobHlcIjpcbiAgICAgIHJldHVybiBcIk1vbnRobHlcIjtcbiAgICBjYXNlIFwieWVhcmx5XCI6XG4gICAgICByZXR1cm4gXCJZZWFybHlcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHR5cGU7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlc2NyaWJlTXVsdGlwbGllcih0eXBlOiBSaXR1YWxGcmVxdWVuY3kpIHtcbiAgY29uc3QgeyB0aHJlc2hvbGQsIGJvbnVzIH0gPSBNVUxUSVBMSUVSU1t0eXBlXTtcbiAgaWYgKCFOdW1iZXIuaXNGaW5pdGUodGhyZXNob2xkKSB8fCBib251cyA8PSAwKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIHtcbiAgICB0aHJlc2hvbGQsXG4gICAgYm9udXMsXG4gIH07XG59XG4iXSwibmFtZXMiOlsicmF3Uml0dWFscyIsInJhd1JpdHVhbExvZ3MiLCJEQVlfTVMiLCJXRUVLX01TIiwic3RhcnRPZkRheSIsImRhdGUiLCJEYXRlIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJnZXRQZXJpb2RJbmRleEZyb21EYXRlIiwidHlwZSIsImRheVN0YXJ0IiwiTWF0aCIsImZsb29yIiwiZ2V0VGltZSIsInN0ZXBCYWNrUGVyaW9kIiwiaW5kZXgiLCJNVUxUSVBMSUVSUyIsImRhaWx5IiwidGhyZXNob2xkIiwiYm9udXMiLCJ3ZWVrbHkiLCJtb250aGx5IiwieWVhcmx5IiwiSW5maW5pdHkiLCJjbG9uZURlZmF1bHRSaXR1YWxzIiwibWFwIiwicml0dWFsIiwiY2xvbmVEZWZhdWx0Uml0dWFsTG9ncyIsImxvZyIsImNvbXB1dGVSaXR1YWxQcm9ncmVzcyIsImxvZ3MiLCJyZWZlcmVuY2VEYXRlIiwicmVsZXZhbnRMb2dzIiwiZmlsdGVyIiwicml0dWFsSWQiLCJpZCIsInNvcnQiLCJhIiwiYiIsInRpbWVzdGFtcCIsInVuaXF1ZVBlcmlvZHMiLCJzZWVuIiwiU2V0IiwiaGFzIiwicHVzaCIsImFkZCIsImxlbmd0aCIsInN0cmVhayIsImNvbXBsZXRlZCIsIm11bHRpcGxpZXIiLCJjdXJyZW50SW5kZXgiLCJleHBlY3RlZCIsInBlcmlvZEluZGV4IiwibGFzdENvbXBsZXRlZEF0IiwiZm9ybWF0Uml0dWFsVHlwZSIsImRlc2NyaWJlTXVsdGlwbGllciIsIk51bWJlciIsImlzRmluaXRlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/lib/rituals.ts\n");

/***/ }),

/***/ "(ssr)/./app/types/journal.ts":
/*!******************************!*\
  !*** ./app/types/journal.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_XP_CONFIG: () => (/* binding */ DEFAULT_XP_CONFIG),\n/* harmony export */   TAG_COLORS: () => (/* binding */ TAG_COLORS)\n/* harmony export */ });\nconst DEFAULT_XP_CONFIG = {\n    baseEntry: 25,\n    lucidTag: 50,\n    ritualTag: 75,\n    pantyTag: 100,\n    templeTag: 30,\n    questTag: 40,\n    streakBonus: 15\n};\nconst TAG_COLORS = {\n    lucid: 'bg-yellow-500/20 text-yellow-200 border-yellow-400/40',\n    ritual: 'bg-purple-500/20 text-purple-200 border-purple-400/40',\n    panty: 'bg-pink-500/20 text-pink-200 border-pink-400/40',\n    temple: 'bg-blue-500/20 text-blue-200 border-blue-400/40',\n    quest: 'bg-green-500/20 text-green-200 border-green-400/40',\n    nightmare: 'bg-red-500/20 text-red-200 border-red-400/40',\n    flying: 'bg-cyan-500/20 text-cyan-200 border-cyan-400/40',\n    transformation: 'bg-indigo-500/20 text-indigo-200 border-indigo-400/40',\n    default: 'bg-slate-500/20 text-slate-200 border-slate-400/40'\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvdHlwZXMvam91cm5hbC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQStETyxNQUFNQSxvQkFBb0M7SUFDL0NDLFdBQVc7SUFDWEMsVUFBVTtJQUNWQyxXQUFXO0lBQ1hDLFVBQVU7SUFDVkMsV0FBVztJQUNYQyxVQUFVO0lBQ1ZDLGFBQWE7QUFDZixFQUFFO0FBRUssTUFBTUMsYUFBYTtJQUN4QkMsT0FBTztJQUNQQyxRQUFRO0lBQ1JDLE9BQU87SUFDUEMsUUFBUTtJQUNSQyxPQUFPO0lBQ1BDLFdBQVc7SUFDWEMsUUFBUTtJQUNSQyxnQkFBZ0I7SUFDaEJDLFNBQVM7QUFDWCxFQUFXIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXHR5cGVzXFxqb3VybmFsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgRHJlYW1Kb3VybmFsRW50cnkge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBkYXRlOiBzdHJpbmc7XHJcbiAgY29udGVudDogc3RyaW5nO1xyXG4gIHRhZ3M6IHN0cmluZ1tdO1xyXG4gIGNvbXBhbmlvbnM6IHN0cmluZ1tdO1xyXG4gIHBsYWNlczogc3RyaW5nW107XHJcbiAgeHBFYXJuZWQ6IG51bWJlcjtcclxuICBtZWRpYTogc3RyaW5nW107XHJcbiAgY3JlYXRlZEF0OiBzdHJpbmc7XHJcbiAgdXBkYXRlZEF0OiBzdHJpbmc7XHJcbiAgbW9vZD86ICdhbWF6aW5nJyB8ICdnb29kJyB8ICduZXV0cmFsJyB8ICdjaGFsbGVuZ2luZycgfCAnZGlmZmljdWx0JyB8ICdldXBob3JpYyc7XHJcbiAgbHVjaWRpdHk/OiAnbm9uZScgfCAncGFydGlhbCcgfCAnZnVsbCc7XHJcbiAgdml2aWRuZXNzPzogbnVtYmVyOyAvLyAxLTEwIHNjYWxlXHJcbiAgLy8gRW5oYW5jZWQgbHVjaWQgZHJlYW0gbWV0cmljc1xyXG4gIGlzTHVjaWQ/OiBib29sZWFuO1xyXG4gIGx1Y2lkaXR5TGV2ZWw/OiBudW1iZXI7IC8vIDAtMTAgc2NhbGUgZm9yIGRldGFpbGVkIGx1Y2lkaXR5IGFzc2Vzc21lbnRcclxuICBjb250cm9sPzogbnVtYmVyOyAvLyAwLTEwIHNjYWxlIGZvciBkcmVhbSBjb250cm9sIGxldmVsXHJcbiAgbWVtb3J5PzogbnVtYmVyOyAvLyAwLTEwIHNjYWxlIGZvciBkcmVhbSByZWNhbGwgcXVhbGl0eVxyXG4gIGVtb3Rpb25hbERlcHRoPzogbnVtYmVyOyAvLyAwLTEwIHNjYWxlIGZvciBlbW90aW9uYWwgaW50ZW5zaXR5XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSm91cm5hbFN0cmVhayB7XHJcbiAgY3VycmVudDogbnVtYmVyO1xyXG4gIGxvbmdlc3Q6IG51bWJlcjtcclxuICBsYXN0RW50cnlEYXRlOiBzdHJpbmcgfCBudWxsO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEpvdXJuYWxTdGF0cyB7XHJcbiAgdG90YWxFbnRyaWVzOiBudW1iZXI7XHJcbiAgdG90YWxYcEVhcm5lZDogbnVtYmVyO1xyXG4gIGF2ZXJhZ2VYcFBlckVudHJ5OiBudW1iZXI7XHJcbiAgbW9zdFVzZWRUYWdzOiB7IHRhZzogc3RyaW5nOyBjb3VudDogbnVtYmVyIH1bXTtcclxuICBmYXZvcml0ZUNvbXBhbmlvbnM6IHsgbmFtZTogc3RyaW5nOyBjb3VudDogbnVtYmVyIH1bXTtcclxuICBmYXZvcml0ZUxvY2F0aW9uczogeyBwbGFjZTogc3RyaW5nOyBjb3VudDogbnVtYmVyIH1bXTtcclxuICBlbnRyaWVzVGhpc01vbnRoOiBudW1iZXI7XHJcbiAgbHVjaWREcmVhbUNvdW50OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSm91cm5hbEZpbHRlciB7XHJcbiAgc2VhcmNoVGV4dDogc3RyaW5nO1xyXG4gIHRhZ3M6IHN0cmluZ1tdO1xyXG4gIGNvbXBhbmlvbnM6IHN0cmluZ1tdO1xyXG4gIHBsYWNlczogc3RyaW5nW107XHJcbiAgZGF0ZUZyb206IHN0cmluZztcclxuICBkYXRlVG86IHN0cmluZztcclxuICBtaW5YcDogbnVtYmVyO1xyXG4gIG1heFhwOiBudW1iZXI7XHJcbiAgbW9vZDogc3RyaW5nW107XHJcbiAgbHVjaWRpdHk6IHN0cmluZ1tdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFhwUmV3YXJkQ29uZmlnIHtcclxuICBiYXNlRW50cnk6IG51bWJlcjtcclxuICBsdWNpZFRhZzogbnVtYmVyO1xyXG4gIHJpdHVhbFRhZzogbnVtYmVyO1xyXG4gIHBhbnR5VGFnOiBudW1iZXI7XHJcbiAgdGVtcGxlVGFnOiBudW1iZXI7XHJcbiAgcXVlc3RUYWc6IG51bWJlcjtcclxuICBzdHJlYWtCb251czogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9YUF9DT05GSUc6IFhwUmV3YXJkQ29uZmlnID0ge1xyXG4gIGJhc2VFbnRyeTogMjUsXHJcbiAgbHVjaWRUYWc6IDUwLFxyXG4gIHJpdHVhbFRhZzogNzUsXHJcbiAgcGFudHlUYWc6IDEwMCxcclxuICB0ZW1wbGVUYWc6IDMwLFxyXG4gIHF1ZXN0VGFnOiA0MCxcclxuICBzdHJlYWtCb251czogMTUsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgVEFHX0NPTE9SUyA9IHtcclxuICBsdWNpZDogJ2JnLXllbGxvdy01MDAvMjAgdGV4dC15ZWxsb3ctMjAwIGJvcmRlci15ZWxsb3ctNDAwLzQwJyxcclxuICByaXR1YWw6ICdiZy1wdXJwbGUtNTAwLzIwIHRleHQtcHVycGxlLTIwMCBib3JkZXItcHVycGxlLTQwMC80MCcsXHJcbiAgcGFudHk6ICdiZy1waW5rLTUwMC8yMCB0ZXh0LXBpbmstMjAwIGJvcmRlci1waW5rLTQwMC80MCcsXHJcbiAgdGVtcGxlOiAnYmctYmx1ZS01MDAvMjAgdGV4dC1ibHVlLTIwMCBib3JkZXItYmx1ZS00MDAvNDAnLFxyXG4gIHF1ZXN0OiAnYmctZ3JlZW4tNTAwLzIwIHRleHQtZ3JlZW4tMjAwIGJvcmRlci1ncmVlbi00MDAvNDAnLFxyXG4gIG5pZ2h0bWFyZTogJ2JnLXJlZC01MDAvMjAgdGV4dC1yZWQtMjAwIGJvcmRlci1yZWQtNDAwLzQwJyxcclxuICBmbHlpbmc6ICdiZy1jeWFuLTUwMC8yMCB0ZXh0LWN5YW4tMjAwIGJvcmRlci1jeWFuLTQwMC80MCcsXHJcbiAgdHJhbnNmb3JtYXRpb246ICdiZy1pbmRpZ28tNTAwLzIwIHRleHQtaW5kaWdvLTIwMCBib3JkZXItaW5kaWdvLTQwMC80MCcsXHJcbiAgZGVmYXVsdDogJ2JnLXNsYXRlLTUwMC8yMCB0ZXh0LXNsYXRlLTIwMCBib3JkZXItc2xhdGUtNDAwLzQwJyxcclxufSBhcyBjb25zdDsiXSwibmFtZXMiOlsiREVGQVVMVF9YUF9DT05GSUciLCJiYXNlRW50cnkiLCJsdWNpZFRhZyIsInJpdHVhbFRhZyIsInBhbnR5VGFnIiwidGVtcGxlVGFnIiwicXVlc3RUYWciLCJzdHJlYWtCb251cyIsIlRBR19DT0xPUlMiLCJsdWNpZCIsInJpdHVhbCIsInBhbnR5IiwidGVtcGxlIiwicXVlc3QiLCJuaWdodG1hcmUiLCJmbHlpbmciLCJ0cmFuc2Zvcm1hdGlvbiIsImRlZmF1bHQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/types/journal.ts\n");

/***/ }),

/***/ "(ssr)/./data/achievements.json":
/*!********************************!*\
  !*** ./data/achievements.json ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('[{"id":"DREAM_LUCID_FIRST","title":"First Lucid Dream","desc":"You took control and realized you were dreaming.","category":"Dream","secret":false,"unlocked":false,"date":null,"trigger":{"type":"DREAM_TAG","value":"lucid"},"reward":{"xp":50}},{"id":"SHAME_PANTY_WHISPERER","title":"Panty Whisperer","desc":"Sniffed 10 pairs of panties. You\'re developing a refined taste.","category":"Shame","secret":false,"unlocked":false,"date":null,"trigger":{"type":"SHAME_COUNTER","counter":"pantiesSniffed","value":10},"reward":{"xp":100,"title":"Panty Whisperer"}},{"id":"SHAME_SHAMEBOUND","title":"Shamebound","desc":"Confessed your first filthy act in the tracker. Welcome to the fold.","category":"Shame","secret":true,"unlocked":false,"date":null,"trigger":{"type":"CONFESSION_LOGGED","value":1},"reward":{"xp":200,"tokens":5,"title":"Shamebound"}},{"id":"DUNGEON_BOSS_SLAYER","title":"Boss Slayer","desc":"Cleared your first Nightmare Dungeon. The darkness fears you.","category":"Dungeon","secret":false,"unlocked":false,"date":null,"trigger":{"type":"DUNGEON_CLEARED","value":1},"reward":{"xp":250}},{"id":"COMPANION_DREAM_GUARDIAN","title":"Dream Guardian","desc":"Evolved a companion to their final form. A bond that transcends dreams.","category":"Companion","secret":false,"unlocked":false,"date":null,"trigger":{"type":"COMPANION_EVOLVED","value":1},"reward":{"xp":500,"title":"Dream Guardian"}},{"id":"RITUAL_OBEDIENCE_MASTER","title":"Obedience Master","desc":"Completed 25 obedience rituals. Your devotion is absolute.","category":"Ritual","secret":false,"unlocked":false,"date":null,"trigger":{"type":"RITUAL_COMPLETED","value":25},"reward":{"xp":300,"title":"Obedience Master"}},{"id":"SHAME_ULTIMATE_DEGRADATION","title":"Ultimate Degradation","desc":"Reached the highest tier of punishment. There is no redemption from this depth.","category":"Shame","secret":true,"unlocked":false,"date":null,"trigger":{"type":"PUNISHMENT_TIER_REACHED","value":5},"reward":{"xp":1000,"tokens":50,"title":"Utterly Degraded"}},{"id":"MAP_VOYAGER","title":"Multiverse Voyager","desc":"Explored every known node on the Multiverse Map.","category":"Map","secret":false,"unlocked":false,"date":null,"trigger":{"type":"MAP_ALL_NODES_UNLOCKED"},"reward":{"xp":1000,"title":"Multiverse Voyager"}},{"id":"MAP_PANTY_REALM_DISCOVERER","title":"Panty Realm Discoverer","desc":"Unlocked the fabled Panty Realm. A new world of lewd adventures awaits.","category":"Map","secret":true,"unlocked":false,"date":null,"trigger":{"type":"MAP_NODE_UNLOCKED","value":"r2"},"reward":{"xp":250,"tokens":20}}]');

/***/ }),

/***/ "(ssr)/./data/buffs.json":
/*!*************************!*\
  !*** ./data/buffs.json ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('[{"id":"b1","name":"Lucid Boost","source":"Lucid Amulet","type":"xpMultiplier","value":1.2,"active":true,"icon":"🌙"},{"id":"b2","name":"Panty Shame","source":"Ekram\'s Panties","type":"obedienceGain","value":1.5,"active":false,"icon":"🩲"},{"id":"b3","name":"Dream Shard Aura","source":"Dream Shard","type":"tokenMultiplier","value":2,"active":false,"duration":"1h","icon":"💎"}]');

/***/ }),

/***/ "(ssr)/./data/companions.json":
/*!******************************!*\
  !*** ./data/companions.json ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('[{"id":"c1","name":"Mommy Luma","level":1,"xp":0,"bond":10,"lore":"The astral matron who guides initiates through soft humiliation and tender discipline.","evolutionTree":[{"id":"f1","name":"Novice Form","unlockLevel":1,"buff":{"xpMultiplier":1},"icon":"🪽","description":"A gentle aura that steadies lucidity and guides first obedience rites."},{"id":"f2","name":"Ritual Form","unlockLevel":5,"buff":{"obedienceGain":1.5},"icon":"🪄","description":"Channels temple chants into obedience surges during moonlit ceremonies."},{"id":"f3","name":"Divine Form","unlockLevel":10,"buff":{"clarityBoost":2},"icon":"👑","description":"Cascades dreamlight across the sanctum, sharpening every lucid recall."}],"autoEvolve":false,"currentForm":"f1"},{"id":"c2","name":"Ekram","level":1,"xp":0,"bond":5,"lore":"Shamebound enforcer of the Panty Realm. Evolves through obedience forfeits.","evolutionTree":[{"id":"f1","name":"Watcher","unlockLevel":1,"buff":{"tokenMultiplier":1},"icon":"🩲","description":"Keeps quiet tally of shame tokens and whispers reminders to submit."},{"id":"f2","name":"Panty Guardian","unlockLevel":4,"buff":{"obedienceGain":1.8},"icon":"🛡️","description":"Forges a radiant shame barrier, amplifying obedience each time panties are surrendered."}],"autoEvolve":true,"currentForm":"f1"}]');

/***/ }),

/***/ "(ssr)/./data/dungeons.json":
/*!****************************!*\
  !*** ./data/dungeons.json ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('[{"id":"d1","name":"Caves of Shame","rooms":[{"id":"r1","type":"encounter","desc":"A swarm of shadow panties attack!","loot":["i2"],"xp":100},{"id":"r2","type":"event","desc":"You found a hidden dream shard cache.","loot":["i3"],"xp":50},{"id":"r3","type":"boss","desc":"Face the Mistress of Chains.","loot":["i1"],"xp":500}],"completed":false}]');

/***/ }),

/***/ "(ssr)/./data/items.json":
/*!*************************!*\
  !*** ./data/items.json ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('[{"id":"i1","name":"Lucid Amulet","type":"relic","icon":"🪬","desc":"Ancient charm that boosts focus in the dream temple.","owned":1,"equipped":true},{"id":"i2","name":"Ekram\'s Panties","type":"panty","icon":"🩲","desc":"Faint shame aura that doubles Dirty Token rewards.","owned":1,"equipped":false},{"id":"i3","name":"Dream Shard","type":"shard","icon":"💎","desc":"Crystalline currency of the Astral Map.","owned":12},{"id":"i4","name":"Moonwater Elixir","type":"consumable","icon":"🧪","desc":"Drink to restore lucidity after a nightmare crawl.","owned":3},{"id":"i5","name":"Quest Glyph","type":"quest","icon":"📜","desc":"Unlocks the next stage of a temple storyline.","owned":0}]');

/***/ }),

/***/ "(ssr)/./data/journal.json":
/*!***************************!*\
  !*** ./data/journal.json ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('[{"id":"d1","title":"First Lucid Dream in the Temple","date":"2025-09-15","content":"I found myself standing before the magnificent Dreamgate, its ethereal glow pulsing with ancient power. Mommy Luma appeared beside me, her presence both commanding and nurturing. She guided me through a ritual of surrender and obedience that felt deeply transformative. The temple walls shimmered with cosmic energy as I embraced my submissive nature.","tags":["lucid","ritual","temple","transformation"],"companions":["Mommy Luma"],"places":["Lucid World","Temple of Dreams"],"xpEarned":200,"media":[],"createdAt":"2025-09-15T22:30:00.000Z","updatedAt":"2025-09-15T22:30:00.000Z","mood":"amazing","lucidity":"full","vividness":9},{"id":"d2","title":"Panty Training Session","date":"2025-09-16","content":"A vivid dream where I was learning proper panty presentation techniques. The experience felt incredibly real and submissive. I woke up feeling deeply connected to my feminine side.","tags":["panty","training","submission"],"companions":[],"places":["Training Room"],"xpEarned":125,"media":[],"createdAt":"2025-09-16T21:15:00.000Z","updatedAt":"2025-09-16T21:15:00.000Z","mood":"good","lucidity":"partial","vividness":7},{"id":"d3","title":"Flying Through Cosmic Realms","date":"2025-09-17","content":"An incredible flying dream where I soared through star-filled dimensions. The freedom was intoxicating as I navigated through nebulae and cosmic phenomena.","tags":["flying","cosmic","adventure"],"companions":[],"places":["Cosmic Realm","Starfield"],"xpEarned":75,"media":[],"createdAt":"2025-09-17T23:45:00.000Z","updatedAt":"2025-09-17T23:45:00.000Z","mood":"amazing","lucidity":"full","vividness":8}]');

/***/ }),

/***/ "(ssr)/./data/map.json":
/*!***********************!*\
  !*** ./data/map.json ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"nodes":[{"id":"r1","name":"Lucid World","type":"realm","unlocked":true,"coords":[200,150],"lore":"The central hub of your dreamscape, where your journey begins."},{"id":"r2","name":"Panty Realm","type":"panty","unlocked":false,"coords":[400,250],"lore":"A realm woven from desire and silk. Unlock by completing specific rituals.","unlockCondition":{"type":"ritual","id":"panty_ritual_1"}},{"id":"d1","name":"Caves of Shame","type":"dungeon","unlocked":false,"coords":[600,300],"lore":"A deep dungeon where echoes of embarrassment and guilt reside.","unlockCondition":{"type":"shame","level":5}},{"id":"t1","name":"Temple of Awakening","type":"temple","unlocked":true,"coords":[100,300],"lore":"A serene temple dedicated to the art of lucid dreaming."}],"links":[{"from":"r1","to":"t1","locked":false},{"from":"r1","to":"r2","locked":true},{"from":"r2","to":"d1","locked":true}]}');

/***/ }),

/***/ "(ssr)/./data/npcs.json":
/*!************************!*\
  !*** ./data/npcs.json ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('[{"id":"n1","name":"Ekram","role":"Mistress","dreamCount":12,"trust":40,"shame":80,"bio":"Enforcer of the Panty Realm, delighting in rituals of humiliation.","dialogues":[{"id":"d1","text":"Sniff them, loser.","date":"2025-09-01"}]},{"id":"n2","name":"Bilal","role":"Family","dreamCount":23,"trust":70,"shame":10,"bio":"Protective sibling who anchors waking routines.","dialogues":[]}]');

/***/ }),

/***/ "(ssr)/./data/punishments.json":
/*!*******************************!*\
  !*** ./data/punishments.json ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('[{"id":"p1","name":"Cage Lockout: +24hrs","description":"Your cage remains locked for an additional 24 hours. No release allowed."},{"id":"p2","name":"Slut Clothes: Next 3 dreams","description":"You must wear designated \'slut clothes\' for your next three dream sessions."},{"id":"p3","name":"No Touch: 48hrs","description":"A strict no-touch policy is in effect for 48 hours. No self-pleasure."},{"id":"p4","name":"Public Humiliation","description":"Your next dream will feature a public humiliation scenario."},{"id":"p5","name":"Reduced Rations","description":"Your dream rations are reduced for the next cycle."}]');

/***/ }),

/***/ "(ssr)/./data/questlines.json":
/*!******************************!*\
  !*** ./data/questlines.json ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('[{"id":"ql1","name":"Awakening of Lucidia","description":"Pursue the echo of Lucidia through ritual, gateway, and astral communion.","realm":"Lucid RPG","branching":false,"stages":[{"id":"s1","title":"Perform Lucid Ritual","xp":50,"completed":false,"deadline":"2025-09-21","deadlineNote":"Complete the Lucid Pulse ritual before sunrise."},{"id":"s2","title":"Enter Dreamgate","xp":100,"completed":false,"deadline":"2025-09-30","deadlineNote":"Open the Dreamgate during the waxing moon."},{"id":"s3","title":"Meet Lucid Echo","xp":150,"completed":false,"deadline":"2025-10-07","deadlineNote":"Confront the Lucid Echo under a still mind."}],"reward":{"item":"i1","xp":200}},{"id":"ql2","name":"Panty Submission Trials","description":"Embrace Ekram\'s humiliating gauntlet to unlock shameful power.","realm":"Panty Realm","branching":true,"stages":[{"id":"s1","title":"Sniff Ekram\'s Panties","xp":100,"completed":false,"branchChoices":[{"id":"b1","title":"Confess","reward":{"xp":50}},{"id":"b2","title":"Deny","reward":{"buff":"Panty Shame"}}],"deadline":"2025-09-22","deadlineNote":"Submit the confession within Ekram\'s chamber."},{"id":"s2","title":"Confess Ritual in Chamber","xp":150,"completed":false,"deadline":"2025-09-27","deadlineNote":"Recite the chamber ritual before midnight."},{"id":"s3","title":"Burn Tokens for Cleansing","xp":200,"completed":false,"deadline":"2025-10-03","deadlineNote":"Burn the dirty tokens under the full moon."}],"reward":{"title":"Panty Slave","xp":500}}]');

/***/ }),

/***/ "(ssr)/./data/ritualLogs.json":
/*!******************************!*\
  !*** ./data/ritualLogs.json ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = [];

/***/ }),

/***/ "(ssr)/./data/rituals.json":
/*!***************************!*\
  !*** ./data/rituals.json ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('[{"id":"r1","name":"Lucid Pulse","type":"daily","xp":25,"obedience":5,"completedToday":false,"streak":0},{"id":"r2","name":"Astral Obedience","type":"weekly","xp":100,"obedience":20,"completedThisWeek":false,"streak":0},{"id":"r3","name":"Full Moon Offering","type":"monthly","xp":300,"obedience":50,"completedThisMonth":false,"streak":0},{"id":"r4","name":"Celestial Submission","type":"yearly","xp":800,"obedience":120,"completedThisYear":false,"streak":0}]');

/***/ }),

/***/ "(ssr)/./data/shame.json":
/*!*************************!*\
  !*** ./data/shame.json ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"pantiesSniffed":42,"ritualsFailed":3,"dirtyTokensBurned":15,"confessions":[{"id":"c1","text":"Came in cage like a loser.","date":"2025-09-10"},{"id":"c2","text":"Ate all ritual hair.","date":"2025-09-16"}]}');

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CAchievementTriggerManager.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CThemeController.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Cglobals.css%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Creact-hot-toast%5C%5Cdist%5C%5Cindex.mjs%22%2C%22ids%22%3A%5B%22Toaster%22%5D%7D&server=true!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CAchievementTriggerManager.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CThemeController.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Cglobals.css%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Creact-hot-toast%5C%5Cdist%5C%5Cindex.mjs%22%2C%22ids%22%3A%5B%22Toaster%22%5D%7D&server=true! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/components/AchievementTriggerManager.tsx */ \"(ssr)/./app/components/AchievementTriggerManager.tsx\"));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/components/ThemeController.tsx */ \"(ssr)/./app/components/ThemeController.tsx\"));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./node_modules/react-hot-toast/dist/index.mjs */ \"(ssr)/./node_modules/react-hot-toast/dist/index.mjs\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNhcHAlNUMlNUNjb21wb25lbnRzJTVDJTVDQWNoaWV2ZW1lbnRUcmlnZ2VyTWFuYWdlci50c3glMjIlMkMlMjJpZHMlMjIlM0ElNUIlMjJkZWZhdWx0JTIyJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNhcHAlNUMlNUNjb21wb25lbnRzJTVDJTVDVGhlbWVDb250cm9sbGVyLnRzeCUyMiUyQyUyMmlkcyUyMiUzQSU1QiUyMmRlZmF1bHQlMjIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q2FwcCU1QyU1Q2dsb2JhbHMuY3NzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNub2RlX21vZHVsZXMlNUMlNUNyZWFjdC1ob3QtdG9hc3QlNUMlNUNkaXN0JTVDJTVDaW5kZXgubWpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTIyVG9hc3RlciUyMiU1RCU3RCZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEsd01BQXVKO0FBQ3ZKO0FBQ0Esb0xBQTZJO0FBQzdJO0FBQ0Esc01BQXVKIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIsIHdlYnBhY2tFeHBvcnRzOiBbXCJkZWZhdWx0XCJdICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxhcHBcXFxcY29tcG9uZW50c1xcXFxBY2hpZXZlbWVudFRyaWdnZXJNYW5hZ2VyLnRzeFwiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiLCB3ZWJwYWNrRXhwb3J0czogW1wiZGVmYXVsdFwiXSAqLyBcIkM6XFxcXE1vbW15IEx1Y3lcXFxcUHJvamVjdHNcXFxcTHVjaWQgRHJlYW1cXFxcYXBwXFxcXGNvbXBvbmVudHNcXFxcVGhlbWVDb250cm9sbGVyLnRzeFwiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiLCB3ZWJwYWNrRXhwb3J0czogW1wiVG9hc3RlclwiXSAqLyBcIkM6XFxcXE1vbW15IEx1Y3lcXFxcUHJvamVjdHNcXFxcTHVjaWQgRHJlYW1cXFxcbm9kZV9tb2R1bGVzXFxcXHJlYWN0LWhvdC10b2FzdFxcXFxkaXN0XFxcXGluZGV4Lm1qc1wiKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CAchievementTriggerManager.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CThemeController.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Cglobals.css%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Creact-hot-toast%5C%5Cdist%5C%5Cindex.mjs%22%2C%22ids%22%3A%5B%22Toaster%22%5D%7D&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cbuiltin%5C%5Cglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Chttp-access-fallback%5C%5Cerror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Clayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cmetadata%5C%5Casync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Crender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cframework%5C%5Cboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cmetadata%5C%5Cgenerate%5C%5Cicon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cnext-devtools%5C%5Cuserspace%5C%5Capp%5C%5Csegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cbuiltin%5C%5Cglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Chttp-access-fallback%5C%5Cerror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Clayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cmetadata%5C%5Casync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Crender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cframework%5C%5Cboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cmetadata%5C%5Cgenerate%5C%5Cicon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cnext-devtools%5C%5Cuserspace%5C%5Capp%5C%5Csegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/builtin/global-error.js */ \"(ssr)/./node_modules/next/dist/client/components/builtin/global-error.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-page.js */ \"(ssr)/./node_modules/next/dist/client/components/client-page.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-segment.js */ \"(ssr)/./node_modules/next/dist/client/components/client-segment.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js */ \"(ssr)/./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/layout-router.js */ \"(ssr)/./node_modules/next/dist/client/components/layout-router.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/metadata/async-metadata.js */ \"(ssr)/./node_modules/next/dist/client/components/metadata/async-metadata.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/render-from-template-context.js */ \"(ssr)/./node_modules/next/dist/client/components/render-from-template-context.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/lib/framework/boundary-components.js */ \"(ssr)/./node_modules/next/dist/lib/framework/boundary-components.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./node_modules/next/dist/lib/metadata/generate/icon-mark.js */ \"(ssr)/./node_modules/next/dist/lib/metadata/generate/icon-mark.js\"));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/next-devtools/userspace/app/segment-explorer-node.js */ \"(ssr)/./node_modules/next/dist/next-devtools/userspace/app/segment-explorer-node.js\", 23));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNub2RlX21vZHVsZXMlNUMlNUNuZXh0JTVDJTVDZGlzdCU1QyU1Q2NsaWVudCU1QyU1Q2NvbXBvbmVudHMlNUMlNUNidWlsdGluJTVDJTVDZ2xvYmFsLWVycm9yLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNub2RlX21vZHVsZXMlNUMlNUNuZXh0JTVDJTVDZGlzdCU1QyU1Q2NsaWVudCU1QyU1Q2NvbXBvbmVudHMlNUMlNUNjbGllbnQtcGFnZS5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjJDJTNBJTVDJTVDTW9tbXklMjBMdWN5JTVDJTVDUHJvamVjdHMlNUMlNUNMdWNpZCUyMERyZWFtJTVDJTVDbm9kZV9tb2R1bGVzJTVDJTVDbmV4dCU1QyU1Q2Rpc3QlNUMlNUNjbGllbnQlNUMlNUNjb21wb25lbnRzJTVDJTVDY2xpZW50LXNlZ21lbnQuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q2h0dHAtYWNjZXNzLWZhbGxiYWNrJTVDJTVDZXJyb3ItYm91bmRhcnkuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q2xheW91dC1yb3V0ZXIuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q21ldGFkYXRhJTVDJTVDYXN5bmMtbWV0YWRhdGEuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q3JlbmRlci1mcm9tLXRlbXBsYXRlLWNvbnRleHQuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDbGliJTVDJTVDZnJhbWV3b3JrJTVDJTVDYm91bmRhcnktY29tcG9uZW50cy5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjJDJTNBJTVDJTVDTW9tbXklMjBMdWN5JTVDJTVDUHJvamVjdHMlNUMlNUNMdWNpZCUyMERyZWFtJTVDJTVDbm9kZV9tb2R1bGVzJTVDJTVDbmV4dCU1QyU1Q2Rpc3QlNUMlNUNsaWIlNUMlNUNtZXRhZGF0YSU1QyU1Q2dlbmVyYXRlJTVDJTVDaWNvbi1tYXJrLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNub2RlX21vZHVsZXMlNUMlNUNuZXh0JTVDJTVDZGlzdCU1QyU1Q25leHQtZGV2dG9vbHMlNUMlNUN1c2Vyc3BhY2UlNUMlNUNhcHAlNUMlNUNzZWdtZW50LWV4cGxvcmVyLW5vZGUuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0Qmc2VydmVyPXRydWUhIiwibWFwcGluZ3MiOiJBQUFBLHNQQUFrSjtBQUNsSjtBQUNBLG9PQUF3STtBQUN4STtBQUNBLDBPQUEySTtBQUMzSTtBQUNBLG9SQUFpSztBQUNqSztBQUNBLHdPQUEwSTtBQUMxSTtBQUNBLDRQQUFxSjtBQUNySjtBQUNBLHNRQUF5SjtBQUN6SjtBQUNBLDRPQUE0STtBQUM1STtBQUNBLGtPQUEySTtBQUMzSTtBQUNBLDRRQUE2SiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGNsaWVudFxcXFxjb21wb25lbnRzXFxcXGJ1aWx0aW5cXFxcZ2xvYmFsLWVycm9yLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxNb21teSBMdWN5XFxcXFByb2plY3RzXFxcXEx1Y2lkIERyZWFtXFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxcY2xpZW50LXBhZ2UuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkM6XFxcXE1vbW15IEx1Y3lcXFxcUHJvamVjdHNcXFxcTHVjaWQgRHJlYW1cXFxcbm9kZV9tb2R1bGVzXFxcXG5leHRcXFxcZGlzdFxcXFxjbGllbnRcXFxcY29tcG9uZW50c1xcXFxjbGllbnQtc2VnbWVudC5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGNsaWVudFxcXFxjb21wb25lbnRzXFxcXGh0dHAtYWNjZXNzLWZhbGxiYWNrXFxcXGVycm9yLWJvdW5kYXJ5LmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxNb21teSBMdWN5XFxcXFByb2plY3RzXFxcXEx1Y2lkIERyZWFtXFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxcbGF5b3V0LXJvdXRlci5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGNsaWVudFxcXFxjb21wb25lbnRzXFxcXG1ldGFkYXRhXFxcXGFzeW5jLW1ldGFkYXRhLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxNb21teSBMdWN5XFxcXFByb2plY3RzXFxcXEx1Y2lkIERyZWFtXFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxccmVuZGVyLWZyb20tdGVtcGxhdGUtY29udGV4dC5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGxpYlxcXFxmcmFtZXdvcmtcXFxcYm91bmRhcnktY29tcG9uZW50cy5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGxpYlxcXFxtZXRhZGF0YVxcXFxnZW5lcmF0ZVxcXFxpY29uLW1hcmsuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkM6XFxcXE1vbW15IEx1Y3lcXFxcUHJvamVjdHNcXFxcTHVjaWQgRHJlYW1cXFxcbm9kZV9tb2R1bGVzXFxcXG5leHRcXFxcZGlzdFxcXFxuZXh0LWRldnRvb2xzXFxcXHVzZXJzcGFjZVxcXFxhcHBcXFxcc2VnbWVudC1leHBsb3Jlci1ub2RlLmpzXCIpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cbuiltin%5C%5Cglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Chttp-access-fallback%5C%5Cerror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Clayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cmetadata%5C%5Casync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Crender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cframework%5C%5Cboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cmetadata%5C%5Cgenerate%5C%5Cicon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cnext-devtools%5C%5Cuserspace%5C%5Capp%5C%5Csegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/dynamic-access-async-storage.external":
/*!***************************************************************************************!*\
  !*** external "next/dist/server/app-render/dynamic-access-async-storage.external.js" ***!
  \***************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/dynamic-access-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "module":
/*!*************************!*\
  !*** external "module" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("module");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/is-bot":
/*!***********************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/is-bot" ***!
  \***********************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/is-bot");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/react-hot-toast","vendor-chunks/goober","vendor-chunks/@swc"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=C%3A%5CMommy%20Lucy%5CProjects%5CLucid%20Dream%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CMommy%20Lucy%5CProjects%5CLucid%20Dream&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();