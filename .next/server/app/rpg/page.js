/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/rpg/page";
exports.ids = ["app/rpg/page"];
exports.modules = {

/***/ "(rsc)/./app/components/AchievementTriggerManager.tsx":
/*!******************************************************!*\
  !*** ./app/components/AchievementTriggerManager.tsx ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-server-dom-webpack/server */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-webpack-server.js\");\n/* harmony import */ var react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__);\n// This file is generated by the Webpack next-flight-loader.\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(\nfunction() { throw new Error(\"Attempted to call the default export of \\\"C:\\\\\\\\Mommy Lucy\\\\\\\\Projects\\\\\\\\Lucid Dream\\\\\\\\app\\\\\\\\components\\\\\\\\AchievementTriggerManager.tsx\\\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n\"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\components\\\\AchievementTriggerManager.tsx\",\n\"default\",\n));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvY29tcG9uZW50cy9BY2hpZXZlbWVudFRyaWdnZXJNYW5hZ2VyLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSIsInNvdXJjZXMiOlsiX05fRS8uL2FwcC9jb21wb25lbnRzL0FjaGlldmVtZW50VHJpZ2dlck1hbmFnZXIudHN4L19fbmV4dGpzLWludGVybmFsLXByb3h5Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGlzIGZpbGUgaXMgZ2VuZXJhdGVkIGJ5IHRoZSBXZWJwYWNrIG5leHQtZmxpZ2h0LWxvYWRlci5cbmltcG9ydCB7IHJlZ2lzdGVyQ2xpZW50UmVmZXJlbmNlIH0gZnJvbSBcInJlYWN0LXNlcnZlci1kb20td2VicGFjay9zZXJ2ZXJcIjtcbmV4cG9ydCBkZWZhdWx0IHJlZ2lzdGVyQ2xpZW50UmVmZXJlbmNlKFxuZnVuY3Rpb24oKSB7IHRocm93IG5ldyBFcnJvcihcIkF0dGVtcHRlZCB0byBjYWxsIHRoZSBkZWZhdWx0IGV4cG9ydCBvZiBcXFwiQzpcXFxcXFxcXE1vbW15IEx1Y3lcXFxcXFxcXFByb2plY3RzXFxcXFxcXFxMdWNpZCBEcmVhbVxcXFxcXFxcYXBwXFxcXFxcXFxjb21wb25lbnRzXFxcXFxcXFxBY2hpZXZlbWVudFRyaWdnZXJNYW5hZ2VyLnRzeFxcXCIgZnJvbSB0aGUgc2VydmVyLCBidXQgaXQncyBvbiB0aGUgY2xpZW50LiBJdCdzIG5vdCBwb3NzaWJsZSB0byBpbnZva2UgYSBjbGllbnQgZnVuY3Rpb24gZnJvbSB0aGUgc2VydmVyLCBpdCBjYW4gb25seSBiZSByZW5kZXJlZCBhcyBhIENvbXBvbmVudCBvciBwYXNzZWQgdG8gcHJvcHMgb2YgYSBDbGllbnQgQ29tcG9uZW50LlwiKTsgfSxcblwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxhcHBcXFxcY29tcG9uZW50c1xcXFxBY2hpZXZlbWVudFRyaWdnZXJNYW5hZ2VyLnRzeFwiLFxuXCJkZWZhdWx0XCIsXG4pO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/components/AchievementTriggerManager.tsx\n");

/***/ }),

/***/ "(rsc)/./app/components/ThemeController.tsx":
/*!********************************************!*\
  !*** ./app/components/ThemeController.tsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   isBrightTheme: () => (/* binding */ isBrightTheme)\n/* harmony export */ });\n/* harmony import */ var react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-server-dom-webpack/server */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-webpack-server.js\");\n/* harmony import */ var react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__);\n// This file is generated by the Webpack next-flight-loader.\n\nconst isBrightTheme = (0,react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(\nfunction() { throw new Error(\"Attempted to call isBrightTheme() from the server but isBrightTheme is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n\"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\components\\\\ThemeController.tsx\",\n\"isBrightTheme\",\n);/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(\nfunction() { throw new Error(\"Attempted to call the default export of \\\"C:\\\\\\\\Mommy Lucy\\\\\\\\Projects\\\\\\\\Lucid Dream\\\\\\\\app\\\\\\\\components\\\\\\\\ThemeController.tsx\\\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n\"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\components\\\\ThemeController.tsx\",\n\"default\",\n));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvY29tcG9uZW50cy9UaGVtZUNvbnRyb2xsZXIudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSIsInNvdXJjZXMiOlsiX05fRS8uL2FwcC9jb21wb25lbnRzL1RoZW1lQ29udHJvbGxlci50c3gvX19uZXh0anMtaW50ZXJuYWwtcHJveHkubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgZmlsZSBpcyBnZW5lcmF0ZWQgYnkgdGhlIFdlYnBhY2sgbmV4dC1mbGlnaHQtbG9hZGVyLlxuaW1wb3J0IHsgcmVnaXN0ZXJDbGllbnRSZWZlcmVuY2UgfSBmcm9tIFwicmVhY3Qtc2VydmVyLWRvbS13ZWJwYWNrL3NlcnZlclwiO1xuZXhwb3J0IGNvbnN0IGlzQnJpZ2h0VGhlbWUgPSByZWdpc3RlckNsaWVudFJlZmVyZW5jZShcbmZ1bmN0aW9uKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0ZWQgdG8gY2FsbCBpc0JyaWdodFRoZW1lKCkgZnJvbSB0aGUgc2VydmVyIGJ1dCBpc0JyaWdodFRoZW1lIGlzIG9uIHRoZSBjbGllbnQuIEl0J3Mgbm90IHBvc3NpYmxlIHRvIGludm9rZSBhIGNsaWVudCBmdW5jdGlvbiBmcm9tIHRoZSBzZXJ2ZXIsIGl0IGNhbiBvbmx5IGJlIHJlbmRlcmVkIGFzIGEgQ29tcG9uZW50IG9yIHBhc3NlZCB0byBwcm9wcyBvZiBhIENsaWVudCBDb21wb25lbnQuXCIpOyB9LFxuXCJDOlxcXFxNb21teSBMdWN5XFxcXFByb2plY3RzXFxcXEx1Y2lkIERyZWFtXFxcXGFwcFxcXFxjb21wb25lbnRzXFxcXFRoZW1lQ29udHJvbGxlci50c3hcIixcblwiaXNCcmlnaHRUaGVtZVwiLFxuKTtleHBvcnQgZGVmYXVsdCByZWdpc3RlckNsaWVudFJlZmVyZW5jZShcbmZ1bmN0aW9uKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0ZWQgdG8gY2FsbCB0aGUgZGVmYXVsdCBleHBvcnQgb2YgXFxcIkM6XFxcXFxcXFxNb21teSBMdWN5XFxcXFxcXFxQcm9qZWN0c1xcXFxcXFxcTHVjaWQgRHJlYW1cXFxcXFxcXGFwcFxcXFxcXFxcY29tcG9uZW50c1xcXFxcXFxcVGhlbWVDb250cm9sbGVyLnRzeFxcXCIgZnJvbSB0aGUgc2VydmVyLCBidXQgaXQncyBvbiB0aGUgY2xpZW50LiBJdCdzIG5vdCBwb3NzaWJsZSB0byBpbnZva2UgYSBjbGllbnQgZnVuY3Rpb24gZnJvbSB0aGUgc2VydmVyLCBpdCBjYW4gb25seSBiZSByZW5kZXJlZCBhcyBhIENvbXBvbmVudCBvciBwYXNzZWQgdG8gcHJvcHMgb2YgYSBDbGllbnQgQ29tcG9uZW50LlwiKTsgfSxcblwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxhcHBcXFxcY29tcG9uZW50c1xcXFxUaGVtZUNvbnRyb2xsZXIudHN4XCIsXG5cImRlZmF1bHRcIixcbik7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/components/ThemeController.tsx\n");

/***/ }),

/***/ "(rsc)/./app/globals.css":
/*!*************************!*\
  !*** ./app/globals.css ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"20b636908ba0\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvZ2xvYmFscy5jc3MiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGlFQUFlLGNBQWM7QUFDN0IsSUFBSSxLQUFVLEVBQUUsRUFBdUIiLCJzb3VyY2VzIjpbIkM6XFxNb21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxcZ2xvYmFscy5jc3MiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCIyMGI2MzY5MDhiYTBcIlxuaWYgKG1vZHVsZS5ob3QpIHsgbW9kdWxlLmhvdC5hY2NlcHQoKSB9XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/globals.css\n");

/***/ }),

/***/ "(rsc)/./app/layout.tsx":
/*!************************!*\
  !*** ./app/layout.tsx ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RootLayout),\n/* harmony export */   metadata: () => (/* binding */ metadata)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./globals.css */ \"(rsc)/./app/globals.css\");\n/* harmony import */ var _components_ThemeController__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/ThemeController */ \"(rsc)/./app/components/ThemeController.tsx\");\n/* harmony import */ var _components_AchievementTriggerManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components/AchievementTriggerManager */ \"(rsc)/./app/components/AchievementTriggerManager.tsx\");\n/* harmony import */ var react_hot_toast__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-hot-toast */ \"(rsc)/./node_modules/react-hot-toast/dist/index.mjs\");\n\n\n\n\n\nconst metadata = {\n    title: \"Lucid Dream Temple RPG\",\n    description: \"Single-file emergent dream journal RPG\"\n};\nfunction RootLayout({ children }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"html\", {\n        lang: \"en\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"body\", {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ThemeController__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {}, void 0, false, {\n                    fileName: \"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\layout.tsx\",\n                    lineNumber: 15,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"min-h-screen bg-base-100 text-base-content transition-colors duration-300\",\n                    children: children\n                }, void 0, false, {\n                    fileName: \"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\layout.tsx\",\n                    lineNumber: 16,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AchievementTriggerManager__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {}, void 0, false, {\n                    fileName: \"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\layout.tsx\",\n                    lineNumber: 19,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_hot_toast__WEBPACK_IMPORTED_MODULE_4__.Toaster, {\n                    position: \"bottom-right\",\n                    reverseOrder: false\n                }, void 0, false, {\n                    fileName: \"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\layout.tsx\",\n                    lineNumber: 20,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\layout.tsx\",\n            lineNumber: 14,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\layout.tsx\",\n        lineNumber: 13,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvbGF5b3V0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBdUI7QUFDb0M7QUFDb0I7QUFDckM7QUFFbkMsTUFBTUcsV0FBVztJQUN0QkMsT0FBTztJQUNQQyxhQUFhO0FBQ2YsRUFBRTtBQUVhLFNBQVNDLFdBQVcsRUFBRUMsUUFBUSxFQUFpQztJQUM1RSxxQkFDRSw4REFBQ0M7UUFBS0MsTUFBSztrQkFDVCw0RUFBQ0M7OzhCQUNDLDhEQUFDVixtRUFBZUE7Ozs7OzhCQUNoQiw4REFBQ1c7b0JBQUlDLFdBQVU7OEJBQ1pMOzs7Ozs7OEJBRUgsOERBQUNOLDZFQUF5QkE7Ozs7OzhCQUMxQiw4REFBQ0Msb0RBQU9BO29CQUNOVyxVQUFTO29CQUNUQyxjQUFjOzs7Ozs7Ozs7Ozs7Ozs7OztBQUt4QiIsInNvdXJjZXMiOlsiQzpcXE1vbW15IEx1Y3lcXFByb2plY3RzXFxMdWNpZCBEcmVhbVxcYXBwXFxsYXlvdXQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcIi4vZ2xvYmFscy5jc3NcIjtcbmltcG9ydCBUaGVtZUNvbnRyb2xsZXIgZnJvbSBcIi4vY29tcG9uZW50cy9UaGVtZUNvbnRyb2xsZXJcIjtcbmltcG9ydCBBY2hpZXZlbWVudFRyaWdnZXJNYW5hZ2VyIGZyb20gXCIuL2NvbXBvbmVudHMvQWNoaWV2ZW1lbnRUcmlnZ2VyTWFuYWdlclwiO1xuaW1wb3J0IHsgVG9hc3RlciB9IGZyb20gXCJyZWFjdC1ob3QtdG9hc3RcIjtcblxuZXhwb3J0IGNvbnN0IG1ldGFkYXRhID0ge1xuICB0aXRsZTogXCJMdWNpZCBEcmVhbSBUZW1wbGUgUlBHXCIsXG4gIGRlc2NyaXB0aW9uOiBcIlNpbmdsZS1maWxlIGVtZXJnZW50IGRyZWFtIGpvdXJuYWwgUlBHXCIsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBSb290TGF5b3V0KHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0pIHtcbiAgcmV0dXJuIChcbiAgICA8aHRtbCBsYW5nPVwiZW5cIj5cbiAgICAgIDxib2R5PlxuICAgICAgICA8VGhlbWVDb250cm9sbGVyIC8+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLWJhc2UtMTAwIHRleHQtYmFzZS1jb250ZW50IHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTMwMFwiPlxuICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxBY2hpZXZlbWVudFRyaWdnZXJNYW5hZ2VyIC8+XG4gICAgICAgIDxUb2FzdGVyXG4gICAgICAgICAgcG9zaXRpb249XCJib3R0b20tcmlnaHRcIlxuICAgICAgICAgIHJldmVyc2VPcmRlcj17ZmFsc2V9XG4gICAgICAgIC8+XG4gICAgICA8L2JvZHk+XG4gICAgPC9odG1sPlxuICApO1xufVxuIl0sIm5hbWVzIjpbIlRoZW1lQ29udHJvbGxlciIsIkFjaGlldmVtZW50VHJpZ2dlck1hbmFnZXIiLCJUb2FzdGVyIiwibWV0YWRhdGEiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiUm9vdExheW91dCIsImNoaWxkcmVuIiwiaHRtbCIsImxhbmciLCJib2R5IiwiZGl2IiwiY2xhc3NOYW1lIiwicG9zaXRpb24iLCJyZXZlcnNlT3JkZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/layout.tsx\n");

/***/ }),

/***/ "(rsc)/./app/rpg/layout.tsx":
/*!****************************!*\
  !*** ./app/rpg/layout.tsx ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RPGLayer)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\nfunction RPGLayer({ children }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n        fallback: null,\n        children: children\n    }, void 0, false, {\n        fileName: \"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\rpg\\\\layout.tsx\",\n        lineNumber: 4,\n        columnNumber: 10\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvcnBnL2xheW91dC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWlDO0FBRWxCLFNBQVNDLFNBQVMsRUFBRUMsUUFBUSxFQUFpQztJQUMxRSxxQkFBTyw4REFBQ0YsMkNBQVFBO1FBQUNHLFVBQVU7a0JBQU9EOzs7Ozs7QUFDcEMiLCJzb3VyY2VzIjpbIkM6XFxNb21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxccnBnXFxsYXlvdXQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN1c3BlbnNlIH0gZnJvbSBcInJlYWN0XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJQR0xheWVyKHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0pIHtcbiAgcmV0dXJuIDxTdXNwZW5zZSBmYWxsYmFjaz17bnVsbH0+e2NoaWxkcmVufTwvU3VzcGVuc2U+O1xufVxyXG4iXSwibmFtZXMiOlsiU3VzcGVuc2UiLCJSUEdMYXllciIsImNoaWxkcmVuIiwiZmFsbGJhY2siXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/rpg/layout.tsx\n");

/***/ }),

/***/ "(rsc)/./app/rpg/page.tsx":
/*!**************************!*\
  !*** ./app/rpg/page.tsx ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RPGIndexPage)\n/* harmony export */ });\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/navigation */ \"(rsc)/./node_modules/next/dist/api/navigation.react-server.js\");\n\nfunction RPGIndexPage() {\n    (0,next_navigation__WEBPACK_IMPORTED_MODULE_0__.redirect)(\"/rpg/dashboard\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvcnBnL3BhZ2UudHN4IiwibWFwcGluZ3MiOiI7Ozs7O0FBQTJDO0FBRTVCLFNBQVNDO0lBQ3RCRCx5REFBUUEsQ0FBQztBQUNYIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXHJwZ1xccGFnZS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVkaXJlY3QgfSBmcm9tIFwibmV4dC9uYXZpZ2F0aW9uXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJQR0luZGV4UGFnZSgpIHtcbiAgcmVkaXJlY3QoXCIvcnBnL2Rhc2hib2FyZFwiKTtcbn1cbiJdLCJuYW1lcyI6WyJyZWRpcmVjdCIsIlJQR0luZGV4UGFnZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/rpg/page.tsx\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Frpg%2Fpage&page=%2Frpg%2Fpage&appPaths=%2Frpg%2Fpage&pagePath=private-next-app-dir%2Frpg%2Fpage.tsx&appDir=C%3A%5CMommy%20Lucy%5CProjects%5CLucid%20Dream%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CMommy%20Lucy%5CProjects%5CLucid%20Dream&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Frpg%2Fpage&page=%2Frpg%2Fpage&appPaths=%2Frpg%2Fpage&pagePath=private-next-app-dir%2Frpg%2Fpage.tsx&appDir=C%3A%5CMommy%20Lucy%5CProjects%5CLucid%20Dream%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CMommy%20Lucy%5CProjects%5CLucid%20Dream&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GlobalError: () => (/* reexport default from dynamic */ next_dist_client_components_builtin_global_error_js__WEBPACK_IMPORTED_MODULE_25___default.a),\n/* harmony export */   __next_app__: () => (/* binding */ __next_app__),\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   pages: () => (/* binding */ pages),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   tree: () => (/* binding */ tree)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-page/module.compiled */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/module.compiled.js?6a4d\");\n/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_app_render_interop_default__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/app-render/interop-default */ \"(rsc)/./node_modules/next/dist/server/app-render/interop-default.js\");\n/* harmony import */ var next_dist_server_app_render_strip_flight_headers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/app-render/strip-flight-headers */ \"(rsc)/./node_modules/next/dist/server/app-render/strip-flight-headers.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_lib_experimental_ppr__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/lib/experimental/ppr */ \"(rsc)/./node_modules/next/dist/server/lib/experimental/ppr.js\");\n/* harmony import */ var next_dist_server_lib_experimental_ppr__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_experimental_ppr__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var next_dist_server_request_fallback_params__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/request/fallback-params */ \"(rsc)/./node_modules/next/dist/server/request/fallback-params.js\");\n/* harmony import */ var next_dist_server_app_render_encryption_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/app-render/encryption-utils */ \"(rsc)/./node_modules/next/dist/server/app-render/encryption-utils.js\");\n/* harmony import */ var next_dist_server_app_render_encryption_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_encryption_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_streaming_metadata__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/streaming-metadata */ \"(rsc)/./node_modules/next/dist/server/lib/streaming-metadata.js\");\n/* harmony import */ var next_dist_server_lib_streaming_metadata__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_streaming_metadata__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var next_dist_server_app_render_action_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/server/app-render/action-utils */ \"(rsc)/./node_modules/next/dist/server/app-render/action-utils.js\");\n/* harmony import */ var next_dist_server_app_render_action_utils__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_action_utils__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_lib_server_action_request_meta__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/lib/server-action-request-meta */ \"(rsc)/./node_modules/next/dist/server/lib/server-action-request-meta.js\");\n/* harmony import */ var next_dist_server_lib_server_action_request_meta__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_server_action_request_meta__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! next/dist/client/components/app-router-headers */ \"(rsc)/./node_modules/next/dist/client/components/app-router-headers.js\");\n/* harmony import */ var next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/is-bot */ \"next/dist/shared/lib/router/utils/is-bot\");\n/* harmony import */ var next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! next/dist/lib/fallback */ \"(rsc)/./node_modules/next/dist/lib/fallback.js\");\n/* harmony import */ var next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__);\n/* harmony import */ var next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! next/dist/server/render-result */ \"(rsc)/./node_modules/next/dist/server/render-result.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__);\n/* harmony import */ var next_dist_server_stream_utils_encoded_tags__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! next/dist/server/stream-utils/encoded-tags */ \"(rsc)/./node_modules/next/dist/server/stream-utils/encoded-tags.js\");\n/* harmony import */ var next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! next/dist/server/send-payload */ \"(rsc)/./node_modules/next/dist/server/send-payload.js\");\n/* harmony import */ var next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_24__);\n/* harmony import */ var next_dist_client_components_builtin_global_error_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! next/dist/client/components/builtin/global-error.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/global-error.js\");\n/* harmony import */ var next_dist_client_components_builtin_global_error_js__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_builtin_global_error_js__WEBPACK_IMPORTED_MODULE_25__);\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! next/dist/server/app-render/entry-base */ \"(rsc)/./node_modules/next/dist/server/app-render/entry-base.js\");\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26__);\n/* harmony import */ var next_dist_client_components_redirect_status_code__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! next/dist/client/components/redirect-status-code */ \"(rsc)/./node_modules/next/dist/client/components/redirect-status-code.js\");\n/* harmony import */ var next_dist_client_components_redirect_status_code__WEBPACK_IMPORTED_MODULE_27___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_redirect_status_code__WEBPACK_IMPORTED_MODULE_27__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26__) if([\"default\",\"tree\",\"pages\",\"GlobalError\",\"__next_app__\",\"routeModule\",\"handler\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\nconst module0 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/layout.tsx */ \"(rsc)/./app/layout.tsx\"));\nconst module1 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/builtin/global-error.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/global-error.js\", 23));\nconst module2 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/builtin/not-found.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/not-found.js\", 23));\nconst module3 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/builtin/forbidden.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/forbidden.js\", 23));\nconst module4 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/builtin/unauthorized.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/unauthorized.js\", 23));\nconst module5 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/rpg/layout.tsx */ \"(rsc)/./app/rpg/layout.tsx\"));\nconst page6 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/rpg/page.tsx */ \"(rsc)/./app/rpg/page.tsx\"));\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the tree and pages here so that we can use them in the route\n// module.\nconst tree = {\n        children: [\n        '',\n        {\n        children: [\n        'rpg',\n        {\n        children: ['__PAGE__', {}, {\n          page: [page6, \"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\rpg\\\\page.tsx\"],\n          \n        }]\n      },\n        {\n        'layout': [module5, \"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\rpg\\\\layout.tsx\"],\n        \n      }\n      ]\n      },\n        {\n        'layout': [module0, \"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\layout.tsx\"],\n'global-error': [module1, \"next/dist/client/components/builtin/global-error.js\"],\n'not-found': [module2, \"next/dist/client/components/builtin/not-found.js\"],\n'forbidden': [module3, \"next/dist/client/components/builtin/forbidden.js\"],\n'unauthorized': [module4, \"next/dist/client/components/builtin/unauthorized.js\"],\n        \n      }\n      ]\n      }.children;\nconst pages = [\"C:\\\\Mommy Lucy\\\\Projects\\\\Lucid Dream\\\\app\\\\rpg\\\\page.tsx\"];\n\n\n\nconst __next_app_require__ = __webpack_require__\nconst __next_app_load_chunk__ = () => Promise.resolve()\nconst __next_app__ = {\n    require: __next_app_require__,\n    loadChunk: __next_app_load_chunk__\n};\n\n\n\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppPageRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,\n        page: \"/rpg/page\",\n        pathname: \"/rpg\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: '',\n        appPaths: []\n    },\n    userland: {\n        loaderTree: tree\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || ''\n});\nasync function handler(req, res, ctx) {\n    var _this;\n    let srcPage = \"/rpg/page\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const initialPostponed = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'postponed');\n    // TODO: replace with more specific flags\n    const minimalMode = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'minimalMode');\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, query, params, parsedUrl, pageIsDynamic, buildManifest, nextFontManifest, reactLoadableManifest, serverActionsManifest, clientReferenceManifest, subresourceIntegrityManifest, prerenderManifest, isDraftMode, resolvedPathname, revalidateOnlyGenerated, routerServerContext, nextConfig, interceptionRoutePatterns } = prepareResult;\n    const pathname = parsedUrl.pathname || '/';\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_14__.normalizeAppPath)(srcPage);\n    let { isOnDemandRevalidate } = prepareResult;\n    const prerenderInfo = routeModule.match(pathname, prerenderManifest);\n    const isPrerendered = !!prerenderManifest.routes[resolvedPathname];\n    let isSSG = Boolean(prerenderInfo || isPrerendered || prerenderManifest.routes[normalizedSrcPage]);\n    const userAgent = req.headers['user-agent'] || '';\n    const botType = (0,next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_17__.getBotType)(userAgent);\n    const isHtmlBot = (0,next_dist_server_lib_streaming_metadata__WEBPACK_IMPORTED_MODULE_12__.isHtmlBotRequest)(req);\n    /**\n   * If true, this indicates that the request being made is for an app\n   * prefetch request.\n   */ const isPrefetchRSCRequest = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'isPrefetchRSCRequest') ?? req.headers[next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.NEXT_ROUTER_PREFETCH_HEADER] === '1' // exclude runtime prefetches, which use '2'\n    ;\n    // NOTE: Don't delete headers[RSC] yet, it still needs to be used in renderToHTML later\n    const isRSCRequest = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'isRSCRequest') ?? Boolean(req.headers[next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.RSC_HEADER]);\n    const isPossibleServerAction = (0,next_dist_server_lib_server_action_request_meta__WEBPACK_IMPORTED_MODULE_15__.getIsPossibleServerAction)(req);\n    /**\n   * If the route being rendered is an app page, and the ppr feature has been\n   * enabled, then the given route _could_ support PPR.\n   */ const couldSupportPPR = (0,next_dist_server_lib_experimental_ppr__WEBPACK_IMPORTED_MODULE_9__.checkIsAppPPREnabled)(nextConfig.experimental.ppr);\n    // When enabled, this will allow the use of the `?__nextppronly` query to\n    // enable debugging of the static shell.\n    const hasDebugStaticShellQuery =  false && 0;\n    // When enabled, this will allow the use of the `?__nextppronly` query\n    // to enable debugging of the fallback shell.\n    const hasDebugFallbackShellQuery = hasDebugStaticShellQuery && query.__nextppronly === 'fallback';\n    // This page supports PPR if it is marked as being `PARTIALLY_STATIC` in the\n    // prerender manifest and this is an app page.\n    const isRoutePPREnabled = couldSupportPPR && (((_this = prerenderManifest.routes[normalizedSrcPage] ?? prerenderManifest.dynamicRoutes[normalizedSrcPage]) == null ? void 0 : _this.renderingMode) === 'PARTIALLY_STATIC' || // Ideally we'd want to check the appConfig to see if this page has PPR\n    // enabled or not, but that would require plumbing the appConfig through\n    // to the server during development. We assume that the page supports it\n    // but only during development.\n    hasDebugStaticShellQuery && (routeModule.isDev === true || (routerServerContext == null ? void 0 : routerServerContext.experimentalTestProxy) === true));\n    const isDebugStaticShell = hasDebugStaticShellQuery && isRoutePPREnabled;\n    // We should enable debugging dynamic accesses when the static shell\n    // debugging has been enabled and we're also in development mode.\n    const isDebugDynamicAccesses = isDebugStaticShell && routeModule.isDev === true;\n    const isDebugFallbackShell = hasDebugFallbackShellQuery && isRoutePPREnabled;\n    // If we're in minimal mode, then try to get the postponed information from\n    // the request metadata. If available, use it for resuming the postponed\n    // render.\n    const minimalPostponed = isRoutePPREnabled ? initialPostponed : undefined;\n    // If PPR is enabled, and this is a RSC request (but not a prefetch), then\n    // we can use this fact to only generate the flight data for the request\n    // because we can't cache the HTML (as it's also dynamic).\n    const isDynamicRSCRequest = isRoutePPREnabled && isRSCRequest && !isPrefetchRSCRequest;\n    // Need to read this before it's stripped by stripFlightHeaders. We don't\n    // need to transfer it to the request meta because it's only read\n    // within this function; the static segment data should have already been\n    // generated, so we will always either return a static response or a 404.\n    const segmentPrefetchHeader = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'segmentPrefetchRSCRequest');\n    // TODO: investigate existing bug with shouldServeStreamingMetadata always\n    // being true for a revalidate due to modifying the base-server this.renderOpts\n    // when fixing this to correct logic it causes hydration issue since we set\n    // serveStreamingMetadata to true during export\n    let serveStreamingMetadata = !userAgent ? true : (0,next_dist_server_lib_streaming_metadata__WEBPACK_IMPORTED_MODULE_12__.shouldServeStreamingMetadata)(userAgent, nextConfig.htmlLimitedBots);\n    if (isHtmlBot && isRoutePPREnabled) {\n        isSSG = false;\n        serveStreamingMetadata = false;\n    }\n    // In development, we always want to generate dynamic HTML.\n    let supportsDynamicResponse = // If we're in development, we always support dynamic HTML, unless it's\n    // a data request, in which case we only produce static HTML.\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isSSG || // If this request has provided postponed data, it supports dynamic\n    // HTML.\n    typeof initialPostponed === 'string' || // If this is a dynamic RSC request, then this render supports dynamic\n    // HTML (it's dynamic).\n    isDynamicRSCRequest;\n    // When html bots request PPR page, perform the full dynamic rendering.\n    const shouldWaitOnAllReady = isHtmlBot && isRoutePPREnabled;\n    let ssgCacheKey = null;\n    if (!isDraftMode && isSSG && !supportsDynamicResponse && !isPossibleServerAction && !minimalPostponed && !isDynamicRSCRequest) {\n        ssgCacheKey = resolvedPathname;\n    }\n    // the staticPathKey differs from ssgCacheKey since\n    // ssgCacheKey is null in dev since we're always in \"dynamic\"\n    // mode in dev to bypass the cache, but we still need to honor\n    // dynamicParams = false in dev mode\n    let staticPathKey = ssgCacheKey;\n    if (!staticPathKey && routeModule.isDev) {\n        staticPathKey = resolvedPathname;\n    }\n    // If this is a request for an app path that should be statically generated\n    // and we aren't in the edge runtime, strip the flight headers so it will\n    // generate the static response.\n    if (!routeModule.isDev && !isDraftMode && isSSG && isRSCRequest && !isDynamicRSCRequest) {\n        (0,next_dist_server_app_render_strip_flight_headers__WEBPACK_IMPORTED_MODULE_7__.stripFlightHeaders)(req.headers);\n    }\n    const ComponentMod = {\n        ...next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26__,\n        tree,\n        pages,\n        GlobalError: (next_dist_client_components_builtin_global_error_js__WEBPACK_IMPORTED_MODULE_25___default()),\n        handler,\n        routeModule,\n        __next_app__\n    };\n    // Before rendering (which initializes component tree modules), we have to\n    // set the reference manifests to our global store so Server Action's\n    // encryption util can access to them at the top level of the page module.\n    if (serverActionsManifest && clientReferenceManifest) {\n        (0,next_dist_server_app_render_encryption_utils__WEBPACK_IMPORTED_MODULE_11__.setReferenceManifestsSingleton)({\n            page: srcPage,\n            clientReferenceManifest,\n            serverActionsManifest,\n            serverModuleMap: (0,next_dist_server_app_render_action_utils__WEBPACK_IMPORTED_MODULE_13__.createServerModuleMap)({\n                serverActionsManifest\n            })\n        });\n    }\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    try {\n        const varyHeader = routeModule.getVaryHeader(resolvedPathname, interceptionRoutePatterns);\n        res.setHeader('Vary', varyHeader);\n        const invokeRouteModule = async (span, context)=>{\n            const nextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8__.NodeNextRequest(req);\n            const nextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8__.NodeNextResponse(res);\n            // TODO: adapt for putting the RDC inside the postponed data\n            // If we're in dev, and this isn't a prefetch or a server action,\n            // we should seed the resume data cache.\n            if (true) {\n                if (nextConfig.experimental.cacheComponents && !isPrefetchRSCRequest && !context.renderOpts.isPossibleServerAction) {\n                    const warmup = await routeModule.warmup(nextReq, nextRes, context);\n                    // If the warmup is successful, we should use the resume data\n                    // cache from the warmup.\n                    if (warmup.metadata.renderResumeDataCache) {\n                        context.renderOpts.renderResumeDataCache = warmup.metadata.renderResumeDataCache;\n                    }\n                }\n            }\n            return routeModule.render(nextReq, nextRes, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_5__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const doRender = async ({ span, postponed, fallbackRouteParams })=>{\n            const context = {\n                query,\n                params,\n                page: normalizedSrcPage,\n                sharedContext: {\n                    buildId\n                },\n                serverComponentsHmrCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'serverComponentsHmrCache'),\n                fallbackRouteParams,\n                renderOpts: {\n                    App: ()=>null,\n                    Document: ()=>null,\n                    pageConfig: {},\n                    ComponentMod,\n                    Component: (0,next_dist_server_app_render_interop_default__WEBPACK_IMPORTED_MODULE_6__.interopDefault)(ComponentMod),\n                    params,\n                    routeModule,\n                    page: srcPage,\n                    postponed,\n                    shouldWaitOnAllReady,\n                    serveStreamingMetadata,\n                    supportsDynamicResponse: typeof postponed === 'string' || supportsDynamicResponse,\n                    buildManifest,\n                    nextFontManifest,\n                    reactLoadableManifest,\n                    subresourceIntegrityManifest,\n                    serverActionsManifest,\n                    clientReferenceManifest,\n                    setIsrStatus: routerServerContext == null ? void 0 : routerServerContext.setIsrStatus,\n                    dir:  true ? (__webpack_require__(/*! path */ \"path\").join)(/* turbopackIgnore: true */ process.cwd(), routeModule.relativeProjectDir) : 0,\n                    isDraftMode,\n                    isRevalidate: isSSG && !postponed && !isDynamicRSCRequest,\n                    botType,\n                    isOnDemandRevalidate,\n                    isPossibleServerAction,\n                    assetPrefix: nextConfig.assetPrefix,\n                    nextConfigOutput: nextConfig.output,\n                    crossOrigin: nextConfig.crossOrigin,\n                    trailingSlash: nextConfig.trailingSlash,\n                    previewProps: prerenderManifest.preview,\n                    deploymentId: nextConfig.deploymentId,\n                    enableTainting: nextConfig.experimental.taint,\n                    htmlLimitedBots: nextConfig.htmlLimitedBots,\n                    devtoolSegmentExplorer: nextConfig.experimental.devtoolSegmentExplorer,\n                    reactMaxHeadersLength: nextConfig.reactMaxHeadersLength,\n                    multiZoneDraftMode,\n                    incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'incrementalCache'),\n                    cacheLifeProfiles: nextConfig.experimental.cacheLife,\n                    basePath: nextConfig.basePath,\n                    serverActions: nextConfig.experimental.serverActions,\n                    ...isDebugStaticShell || isDebugDynamicAccesses ? {\n                        nextExport: true,\n                        supportsDynamicResponse: false,\n                        isStaticGeneration: true,\n                        isRevalidate: true,\n                        isDebugDynamicAccesses: isDebugDynamicAccesses\n                    } : {},\n                    experimental: {\n                        isRoutePPREnabled,\n                        expireTime: nextConfig.expireTime,\n                        staleTimes: nextConfig.experimental.staleTimes,\n                        cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                        clientSegmentCache: Boolean(nextConfig.experimental.clientSegmentCache),\n                        clientParamParsing: Boolean(nextConfig.experimental.clientParamParsing),\n                        dynamicOnHover: Boolean(nextConfig.experimental.dynamicOnHover),\n                        inlineCss: Boolean(nextConfig.experimental.inlineCss),\n                        authInterrupts: Boolean(nextConfig.experimental.authInterrupts),\n                        clientTraceMetadata: nextConfig.experimental.clientTraceMetadata || []\n                    },\n                    waitUntil: ctx.waitUntil,\n                    onClose: (cb)=>{\n                        res.on('close', cb);\n                    },\n                    onAfterTaskError: ()=>{},\n                    onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext),\n                    err: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'invokeError'),\n                    dev: routeModule.isDev\n                }\n            };\n            const result = await invokeRouteModule(span, context);\n            const { metadata } = result;\n            const { cacheControl, headers = {}, // Add any fetch tags that were on the page to the response headers.\n            fetchTags: cacheTags } = metadata;\n            if (cacheTags) {\n                headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n            }\n            // Pull any fetch metrics from the render onto the request.\n            ;\n            req.fetchMetrics = metadata.fetchMetrics;\n            // we don't throw static to dynamic errors in dev as isSSG\n            // is a best guess in dev since we don't have the prerender pass\n            // to know whether the path is actually static or not\n            if (isSSG && (cacheControl == null ? void 0 : cacheControl.revalidate) === 0 && !routeModule.isDev && !isRoutePPREnabled) {\n                const staticBailoutInfo = metadata.staticBailoutInfo;\n                const err = Object.defineProperty(new Error(`Page changed from static to dynamic at runtime ${resolvedPathname}${(staticBailoutInfo == null ? void 0 : staticBailoutInfo.description) ? `, reason: ${staticBailoutInfo.description}` : ``}` + `\\nsee more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E132\",\n                    enumerable: false,\n                    configurable: true\n                });\n                if (staticBailoutInfo == null ? void 0 : staticBailoutInfo.stack) {\n                    const stack = staticBailoutInfo.stack;\n                    err.stack = err.message + stack.substring(stack.indexOf('\\n'));\n                }\n                throw err;\n            }\n            return {\n                value: {\n                    kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__.CachedRouteKind.APP_PAGE,\n                    html: result,\n                    headers,\n                    rscData: metadata.flightData,\n                    postponed: metadata.postponed,\n                    status: metadata.statusCode,\n                    segmentData: metadata.segmentData\n                },\n                cacheControl\n            };\n        };\n        const responseGenerator = async ({ hasResolved, previousCacheEntry, isRevalidating, span })=>{\n            const isProduction = routeModule.isDev === false;\n            const didRespond = hasResolved || res.writableEnded;\n            // skip on-demand revalidate if cache is not present and\n            // revalidate-if-generated is set\n            if (isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry && !minimalMode) {\n                if (routerServerContext == null ? void 0 : routerServerContext.render404) {\n                    await routerServerContext.render404(req, res);\n                } else {\n                    res.statusCode = 404;\n                    res.end('This page could not be found');\n                }\n                return null;\n            }\n            let fallbackMode;\n            if (prerenderInfo) {\n                fallbackMode = (0,next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.parseFallbackField)(prerenderInfo.fallback);\n            }\n            // When serving a HTML bot request, we want to serve a blocking render and\n            // not the prerendered page. This ensures that the correct content is served\n            // to the bot in the head.\n            if (fallbackMode === next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.PRERENDER && (0,next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_17__.isBot)(userAgent)) {\n                if (!isRoutePPREnabled || isHtmlBot) {\n                    fallbackMode = next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.BLOCKING_STATIC_RENDER;\n                }\n            }\n            if ((previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) === -1) {\n                isOnDemandRevalidate = true;\n            }\n            // TODO: adapt for PPR\n            // only allow on-demand revalidate for fallback: true/blocking\n            // or for prerendered fallback: false paths\n            if (isOnDemandRevalidate && (fallbackMode !== next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.NOT_FOUND || previousCacheEntry)) {\n                fallbackMode = next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.BLOCKING_STATIC_RENDER;\n            }\n            if (!minimalMode && fallbackMode !== next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.BLOCKING_STATIC_RENDER && staticPathKey && !didRespond && !isDraftMode && pageIsDynamic && (isProduction || !isPrerendered)) {\n                // if the page has dynamicParams: false and this pathname wasn't\n                // prerendered trigger the no fallback handling\n                if (// In development, fall through to render to handle missing\n                // getStaticPaths.\n                (isProduction || prerenderInfo) && // When fallback isn't present, abort this render so we 404\n                fallbackMode === next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.NOT_FOUND) {\n                    throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_24__.NoFallbackError();\n                }\n                let fallbackResponse;\n                if (isRoutePPREnabled && !isRSCRequest) {\n                    const cacheKey = typeof (prerenderInfo == null ? void 0 : prerenderInfo.fallback) === 'string' ? prerenderInfo.fallback : isProduction ? normalizedSrcPage : null;\n                    // We use the response cache here to handle the revalidation and\n                    // management of the fallback shell.\n                    fallbackResponse = await routeModule.handleResponse({\n                        cacheKey,\n                        req,\n                        nextConfig,\n                        routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,\n                        isFallback: true,\n                        prerenderManifest,\n                        isRoutePPREnabled,\n                        responseGenerator: async ()=>doRender({\n                                span,\n                                // We pass `undefined` as rendering a fallback isn't resumed\n                                // here.\n                                postponed: undefined,\n                                fallbackRouteParams: // If we're in production or we're debugging the fallback\n                                // shell then we should postpone when dynamic params are\n                                // accessed.\n                                isProduction || isDebugFallbackShell ? (0,next_dist_server_request_fallback_params__WEBPACK_IMPORTED_MODULE_10__.getFallbackRouteParams)(normalizedSrcPage) : null\n                            }),\n                        waitUntil: ctx.waitUntil\n                    });\n                    // If the fallback response was set to null, then we should return null.\n                    if (fallbackResponse === null) return null;\n                    // Otherwise, if we did get a fallback response, we should return it.\n                    if (fallbackResponse) {\n                        // Remove the cache control from the response to prevent it from being\n                        // used in the surrounding cache.\n                        delete fallbackResponse.cacheControl;\n                        return fallbackResponse;\n                    }\n                }\n            }\n            // Only requests that aren't revalidating can be resumed. If we have the\n            // minimal postponed data, then we should resume the render with it.\n            const postponed = !isOnDemandRevalidate && !isRevalidating && minimalPostponed ? minimalPostponed : undefined;\n            // When we're in minimal mode, if we're trying to debug the static shell,\n            // we should just return nothing instead of resuming the dynamic render.\n            if ((isDebugStaticShell || isDebugDynamicAccesses) && typeof postponed !== 'undefined') {\n                return {\n                    cacheControl: {\n                        revalidate: 1,\n                        expire: undefined\n                    },\n                    value: {\n                        kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__.CachedRouteKind.PAGES,\n                        html: next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_20__[\"default\"].EMPTY,\n                        pageData: {},\n                        headers: undefined,\n                        status: undefined\n                    }\n                };\n            }\n            // If this is a dynamic route with PPR enabled and the default route\n            // matches were set, then we should pass the fallback route params to\n            // the renderer as this is a fallback revalidation request.\n            const fallbackRouteParams = pageIsDynamic && isRoutePPREnabled && ((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'renderFallbackShell') || isDebugFallbackShell) ? (0,next_dist_server_request_fallback_params__WEBPACK_IMPORTED_MODULE_10__.getFallbackRouteParams)(pathname) : null;\n            // Perform the render.\n            return doRender({\n                span,\n                postponed,\n                fallbackRouteParams\n            });\n        };\n        const handleResponse = async (span)=>{\n            var _cacheEntry_value, _cachedData_headers;\n            const cacheEntry = await routeModule.handleResponse({\n                cacheKey: ssgCacheKey,\n                responseGenerator: (c)=>responseGenerator({\n                        span,\n                        ...c\n                    }),\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,\n                isOnDemandRevalidate,\n                isRoutePPREnabled,\n                req,\n                nextConfig,\n                prerenderManifest,\n                waitUntil: ctx.waitUntil\n            });\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            // In dev, we should not cache pages for any reason.\n            if (routeModule.isDev) {\n                res.setHeader('Cache-Control', 'no-store, must-revalidate');\n            }\n            if (!cacheEntry) {\n                if (ssgCacheKey) {\n                    // A cache entry might not be generated if a response is written\n                    // in `getInitialProps` or `getServerSideProps`, but those shouldn't\n                    // have a cache key. If we do have a cache key but we don't end up\n                    // with a cache entry, then either Next.js or the application has a\n                    // bug that needs fixing.\n                    throw Object.defineProperty(new Error('invariant: cache entry required but not generated'), \"__NEXT_ERROR_CODE\", {\n                        value: \"E62\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n                return null;\n            }\n            if (((_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__.CachedRouteKind.APP_PAGE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant app-page handler received invalid cache entry ${(_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E707\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            const didPostpone = typeof cacheEntry.value.postponed === 'string';\n            if (isSSG && // We don't want to send a cache header for requests that contain dynamic\n            // data. If this is a Dynamic RSC request or wasn't a Prefetch RSC\n            // request, then we should set the cache header.\n            !isDynamicRSCRequest && (!didPostpone || isPrefetchRSCRequest)) {\n                if (!minimalMode) {\n                    // set x-nextjs-cache header to match the header\n                    // we set for the image-optimizer\n                    res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n                }\n                // Set a header used by the client router to signal the response is static\n                // and should respect the `static` cache staleTime value.\n                res.setHeader(next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.NEXT_IS_PRERENDER_HEADER, '1');\n            }\n            const { value: cachedData } = cacheEntry;\n            // Coerce the cache control parameter from the render.\n            let cacheControl;\n            // If this is a resume request in minimal mode it is streamed with dynamic\n            // content and should not be cached.\n            if (minimalPostponed) {\n                cacheControl = {\n                    revalidate: 0,\n                    expire: undefined\n                };\n            } else if (minimalMode && isRSCRequest && !isPrefetchRSCRequest && isRoutePPREnabled) {\n                cacheControl = {\n                    revalidate: 0,\n                    expire: undefined\n                };\n            } else if (!routeModule.isDev) {\n                // If this is a preview mode request, we shouldn't cache it\n                if (isDraftMode) {\n                    cacheControl = {\n                        revalidate: 0,\n                        expire: undefined\n                    };\n                } else if (!isSSG) {\n                    if (!res.getHeader('Cache-Control')) {\n                        cacheControl = {\n                            revalidate: 0,\n                            expire: undefined\n                        };\n                    }\n                } else if (cacheEntry.cacheControl) {\n                    // If the cache entry has a cache control with a revalidate value that's\n                    // a number, use it.\n                    if (typeof cacheEntry.cacheControl.revalidate === 'number') {\n                        var _cacheEntry_cacheControl;\n                        if (cacheEntry.cacheControl.revalidate < 1) {\n                            throw Object.defineProperty(new Error(`Invalid revalidate configuration provided: ${cacheEntry.cacheControl.revalidate} < 1`), \"__NEXT_ERROR_CODE\", {\n                                value: \"E22\",\n                                enumerable: false,\n                                configurable: true\n                            });\n                        }\n                        cacheControl = {\n                            revalidate: cacheEntry.cacheControl.revalidate,\n                            expire: ((_cacheEntry_cacheControl = cacheEntry.cacheControl) == null ? void 0 : _cacheEntry_cacheControl.expire) ?? nextConfig.expireTime\n                        };\n                    } else {\n                        cacheControl = {\n                            revalidate: next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.CACHE_ONE_YEAR,\n                            expire: undefined\n                        };\n                    }\n                }\n            }\n            cacheEntry.cacheControl = cacheControl;\n            if (typeof segmentPrefetchHeader === 'string' && (cachedData == null ? void 0 : cachedData.kind) === next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__.CachedRouteKind.APP_PAGE && cachedData.segmentData) {\n                var _cachedData_headers1;\n                // This is a prefetch request issued by the client Segment Cache. These\n                // should never reach the application layer (lambda). We should either\n                // respond from the cache (HIT) or respond with 204 No Content (MISS).\n                // Set a header to indicate that PPR is enabled for this route. This\n                // lets the client distinguish between a regular cache miss and a cache\n                // miss due to PPR being disabled. In other contexts this header is used\n                // to indicate that the response contains dynamic data, but here we're\n                // only using it to indicate that the feature is enabled  the segment\n                // response itself contains whether the data is dynamic.\n                res.setHeader(next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.NEXT_DID_POSTPONE_HEADER, '2');\n                // Add the cache tags header to the response if it exists and we're in\n                // minimal mode while rendering a static page.\n                const tags = (_cachedData_headers1 = cachedData.headers) == null ? void 0 : _cachedData_headers1[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER];\n                if (minimalMode && isSSG && tags && typeof tags === 'string') {\n                    res.setHeader(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER, tags);\n                }\n                const matchedSegment = cachedData.segmentData.get(segmentPrefetchHeader);\n                if (matchedSegment !== undefined) {\n                    // Cache hit\n                    return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                        req,\n                        res,\n                        generateEtags: nextConfig.generateEtags,\n                        poweredByHeader: nextConfig.poweredByHeader,\n                        result: next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_20__[\"default\"].fromStatic(matchedSegment, next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.RSC_CONTENT_TYPE_HEADER),\n                        cacheControl: cacheEntry.cacheControl\n                    });\n                }\n                // Cache miss. Either a cache entry for this route has not been generated\n                // (which technically should not be possible when PPR is enabled, because\n                // at a minimum there should always be a fallback entry) or there's no\n                // match for the requested segment. Respond with a 204 No Content. We\n                // don't bother to respond with 404, because these requests are only\n                // issued as part of a prefetch.\n                res.statusCode = 204;\n                return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                    req,\n                    res,\n                    generateEtags: nextConfig.generateEtags,\n                    poweredByHeader: nextConfig.poweredByHeader,\n                    result: next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_20__[\"default\"].EMPTY,\n                    cacheControl: cacheEntry.cacheControl\n                });\n            }\n            // If there's a callback for `onCacheEntry`, call it with the cache entry\n            // and the revalidate options.\n            const onCacheEntry = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'onCacheEntry');\n            if (onCacheEntry) {\n                const finished = await onCacheEntry({\n                    ...cacheEntry,\n                    // TODO: remove this when upstream doesn't\n                    // always expect this value to be \"PAGE\"\n                    value: {\n                        ...cacheEntry.value,\n                        kind: 'PAGE'\n                    }\n                }, {\n                    url: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'initURL')\n                });\n                if (finished) {\n                    // TODO: maybe we have to end the request?\n                    return null;\n                }\n            }\n            // If the request has a postponed state and it's a resume request we\n            // should error.\n            if (didPostpone && minimalPostponed) {\n                throw Object.defineProperty(new Error('Invariant: postponed state should not be present on a resume request'), \"__NEXT_ERROR_CODE\", {\n                    value: \"E396\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (cachedData.headers) {\n                const headers = {\n                    ...cachedData.headers\n                };\n                if (!minimalMode || !isSSG) {\n                    delete headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER];\n                }\n                for (let [key, value] of Object.entries(headers)){\n                    if (typeof value === 'undefined') continue;\n                    if (Array.isArray(value)) {\n                        for (const v of value){\n                            res.appendHeader(key, v);\n                        }\n                    } else if (typeof value === 'number') {\n                        value = value.toString();\n                        res.appendHeader(key, value);\n                    } else {\n                        res.appendHeader(key, value);\n                    }\n                }\n            }\n            // Add the cache tags header to the response if it exists and we're in\n            // minimal mode while rendering a static page.\n            const tags = (_cachedData_headers = cachedData.headers) == null ? void 0 : _cachedData_headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER];\n            if (minimalMode && isSSG && tags && typeof tags === 'string') {\n                res.setHeader(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER, tags);\n            }\n            // If the request is a data request, then we shouldn't set the status code\n            // from the response because it should always be 200. This should be gated\n            // behind the experimental PPR flag.\n            if (cachedData.status && (!isRSCRequest || !isRoutePPREnabled)) {\n                res.statusCode = cachedData.status;\n            }\n            // Redirect information is encoded in RSC payload, so we don't need to use redirect status codes\n            if (!minimalMode && cachedData.status && next_dist_client_components_redirect_status_code__WEBPACK_IMPORTED_MODULE_27__.RedirectStatusCode[cachedData.status] && isRSCRequest) {\n                res.statusCode = 200;\n            }\n            // Mark that the request did postpone.\n            if (didPostpone) {\n                res.setHeader(next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.NEXT_DID_POSTPONE_HEADER, '1');\n            }\n            // we don't go through this block when preview mode is true\n            // as preview mode is a dynamic request (bypasses cache) and doesn't\n            // generate both HTML and payloads in the same request so continue to just\n            // return the generated payload\n            if (isRSCRequest && !isDraftMode) {\n                // If this is a dynamic RSC request, then stream the response.\n                if (typeof cachedData.rscData === 'undefined') {\n                    if (cachedData.postponed) {\n                        throw Object.defineProperty(new Error('Invariant: Expected postponed to be undefined'), \"__NEXT_ERROR_CODE\", {\n                            value: \"E372\",\n                            enumerable: false,\n                            configurable: true\n                        });\n                    }\n                    return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                        req,\n                        res,\n                        generateEtags: nextConfig.generateEtags,\n                        poweredByHeader: nextConfig.poweredByHeader,\n                        result: cachedData.html,\n                        // Dynamic RSC responses cannot be cached, even if they're\n                        // configured with `force-static` because we have no way of\n                        // distinguishing between `force-static` and pages that have no\n                        // postponed state.\n                        // TODO: distinguish `force-static` from pages with no postponed state (static)\n                        cacheControl: isDynamicRSCRequest ? {\n                            revalidate: 0,\n                            expire: undefined\n                        } : cacheEntry.cacheControl\n                    });\n                }\n                // As this isn't a prefetch request, we should serve the static flight\n                // data.\n                return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                    req,\n                    res,\n                    generateEtags: nextConfig.generateEtags,\n                    poweredByHeader: nextConfig.poweredByHeader,\n                    result: next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_20__[\"default\"].fromStatic(cachedData.rscData, next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.RSC_CONTENT_TYPE_HEADER),\n                    cacheControl: cacheEntry.cacheControl\n                });\n            }\n            // This is a request for HTML data.\n            let body = cachedData.html;\n            // If there's no postponed state, we should just serve the HTML. This\n            // should also be the case for a resume request because it's completed\n            // as a server render (rather than a static render).\n            if (!didPostpone || minimalMode || isRSCRequest) {\n                // If we're in test mode, we should add a sentinel chunk to the response\n                // that's between the static and dynamic parts so we can compare the\n                // chunks and add assertions.\n                if (false) {}\n                return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                    req,\n                    res,\n                    generateEtags: nextConfig.generateEtags,\n                    poweredByHeader: nextConfig.poweredByHeader,\n                    result: body,\n                    cacheControl: cacheEntry.cacheControl\n                });\n            }\n            // If we're debugging the static shell or the dynamic API accesses, we\n            // should just serve the HTML without resuming the render. The returned\n            // HTML will be the static shell so all the Dynamic API's will be used\n            // during static generation.\n            if (isDebugStaticShell || isDebugDynamicAccesses) {\n                // Since we're not resuming the render, we need to at least add the\n                // closing body and html tags to create valid HTML.\n                body.push(new ReadableStream({\n                    start (controller) {\n                        controller.enqueue(next_dist_server_stream_utils_encoded_tags__WEBPACK_IMPORTED_MODULE_22__.ENCODED_TAGS.CLOSED.BODY_AND_HTML);\n                        controller.close();\n                    }\n                }));\n                return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                    req,\n                    res,\n                    generateEtags: nextConfig.generateEtags,\n                    poweredByHeader: nextConfig.poweredByHeader,\n                    result: body,\n                    cacheControl: {\n                        revalidate: 0,\n                        expire: undefined\n                    }\n                });\n            }\n            // If we're in test mode, we should add a sentinel chunk to the response\n            // that's between the static and dynamic parts so we can compare the\n            // chunks and add assertions.\n            if (false) {}\n            // This request has postponed, so let's create a new transformer that the\n            // dynamic data can pipe to that will attach the dynamic data to the end\n            // of the response.\n            const transformer = new TransformStream();\n            body.push(transformer.readable);\n            // Perform the render again, but this time, provide the postponed state.\n            // We don't await because we want the result to start streaming now, and\n            // we've already chained the transformer's readable to the render result.\n            doRender({\n                span,\n                postponed: cachedData.postponed,\n                // This is a resume render, not a fallback render, so we don't need to\n                // set this.\n                fallbackRouteParams: null\n            }).then(async (result)=>{\n                var _result_value;\n                if (!result) {\n                    throw Object.defineProperty(new Error('Invariant: expected a result to be returned'), \"__NEXT_ERROR_CODE\", {\n                        value: \"E463\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n                if (((_result_value = result.value) == null ? void 0 : _result_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__.CachedRouteKind.APP_PAGE) {\n                    var _result_value1;\n                    throw Object.defineProperty(new Error(`Invariant: expected a page response, got ${(_result_value1 = result.value) == null ? void 0 : _result_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                        value: \"E305\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n                // Pipe the resume result to the transformer.\n                await result.value.html.pipeTo(transformer.writable);\n            }).catch((err)=>{\n                // An error occurred during piping or preparing the render, abort\n                // the transformers writer so we can terminate the stream.\n                transformer.writable.abort(err).catch((e)=>{\n                    console.error(\"couldn't abort transformer\", e);\n                });\n            });\n            return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                req,\n                res,\n                generateEtags: nextConfig.generateEtags,\n                poweredByHeader: nextConfig.poweredByHeader,\n                result: body,\n                // We don't want to cache the response if it has postponed data because\n                // the response being sent to the client it's dynamic parts are streamed\n                // to the client on the same request.\n                cacheControl: {\n                    revalidate: 0,\n                    expire: undefined\n                }\n            });\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            return await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_5__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        // if we aren't wrapped by base-server handle here\n        if (!activeSpan && !(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_24__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: srcPage,\n                routeType: 'render',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_2__.getRevalidateReason)({\n                    isRevalidate: isSSG,\n                    isOnDemandRevalidate\n                })\n            }, routerServerContext);\n        }\n        // rethrow so that we can handle serving error page\n        throw err;\n    }\n}\n// TODO: omit this from production builds, only test builds should include it\n/**\n * Creates a readable stream that emits a PPR boundary sentinel.\n *\n * @returns A readable stream that emits a PPR boundary sentinel.\n */ function createPPRBoundarySentinel() {\n    return new ReadableStream({\n        start (controller) {\n            controller.enqueue(new TextEncoder().encode('<!-- PPR_BOUNDARY_SENTINEL -->'));\n            controller.close();\n        }\n    });\n}\n\n//# sourceMappingURL=app-page.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZycGclMkZwYWdlJnBhZ2U9JTJGcnBnJTJGcGFnZSZhcHBQYXRocz0lMkZycGclMkZwYWdlJnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGcnBnJTJGcGFnZS50c3gmYXBwRGlyPUMlM0ElNUNNb21teSUyMEx1Y3klNUNQcm9qZWN0cyU1Q0x1Y2lkJTIwRHJlYW0lNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNNb21teSUyMEx1Y3klNUNQcm9qZWN0cyU1Q0x1Y2lkJTIwRHJlYW0maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QmaXNHbG9iYWxOb3RGb3VuZEVuYWJsZWQ9ISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsc0JBQXNCLDRJQUEyRjtBQUNqSCxzQkFBc0IsdU9BQXdGO0FBQzlHLHNCQUFzQixpT0FBcUY7QUFDM0csc0JBQXNCLGlPQUFxRjtBQUMzRyxzQkFBc0IsdU9BQXdGO0FBQzlHLHNCQUFzQixvSkFBZ0c7QUFDdEgsb0JBQW9CLGdKQUE4RjtBQUdoSDtBQUdBO0FBQzJFO0FBQ0w7QUFDVDtBQUNPO0FBQ087QUFDUztBQUNGO0FBQ1A7QUFDSztBQUNZO0FBQ1c7QUFDeEI7QUFDRjtBQUNhO0FBQzBGO0FBQ3pHO0FBQ1g7QUFDUTtBQUNoQjtBQUNpRDtBQUNqQztBQUNUO0FBQ2lCO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUN1QjtBQUdyQjtBQUNxQjtBQUN2Qiw2QkFBNkIsbUJBQW1CO0FBQ2hEO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFHRTtBQUNvRjtBQUdwRjtBQUNGO0FBQ08sd0JBQXdCLHVHQUFrQjtBQUNqRDtBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsYUFBYSxPQUFvQyxJQUFJLENBQUU7QUFDdkQsd0JBQXdCLE1BQXVDO0FBQy9ELENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLEtBQXFCLEVBQUUsRUFFMUIsQ0FBQztBQUNOO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixLQUF3QztBQUN2RSw2QkFBNkIsNkVBQWM7QUFDM0M7QUFDQSx3QkFBd0IsNkVBQWM7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZ1VBQWdVO0FBQzVVO0FBQ0EsOEJBQThCLDhGQUFnQjtBQUM5QyxVQUFVLHVCQUF1QjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixxRkFBVTtBQUM5QixzQkFBc0IsMEZBQWdCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyw2RUFBYyw2Q0FBNkMsd0dBQTJCO0FBQ3pIO0FBQ0E7QUFDQSx5QkFBeUIsNkVBQWMsNkNBQTZDLHVGQUFVO0FBQzlGLG1DQUFtQywyR0FBeUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDJGQUFvQjtBQUNsRDtBQUNBO0FBQ0EscUNBQXFDLE1BQTRHLElBQUksQ0FBZTtBQUNwSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBLGtDQUFrQyw2RUFBYztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxzR0FBNEI7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsb0dBQWtCO0FBQzFCO0FBQ0E7QUFDQSxXQUFXLG9FQUFTO0FBQ3BCO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsNkdBQThCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixnR0FBcUI7QUFDbEQ7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxtQkFBbUIsNEVBQVM7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw0RUFBZTtBQUMvQyxnQ0FBZ0MsNkVBQWdCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixJQUFzQztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsZ0ZBQWM7QUFDL0UsK0RBQStELHlDQUF5QztBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxRQUFRLEVBQUUsTUFBTTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGtCQUFrQjtBQUNsQix1Q0FBdUMsUUFBUSxFQUFFLFFBQVE7QUFDekQ7QUFDQSxhQUFhO0FBQ2I7QUFDQSxrQ0FBa0Msc0NBQXNDO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQiwwQ0FBMEMsNkVBQWM7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQSwrQkFBK0IsMkZBQWM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixLQUFxQyxHQUFHLDhDQUFvQiw4RUFBOEUsQ0FBb0Q7QUFDdk47QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsNkVBQWM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLElBQUk7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsNENBQTRDO0FBQzVDO0FBQ0EseUJBQXlCLDZFQUFjO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFdBQVc7QUFDL0Isb0JBQW9CLDBCQUEwQjtBQUM5QyxtQ0FBbUM7QUFDbkM7QUFDQSx3QkFBd0IsNEVBQXNCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhHQUE4RyxpQkFBaUIsRUFBRSxvRkFBb0YsOEJBQThCLE9BQU87QUFDMVA7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNkVBQWU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyx1REFBdUQ7QUFDbEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsMkVBQWtCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGlFQUFZLGNBQWMsZ0ZBQUs7QUFDaEU7QUFDQSxtQ0FBbUMsaUVBQVk7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxpRUFBWTtBQUN0RSwrQkFBK0IsaUVBQVk7QUFDM0M7QUFDQSxpREFBaUQsaUVBQVk7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxpRUFBWTtBQUM3Qyw4QkFBOEIsNkZBQWU7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsa0VBQVM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSxpR0FBc0I7QUFDN0YsNkJBQTZCO0FBQzdCO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLDhCQUE4Qiw2RUFBZTtBQUM3Qyw4QkFBOEIsdUVBQVk7QUFDMUMsb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRUFBK0UsNkVBQWMsd0RBQXdELGlHQUFzQjtBQUMzSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsMkJBQTJCLGtFQUFTO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EsdUdBQXVHLDZFQUFlO0FBQ3RIO0FBQ0EsaUhBQWlILG1GQUFtRjtBQUNwTTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIscUdBQXdCO0FBQ3REO0FBQ0Esb0JBQW9CLG9CQUFvQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0hBQWdILG9DQUFvQztBQUNwSjtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBLHdDQUF3QyxvRUFBYztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpSEFBaUgsNkVBQWU7QUFDaEk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIscUdBQXdCO0FBQ3REO0FBQ0E7QUFDQSxpSEFBaUgsNEVBQXNCO0FBQ3ZJO0FBQ0Esa0NBQWtDLDRFQUFzQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixnRkFBZ0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsdUVBQVksNEJBQTRCLG9HQUF1QjtBQUMvRjtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGdGQUFnQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix1RUFBWTtBQUN4QztBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsNkVBQWM7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLHlCQUF5Qiw2RUFBYztBQUN2QyxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyw0RUFBc0I7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyR0FBMkcsNEVBQXNCO0FBQ2pJO0FBQ0EsOEJBQThCLDRFQUFzQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELGlHQUFrQjtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixxR0FBd0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSwyQkFBMkIsZ0ZBQWdCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0ZBQWdCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHVFQUFZLGdDQUFnQyxvR0FBdUI7QUFDL0Y7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsS0FBaUgsRUFBRSxFQUt0SDtBQUNqQix1QkFBdUIsZ0ZBQWdCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxxRkFBWTtBQUN2RDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLHVCQUF1QixnRkFBZ0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLEtBQTRCLEVBQUUsRUFFakM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLCtGQUErRiw2RUFBZTtBQUM5RztBQUNBLHNHQUFzRyx1RUFBdUU7QUFDN0s7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsbUJBQW1CLGdGQUFnQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixvRkFBb0YsZ0ZBQWM7QUFDbEcsaUNBQWlDLFFBQVEsRUFBRSxRQUFRO0FBQ25ELDBCQUEwQix1RUFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLE1BQU07QUFDTjtBQUNBLDRDQUE0Qyw2RkFBZTtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywyRkFBbUI7QUFDckQ7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUEiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb2R1bGUwID0gKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxNb21teSBMdWN5XFxcXFByb2plY3RzXFxcXEx1Y2lkIERyZWFtXFxcXGFwcFxcXFxsYXlvdXQudHN4XCIpO1xuY29uc3QgbW9kdWxlMSA9ICgpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2J1aWx0aW4vZ2xvYmFsLWVycm9yLmpzXCIpO1xuY29uc3QgbW9kdWxlMiA9ICgpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2J1aWx0aW4vbm90LWZvdW5kLmpzXCIpO1xuY29uc3QgbW9kdWxlMyA9ICgpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2J1aWx0aW4vZm9yYmlkZGVuLmpzXCIpO1xuY29uc3QgbW9kdWxlNCA9ICgpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2J1aWx0aW4vdW5hdXRob3JpemVkLmpzXCIpO1xuY29uc3QgbW9kdWxlNSA9ICgpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxhcHBcXFxccnBnXFxcXGxheW91dC50c3hcIik7XG5jb25zdCBwYWdlNiA9ICgpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxhcHBcXFxccnBnXFxcXHBhZ2UudHN4XCIpO1xuaW1wb3J0IHsgQXBwUGFnZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcGFnZS9tb2R1bGUuY29tcGlsZWRcIiB3aXRoIHtcbiAgICAndHVyYm9wYWNrLXRyYW5zaXRpb24nOiAnbmV4dC1zc3InXG59O1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiIHdpdGgge1xuICAgICd0dXJib3BhY2stdHJhbnNpdGlvbic6ICduZXh0LXNlcnZlci11dGlsaXR5J1xufTtcbmltcG9ydCB7IGdldFJldmFsaWRhdGVSZWFzb24gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9pbnN0cnVtZW50YXRpb24vdXRpbHNcIjtcbmltcG9ydCB7IGdldFRyYWNlciwgU3BhbktpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvdHJhY2VyXCI7XG5pbXBvcnQgeyBnZXRSZXF1ZXN0TWV0YSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QtbWV0YVwiO1xuaW1wb3J0IHsgQmFzZVNlcnZlclNwYW4gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBpbnRlcm9wRGVmYXVsdCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvaW50ZXJvcC1kZWZhdWx0XCI7XG5pbXBvcnQgeyBzdHJpcEZsaWdodEhlYWRlcnMgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9hcHAtcmVuZGVyL3N0cmlwLWZsaWdodC1oZWFkZXJzXCI7XG5pbXBvcnQgeyBOb2RlTmV4dFJlcXVlc3QsIE5vZGVOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9iYXNlLWh0dHAvbm9kZVwiO1xuaW1wb3J0IHsgY2hlY2tJc0FwcFBQUkVuYWJsZWQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvZXhwZXJpbWVudGFsL3BwclwiO1xuaW1wb3J0IHsgZ2V0RmFsbGJhY2tSb3V0ZVBhcmFtcyB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QvZmFsbGJhY2stcGFyYW1zXCI7XG5pbXBvcnQgeyBzZXRSZWZlcmVuY2VNYW5pZmVzdHNTaW5nbGV0b24gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9hcHAtcmVuZGVyL2VuY3J5cHRpb24tdXRpbHNcIjtcbmltcG9ydCB7IGlzSHRtbEJvdFJlcXVlc3QsIHNob3VsZFNlcnZlU3RyZWFtaW5nTWV0YWRhdGEgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvc3RyZWFtaW5nLW1ldGFkYXRhXCI7XG5pbXBvcnQgeyBjcmVhdGVTZXJ2ZXJNb2R1bGVNYXAgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9hcHAtcmVuZGVyL2FjdGlvbi11dGlsc1wiO1xuaW1wb3J0IHsgbm9ybWFsaXplQXBwUGF0aCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9yb3V0ZXIvdXRpbHMvYXBwLXBhdGhzXCI7XG5pbXBvcnQgeyBnZXRJc1Bvc3NpYmxlU2VydmVyQWN0aW9uIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3NlcnZlci1hY3Rpb24tcmVxdWVzdC1tZXRhXCI7XG5pbXBvcnQgeyBSU0NfSEVBREVSLCBORVhUX1JPVVRFUl9QUkVGRVRDSF9IRUFERVIsIE5FWFRfSVNfUFJFUkVOREVSX0hFQURFUiwgTkVYVF9ESURfUE9TVFBPTkVfSEVBREVSLCBSU0NfQ09OVEVOVF9UWVBFX0hFQURFUiB9IGZyb20gXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvYXBwLXJvdXRlci1oZWFkZXJzXCI7XG5pbXBvcnQgeyBnZXRCb3RUeXBlLCBpc0JvdCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9yb3V0ZXIvdXRpbHMvaXMtYm90XCI7XG5pbXBvcnQgeyBDYWNoZWRSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXNwb25zZS1jYWNoZVwiO1xuaW1wb3J0IHsgRmFsbGJhY2tNb2RlLCBwYXJzZUZhbGxiYWNrRmllbGQgfSBmcm9tIFwibmV4dC9kaXN0L2xpYi9mYWxsYmFja1wiO1xuaW1wb3J0IFJlbmRlclJlc3VsdCBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZW5kZXItcmVzdWx0XCI7XG5pbXBvcnQgeyBDQUNIRV9PTkVfWUVBUiwgSFRNTF9DT05URU5UX1RZUEVfSEVBREVSLCBORVhUX0NBQ0hFX1RBR1NfSEVBREVSIH0gZnJvbSBcIm5leHQvZGlzdC9saWIvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBFTkNPREVEX1RBR1MgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9zdHJlYW0tdXRpbHMvZW5jb2RlZC10YWdzXCI7XG5pbXBvcnQgeyBzZW5kUmVuZGVyUmVzdWx0IH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvc2VuZC1wYXlsb2FkXCI7XG5pbXBvcnQgeyBOb0ZhbGxiYWNrRXJyb3IgfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvbm8tZmFsbGJhY2stZXJyb3IuZXh0ZXJuYWxcIjtcbi8vIFdlIGluamVjdCB0aGUgdHJlZSBhbmQgcGFnZXMgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IHRyZWUgPSB7XG4gICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICcnLFxuICAgICAgICB7XG4gICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICdycGcnLFxuICAgICAgICB7XG4gICAgICAgIGNoaWxkcmVuOiBbJ19fUEFHRV9fJywge30sIHtcbiAgICAgICAgICBwYWdlOiBbcGFnZTYsIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxhcHBcXFxccnBnXFxcXHBhZ2UudHN4XCJdLFxuICAgICAgICAgIFxuICAgICAgICB9XVxuICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAnbGF5b3V0JzogW21vZHVsZTUsIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxhcHBcXFxccnBnXFxcXGxheW91dC50c3hcIl0sXG4gICAgICAgIFxuICAgICAgfVxuICAgICAgXVxuICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAnbGF5b3V0JzogW21vZHVsZTAsIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxhcHBcXFxcbGF5b3V0LnRzeFwiXSxcbidnbG9iYWwtZXJyb3InOiBbbW9kdWxlMSwgXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvYnVpbHRpbi9nbG9iYWwtZXJyb3IuanNcIl0sXG4nbm90LWZvdW5kJzogW21vZHVsZTIsIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2J1aWx0aW4vbm90LWZvdW5kLmpzXCJdLFxuJ2ZvcmJpZGRlbic6IFttb2R1bGUzLCBcIm5leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9idWlsdGluL2ZvcmJpZGRlbi5qc1wiXSxcbid1bmF1dGhvcml6ZWQnOiBbbW9kdWxlNCwgXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvYnVpbHRpbi91bmF1dGhvcml6ZWQuanNcIl0sXG4gICAgICAgIFxuICAgICAgfVxuICAgICAgXVxuICAgICAgfS5jaGlsZHJlbjtcbmNvbnN0IHBhZ2VzID0gW1wiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxhcHBcXFxccnBnXFxcXHBhZ2UudHN4XCJdO1xuZXhwb3J0IHsgdHJlZSwgcGFnZXMgfTtcbmltcG9ydCBHbG9iYWxFcnJvciBmcm9tIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2J1aWx0aW4vZ2xvYmFsLWVycm9yLmpzXCIgd2l0aCB7XG4gICAgJ3R1cmJvcGFjay10cmFuc2l0aW9uJzogJ25leHQtc2VydmVyLXV0aWxpdHknXG59O1xuZXhwb3J0IHsgR2xvYmFsRXJyb3IgfTtcbmNvbnN0IF9fbmV4dF9hcHBfcmVxdWlyZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfX1xuY29uc3QgX19uZXh0X2FwcF9sb2FkX2NodW5rX18gPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoKVxuZXhwb3J0IGNvbnN0IF9fbmV4dF9hcHBfXyA9IHtcbiAgICByZXF1aXJlOiBfX25leHRfYXBwX3JlcXVpcmVfXyxcbiAgICBsb2FkQ2h1bms6IF9fbmV4dF9hcHBfbG9hZF9jaHVua19fXG59O1xuaW1wb3J0ICogYXMgZW50cnlCYXNlIGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvZW50cnktYmFzZVwiIHdpdGgge1xuICAgICd0dXJib3BhY2stdHJhbnNpdGlvbic6ICduZXh0LXNlcnZlci11dGlsaXR5J1xufTtcbmltcG9ydCB7IFJlZGlyZWN0U3RhdHVzQ29kZSB9IGZyb20gXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvcmVkaXJlY3Qtc3RhdHVzLWNvZGVcIjtcbmV4cG9ydCAqIGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvZW50cnktYmFzZVwiIHdpdGgge1xuICAgICd0dXJib3BhY2stdHJhbnNpdGlvbic6ICduZXh0LXNlcnZlci11dGlsaXR5J1xufTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFBhZ2VSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1BBR0UsXG4gICAgICAgIHBhZ2U6IFwiL3JwZy9wYWdlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9ycGdcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnLFxuICAgICAgICBhcHBQYXRoczogW11cbiAgICB9LFxuICAgIHVzZXJsYW5kOiB7XG4gICAgICAgIGxvYWRlclRyZWU6IHRyZWVcbiAgICB9LFxuICAgIGRpc3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9ESVNUX0RJUiB8fCAnJyxcbiAgICByZWxhdGl2ZVByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJ1xufSk7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcywgY3R4KSB7XG4gICAgdmFyIF90aGlzO1xuICAgIGxldCBzcmNQYWdlID0gXCIvcnBnL3BhZ2VcIjtcbiAgICAvLyB0dXJib3BhY2sgZG9lc24ndCBub3JtYWxpemUgYC9pbmRleGAgaW4gdGhlIHBhZ2UgbmFtZVxuICAgIC8vIHNvIHdlIG5lZWQgdG8gdG8gcHJvY2VzcyBkeW5hbWljIHJvdXRlcyBwcm9wZXJseVxuICAgIC8vIFRPRE86IGZpeCB0dXJib3BhY2sgcHJvdmlkaW5nIGRpZmZlcmluZyB2YWx1ZSBmcm9tIHdlYnBhY2tcbiAgICBpZiAocHJvY2Vzcy5lbnYuVFVSQk9QQUNLKSB7XG4gICAgICAgIHNyY1BhZ2UgPSBzcmNQYWdlLnJlcGxhY2UoL1xcL2luZGV4JC8sICcnKSB8fCAnLyc7XG4gICAgfSBlbHNlIGlmIChzcmNQYWdlID09PSAnL2luZGV4Jykge1xuICAgICAgICAvLyB3ZSBhbHdheXMgbm9ybWFsaXplIC9pbmRleCBzcGVjaWZpY2FsbHlcbiAgICAgICAgc3JjUGFnZSA9ICcvJztcbiAgICB9XG4gICAgY29uc3QgbXVsdGlab25lRHJhZnRNb2RlID0gcHJvY2Vzcy5lbnYuX19ORVhUX01VTFRJX1pPTkVfRFJBRlRfTU9ERTtcbiAgICBjb25zdCBpbml0aWFsUG9zdHBvbmVkID0gZ2V0UmVxdWVzdE1ldGEocmVxLCAncG9zdHBvbmVkJyk7XG4gICAgLy8gVE9ETzogcmVwbGFjZSB3aXRoIG1vcmUgc3BlY2lmaWMgZmxhZ3NcbiAgICBjb25zdCBtaW5pbWFsTW9kZSA9IGdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJyk7XG4gICAgY29uc3QgcHJlcGFyZVJlc3VsdCA9IGF3YWl0IHJvdXRlTW9kdWxlLnByZXBhcmUocmVxLCByZXMsIHtcbiAgICAgICAgc3JjUGFnZSxcbiAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlXG4gICAgfSk7XG4gICAgaWYgKCFwcmVwYXJlUmVzdWx0KSB7XG4gICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDAwO1xuICAgICAgICByZXMuZW5kKCdCYWQgUmVxdWVzdCcpO1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB7IGJ1aWxkSWQsIHF1ZXJ5LCBwYXJhbXMsIHBhcnNlZFVybCwgcGFnZUlzRHluYW1pYywgYnVpbGRNYW5pZmVzdCwgbmV4dEZvbnRNYW5pZmVzdCwgcmVhY3RMb2FkYWJsZU1hbmlmZXN0LCBzZXJ2ZXJBY3Rpb25zTWFuaWZlc3QsIGNsaWVudFJlZmVyZW5jZU1hbmlmZXN0LCBzdWJyZXNvdXJjZUludGVncml0eU1hbmlmZXN0LCBwcmVyZW5kZXJNYW5pZmVzdCwgaXNEcmFmdE1vZGUsIHJlc29sdmVkUGF0aG5hbWUsIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkLCByb3V0ZXJTZXJ2ZXJDb250ZXh0LCBuZXh0Q29uZmlnLCBpbnRlcmNlcHRpb25Sb3V0ZVBhdHRlcm5zIH0gPSBwcmVwYXJlUmVzdWx0O1xuICAgIGNvbnN0IHBhdGhuYW1lID0gcGFyc2VkVXJsLnBhdGhuYW1lIHx8ICcvJztcbiAgICBjb25zdCBub3JtYWxpemVkU3JjUGFnZSA9IG5vcm1hbGl6ZUFwcFBhdGgoc3JjUGFnZSk7XG4gICAgbGV0IHsgaXNPbkRlbWFuZFJldmFsaWRhdGUgfSA9IHByZXBhcmVSZXN1bHQ7XG4gICAgY29uc3QgcHJlcmVuZGVySW5mbyA9IHJvdXRlTW9kdWxlLm1hdGNoKHBhdGhuYW1lLCBwcmVyZW5kZXJNYW5pZmVzdCk7XG4gICAgY29uc3QgaXNQcmVyZW5kZXJlZCA9ICEhcHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW3Jlc29sdmVkUGF0aG5hbWVdO1xuICAgIGxldCBpc1NTRyA9IEJvb2xlYW4ocHJlcmVuZGVySW5mbyB8fCBpc1ByZXJlbmRlcmVkIHx8IHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tub3JtYWxpemVkU3JjUGFnZV0pO1xuICAgIGNvbnN0IHVzZXJBZ2VudCA9IHJlcS5oZWFkZXJzWyd1c2VyLWFnZW50J10gfHwgJyc7XG4gICAgY29uc3QgYm90VHlwZSA9IGdldEJvdFR5cGUodXNlckFnZW50KTtcbiAgICBjb25zdCBpc0h0bWxCb3QgPSBpc0h0bWxCb3RSZXF1ZXN0KHJlcSk7XG4gICAgLyoqXG4gICAqIElmIHRydWUsIHRoaXMgaW5kaWNhdGVzIHRoYXQgdGhlIHJlcXVlc3QgYmVpbmcgbWFkZSBpcyBmb3IgYW4gYXBwXG4gICAqIHByZWZldGNoIHJlcXVlc3QuXG4gICAqLyBjb25zdCBpc1ByZWZldGNoUlNDUmVxdWVzdCA9IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2lzUHJlZmV0Y2hSU0NSZXF1ZXN0JykgPz8gcmVxLmhlYWRlcnNbTkVYVF9ST1VURVJfUFJFRkVUQ0hfSEVBREVSXSA9PT0gJzEnIC8vIGV4Y2x1ZGUgcnVudGltZSBwcmVmZXRjaGVzLCB3aGljaCB1c2UgJzInXG4gICAgO1xuICAgIC8vIE5PVEU6IERvbid0IGRlbGV0ZSBoZWFkZXJzW1JTQ10geWV0LCBpdCBzdGlsbCBuZWVkcyB0byBiZSB1c2VkIGluIHJlbmRlclRvSFRNTCBsYXRlclxuICAgIGNvbnN0IGlzUlNDUmVxdWVzdCA9IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2lzUlNDUmVxdWVzdCcpID8/IEJvb2xlYW4ocmVxLmhlYWRlcnNbUlNDX0hFQURFUl0pO1xuICAgIGNvbnN0IGlzUG9zc2libGVTZXJ2ZXJBY3Rpb24gPSBnZXRJc1Bvc3NpYmxlU2VydmVyQWN0aW9uKHJlcSk7XG4gICAgLyoqXG4gICAqIElmIHRoZSByb3V0ZSBiZWluZyByZW5kZXJlZCBpcyBhbiBhcHAgcGFnZSwgYW5kIHRoZSBwcHIgZmVhdHVyZSBoYXMgYmVlblxuICAgKiBlbmFibGVkLCB0aGVuIHRoZSBnaXZlbiByb3V0ZSBfY291bGRfIHN1cHBvcnQgUFBSLlxuICAgKi8gY29uc3QgY291bGRTdXBwb3J0UFBSID0gY2hlY2tJc0FwcFBQUkVuYWJsZWQobmV4dENvbmZpZy5leHBlcmltZW50YWwucHByKTtcbiAgICAvLyBXaGVuIGVuYWJsZWQsIHRoaXMgd2lsbCBhbGxvdyB0aGUgdXNlIG9mIHRoZSBgP19fbmV4dHBwcm9ubHlgIHF1ZXJ5IHRvXG4gICAgLy8gZW5hYmxlIGRlYnVnZ2luZyBvZiB0aGUgc3RhdGljIHNoZWxsLlxuICAgIGNvbnN0IGhhc0RlYnVnU3RhdGljU2hlbGxRdWVyeSA9IHByb2Nlc3MuZW52Ll9fTkVYVF9FWFBFUklNRU5UQUxfU1RBVElDX1NIRUxMX0RFQlVHR0lORyA9PT0gJzEnICYmIHR5cGVvZiBxdWVyeS5fX25leHRwcHJvbmx5ICE9PSAndW5kZWZpbmVkJyAmJiBjb3VsZFN1cHBvcnRQUFI7XG4gICAgLy8gV2hlbiBlbmFibGVkLCB0aGlzIHdpbGwgYWxsb3cgdGhlIHVzZSBvZiB0aGUgYD9fX25leHRwcHJvbmx5YCBxdWVyeVxuICAgIC8vIHRvIGVuYWJsZSBkZWJ1Z2dpbmcgb2YgdGhlIGZhbGxiYWNrIHNoZWxsLlxuICAgIGNvbnN0IGhhc0RlYnVnRmFsbGJhY2tTaGVsbFF1ZXJ5ID0gaGFzRGVidWdTdGF0aWNTaGVsbFF1ZXJ5ICYmIHF1ZXJ5Ll9fbmV4dHBwcm9ubHkgPT09ICdmYWxsYmFjayc7XG4gICAgLy8gVGhpcyBwYWdlIHN1cHBvcnRzIFBQUiBpZiBpdCBpcyBtYXJrZWQgYXMgYmVpbmcgYFBBUlRJQUxMWV9TVEFUSUNgIGluIHRoZVxuICAgIC8vIHByZXJlbmRlciBtYW5pZmVzdCBhbmQgdGhpcyBpcyBhbiBhcHAgcGFnZS5cbiAgICBjb25zdCBpc1JvdXRlUFBSRW5hYmxlZCA9IGNvdWxkU3VwcG9ydFBQUiAmJiAoKChfdGhpcyA9IHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tub3JtYWxpemVkU3JjUGFnZV0gPz8gcHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV0pID09IG51bGwgPyB2b2lkIDAgOiBfdGhpcy5yZW5kZXJpbmdNb2RlKSA9PT0gJ1BBUlRJQUxMWV9TVEFUSUMnIHx8IC8vIElkZWFsbHkgd2UnZCB3YW50IHRvIGNoZWNrIHRoZSBhcHBDb25maWcgdG8gc2VlIGlmIHRoaXMgcGFnZSBoYXMgUFBSXG4gICAgLy8gZW5hYmxlZCBvciBub3QsIGJ1dCB0aGF0IHdvdWxkIHJlcXVpcmUgcGx1bWJpbmcgdGhlIGFwcENvbmZpZyB0aHJvdWdoXG4gICAgLy8gdG8gdGhlIHNlcnZlciBkdXJpbmcgZGV2ZWxvcG1lbnQuIFdlIGFzc3VtZSB0aGF0IHRoZSBwYWdlIHN1cHBvcnRzIGl0XG4gICAgLy8gYnV0IG9ubHkgZHVyaW5nIGRldmVsb3BtZW50LlxuICAgIGhhc0RlYnVnU3RhdGljU2hlbGxRdWVyeSAmJiAocm91dGVNb2R1bGUuaXNEZXYgPT09IHRydWUgfHwgKHJvdXRlclNlcnZlckNvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IHJvdXRlclNlcnZlckNvbnRleHQuZXhwZXJpbWVudGFsVGVzdFByb3h5KSA9PT0gdHJ1ZSkpO1xuICAgIGNvbnN0IGlzRGVidWdTdGF0aWNTaGVsbCA9IGhhc0RlYnVnU3RhdGljU2hlbGxRdWVyeSAmJiBpc1JvdXRlUFBSRW5hYmxlZDtcbiAgICAvLyBXZSBzaG91bGQgZW5hYmxlIGRlYnVnZ2luZyBkeW5hbWljIGFjY2Vzc2VzIHdoZW4gdGhlIHN0YXRpYyBzaGVsbFxuICAgIC8vIGRlYnVnZ2luZyBoYXMgYmVlbiBlbmFibGVkIGFuZCB3ZSdyZSBhbHNvIGluIGRldmVsb3BtZW50IG1vZGUuXG4gICAgY29uc3QgaXNEZWJ1Z0R5bmFtaWNBY2Nlc3NlcyA9IGlzRGVidWdTdGF0aWNTaGVsbCAmJiByb3V0ZU1vZHVsZS5pc0RldiA9PT0gdHJ1ZTtcbiAgICBjb25zdCBpc0RlYnVnRmFsbGJhY2tTaGVsbCA9IGhhc0RlYnVnRmFsbGJhY2tTaGVsbFF1ZXJ5ICYmIGlzUm91dGVQUFJFbmFibGVkO1xuICAgIC8vIElmIHdlJ3JlIGluIG1pbmltYWwgbW9kZSwgdGhlbiB0cnkgdG8gZ2V0IHRoZSBwb3N0cG9uZWQgaW5mb3JtYXRpb24gZnJvbVxuICAgIC8vIHRoZSByZXF1ZXN0IG1ldGFkYXRhLiBJZiBhdmFpbGFibGUsIHVzZSBpdCBmb3IgcmVzdW1pbmcgdGhlIHBvc3Rwb25lZFxuICAgIC8vIHJlbmRlci5cbiAgICBjb25zdCBtaW5pbWFsUG9zdHBvbmVkID0gaXNSb3V0ZVBQUkVuYWJsZWQgPyBpbml0aWFsUG9zdHBvbmVkIDogdW5kZWZpbmVkO1xuICAgIC8vIElmIFBQUiBpcyBlbmFibGVkLCBhbmQgdGhpcyBpcyBhIFJTQyByZXF1ZXN0IChidXQgbm90IGEgcHJlZmV0Y2gpLCB0aGVuXG4gICAgLy8gd2UgY2FuIHVzZSB0aGlzIGZhY3QgdG8gb25seSBnZW5lcmF0ZSB0aGUgZmxpZ2h0IGRhdGEgZm9yIHRoZSByZXF1ZXN0XG4gICAgLy8gYmVjYXVzZSB3ZSBjYW4ndCBjYWNoZSB0aGUgSFRNTCAoYXMgaXQncyBhbHNvIGR5bmFtaWMpLlxuICAgIGNvbnN0IGlzRHluYW1pY1JTQ1JlcXVlc3QgPSBpc1JvdXRlUFBSRW5hYmxlZCAmJiBpc1JTQ1JlcXVlc3QgJiYgIWlzUHJlZmV0Y2hSU0NSZXF1ZXN0O1xuICAgIC8vIE5lZWQgdG8gcmVhZCB0aGlzIGJlZm9yZSBpdCdzIHN0cmlwcGVkIGJ5IHN0cmlwRmxpZ2h0SGVhZGVycy4gV2UgZG9uJ3RcbiAgICAvLyBuZWVkIHRvIHRyYW5zZmVyIGl0IHRvIHRoZSByZXF1ZXN0IG1ldGEgYmVjYXVzZSBpdCdzIG9ubHkgcmVhZFxuICAgIC8vIHdpdGhpbiB0aGlzIGZ1bmN0aW9uOyB0aGUgc3RhdGljIHNlZ21lbnQgZGF0YSBzaG91bGQgaGF2ZSBhbHJlYWR5IGJlZW5cbiAgICAvLyBnZW5lcmF0ZWQsIHNvIHdlIHdpbGwgYWx3YXlzIGVpdGhlciByZXR1cm4gYSBzdGF0aWMgcmVzcG9uc2Ugb3IgYSA0MDQuXG4gICAgY29uc3Qgc2VnbWVudFByZWZldGNoSGVhZGVyID0gZ2V0UmVxdWVzdE1ldGEocmVxLCAnc2VnbWVudFByZWZldGNoUlNDUmVxdWVzdCcpO1xuICAgIC8vIFRPRE86IGludmVzdGlnYXRlIGV4aXN0aW5nIGJ1ZyB3aXRoIHNob3VsZFNlcnZlU3RyZWFtaW5nTWV0YWRhdGEgYWx3YXlzXG4gICAgLy8gYmVpbmcgdHJ1ZSBmb3IgYSByZXZhbGlkYXRlIGR1ZSB0byBtb2RpZnlpbmcgdGhlIGJhc2Utc2VydmVyIHRoaXMucmVuZGVyT3B0c1xuICAgIC8vIHdoZW4gZml4aW5nIHRoaXMgdG8gY29ycmVjdCBsb2dpYyBpdCBjYXVzZXMgaHlkcmF0aW9uIGlzc3VlIHNpbmNlIHdlIHNldFxuICAgIC8vIHNlcnZlU3RyZWFtaW5nTWV0YWRhdGEgdG8gdHJ1ZSBkdXJpbmcgZXhwb3J0XG4gICAgbGV0IHNlcnZlU3RyZWFtaW5nTWV0YWRhdGEgPSAhdXNlckFnZW50ID8gdHJ1ZSA6IHNob3VsZFNlcnZlU3RyZWFtaW5nTWV0YWRhdGEodXNlckFnZW50LCBuZXh0Q29uZmlnLmh0bWxMaW1pdGVkQm90cyk7XG4gICAgaWYgKGlzSHRtbEJvdCAmJiBpc1JvdXRlUFBSRW5hYmxlZCkge1xuICAgICAgICBpc1NTRyA9IGZhbHNlO1xuICAgICAgICBzZXJ2ZVN0cmVhbWluZ01ldGFkYXRhID0gZmFsc2U7XG4gICAgfVxuICAgIC8vIEluIGRldmVsb3BtZW50LCB3ZSBhbHdheXMgd2FudCB0byBnZW5lcmF0ZSBkeW5hbWljIEhUTUwuXG4gICAgbGV0IHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlID0gLy8gSWYgd2UncmUgaW4gZGV2ZWxvcG1lbnQsIHdlIGFsd2F5cyBzdXBwb3J0IGR5bmFtaWMgSFRNTCwgdW5sZXNzIGl0J3NcbiAgICAvLyBhIGRhdGEgcmVxdWVzdCwgaW4gd2hpY2ggY2FzZSB3ZSBvbmx5IHByb2R1Y2Ugc3RhdGljIEhUTUwuXG4gICAgcm91dGVNb2R1bGUuaXNEZXYgPT09IHRydWUgfHwgLy8gSWYgdGhpcyBpcyBub3QgU1NHIG9yIGRvZXMgbm90IGhhdmUgc3RhdGljIHBhdGhzLCB0aGVuIGl0IHN1cHBvcnRzXG4gICAgLy8gZHluYW1pYyBIVE1MLlxuICAgICFpc1NTRyB8fCAvLyBJZiB0aGlzIHJlcXVlc3QgaGFzIHByb3ZpZGVkIHBvc3Rwb25lZCBkYXRhLCBpdCBzdXBwb3J0cyBkeW5hbWljXG4gICAgLy8gSFRNTC5cbiAgICB0eXBlb2YgaW5pdGlhbFBvc3Rwb25lZCA9PT0gJ3N0cmluZycgfHwgLy8gSWYgdGhpcyBpcyBhIGR5bmFtaWMgUlNDIHJlcXVlc3QsIHRoZW4gdGhpcyByZW5kZXIgc3VwcG9ydHMgZHluYW1pY1xuICAgIC8vIEhUTUwgKGl0J3MgZHluYW1pYykuXG4gICAgaXNEeW5hbWljUlNDUmVxdWVzdDtcbiAgICAvLyBXaGVuIGh0bWwgYm90cyByZXF1ZXN0IFBQUiBwYWdlLCBwZXJmb3JtIHRoZSBmdWxsIGR5bmFtaWMgcmVuZGVyaW5nLlxuICAgIGNvbnN0IHNob3VsZFdhaXRPbkFsbFJlYWR5ID0gaXNIdG1sQm90ICYmIGlzUm91dGVQUFJFbmFibGVkO1xuICAgIGxldCBzc2dDYWNoZUtleSA9IG51bGw7XG4gICAgaWYgKCFpc0RyYWZ0TW9kZSAmJiBpc1NTRyAmJiAhc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UgJiYgIWlzUG9zc2libGVTZXJ2ZXJBY3Rpb24gJiYgIW1pbmltYWxQb3N0cG9uZWQgJiYgIWlzRHluYW1pY1JTQ1JlcXVlc3QpIHtcbiAgICAgICAgc3NnQ2FjaGVLZXkgPSByZXNvbHZlZFBhdGhuYW1lO1xuICAgIH1cbiAgICAvLyB0aGUgc3RhdGljUGF0aEtleSBkaWZmZXJzIGZyb20gc3NnQ2FjaGVLZXkgc2luY2VcbiAgICAvLyBzc2dDYWNoZUtleSBpcyBudWxsIGluIGRldiBzaW5jZSB3ZSdyZSBhbHdheXMgaW4gXCJkeW5hbWljXCJcbiAgICAvLyBtb2RlIGluIGRldiB0byBieXBhc3MgdGhlIGNhY2hlLCBidXQgd2Ugc3RpbGwgbmVlZCB0byBob25vclxuICAgIC8vIGR5bmFtaWNQYXJhbXMgPSBmYWxzZSBpbiBkZXYgbW9kZVxuICAgIGxldCBzdGF0aWNQYXRoS2V5ID0gc3NnQ2FjaGVLZXk7XG4gICAgaWYgKCFzdGF0aWNQYXRoS2V5ICYmIHJvdXRlTW9kdWxlLmlzRGV2KSB7XG4gICAgICAgIHN0YXRpY1BhdGhLZXkgPSByZXNvbHZlZFBhdGhuYW1lO1xuICAgIH1cbiAgICAvLyBJZiB0aGlzIGlzIGEgcmVxdWVzdCBmb3IgYW4gYXBwIHBhdGggdGhhdCBzaG91bGQgYmUgc3RhdGljYWxseSBnZW5lcmF0ZWRcbiAgICAvLyBhbmQgd2UgYXJlbid0IGluIHRoZSBlZGdlIHJ1bnRpbWUsIHN0cmlwIHRoZSBmbGlnaHQgaGVhZGVycyBzbyBpdCB3aWxsXG4gICAgLy8gZ2VuZXJhdGUgdGhlIHN0YXRpYyByZXNwb25zZS5cbiAgICBpZiAoIXJvdXRlTW9kdWxlLmlzRGV2ICYmICFpc0RyYWZ0TW9kZSAmJiBpc1NTRyAmJiBpc1JTQ1JlcXVlc3QgJiYgIWlzRHluYW1pY1JTQ1JlcXVlc3QpIHtcbiAgICAgICAgc3RyaXBGbGlnaHRIZWFkZXJzKHJlcS5oZWFkZXJzKTtcbiAgICB9XG4gICAgY29uc3QgQ29tcG9uZW50TW9kID0ge1xuICAgICAgICAuLi5lbnRyeUJhc2UsXG4gICAgICAgIHRyZWUsXG4gICAgICAgIHBhZ2VzLFxuICAgICAgICBHbG9iYWxFcnJvcixcbiAgICAgICAgaGFuZGxlcixcbiAgICAgICAgcm91dGVNb2R1bGUsXG4gICAgICAgIF9fbmV4dF9hcHBfX1xuICAgIH07XG4gICAgLy8gQmVmb3JlIHJlbmRlcmluZyAod2hpY2ggaW5pdGlhbGl6ZXMgY29tcG9uZW50IHRyZWUgbW9kdWxlcyksIHdlIGhhdmUgdG9cbiAgICAvLyBzZXQgdGhlIHJlZmVyZW5jZSBtYW5pZmVzdHMgdG8gb3VyIGdsb2JhbCBzdG9yZSBzbyBTZXJ2ZXIgQWN0aW9uJ3NcbiAgICAvLyBlbmNyeXB0aW9uIHV0aWwgY2FuIGFjY2VzcyB0byB0aGVtIGF0IHRoZSB0b3AgbGV2ZWwgb2YgdGhlIHBhZ2UgbW9kdWxlLlxuICAgIGlmIChzZXJ2ZXJBY3Rpb25zTWFuaWZlc3QgJiYgY2xpZW50UmVmZXJlbmNlTWFuaWZlc3QpIHtcbiAgICAgICAgc2V0UmVmZXJlbmNlTWFuaWZlc3RzU2luZ2xldG9uKHtcbiAgICAgICAgICAgIHBhZ2U6IHNyY1BhZ2UsXG4gICAgICAgICAgICBjbGllbnRSZWZlcmVuY2VNYW5pZmVzdCxcbiAgICAgICAgICAgIHNlcnZlckFjdGlvbnNNYW5pZmVzdCxcbiAgICAgICAgICAgIHNlcnZlck1vZHVsZU1hcDogY3JlYXRlU2VydmVyTW9kdWxlTWFwKHtcbiAgICAgICAgICAgICAgICBzZXJ2ZXJBY3Rpb25zTWFuaWZlc3RcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBtZXRob2QgPSByZXEubWV0aG9kIHx8ICdHRVQnO1xuICAgIGNvbnN0IHRyYWNlciA9IGdldFRyYWNlcigpO1xuICAgIGNvbnN0IGFjdGl2ZVNwYW4gPSB0cmFjZXIuZ2V0QWN0aXZlU2NvcGVTcGFuKCk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdmFyeUhlYWRlciA9IHJvdXRlTW9kdWxlLmdldFZhcnlIZWFkZXIocmVzb2x2ZWRQYXRobmFtZSwgaW50ZXJjZXB0aW9uUm91dGVQYXR0ZXJucyk7XG4gICAgICAgIHJlcy5zZXRIZWFkZXIoJ1ZhcnknLCB2YXJ5SGVhZGVyKTtcbiAgICAgICAgY29uc3QgaW52b2tlUm91dGVNb2R1bGUgPSBhc3luYyAoc3BhbiwgY29udGV4dCk9PntcbiAgICAgICAgICAgIGNvbnN0IG5leHRSZXEgPSBuZXcgTm9kZU5leHRSZXF1ZXN0KHJlcSk7XG4gICAgICAgICAgICBjb25zdCBuZXh0UmVzID0gbmV3IE5vZGVOZXh0UmVzcG9uc2UocmVzKTtcbiAgICAgICAgICAgIC8vIFRPRE86IGFkYXB0IGZvciBwdXR0aW5nIHRoZSBSREMgaW5zaWRlIHRoZSBwb3N0cG9uZWQgZGF0YVxuICAgICAgICAgICAgLy8gSWYgd2UncmUgaW4gZGV2LCBhbmQgdGhpcyBpc24ndCBhIHByZWZldGNoIG9yIGEgc2VydmVyIGFjdGlvbixcbiAgICAgICAgICAgIC8vIHdlIHNob3VsZCBzZWVkIHRoZSByZXN1bWUgZGF0YSBjYWNoZS5cbiAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgICAgICAgIGlmIChuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5jYWNoZUNvbXBvbmVudHMgJiYgIWlzUHJlZmV0Y2hSU0NSZXF1ZXN0ICYmICFjb250ZXh0LnJlbmRlck9wdHMuaXNQb3NzaWJsZVNlcnZlckFjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB3YXJtdXAgPSBhd2FpdCByb3V0ZU1vZHVsZS53YXJtdXAobmV4dFJlcSwgbmV4dFJlcywgY29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSB3YXJtdXAgaXMgc3VjY2Vzc2Z1bCwgd2Ugc2hvdWxkIHVzZSB0aGUgcmVzdW1lIGRhdGFcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FjaGUgZnJvbSB0aGUgd2FybXVwLlxuICAgICAgICAgICAgICAgICAgICBpZiAod2FybXVwLm1ldGFkYXRhLnJlbmRlclJlc3VtZURhdGFDYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5yZW5kZXJPcHRzLnJlbmRlclJlc3VtZURhdGFDYWNoZSA9IHdhcm11cC5tZXRhZGF0YS5yZW5kZXJSZXN1bWVEYXRhQ2FjaGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcm91dGVNb2R1bGUucmVuZGVyKG5leHRSZXEsIG5leHRSZXMsIGNvbnRleHQpLmZpbmFsbHkoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnbmV4dC5yc2MnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RTcGFuQXR0cmlidXRlcyA9IHRyYWNlci5nZXRSb290U3BhbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSB3ZXJlIHVuYWJsZSB0byBnZXQgYXR0cmlidXRlcywgcHJvYmFibHkgT1RFTCBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJvb3Qgc3BhbiB0eXBlICcke3Jvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJyl9Jy4gUGxlYXNlIHJlcG9ydCB0aGlzIE5leHQuanMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnJvdXRlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQuc3Bhbl9uYW1lJzogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShgJHttZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZG9SZW5kZXIgPSBhc3luYyAoeyBzcGFuLCBwb3N0cG9uZWQsIGZhbGxiYWNrUm91dGVQYXJhbXMgfSk9PntcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgICAgICAgICAgcXVlcnksXG4gICAgICAgICAgICAgICAgcGFyYW1zLFxuICAgICAgICAgICAgICAgIHBhZ2U6IG5vcm1hbGl6ZWRTcmNQYWdlLFxuICAgICAgICAgICAgICAgIHNoYXJlZENvbnRleHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgYnVpbGRJZFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2VydmVyQ29tcG9uZW50c0htckNhY2hlOiBnZXRSZXF1ZXN0TWV0YShyZXEsICdzZXJ2ZXJDb21wb25lbnRzSG1yQ2FjaGUnKSxcbiAgICAgICAgICAgICAgICBmYWxsYmFja1JvdXRlUGFyYW1zLFxuICAgICAgICAgICAgICAgIHJlbmRlck9wdHM6IHtcbiAgICAgICAgICAgICAgICAgICAgQXBwOiAoKT0+bnVsbCxcbiAgICAgICAgICAgICAgICAgICAgRG9jdW1lbnQ6ICgpPT5udWxsLFxuICAgICAgICAgICAgICAgICAgICBwYWdlQ29uZmlnOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgQ29tcG9uZW50TW9kLFxuICAgICAgICAgICAgICAgICAgICBDb21wb25lbnQ6IGludGVyb3BEZWZhdWx0KENvbXBvbmVudE1vZCksXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgcm91dGVNb2R1bGUsXG4gICAgICAgICAgICAgICAgICAgIHBhZ2U6IHNyY1BhZ2UsXG4gICAgICAgICAgICAgICAgICAgIHBvc3Rwb25lZCxcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkV2FpdE9uQWxsUmVhZHksXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlU3RyZWFtaW5nTWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlOiB0eXBlb2YgcG9zdHBvbmVkID09PSAnc3RyaW5nJyB8fCBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgYnVpbGRNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICAgICAgbmV4dEZvbnRNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICAgICAgcmVhY3RMb2FkYWJsZU1hbmlmZXN0LFxuICAgICAgICAgICAgICAgICAgICBzdWJyZXNvdXJjZUludGVncml0eU1hbmlmZXN0LFxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJBY3Rpb25zTWFuaWZlc3QsXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudFJlZmVyZW5jZU1hbmlmZXN0LFxuICAgICAgICAgICAgICAgICAgICBzZXRJc3JTdGF0dXM6IHJvdXRlclNlcnZlckNvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IHJvdXRlclNlcnZlckNvbnRleHQuc2V0SXNyU3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICBkaXI6IHByb2Nlc3MuZW52Lk5FWFRfUlVOVElNRSA9PT0gJ25vZGVqcycgPyByZXF1aXJlKCdwYXRoJykuam9pbigvKiB0dXJib3BhY2tJZ25vcmU6IHRydWUgKi8gcHJvY2Vzcy5jd2QoKSwgcm91dGVNb2R1bGUucmVsYXRpdmVQcm9qZWN0RGlyKSA6IGAke3Byb2Nlc3MuY3dkKCl9LyR7cm91dGVNb2R1bGUucmVsYXRpdmVQcm9qZWN0RGlyfWAsXG4gICAgICAgICAgICAgICAgICAgIGlzRHJhZnRNb2RlLFxuICAgICAgICAgICAgICAgICAgICBpc1JldmFsaWRhdGU6IGlzU1NHICYmICFwb3N0cG9uZWQgJiYgIWlzRHluYW1pY1JTQ1JlcXVlc3QsXG4gICAgICAgICAgICAgICAgICAgIGJvdFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGlzT25EZW1hbmRSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICBpc1Bvc3NpYmxlU2VydmVyQWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICBhc3NldFByZWZpeDogbmV4dENvbmZpZy5hc3NldFByZWZpeCxcbiAgICAgICAgICAgICAgICAgICAgbmV4dENvbmZpZ091dHB1dDogbmV4dENvbmZpZy5vdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgIGNyb3NzT3JpZ2luOiBuZXh0Q29uZmlnLmNyb3NzT3JpZ2luLFxuICAgICAgICAgICAgICAgICAgICB0cmFpbGluZ1NsYXNoOiBuZXh0Q29uZmlnLnRyYWlsaW5nU2xhc2gsXG4gICAgICAgICAgICAgICAgICAgIHByZXZpZXdQcm9wczogcHJlcmVuZGVyTWFuaWZlc3QucHJldmlldyxcbiAgICAgICAgICAgICAgICAgICAgZGVwbG95bWVudElkOiBuZXh0Q29uZmlnLmRlcGxveW1lbnRJZCxcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlVGFpbnRpbmc6IG5leHRDb25maWcuZXhwZXJpbWVudGFsLnRhaW50LFxuICAgICAgICAgICAgICAgICAgICBodG1sTGltaXRlZEJvdHM6IG5leHRDb25maWcuaHRtbExpbWl0ZWRCb3RzLFxuICAgICAgICAgICAgICAgICAgICBkZXZ0b29sU2VnbWVudEV4cGxvcmVyOiBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5kZXZ0b29sU2VnbWVudEV4cGxvcmVyLFxuICAgICAgICAgICAgICAgICAgICByZWFjdE1heEhlYWRlcnNMZW5ndGg6IG5leHRDb25maWcucmVhY3RNYXhIZWFkZXJzTGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICBtdWx0aVpvbmVEcmFmdE1vZGUsXG4gICAgICAgICAgICAgICAgICAgIGluY3JlbWVudGFsQ2FjaGU6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2luY3JlbWVudGFsQ2FjaGUnKSxcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVMaWZlUHJvZmlsZXM6IG5leHRDb25maWcuZXhwZXJpbWVudGFsLmNhY2hlTGlmZSxcbiAgICAgICAgICAgICAgICAgICAgYmFzZVBhdGg6IG5leHRDb25maWcuYmFzZVBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlckFjdGlvbnM6IG5leHRDb25maWcuZXhwZXJpbWVudGFsLnNlcnZlckFjdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIC4uLmlzRGVidWdTdGF0aWNTaGVsbCB8fCBpc0RlYnVnRHluYW1pY0FjY2Vzc2VzID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEV4cG9ydDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU3RhdGljR2VuZXJhdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVidWdEeW5hbWljQWNjZXNzZXM6IGlzRGVidWdEeW5hbWljQWNjZXNzZXNcbiAgICAgICAgICAgICAgICAgICAgfSA6IHt9LFxuICAgICAgICAgICAgICAgICAgICBleHBlcmltZW50YWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUm91dGVQUFJFbmFibGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlVGltZTogbmV4dENvbmZpZy5leHBpcmVUaW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhbGVUaW1lczogbmV4dENvbmZpZy5leHBlcmltZW50YWwuc3RhbGVUaW1lcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29tcG9uZW50czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5jYWNoZUNvbXBvbmVudHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50U2VnbWVudENhY2hlOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmNsaWVudFNlZ21lbnRDYWNoZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRQYXJhbVBhcnNpbmc6IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuY2xpZW50UGFyYW1QYXJzaW5nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGR5bmFtaWNPbkhvdmVyOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmR5bmFtaWNPbkhvdmVyKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNzczogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5pbmxpbmVDc3MpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aEludGVycnVwdHM6IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuYXV0aEludGVycnVwdHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50VHJhY2VNZXRhZGF0YTogbmV4dENvbmZpZy5leHBlcmltZW50YWwuY2xpZW50VHJhY2VNZXRhZGF0YSB8fCBbXVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWwsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U6IChjYik9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5vbignY2xvc2UnLCBjYik7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9uQWZ0ZXJUYXNrRXJyb3I6ICgpPT57fSxcbiAgICAgICAgICAgICAgICAgICAgb25JbnN0cnVtZW50YXRpb25SZXF1ZXN0RXJyb3I6IChlcnJvciwgX3JlcXVlc3QsIGVycm9yQ29udGV4dCk9PnJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyb3IsIGVycm9yQ29udGV4dCwgcm91dGVyU2VydmVyQ29udGV4dCksXG4gICAgICAgICAgICAgICAgICAgIGVycjogZ2V0UmVxdWVzdE1ldGEocmVxLCAnaW52b2tlRXJyb3InKSxcbiAgICAgICAgICAgICAgICAgICAgZGV2OiByb3V0ZU1vZHVsZS5pc0RldlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBpbnZva2VSb3V0ZU1vZHVsZShzcGFuLCBjb250ZXh0KTtcbiAgICAgICAgICAgIGNvbnN0IHsgbWV0YWRhdGEgfSA9IHJlc3VsdDtcbiAgICAgICAgICAgIGNvbnN0IHsgY2FjaGVDb250cm9sLCBoZWFkZXJzID0ge30sIC8vIEFkZCBhbnkgZmV0Y2ggdGFncyB0aGF0IHdlcmUgb24gdGhlIHBhZ2UgdG8gdGhlIHJlc3BvbnNlIGhlYWRlcnMuXG4gICAgICAgICAgICBmZXRjaFRhZ3M6IGNhY2hlVGFncyB9ID0gbWV0YWRhdGE7XG4gICAgICAgICAgICBpZiAoY2FjaGVUYWdzKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyc1tORVhUX0NBQ0hFX1RBR1NfSEVBREVSXSA9IGNhY2hlVGFncztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFB1bGwgYW55IGZldGNoIG1ldHJpY3MgZnJvbSB0aGUgcmVuZGVyIG9udG8gdGhlIHJlcXVlc3QuXG4gICAgICAgICAgICA7XG4gICAgICAgICAgICByZXEuZmV0Y2hNZXRyaWNzID0gbWV0YWRhdGEuZmV0Y2hNZXRyaWNzO1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgdGhyb3cgc3RhdGljIHRvIGR5bmFtaWMgZXJyb3JzIGluIGRldiBhcyBpc1NTR1xuICAgICAgICAgICAgLy8gaXMgYSBiZXN0IGd1ZXNzIGluIGRldiBzaW5jZSB3ZSBkb24ndCBoYXZlIHRoZSBwcmVyZW5kZXIgcGFzc1xuICAgICAgICAgICAgLy8gdG8ga25vdyB3aGV0aGVyIHRoZSBwYXRoIGlzIGFjdHVhbGx5IHN0YXRpYyBvciBub3RcbiAgICAgICAgICAgIGlmIChpc1NTRyAmJiAoY2FjaGVDb250cm9sID09IG51bGwgPyB2b2lkIDAgOiBjYWNoZUNvbnRyb2wucmV2YWxpZGF0ZSkgPT09IDAgJiYgIXJvdXRlTW9kdWxlLmlzRGV2ICYmICFpc1JvdXRlUFBSRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRpY0JhaWxvdXRJbmZvID0gbWV0YWRhdGEuc3RhdGljQmFpbG91dEluZm87XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgUGFnZSBjaGFuZ2VkIGZyb20gc3RhdGljIHRvIGR5bmFtaWMgYXQgcnVudGltZSAke3Jlc29sdmVkUGF0aG5hbWV9JHsoc3RhdGljQmFpbG91dEluZm8gPT0gbnVsbCA/IHZvaWQgMCA6IHN0YXRpY0JhaWxvdXRJbmZvLmRlc2NyaXB0aW9uKSA/IGAsIHJlYXNvbjogJHtzdGF0aWNCYWlsb3V0SW5mby5kZXNjcmlwdGlvbn1gIDogYGB9YCArIGBcXG5zZWUgbW9yZSBoZXJlIGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL21lc3NhZ2VzL2FwcC1zdGF0aWMtdG8tZHluYW1pYy1lcnJvcmApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTEzMlwiLFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRpY0JhaWxvdXRJbmZvID09IG51bGwgPyB2b2lkIDAgOiBzdGF0aWNCYWlsb3V0SW5mby5zdGFjaykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFjayA9IHN0YXRpY0JhaWxvdXRJbmZvLnN0YWNrO1xuICAgICAgICAgICAgICAgICAgICBlcnIuc3RhY2sgPSBlcnIubWVzc2FnZSArIHN0YWNrLnN1YnN0cmluZyhzdGFjay5pbmRleE9mKCdcXG4nKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAga2luZDogQ2FjaGVkUm91dGVLaW5kLkFQUF9QQUdFLFxuICAgICAgICAgICAgICAgICAgICBodG1sOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgIHJzY0RhdGE6IG1ldGFkYXRhLmZsaWdodERhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBvc3Rwb25lZDogbWV0YWRhdGEucG9zdHBvbmVkLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IG1ldGFkYXRhLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgIHNlZ21lbnREYXRhOiBtZXRhZGF0YS5zZWdtZW50RGF0YVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2FjaGVDb250cm9sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXNwb25zZUdlbmVyYXRvciA9IGFzeW5jICh7IGhhc1Jlc29sdmVkLCBwcmV2aW91c0NhY2hlRW50cnksIGlzUmV2YWxpZGF0aW5nLCBzcGFuIH0pPT57XG4gICAgICAgICAgICBjb25zdCBpc1Byb2R1Y3Rpb24gPSByb3V0ZU1vZHVsZS5pc0RldiA9PT0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBkaWRSZXNwb25kID0gaGFzUmVzb2x2ZWQgfHwgcmVzLndyaXRhYmxlRW5kZWQ7XG4gICAgICAgICAgICAvLyBza2lwIG9uLWRlbWFuZCByZXZhbGlkYXRlIGlmIGNhY2hlIGlzIG5vdCBwcmVzZW50IGFuZFxuICAgICAgICAgICAgLy8gcmV2YWxpZGF0ZS1pZi1nZW5lcmF0ZWQgaXMgc2V0XG4gICAgICAgICAgICBpZiAoaXNPbkRlbWFuZFJldmFsaWRhdGUgJiYgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQgJiYgIXByZXZpb3VzQ2FjaGVFbnRyeSAmJiAhbWluaW1hbE1vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAocm91dGVyU2VydmVyQ29udGV4dCA9PSBudWxsID8gdm9pZCAwIDogcm91dGVyU2VydmVyQ29udGV4dC5yZW5kZXI0MDQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcm91dGVyU2VydmVyQ29udGV4dC5yZW5kZXI0MDQocmVxLCByZXMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDA0O1xuICAgICAgICAgICAgICAgICAgICByZXMuZW5kKCdUaGlzIHBhZ2UgY291bGQgbm90IGJlIGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGZhbGxiYWNrTW9kZTtcbiAgICAgICAgICAgIGlmIChwcmVyZW5kZXJJbmZvKSB7XG4gICAgICAgICAgICAgICAgZmFsbGJhY2tNb2RlID0gcGFyc2VGYWxsYmFja0ZpZWxkKHByZXJlbmRlckluZm8uZmFsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gV2hlbiBzZXJ2aW5nIGEgSFRNTCBib3QgcmVxdWVzdCwgd2Ugd2FudCB0byBzZXJ2ZSBhIGJsb2NraW5nIHJlbmRlciBhbmRcbiAgICAgICAgICAgIC8vIG5vdCB0aGUgcHJlcmVuZGVyZWQgcGFnZS4gVGhpcyBlbnN1cmVzIHRoYXQgdGhlIGNvcnJlY3QgY29udGVudCBpcyBzZXJ2ZWRcbiAgICAgICAgICAgIC8vIHRvIHRoZSBib3QgaW4gdGhlIGhlYWQuXG4gICAgICAgICAgICBpZiAoZmFsbGJhY2tNb2RlID09PSBGYWxsYmFja01vZGUuUFJFUkVOREVSICYmIGlzQm90KHVzZXJBZ2VudCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzUm91dGVQUFJFbmFibGVkIHx8IGlzSHRtbEJvdCkge1xuICAgICAgICAgICAgICAgICAgICBmYWxsYmFja01vZGUgPSBGYWxsYmFja01vZGUuQkxPQ0tJTkdfU1RBVElDX1JFTkRFUjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKHByZXZpb3VzQ2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogcHJldmlvdXNDYWNoZUVudHJ5LmlzU3RhbGUpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGlzT25EZW1hbmRSZXZhbGlkYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRPRE86IGFkYXB0IGZvciBQUFJcbiAgICAgICAgICAgIC8vIG9ubHkgYWxsb3cgb24tZGVtYW5kIHJldmFsaWRhdGUgZm9yIGZhbGxiYWNrOiB0cnVlL2Jsb2NraW5nXG4gICAgICAgICAgICAvLyBvciBmb3IgcHJlcmVuZGVyZWQgZmFsbGJhY2s6IGZhbHNlIHBhdGhzXG4gICAgICAgICAgICBpZiAoaXNPbkRlbWFuZFJldmFsaWRhdGUgJiYgKGZhbGxiYWNrTW9kZSAhPT0gRmFsbGJhY2tNb2RlLk5PVF9GT1VORCB8fCBwcmV2aW91c0NhY2hlRW50cnkpKSB7XG4gICAgICAgICAgICAgICAgZmFsbGJhY2tNb2RlID0gRmFsbGJhY2tNb2RlLkJMT0NLSU5HX1NUQVRJQ19SRU5ERVI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW1pbmltYWxNb2RlICYmIGZhbGxiYWNrTW9kZSAhPT0gRmFsbGJhY2tNb2RlLkJMT0NLSU5HX1NUQVRJQ19SRU5ERVIgJiYgc3RhdGljUGF0aEtleSAmJiAhZGlkUmVzcG9uZCAmJiAhaXNEcmFmdE1vZGUgJiYgcGFnZUlzRHluYW1pYyAmJiAoaXNQcm9kdWN0aW9uIHx8ICFpc1ByZXJlbmRlcmVkKSkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBwYWdlIGhhcyBkeW5hbWljUGFyYW1zOiBmYWxzZSBhbmQgdGhpcyBwYXRobmFtZSB3YXNuJ3RcbiAgICAgICAgICAgICAgICAvLyBwcmVyZW5kZXJlZCB0cmlnZ2VyIHRoZSBubyBmYWxsYmFjayBoYW5kbGluZ1xuICAgICAgICAgICAgICAgIGlmICgvLyBJbiBkZXZlbG9wbWVudCwgZmFsbCB0aHJvdWdoIHRvIHJlbmRlciB0byBoYW5kbGUgbWlzc2luZ1xuICAgICAgICAgICAgICAgIC8vIGdldFN0YXRpY1BhdGhzLlxuICAgICAgICAgICAgICAgIChpc1Byb2R1Y3Rpb24gfHwgcHJlcmVuZGVySW5mbykgJiYgLy8gV2hlbiBmYWxsYmFjayBpc24ndCBwcmVzZW50LCBhYm9ydCB0aGlzIHJlbmRlciBzbyB3ZSA0MDRcbiAgICAgICAgICAgICAgICBmYWxsYmFja01vZGUgPT09IEZhbGxiYWNrTW9kZS5OT1RfRk9VTkQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vRmFsbGJhY2tFcnJvcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgZmFsbGJhY2tSZXNwb25zZTtcbiAgICAgICAgICAgICAgICBpZiAoaXNSb3V0ZVBQUkVuYWJsZWQgJiYgIWlzUlNDUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZUtleSA9IHR5cGVvZiAocHJlcmVuZGVySW5mbyA9PSBudWxsID8gdm9pZCAwIDogcHJlcmVuZGVySW5mby5mYWxsYmFjaykgPT09ICdzdHJpbmcnID8gcHJlcmVuZGVySW5mby5mYWxsYmFjayA6IGlzUHJvZHVjdGlvbiA/IG5vcm1hbGl6ZWRTcmNQYWdlIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgdXNlIHRoZSByZXNwb25zZSBjYWNoZSBoZXJlIHRvIGhhbmRsZSB0aGUgcmV2YWxpZGF0aW9uIGFuZFxuICAgICAgICAgICAgICAgICAgICAvLyBtYW5hZ2VtZW50IG9mIHRoZSBmYWxsYmFjayBzaGVsbC5cbiAgICAgICAgICAgICAgICAgICAgZmFsbGJhY2tSZXNwb25zZSA9IGF3YWl0IHJvdXRlTW9kdWxlLmhhbmRsZVJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlS2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dENvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlS2luZDogUm91dGVLaW5kLkFQUF9QQUdFLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNGYWxsYmFjazogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNSb3V0ZVBQUkVuYWJsZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUdlbmVyYXRvcjogYXN5bmMgKCk9PmRvUmVuZGVyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgcGFzcyBgdW5kZWZpbmVkYCBhcyByZW5kZXJpbmcgYSBmYWxsYmFjayBpc24ndCByZXN1bWVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhlcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3Rwb25lZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxsYmFja1JvdXRlUGFyYW1zOiAvLyBJZiB3ZSdyZSBpbiBwcm9kdWN0aW9uIG9yIHdlJ3JlIGRlYnVnZ2luZyB0aGUgZmFsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2hlbGwgdGhlbiB3ZSBzaG91bGQgcG9zdHBvbmUgd2hlbiBkeW5hbWljIHBhcmFtcyBhcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWNjZXNzZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUHJvZHVjdGlvbiB8fCBpc0RlYnVnRmFsbGJhY2tTaGVsbCA/IGdldEZhbGxiYWNrUm91dGVQYXJhbXMobm9ybWFsaXplZFNyY1BhZ2UpIDogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgZmFsbGJhY2sgcmVzcG9uc2Ugd2FzIHNldCB0byBudWxsLCB0aGVuIHdlIHNob3VsZCByZXR1cm4gbnVsbC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZhbGxiYWNrUmVzcG9uc2UgPT09IG51bGwpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIGlmIHdlIGRpZCBnZXQgYSBmYWxsYmFjayByZXNwb25zZSwgd2Ugc2hvdWxkIHJldHVybiBpdC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZhbGxiYWNrUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgY2FjaGUgY29udHJvbCBmcm9tIHRoZSByZXNwb25zZSB0byBwcmV2ZW50IGl0IGZyb20gYmVpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzZWQgaW4gdGhlIHN1cnJvdW5kaW5nIGNhY2hlLlxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGZhbGxiYWNrUmVzcG9uc2UuY2FjaGVDb250cm9sO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbGxiYWNrUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBPbmx5IHJlcXVlc3RzIHRoYXQgYXJlbid0IHJldmFsaWRhdGluZyBjYW4gYmUgcmVzdW1lZC4gSWYgd2UgaGF2ZSB0aGVcbiAgICAgICAgICAgIC8vIG1pbmltYWwgcG9zdHBvbmVkIGRhdGEsIHRoZW4gd2Ugc2hvdWxkIHJlc3VtZSB0aGUgcmVuZGVyIHdpdGggaXQuXG4gICAgICAgICAgICBjb25zdCBwb3N0cG9uZWQgPSAhaXNPbkRlbWFuZFJldmFsaWRhdGUgJiYgIWlzUmV2YWxpZGF0aW5nICYmIG1pbmltYWxQb3N0cG9uZWQgPyBtaW5pbWFsUG9zdHBvbmVkIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSdyZSBpbiBtaW5pbWFsIG1vZGUsIGlmIHdlJ3JlIHRyeWluZyB0byBkZWJ1ZyB0aGUgc3RhdGljIHNoZWxsLFxuICAgICAgICAgICAgLy8gd2Ugc2hvdWxkIGp1c3QgcmV0dXJuIG5vdGhpbmcgaW5zdGVhZCBvZiByZXN1bWluZyB0aGUgZHluYW1pYyByZW5kZXIuXG4gICAgICAgICAgICBpZiAoKGlzRGVidWdTdGF0aWNTaGVsbCB8fCBpc0RlYnVnRHluYW1pY0FjY2Vzc2VzKSAmJiB0eXBlb2YgcG9zdHBvbmVkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBraW5kOiBDYWNoZWRSb3V0ZUtpbmQuUEFHRVMsXG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sOiBSZW5kZXJSZXN1bHQuRU1QVFksXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlRGF0YToge30sXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgYSBkeW5hbWljIHJvdXRlIHdpdGggUFBSIGVuYWJsZWQgYW5kIHRoZSBkZWZhdWx0IHJvdXRlXG4gICAgICAgICAgICAvLyBtYXRjaGVzIHdlcmUgc2V0LCB0aGVuIHdlIHNob3VsZCBwYXNzIHRoZSBmYWxsYmFjayByb3V0ZSBwYXJhbXMgdG9cbiAgICAgICAgICAgIC8vIHRoZSByZW5kZXJlciBhcyB0aGlzIGlzIGEgZmFsbGJhY2sgcmV2YWxpZGF0aW9uIHJlcXVlc3QuXG4gICAgICAgICAgICBjb25zdCBmYWxsYmFja1JvdXRlUGFyYW1zID0gcGFnZUlzRHluYW1pYyAmJiBpc1JvdXRlUFBSRW5hYmxlZCAmJiAoZ2V0UmVxdWVzdE1ldGEocmVxLCAncmVuZGVyRmFsbGJhY2tTaGVsbCcpIHx8IGlzRGVidWdGYWxsYmFja1NoZWxsKSA/IGdldEZhbGxiYWNrUm91dGVQYXJhbXMocGF0aG5hbWUpIDogbnVsbDtcbiAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHJlbmRlci5cbiAgICAgICAgICAgIHJldHVybiBkb1JlbmRlcih7XG4gICAgICAgICAgICAgICAgc3BhbixcbiAgICAgICAgICAgICAgICBwb3N0cG9uZWQsXG4gICAgICAgICAgICAgICAgZmFsbGJhY2tSb3V0ZVBhcmFtc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGhhbmRsZVJlc3BvbnNlID0gYXN5bmMgKHNwYW4pPT57XG4gICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWUsIF9jYWNoZWREYXRhX2hlYWRlcnM7XG4gICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0gYXdhaXQgcm91dGVNb2R1bGUuaGFuZGxlUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgIGNhY2hlS2V5OiBzc2dDYWNoZUtleSxcbiAgICAgICAgICAgICAgICByZXNwb25zZUdlbmVyYXRvcjogKGMpPT5yZXNwb25zZUdlbmVyYXRvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFuLFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY1xuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICByb3V0ZUtpbmQ6IFJvdXRlS2luZC5BUFBfUEFHRSxcbiAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICBpc1JvdXRlUFBSRW5hYmxlZCxcbiAgICAgICAgICAgICAgICByZXEsXG4gICAgICAgICAgICAgICAgbmV4dENvbmZpZyxcbiAgICAgICAgICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGlzRHJhZnRNb2RlKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcignQ2FjaGUtQ29udHJvbCcsICdwcml2YXRlLCBuby1jYWNoZSwgbm8tc3RvcmUsIG1heC1hZ2U9MCwgbXVzdC1yZXZhbGlkYXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJbiBkZXYsIHdlIHNob3VsZCBub3QgY2FjaGUgcGFnZXMgZm9yIGFueSByZWFzb24uXG4gICAgICAgICAgICBpZiAocm91dGVNb2R1bGUuaXNEZXYpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ25vLXN0b3JlLCBtdXN0LXJldmFsaWRhdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY2FjaGVFbnRyeSkge1xuICAgICAgICAgICAgICAgIGlmIChzc2dDYWNoZUtleSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBBIGNhY2hlIGVudHJ5IG1pZ2h0IG5vdCBiZSBnZW5lcmF0ZWQgaWYgYSByZXNwb25zZSBpcyB3cml0dGVuXG4gICAgICAgICAgICAgICAgICAgIC8vIGluIGBnZXRJbml0aWFsUHJvcHNgIG9yIGBnZXRTZXJ2ZXJTaWRlUHJvcHNgLCBidXQgdGhvc2Ugc2hvdWxkbid0XG4gICAgICAgICAgICAgICAgICAgIC8vIGhhdmUgYSBjYWNoZSBrZXkuIElmIHdlIGRvIGhhdmUgYSBjYWNoZSBrZXkgYnV0IHdlIGRvbid0IGVuZCB1cFxuICAgICAgICAgICAgICAgICAgICAvLyB3aXRoIGEgY2FjaGUgZW50cnksIHRoZW4gZWl0aGVyIE5leHQuanMgb3IgdGhlIGFwcGxpY2F0aW9uIGhhcyBhXG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1ZyB0aGF0IG5lZWRzIGZpeGluZy5cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcignaW52YXJpYW50OiBjYWNoZSBlbnRyeSByZXF1aXJlZCBidXQgbm90IGdlbmVyYXRlZCcpLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkU2MlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCgoX2NhY2hlRW50cnlfdmFsdWUgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUua2luZCkgIT09IENhY2hlZFJvdXRlS2luZC5BUFBfUEFHRSkge1xuICAgICAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTE7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgSW52YXJpYW50IGFwcC1wYWdlIGhhbmRsZXIgcmVjZWl2ZWQgaW52YWxpZCBjYWNoZSBlbnRyeSAkeyhfY2FjaGVFbnRyeV92YWx1ZTEgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUxLmtpbmR9YCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNzA3XCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRpZFBvc3Rwb25lID0gdHlwZW9mIGNhY2hlRW50cnkudmFsdWUucG9zdHBvbmVkID09PSAnc3RyaW5nJztcbiAgICAgICAgICAgIGlmIChpc1NTRyAmJiAvLyBXZSBkb24ndCB3YW50IHRvIHNlbmQgYSBjYWNoZSBoZWFkZXIgZm9yIHJlcXVlc3RzIHRoYXQgY29udGFpbiBkeW5hbWljXG4gICAgICAgICAgICAvLyBkYXRhLiBJZiB0aGlzIGlzIGEgRHluYW1pYyBSU0MgcmVxdWVzdCBvciB3YXNuJ3QgYSBQcmVmZXRjaCBSU0NcbiAgICAgICAgICAgIC8vIHJlcXVlc3QsIHRoZW4gd2Ugc2hvdWxkIHNldCB0aGUgY2FjaGUgaGVhZGVyLlxuICAgICAgICAgICAgIWlzRHluYW1pY1JTQ1JlcXVlc3QgJiYgKCFkaWRQb3N0cG9uZSB8fCBpc1ByZWZldGNoUlNDUmVxdWVzdCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW1pbmltYWxNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNldCB4LW5leHRqcy1jYWNoZSBoZWFkZXIgdG8gbWF0Y2ggdGhlIGhlYWRlclxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBzZXQgZm9yIHRoZSBpbWFnZS1vcHRpbWl6ZXJcbiAgICAgICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcigneC1uZXh0anMtY2FjaGUnLCBpc09uRGVtYW5kUmV2YWxpZGF0ZSA/ICdSRVZBTElEQVRFRCcgOiBjYWNoZUVudHJ5LmlzTWlzcyA/ICdNSVNTJyA6IGNhY2hlRW50cnkuaXNTdGFsZSA/ICdTVEFMRScgOiAnSElUJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFNldCBhIGhlYWRlciB1c2VkIGJ5IHRoZSBjbGllbnQgcm91dGVyIHRvIHNpZ25hbCB0aGUgcmVzcG9uc2UgaXMgc3RhdGljXG4gICAgICAgICAgICAgICAgLy8gYW5kIHNob3VsZCByZXNwZWN0IHRoZSBgc3RhdGljYCBjYWNoZSBzdGFsZVRpbWUgdmFsdWUuXG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcihORVhUX0lTX1BSRVJFTkRFUl9IRUFERVIsICcxJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IHZhbHVlOiBjYWNoZWREYXRhIH0gPSBjYWNoZUVudHJ5O1xuICAgICAgICAgICAgLy8gQ29lcmNlIHRoZSBjYWNoZSBjb250cm9sIHBhcmFtZXRlciBmcm9tIHRoZSByZW5kZXIuXG4gICAgICAgICAgICBsZXQgY2FjaGVDb250cm9sO1xuICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBhIHJlc3VtZSByZXF1ZXN0IGluIG1pbmltYWwgbW9kZSBpdCBpcyBzdHJlYW1lZCB3aXRoIGR5bmFtaWNcbiAgICAgICAgICAgIC8vIGNvbnRlbnQgYW5kIHNob3VsZCBub3QgYmUgY2FjaGVkLlxuICAgICAgICAgICAgaWYgKG1pbmltYWxQb3N0cG9uZWQpIHtcbiAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2wgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGU6IDAsXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWluaW1hbE1vZGUgJiYgaXNSU0NSZXF1ZXN0ICYmICFpc1ByZWZldGNoUlNDUmVxdWVzdCAmJiBpc1JvdXRlUFBSRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbCA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZTogMCxcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIGlmICghcm91dGVNb2R1bGUuaXNEZXYpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGEgcHJldmlldyBtb2RlIHJlcXVlc3QsIHdlIHNob3VsZG4ndCBjYWNoZSBpdFxuICAgICAgICAgICAgICAgIGlmIChpc0RyYWZ0TW9kZSkge1xuICAgICAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2wgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFpc1NTRykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlcy5nZXRIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGU6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNhY2hlRW50cnkuY2FjaGVDb250cm9sKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBjYWNoZSBlbnRyeSBoYXMgYSBjYWNoZSBjb250cm9sIHdpdGggYSByZXZhbGlkYXRlIHZhbHVlIHRoYXQnc1xuICAgICAgICAgICAgICAgICAgICAvLyBhIG51bWJlciwgdXNlIGl0LlxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNhY2hlRW50cnkuY2FjaGVDb250cm9sLnJldmFsaWRhdGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfY2FjaGVDb250cm9sO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkuY2FjaGVDb250cm9sLnJldmFsaWRhdGUgPCAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgSW52YWxpZCByZXZhbGlkYXRlIGNvbmZpZ3VyYXRpb24gcHJvdmlkZWQ6ICR7Y2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wucmV2YWxpZGF0ZX0gPCAxYCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFMjJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGU6IGNhY2hlRW50cnkuY2FjaGVDb250cm9sLnJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlOiAoKF9jYWNoZUVudHJ5X2NhY2hlQ29udHJvbCA9IGNhY2hlRW50cnkuY2FjaGVDb250cm9sKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfY2FjaGVDb250cm9sLmV4cGlyZSkgPz8gbmV4dENvbmZpZy5leHBpcmVUaW1lXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGU6IENBQ0hFX09ORV9ZRUFSLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wgPSBjYWNoZUNvbnRyb2w7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHNlZ21lbnRQcmVmZXRjaEhlYWRlciA9PT0gJ3N0cmluZycgJiYgKGNhY2hlZERhdGEgPT0gbnVsbCA/IHZvaWQgMCA6IGNhY2hlZERhdGEua2luZCkgPT09IENhY2hlZFJvdXRlS2luZC5BUFBfUEFHRSAmJiBjYWNoZWREYXRhLnNlZ21lbnREYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9jYWNoZWREYXRhX2hlYWRlcnMxO1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBwcmVmZXRjaCByZXF1ZXN0IGlzc3VlZCBieSB0aGUgY2xpZW50IFNlZ21lbnQgQ2FjaGUuIFRoZXNlXG4gICAgICAgICAgICAgICAgLy8gc2hvdWxkIG5ldmVyIHJlYWNoIHRoZSBhcHBsaWNhdGlvbiBsYXllciAobGFtYmRhKS4gV2Ugc2hvdWxkIGVpdGhlclxuICAgICAgICAgICAgICAgIC8vIHJlc3BvbmQgZnJvbSB0aGUgY2FjaGUgKEhJVCkgb3IgcmVzcG9uZCB3aXRoIDIwNCBObyBDb250ZW50IChNSVNTKS5cbiAgICAgICAgICAgICAgICAvLyBTZXQgYSBoZWFkZXIgdG8gaW5kaWNhdGUgdGhhdCBQUFIgaXMgZW5hYmxlZCBmb3IgdGhpcyByb3V0ZS4gVGhpc1xuICAgICAgICAgICAgICAgIC8vIGxldHMgdGhlIGNsaWVudCBkaXN0aW5ndWlzaCBiZXR3ZWVuIGEgcmVndWxhciBjYWNoZSBtaXNzIGFuZCBhIGNhY2hlXG4gICAgICAgICAgICAgICAgLy8gbWlzcyBkdWUgdG8gUFBSIGJlaW5nIGRpc2FibGVkLiBJbiBvdGhlciBjb250ZXh0cyB0aGlzIGhlYWRlciBpcyB1c2VkXG4gICAgICAgICAgICAgICAgLy8gdG8gaW5kaWNhdGUgdGhhdCB0aGUgcmVzcG9uc2UgY29udGFpbnMgZHluYW1pYyBkYXRhLCBidXQgaGVyZSB3ZSdyZVxuICAgICAgICAgICAgICAgIC8vIG9ubHkgdXNpbmcgaXQgdG8gaW5kaWNhdGUgdGhhdCB0aGUgZmVhdHVyZSBpcyBlbmFibGVkIOKAlCB0aGUgc2VnbWVudFxuICAgICAgICAgICAgICAgIC8vIHJlc3BvbnNlIGl0c2VsZiBjb250YWlucyB3aGV0aGVyIHRoZSBkYXRhIGlzIGR5bmFtaWMuXG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcihORVhUX0RJRF9QT1NUUE9ORV9IRUFERVIsICcyJyk7XG4gICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBjYWNoZSB0YWdzIGhlYWRlciB0byB0aGUgcmVzcG9uc2UgaWYgaXQgZXhpc3RzIGFuZCB3ZSdyZSBpblxuICAgICAgICAgICAgICAgIC8vIG1pbmltYWwgbW9kZSB3aGlsZSByZW5kZXJpbmcgYSBzdGF0aWMgcGFnZS5cbiAgICAgICAgICAgICAgICBjb25zdCB0YWdzID0gKF9jYWNoZWREYXRhX2hlYWRlcnMxID0gY2FjaGVkRGF0YS5oZWFkZXJzKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlZERhdGFfaGVhZGVyczFbTkVYVF9DQUNIRV9UQUdTX0hFQURFUl07XG4gICAgICAgICAgICAgICAgaWYgKG1pbmltYWxNb2RlICYmIGlzU1NHICYmIHRhZ3MgJiYgdHlwZW9mIHRhZ3MgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoTkVYVF9DQUNIRV9UQUdTX0hFQURFUiwgdGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoZWRTZWdtZW50ID0gY2FjaGVkRGF0YS5zZWdtZW50RGF0YS5nZXQoc2VnbWVudFByZWZldGNoSGVhZGVyKTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZFNlZ21lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDYWNoZSBoaXRcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbmRSZW5kZXJSZXN1bHQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVFdGFnczogbmV4dENvbmZpZy5nZW5lcmF0ZUV0YWdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG93ZXJlZEJ5SGVhZGVyOiBuZXh0Q29uZmlnLnBvd2VyZWRCeUhlYWRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogUmVuZGVyUmVzdWx0LmZyb21TdGF0aWMobWF0Y2hlZFNlZ21lbnQsIFJTQ19DT05URU5UX1RZUEVfSEVBREVSKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDogY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIENhY2hlIG1pc3MuIEVpdGhlciBhIGNhY2hlIGVudHJ5IGZvciB0aGlzIHJvdXRlIGhhcyBub3QgYmVlbiBnZW5lcmF0ZWRcbiAgICAgICAgICAgICAgICAvLyAod2hpY2ggdGVjaG5pY2FsbHkgc2hvdWxkIG5vdCBiZSBwb3NzaWJsZSB3aGVuIFBQUiBpcyBlbmFibGVkLCBiZWNhdXNlXG4gICAgICAgICAgICAgICAgLy8gYXQgYSBtaW5pbXVtIHRoZXJlIHNob3VsZCBhbHdheXMgYmUgYSBmYWxsYmFjayBlbnRyeSkgb3IgdGhlcmUncyBub1xuICAgICAgICAgICAgICAgIC8vIG1hdGNoIGZvciB0aGUgcmVxdWVzdGVkIHNlZ21lbnQuIFJlc3BvbmQgd2l0aCBhIDIwNCBObyBDb250ZW50LiBXZVxuICAgICAgICAgICAgICAgIC8vIGRvbid0IGJvdGhlciB0byByZXNwb25kIHdpdGggNDA0LCBiZWNhdXNlIHRoZXNlIHJlcXVlc3RzIGFyZSBvbmx5XG4gICAgICAgICAgICAgICAgLy8gaXNzdWVkIGFzIHBhcnQgb2YgYSBwcmVmZXRjaC5cbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDIwNDtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VuZFJlbmRlclJlc3VsdCh7XG4gICAgICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICAgICAgcmVzLFxuICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZUV0YWdzOiBuZXh0Q29uZmlnLmdlbmVyYXRlRXRhZ3MsXG4gICAgICAgICAgICAgICAgICAgIHBvd2VyZWRCeUhlYWRlcjogbmV4dENvbmZpZy5wb3dlcmVkQnlIZWFkZXIsXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogUmVuZGVyUmVzdWx0LkVNUFRZLFxuICAgICAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2w6IGNhY2hlRW50cnkuY2FjaGVDb250cm9sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgY2FsbGJhY2sgZm9yIGBvbkNhY2hlRW50cnlgLCBjYWxsIGl0IHdpdGggdGhlIGNhY2hlIGVudHJ5XG4gICAgICAgICAgICAvLyBhbmQgdGhlIHJldmFsaWRhdGUgb3B0aW9ucy5cbiAgICAgICAgICAgIGNvbnN0IG9uQ2FjaGVFbnRyeSA9IGdldFJlcXVlc3RNZXRhKHJlcSwgJ29uQ2FjaGVFbnRyeScpO1xuICAgICAgICAgICAgaWYgKG9uQ2FjaGVFbnRyeSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbmlzaGVkID0gYXdhaXQgb25DYWNoZUVudHJ5KHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY2FjaGVFbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogcmVtb3ZlIHRoaXMgd2hlbiB1cHN0cmVhbSBkb2Vzbid0XG4gICAgICAgICAgICAgICAgICAgIC8vIGFsd2F5cyBleHBlY3QgdGhpcyB2YWx1ZSB0byBiZSBcIlBBR0VcIlxuICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2FjaGVFbnRyeS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ6ICdQQUdFJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICB1cmw6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2luaXRVUkwnKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChmaW5pc2hlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBtYXliZSB3ZSBoYXZlIHRvIGVuZCB0aGUgcmVxdWVzdD9cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgdGhlIHJlcXVlc3QgaGFzIGEgcG9zdHBvbmVkIHN0YXRlIGFuZCBpdCdzIGEgcmVzdW1lIHJlcXVlc3Qgd2VcbiAgICAgICAgICAgIC8vIHNob3VsZCBlcnJvci5cbiAgICAgICAgICAgIGlmIChkaWRQb3N0cG9uZSAmJiBtaW5pbWFsUG9zdHBvbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcignSW52YXJpYW50OiBwb3N0cG9uZWQgc3RhdGUgc2hvdWxkIG5vdCBiZSBwcmVzZW50IG9uIGEgcmVzdW1lIHJlcXVlc3QnKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkUzOTZcIixcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhY2hlZERhdGEuaGVhZGVycykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmNhY2hlZERhdGEuaGVhZGVyc1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKCFtaW5pbWFsTW9kZSB8fCAhaXNTU0cpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGhlYWRlcnNbTkVYVF9DQUNIRV9UQUdTX0hFQURFUl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhoZWFkZXJzKSl7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgdmFsdWUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5hcHBlbmRIZWFkZXIoa2V5LCB2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuYXBwZW5kSGVhZGVyKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmFwcGVuZEhlYWRlcihrZXksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEFkZCB0aGUgY2FjaGUgdGFncyBoZWFkZXIgdG8gdGhlIHJlc3BvbnNlIGlmIGl0IGV4aXN0cyBhbmQgd2UncmUgaW5cbiAgICAgICAgICAgIC8vIG1pbmltYWwgbW9kZSB3aGlsZSByZW5kZXJpbmcgYSBzdGF0aWMgcGFnZS5cbiAgICAgICAgICAgIGNvbnN0IHRhZ3MgPSAoX2NhY2hlZERhdGFfaGVhZGVycyA9IGNhY2hlZERhdGEuaGVhZGVycykgPT0gbnVsbCA/IHZvaWQgMCA6IF9jYWNoZWREYXRhX2hlYWRlcnNbTkVYVF9DQUNIRV9UQUdTX0hFQURFUl07XG4gICAgICAgICAgICBpZiAobWluaW1hbE1vZGUgJiYgaXNTU0cgJiYgdGFncyAmJiB0eXBlb2YgdGFncyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKE5FWFRfQ0FDSEVfVEFHU19IRUFERVIsIHRhZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgdGhlIHJlcXVlc3QgaXMgYSBkYXRhIHJlcXVlc3QsIHRoZW4gd2Ugc2hvdWxkbid0IHNldCB0aGUgc3RhdHVzIGNvZGVcbiAgICAgICAgICAgIC8vIGZyb20gdGhlIHJlc3BvbnNlIGJlY2F1c2UgaXQgc2hvdWxkIGFsd2F5cyBiZSAyMDAuIFRoaXMgc2hvdWxkIGJlIGdhdGVkXG4gICAgICAgICAgICAvLyBiZWhpbmQgdGhlIGV4cGVyaW1lbnRhbCBQUFIgZmxhZy5cbiAgICAgICAgICAgIGlmIChjYWNoZWREYXRhLnN0YXR1cyAmJiAoIWlzUlNDUmVxdWVzdCB8fCAhaXNSb3V0ZVBQUkVuYWJsZWQpKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSBjYWNoZWREYXRhLnN0YXR1cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJlZGlyZWN0IGluZm9ybWF0aW9uIGlzIGVuY29kZWQgaW4gUlNDIHBheWxvYWQsIHNvIHdlIGRvbid0IG5lZWQgdG8gdXNlIHJlZGlyZWN0IHN0YXR1cyBjb2Rlc1xuICAgICAgICAgICAgaWYgKCFtaW5pbWFsTW9kZSAmJiBjYWNoZWREYXRhLnN0YXR1cyAmJiBSZWRpcmVjdFN0YXR1c0NvZGVbY2FjaGVkRGF0YS5zdGF0dXNdICYmIGlzUlNDUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXNDb2RlID0gMjAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTWFyayB0aGF0IHRoZSByZXF1ZXN0IGRpZCBwb3N0cG9uZS5cbiAgICAgICAgICAgIGlmIChkaWRQb3N0cG9uZSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoTkVYVF9ESURfUE9TVFBPTkVfSEVBREVSLCAnMScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgZ28gdGhyb3VnaCB0aGlzIGJsb2NrIHdoZW4gcHJldmlldyBtb2RlIGlzIHRydWVcbiAgICAgICAgICAgIC8vIGFzIHByZXZpZXcgbW9kZSBpcyBhIGR5bmFtaWMgcmVxdWVzdCAoYnlwYXNzZXMgY2FjaGUpIGFuZCBkb2Vzbid0XG4gICAgICAgICAgICAvLyBnZW5lcmF0ZSBib3RoIEhUTUwgYW5kIHBheWxvYWRzIGluIHRoZSBzYW1lIHJlcXVlc3Qgc28gY29udGludWUgdG8ganVzdFxuICAgICAgICAgICAgLy8gcmV0dXJuIHRoZSBnZW5lcmF0ZWQgcGF5bG9hZFxuICAgICAgICAgICAgaWYgKGlzUlNDUmVxdWVzdCAmJiAhaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGEgZHluYW1pYyBSU0MgcmVxdWVzdCwgdGhlbiBzdHJlYW0gdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FjaGVkRGF0YS5yc2NEYXRhID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVkRGF0YS5wb3N0cG9uZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoJ0ludmFyaWFudDogRXhwZWN0ZWQgcG9zdHBvbmVkIHRvIGJlIHVuZGVmaW5lZCcpLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFMzcyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VuZFJlbmRlclJlc3VsdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXEsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZUV0YWdzOiBuZXh0Q29uZmlnLmdlbmVyYXRlRXRhZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3dlcmVkQnlIZWFkZXI6IG5leHRDb25maWcucG93ZXJlZEJ5SGVhZGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBjYWNoZWREYXRhLmh0bWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEeW5hbWljIFJTQyByZXNwb25zZXMgY2Fubm90IGJlIGNhY2hlZCwgZXZlbiBpZiB0aGV5J3JlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25maWd1cmVkIHdpdGggYGZvcmNlLXN0YXRpY2AgYmVjYXVzZSB3ZSBoYXZlIG5vIHdheSBvZlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGlzdGluZ3Vpc2hpbmcgYmV0d2VlbiBgZm9yY2Utc3RhdGljYCBhbmQgcGFnZXMgdGhhdCBoYXZlIG5vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwb3N0cG9uZWQgc3RhdGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBkaXN0aW5ndWlzaCBgZm9yY2Utc3RhdGljYCBmcm9tIHBhZ2VzIHdpdGggbm8gcG9zdHBvbmVkIHN0YXRlIChzdGF0aWMpXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2w6IGlzRHluYW1pY1JTQ1JlcXVlc3QgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSA6IGNhY2hlRW50cnkuY2FjaGVDb250cm9sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBBcyB0aGlzIGlzbid0IGEgcHJlZmV0Y2ggcmVxdWVzdCwgd2Ugc2hvdWxkIHNlcnZlIHRoZSBzdGF0aWMgZmxpZ2h0XG4gICAgICAgICAgICAgICAgLy8gZGF0YS5cbiAgICAgICAgICAgICAgICByZXR1cm4gc2VuZFJlbmRlclJlc3VsdCh7XG4gICAgICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICAgICAgcmVzLFxuICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZUV0YWdzOiBuZXh0Q29uZmlnLmdlbmVyYXRlRXRhZ3MsXG4gICAgICAgICAgICAgICAgICAgIHBvd2VyZWRCeUhlYWRlcjogbmV4dENvbmZpZy5wb3dlcmVkQnlIZWFkZXIsXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogUmVuZGVyUmVzdWx0LmZyb21TdGF0aWMoY2FjaGVkRGF0YS5yc2NEYXRhLCBSU0NfQ09OVEVOVF9UWVBFX0hFQURFUiksXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDogY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2xcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSByZXF1ZXN0IGZvciBIVE1MIGRhdGEuXG4gICAgICAgICAgICBsZXQgYm9keSA9IGNhY2hlZERhdGEuaHRtbDtcbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3Mgbm8gcG9zdHBvbmVkIHN0YXRlLCB3ZSBzaG91bGQganVzdCBzZXJ2ZSB0aGUgSFRNTC4gVGhpc1xuICAgICAgICAgICAgLy8gc2hvdWxkIGFsc28gYmUgdGhlIGNhc2UgZm9yIGEgcmVzdW1lIHJlcXVlc3QgYmVjYXVzZSBpdCdzIGNvbXBsZXRlZFxuICAgICAgICAgICAgLy8gYXMgYSBzZXJ2ZXIgcmVuZGVyIChyYXRoZXIgdGhhbiBhIHN0YXRpYyByZW5kZXIpLlxuICAgICAgICAgICAgaWYgKCFkaWRQb3N0cG9uZSB8fCBtaW5pbWFsTW9kZSB8fCBpc1JTQ1JlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSdyZSBpbiB0ZXN0IG1vZGUsIHdlIHNob3VsZCBhZGQgYSBzZW50aW5lbCBjaHVuayB0byB0aGUgcmVzcG9uc2VcbiAgICAgICAgICAgICAgICAvLyB0aGF0J3MgYmV0d2VlbiB0aGUgc3RhdGljIGFuZCBkeW5hbWljIHBhcnRzIHNvIHdlIGNhbiBjb21wYXJlIHRoZVxuICAgICAgICAgICAgICAgIC8vIGNodW5rcyBhbmQgYWRkIGFzc2VydGlvbnMuXG4gICAgICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Ll9fTkVYVF9URVNUX01PREUgJiYgbWluaW1hbE1vZGUgJiYgaXNSb3V0ZVBQUkVuYWJsZWQgJiYgYm9keS5jb250ZW50VHlwZSA9PT0gSFRNTF9DT05URU5UX1RZUEVfSEVBREVSKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFzIHdlJ3JlIGluIG1pbmltYWwgbW9kZSwgdGhlIHN0YXRpYyBwYXJ0IHdvdWxkIGhhdmUgYWxyZWFkeSBiZWVuXG4gICAgICAgICAgICAgICAgICAgIC8vIHN0cmVhbWVkIGZpcnN0LiBUaGUgb25seSBwYXJ0IHRoYXQgdGhpcyBzdHJlYW1zIGlzIHRoZSBkeW5hbWljIHBhcnRcbiAgICAgICAgICAgICAgICAgICAgLy8gc28gd2Ugc2hvdWxkIEZJUlNUIHN0cmVhbSB0aGUgc2VudGluZWwgYW5kIFRIRU4gdGhlIGR5bmFtaWMgcGFydC5cbiAgICAgICAgICAgICAgICAgICAgYm9keS51bnNoaWZ0KGNyZWF0ZVBQUkJvdW5kYXJ5U2VudGluZWwoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzZW5kUmVuZGVyUmVzdWx0KHtcbiAgICAgICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgICAgICByZXMsXG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRlRXRhZ3M6IG5leHRDb25maWcuZ2VuZXJhdGVFdGFncyxcbiAgICAgICAgICAgICAgICAgICAgcG93ZXJlZEJ5SGVhZGVyOiBuZXh0Q29uZmlnLnBvd2VyZWRCeUhlYWRlcixcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBib2R5LFxuICAgICAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2w6IGNhY2hlRW50cnkuY2FjaGVDb250cm9sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiB3ZSdyZSBkZWJ1Z2dpbmcgdGhlIHN0YXRpYyBzaGVsbCBvciB0aGUgZHluYW1pYyBBUEkgYWNjZXNzZXMsIHdlXG4gICAgICAgICAgICAvLyBzaG91bGQganVzdCBzZXJ2ZSB0aGUgSFRNTCB3aXRob3V0IHJlc3VtaW5nIHRoZSByZW5kZXIuIFRoZSByZXR1cm5lZFxuICAgICAgICAgICAgLy8gSFRNTCB3aWxsIGJlIHRoZSBzdGF0aWMgc2hlbGwgc28gYWxsIHRoZSBEeW5hbWljIEFQSSdzIHdpbGwgYmUgdXNlZFxuICAgICAgICAgICAgLy8gZHVyaW5nIHN0YXRpYyBnZW5lcmF0aW9uLlxuICAgICAgICAgICAgaWYgKGlzRGVidWdTdGF0aWNTaGVsbCB8fCBpc0RlYnVnRHluYW1pY0FjY2Vzc2VzKSB7XG4gICAgICAgICAgICAgICAgLy8gU2luY2Ugd2UncmUgbm90IHJlc3VtaW5nIHRoZSByZW5kZXIsIHdlIG5lZWQgdG8gYXQgbGVhc3QgYWRkIHRoZVxuICAgICAgICAgICAgICAgIC8vIGNsb3NpbmcgYm9keSBhbmQgaHRtbCB0YWdzIHRvIGNyZWF0ZSB2YWxpZCBIVE1MLlxuICAgICAgICAgICAgICAgIGJvZHkucHVzaChuZXcgUmVhZGFibGVTdHJlYW0oe1xuICAgICAgICAgICAgICAgICAgICBzdGFydCAoY29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKEVOQ09ERURfVEFHUy5DTE9TRUQuQk9EWV9BTkRfSFRNTCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbmRSZW5kZXJSZXN1bHQoe1xuICAgICAgICAgICAgICAgICAgICByZXEsXG4gICAgICAgICAgICAgICAgICAgIHJlcyxcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVFdGFnczogbmV4dENvbmZpZy5nZW5lcmF0ZUV0YWdzLFxuICAgICAgICAgICAgICAgICAgICBwb3dlcmVkQnlIZWFkZXI6IG5leHRDb25maWcucG93ZXJlZEJ5SGVhZGVyLFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGJvZHksXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHdlJ3JlIGluIHRlc3QgbW9kZSwgd2Ugc2hvdWxkIGFkZCBhIHNlbnRpbmVsIGNodW5rIHRvIHRoZSByZXNwb25zZVxuICAgICAgICAgICAgLy8gdGhhdCdzIGJldHdlZW4gdGhlIHN0YXRpYyBhbmQgZHluYW1pYyBwYXJ0cyBzbyB3ZSBjYW4gY29tcGFyZSB0aGVcbiAgICAgICAgICAgIC8vIGNodW5rcyBhbmQgYWRkIGFzc2VydGlvbnMuXG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuX19ORVhUX1RFU1RfTU9ERSkge1xuICAgICAgICAgICAgICAgIGJvZHkucHVzaChjcmVhdGVQUFJCb3VuZGFyeVNlbnRpbmVsKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVGhpcyByZXF1ZXN0IGhhcyBwb3N0cG9uZWQsIHNvIGxldCdzIGNyZWF0ZSBhIG5ldyB0cmFuc2Zvcm1lciB0aGF0IHRoZVxuICAgICAgICAgICAgLy8gZHluYW1pYyBkYXRhIGNhbiBwaXBlIHRvIHRoYXQgd2lsbCBhdHRhY2ggdGhlIGR5bmFtaWMgZGF0YSB0byB0aGUgZW5kXG4gICAgICAgICAgICAvLyBvZiB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1lciA9IG5ldyBUcmFuc2Zvcm1TdHJlYW0oKTtcbiAgICAgICAgICAgIGJvZHkucHVzaCh0cmFuc2Zvcm1lci5yZWFkYWJsZSk7XG4gICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSByZW5kZXIgYWdhaW4sIGJ1dCB0aGlzIHRpbWUsIHByb3ZpZGUgdGhlIHBvc3Rwb25lZCBzdGF0ZS5cbiAgICAgICAgICAgIC8vIFdlIGRvbid0IGF3YWl0IGJlY2F1c2Ugd2Ugd2FudCB0aGUgcmVzdWx0IHRvIHN0YXJ0IHN0cmVhbWluZyBub3csIGFuZFxuICAgICAgICAgICAgLy8gd2UndmUgYWxyZWFkeSBjaGFpbmVkIHRoZSB0cmFuc2Zvcm1lcidzIHJlYWRhYmxlIHRvIHRoZSByZW5kZXIgcmVzdWx0LlxuICAgICAgICAgICAgZG9SZW5kZXIoe1xuICAgICAgICAgICAgICAgIHNwYW4sXG4gICAgICAgICAgICAgICAgcG9zdHBvbmVkOiBjYWNoZWREYXRhLnBvc3Rwb25lZCxcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgcmVzdW1lIHJlbmRlciwgbm90IGEgZmFsbGJhY2sgcmVuZGVyLCBzbyB3ZSBkb24ndCBuZWVkIHRvXG4gICAgICAgICAgICAgICAgLy8gc2V0IHRoaXMuXG4gICAgICAgICAgICAgICAgZmFsbGJhY2tSb3V0ZVBhcmFtczogbnVsbFxuICAgICAgICAgICAgfSkudGhlbihhc3luYyAocmVzdWx0KT0+e1xuICAgICAgICAgICAgICAgIHZhciBfcmVzdWx0X3ZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoJ0ludmFyaWFudDogZXhwZWN0ZWQgYSByZXN1bHQgdG8gYmUgcmV0dXJuZWQnKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNDYzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCgoX3Jlc3VsdF92YWx1ZSA9IHJlc3VsdC52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9yZXN1bHRfdmFsdWUua2luZCkgIT09IENhY2hlZFJvdXRlS2luZC5BUFBfUEFHRSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3Jlc3VsdF92YWx1ZTE7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoYEludmFyaWFudDogZXhwZWN0ZWQgYSBwYWdlIHJlc3BvbnNlLCBnb3QgJHsoX3Jlc3VsdF92YWx1ZTEgPSByZXN1bHQudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfcmVzdWx0X3ZhbHVlMS5raW5kfWApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkUzMDVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBQaXBlIHRoZSByZXN1bWUgcmVzdWx0IHRvIHRoZSB0cmFuc2Zvcm1lci5cbiAgICAgICAgICAgICAgICBhd2FpdCByZXN1bHQudmFsdWUuaHRtbC5waXBlVG8odHJhbnNmb3JtZXIud3JpdGFibGUpO1xuICAgICAgICAgICAgfSkuY2F0Y2goKGVycik9PntcbiAgICAgICAgICAgICAgICAvLyBBbiBlcnJvciBvY2N1cnJlZCBkdXJpbmcgcGlwaW5nIG9yIHByZXBhcmluZyB0aGUgcmVuZGVyLCBhYm9ydFxuICAgICAgICAgICAgICAgIC8vIHRoZSB0cmFuc2Zvcm1lcnMgd3JpdGVyIHNvIHdlIGNhbiB0ZXJtaW5hdGUgdGhlIHN0cmVhbS5cbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1lci53cml0YWJsZS5hYm9ydChlcnIpLmNhdGNoKChlKT0+e1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiY291bGRuJ3QgYWJvcnQgdHJhbnNmb3JtZXJcIiwgZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBzZW5kUmVuZGVyUmVzdWx0KHtcbiAgICAgICAgICAgICAgICByZXEsXG4gICAgICAgICAgICAgICAgcmVzLFxuICAgICAgICAgICAgICAgIGdlbmVyYXRlRXRhZ3M6IG5leHRDb25maWcuZ2VuZXJhdGVFdGFncyxcbiAgICAgICAgICAgICAgICBwb3dlcmVkQnlIZWFkZXI6IG5leHRDb25maWcucG93ZXJlZEJ5SGVhZGVyLFxuICAgICAgICAgICAgICAgIHJlc3VsdDogYm9keSxcbiAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCB3YW50IHRvIGNhY2hlIHRoZSByZXNwb25zZSBpZiBpdCBoYXMgcG9zdHBvbmVkIGRhdGEgYmVjYXVzZVxuICAgICAgICAgICAgICAgIC8vIHRoZSByZXNwb25zZSBiZWluZyBzZW50IHRvIHRoZSBjbGllbnQgaXQncyBkeW5hbWljIHBhcnRzIGFyZSBzdHJlYW1lZFxuICAgICAgICAgICAgICAgIC8vIHRvIHRoZSBjbGllbnQgb24gdGhlIHNhbWUgcmVxdWVzdC5cbiAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2w6IHtcbiAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZTogMCxcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGhhbmRsZVJlc3BvbnNlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRyYWNlci53aXRoUHJvcGFnYXRlZENvbnRleHQocmVxLmhlYWRlcnMsICgpPT50cmFjZXIudHJhY2UoQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCwge1xuICAgICAgICAgICAgICAgICAgICBzcGFuTmFtZTogYCR7bWV0aG9kfSAke3JlcS51cmx9YCxcbiAgICAgICAgICAgICAgICAgICAga2luZDogU3BhbktpbmQuU0VSVkVSLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5tZXRob2QnOiBtZXRob2QsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC50YXJnZXQnOiByZXEudXJsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBoYW5kbGVSZXNwb25zZSkpO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIC8vIGlmIHdlIGFyZW4ndCB3cmFwcGVkIGJ5IGJhc2Utc2VydmVyIGhhbmRsZSBoZXJlXG4gICAgICAgIGlmICghYWN0aXZlU3BhbiAmJiAhKGVyciBpbnN0YW5jZW9mIE5vRmFsbGJhY2tFcnJvcikpIHtcbiAgICAgICAgICAgIGF3YWl0IHJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyLCB7XG4gICAgICAgICAgICAgICAgcm91dGVyS2luZDogJ0FwcCBSb3V0ZXInLFxuICAgICAgICAgICAgICAgIHJvdXRlUGF0aDogc3JjUGFnZSxcbiAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyZW5kZXInLFxuICAgICAgICAgICAgICAgIHJldmFsaWRhdGVSZWFzb246IGdldFJldmFsaWRhdGVSZWFzb24oe1xuICAgICAgICAgICAgICAgICAgICBpc1JldmFsaWRhdGU6IGlzU1NHLFxuICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXRocm93IHNvIHRoYXQgd2UgY2FuIGhhbmRsZSBzZXJ2aW5nIGVycm9yIHBhZ2VcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbn1cbi8vIFRPRE86IG9taXQgdGhpcyBmcm9tIHByb2R1Y3Rpb24gYnVpbGRzLCBvbmx5IHRlc3QgYnVpbGRzIHNob3VsZCBpbmNsdWRlIGl0XG4vKipcbiAqIENyZWF0ZXMgYSByZWFkYWJsZSBzdHJlYW0gdGhhdCBlbWl0cyBhIFBQUiBib3VuZGFyeSBzZW50aW5lbC5cbiAqXG4gKiBAcmV0dXJucyBBIHJlYWRhYmxlIHN0cmVhbSB0aGF0IGVtaXRzIGEgUFBSIGJvdW5kYXJ5IHNlbnRpbmVsLlxuICovIGZ1bmN0aW9uIGNyZWF0ZVBQUkJvdW5kYXJ5U2VudGluZWwoKSB7XG4gICAgcmV0dXJuIG5ldyBSZWFkYWJsZVN0cmVhbSh7XG4gICAgICAgIHN0YXJ0IChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUobmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKCc8IS0tIFBQUl9CT1VOREFSWV9TRU5USU5FTCAtLT4nKSk7XG4gICAgICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXBhZ2UuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Frpg%2Fpage&page=%2Frpg%2Fpage&appPaths=%2Frpg%2Fpage&pagePath=private-next-app-dir%2Frpg%2Fpage.tsx&appDir=C%3A%5CMommy%20Lucy%5CProjects%5CLucid%20Dream%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CMommy%20Lucy%5CProjects%5CLucid%20Dream&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CAchievementTriggerManager.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CThemeController.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Cglobals.css%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Creact-hot-toast%5C%5Cdist%5C%5Cindex.mjs%22%2C%22ids%22%3A%5B%22Toaster%22%5D%7D&server=true!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CAchievementTriggerManager.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CThemeController.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Cglobals.css%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Creact-hot-toast%5C%5Cdist%5C%5Cindex.mjs%22%2C%22ids%22%3A%5B%22Toaster%22%5D%7D&server=true! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/components/AchievementTriggerManager.tsx */ \"(rsc)/./app/components/AchievementTriggerManager.tsx\"));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/components/ThemeController.tsx */ \"(rsc)/./app/components/ThemeController.tsx\"));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./node_modules/react-hot-toast/dist/index.mjs */ \"(rsc)/./node_modules/react-hot-toast/dist/index.mjs\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNhcHAlNUMlNUNjb21wb25lbnRzJTVDJTVDQWNoaWV2ZW1lbnRUcmlnZ2VyTWFuYWdlci50c3glMjIlMkMlMjJpZHMlMjIlM0ElNUIlMjJkZWZhdWx0JTIyJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNhcHAlNUMlNUNjb21wb25lbnRzJTVDJTVDVGhlbWVDb250cm9sbGVyLnRzeCUyMiUyQyUyMmlkcyUyMiUzQSU1QiUyMmRlZmF1bHQlMjIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q2FwcCU1QyU1Q2dsb2JhbHMuY3NzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNub2RlX21vZHVsZXMlNUMlNUNyZWFjdC1ob3QtdG9hc3QlNUMlNUNkaXN0JTVDJTVDaW5kZXgubWpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTIyVG9hc3RlciUyMiU1RCU3RCZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEsd01BQXVKO0FBQ3ZKO0FBQ0Esb0xBQTZJO0FBQzdJO0FBQ0Esc01BQXVKIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIsIHdlYnBhY2tFeHBvcnRzOiBbXCJkZWZhdWx0XCJdICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxhcHBcXFxcY29tcG9uZW50c1xcXFxBY2hpZXZlbWVudFRyaWdnZXJNYW5hZ2VyLnRzeFwiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiLCB3ZWJwYWNrRXhwb3J0czogW1wiZGVmYXVsdFwiXSAqLyBcIkM6XFxcXE1vbW15IEx1Y3lcXFxcUHJvamVjdHNcXFxcTHVjaWQgRHJlYW1cXFxcYXBwXFxcXGNvbXBvbmVudHNcXFxcVGhlbWVDb250cm9sbGVyLnRzeFwiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiLCB3ZWJwYWNrRXhwb3J0czogW1wiVG9hc3RlclwiXSAqLyBcIkM6XFxcXE1vbW15IEx1Y3lcXFxcUHJvamVjdHNcXFxcTHVjaWQgRHJlYW1cXFxcbm9kZV9tb2R1bGVzXFxcXHJlYWN0LWhvdC10b2FzdFxcXFxkaXN0XFxcXGluZGV4Lm1qc1wiKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CAchievementTriggerManager.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CThemeController.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Cglobals.css%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Creact-hot-toast%5C%5Cdist%5C%5Cindex.mjs%22%2C%22ids%22%3A%5B%22Toaster%22%5D%7D&server=true!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cbuiltin%5C%5Cglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Chttp-access-fallback%5C%5Cerror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Clayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cmetadata%5C%5Casync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Crender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cframework%5C%5Cboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cmetadata%5C%5Cgenerate%5C%5Cicon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cnext-devtools%5C%5Cuserspace%5C%5Capp%5C%5Csegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cbuiltin%5C%5Cglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Chttp-access-fallback%5C%5Cerror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Clayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cmetadata%5C%5Casync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Crender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cframework%5C%5Cboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cmetadata%5C%5Cgenerate%5C%5Cicon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cnext-devtools%5C%5Cuserspace%5C%5Capp%5C%5Csegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/builtin/global-error.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/global-error.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-page.js */ \"(rsc)/./node_modules/next/dist/client/components/client-page.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-segment.js */ \"(rsc)/./node_modules/next/dist/client/components/client-segment.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js */ \"(rsc)/./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/layout-router.js */ \"(rsc)/./node_modules/next/dist/client/components/layout-router.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/metadata/async-metadata.js */ \"(rsc)/./node_modules/next/dist/client/components/metadata/async-metadata.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/render-from-template-context.js */ \"(rsc)/./node_modules/next/dist/client/components/render-from-template-context.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/lib/framework/boundary-components.js */ \"(rsc)/./node_modules/next/dist/lib/framework/boundary-components.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/lib/metadata/generate/icon-mark.js */ \"(rsc)/./node_modules/next/dist/lib/metadata/generate/icon-mark.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/next-devtools/userspace/app/segment-explorer-node.js */ \"(rsc)/./node_modules/next/dist/next-devtools/userspace/app/segment-explorer-node.js\", 23));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNub2RlX21vZHVsZXMlNUMlNUNuZXh0JTVDJTVDZGlzdCU1QyU1Q2NsaWVudCU1QyU1Q2NvbXBvbmVudHMlNUMlNUNidWlsdGluJTVDJTVDZ2xvYmFsLWVycm9yLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNub2RlX21vZHVsZXMlNUMlNUNuZXh0JTVDJTVDZGlzdCU1QyU1Q2NsaWVudCU1QyU1Q2NvbXBvbmVudHMlNUMlNUNjbGllbnQtcGFnZS5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjJDJTNBJTVDJTVDTW9tbXklMjBMdWN5JTVDJTVDUHJvamVjdHMlNUMlNUNMdWNpZCUyMERyZWFtJTVDJTVDbm9kZV9tb2R1bGVzJTVDJTVDbmV4dCU1QyU1Q2Rpc3QlNUMlNUNjbGllbnQlNUMlNUNjb21wb25lbnRzJTVDJTVDY2xpZW50LXNlZ21lbnQuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q2h0dHAtYWNjZXNzLWZhbGxiYWNrJTVDJTVDZXJyb3ItYm91bmRhcnkuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q2xheW91dC1yb3V0ZXIuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q21ldGFkYXRhJTVDJTVDYXN5bmMtbWV0YWRhdGEuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q3JlbmRlci1mcm9tLXRlbXBsYXRlLWNvbnRleHQuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDbGliJTVDJTVDZnJhbWV3b3JrJTVDJTVDYm91bmRhcnktY29tcG9uZW50cy5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjJDJTNBJTVDJTVDTW9tbXklMjBMdWN5JTVDJTVDUHJvamVjdHMlNUMlNUNMdWNpZCUyMERyZWFtJTVDJTVDbm9kZV9tb2R1bGVzJTVDJTVDbmV4dCU1QyU1Q2Rpc3QlNUMlNUNsaWIlNUMlNUNtZXRhZGF0YSU1QyU1Q2dlbmVyYXRlJTVDJTVDaWNvbi1tYXJrLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNub2RlX21vZHVsZXMlNUMlNUNuZXh0JTVDJTVDZGlzdCU1QyU1Q25leHQtZGV2dG9vbHMlNUMlNUN1c2Vyc3BhY2UlNUMlNUNhcHAlNUMlNUNzZWdtZW50LWV4cGxvcmVyLW5vZGUuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0Qmc2VydmVyPXRydWUhIiwibWFwcGluZ3MiOiJBQUFBLHNQQUFrSjtBQUNsSjtBQUNBLG9PQUF3STtBQUN4STtBQUNBLDBPQUEySTtBQUMzSTtBQUNBLG9SQUFpSztBQUNqSztBQUNBLHdPQUEwSTtBQUMxSTtBQUNBLDRQQUFxSjtBQUNySjtBQUNBLHNRQUF5SjtBQUN6SjtBQUNBLDRPQUE0STtBQUM1STtBQUNBLHdPQUEySTtBQUMzSTtBQUNBLDRRQUE2SiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGNsaWVudFxcXFxjb21wb25lbnRzXFxcXGJ1aWx0aW5cXFxcZ2xvYmFsLWVycm9yLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxNb21teSBMdWN5XFxcXFByb2plY3RzXFxcXEx1Y2lkIERyZWFtXFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxcY2xpZW50LXBhZ2UuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkM6XFxcXE1vbW15IEx1Y3lcXFxcUHJvamVjdHNcXFxcTHVjaWQgRHJlYW1cXFxcbm9kZV9tb2R1bGVzXFxcXG5leHRcXFxcZGlzdFxcXFxjbGllbnRcXFxcY29tcG9uZW50c1xcXFxjbGllbnQtc2VnbWVudC5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGNsaWVudFxcXFxjb21wb25lbnRzXFxcXGh0dHAtYWNjZXNzLWZhbGxiYWNrXFxcXGVycm9yLWJvdW5kYXJ5LmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxNb21teSBMdWN5XFxcXFByb2plY3RzXFxcXEx1Y2lkIERyZWFtXFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxcbGF5b3V0LXJvdXRlci5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGNsaWVudFxcXFxjb21wb25lbnRzXFxcXG1ldGFkYXRhXFxcXGFzeW5jLW1ldGFkYXRhLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxNb21teSBMdWN5XFxcXFByb2plY3RzXFxcXEx1Y2lkIERyZWFtXFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxccmVuZGVyLWZyb20tdGVtcGxhdGUtY29udGV4dC5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGxpYlxcXFxmcmFtZXdvcmtcXFxcYm91bmRhcnktY29tcG9uZW50cy5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGxpYlxcXFxtZXRhZGF0YVxcXFxnZW5lcmF0ZVxcXFxpY29uLW1hcmsuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkM6XFxcXE1vbW15IEx1Y3lcXFxcUHJvamVjdHNcXFxcTHVjaWQgRHJlYW1cXFxcbm9kZV9tb2R1bGVzXFxcXG5leHRcXFxcZGlzdFxcXFxuZXh0LWRldnRvb2xzXFxcXHVzZXJzcGFjZVxcXFxhcHBcXFxcc2VnbWVudC1leHBsb3Jlci1ub2RlLmpzXCIpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cbuiltin%5C%5Cglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Chttp-access-fallback%5C%5Cerror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Clayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cmetadata%5C%5Casync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Crender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cframework%5C%5Cboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cmetadata%5C%5Cgenerate%5C%5Cicon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cnext-devtools%5C%5Cuserspace%5C%5Capp%5C%5Csegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./app/components/AchievementTriggerManager.tsx":
/*!******************************************************!*\
  !*** ./app/components/AchievementTriggerManager.tsx ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AchievementTriggerManager)\n/* harmony export */ });\n/* harmony import */ var _hooks_useShameAchievements__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../hooks/useShameAchievements */ \"(ssr)/./app/hooks/useShameAchievements.ts\");\n/* harmony import */ var _hooks_useDungeonAchievements__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../hooks/useDungeonAchievements */ \"(ssr)/./app/hooks/useDungeonAchievements.ts\");\n/* harmony import */ var _hooks_useCompanionAchievements__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../hooks/useCompanionAchievements */ \"(ssr)/./app/hooks/useCompanionAchievements.ts\");\n/* harmony import */ var _hooks_useRitualAchievements__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../hooks/useRitualAchievements */ \"(ssr)/./app/hooks/useRitualAchievements.ts\");\n/* harmony import */ var _hooks_useMapAchievements__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../hooks/useMapAchievements */ \"(ssr)/./app/hooks/useMapAchievements.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\n/**\r\n * This is a client-side component that exists only to instantiate the achievement trigger hooks.\r\n * These hooks listen to various state changes in the application and trigger achievements accordingly.\r\n * It renders no UI and has no direct effect on the component tree otherwise.\r\n */ function AchievementTriggerManager() {\n    (0,_hooks_useShameAchievements__WEBPACK_IMPORTED_MODULE_0__.useShameAchievements)();\n    (0,_hooks_useDungeonAchievements__WEBPACK_IMPORTED_MODULE_1__.useDungeonAchievements)();\n    (0,_hooks_useCompanionAchievements__WEBPACK_IMPORTED_MODULE_2__.useCompanionAchievements)();\n    (0,_hooks_useRitualAchievements__WEBPACK_IMPORTED_MODULE_3__.useRitualAchievements)();\n    (0,_hooks_useMapAchievements__WEBPACK_IMPORTED_MODULE_4__.useMapAchievements)();\n    return null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvY29tcG9uZW50cy9BY2hpZXZlbWVudFRyaWdnZXJNYW5hZ2VyLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7NkRBRXFFO0FBQ0k7QUFDSTtBQUNOO0FBQ047QUFFakU7Ozs7Q0FJQyxHQUNjLFNBQVNLO0lBQ3RCTCxpRkFBb0JBO0lBQ3BCQyxxRkFBc0JBO0lBQ3RCQyx5RkFBd0JBO0lBQ3hCQyxtRkFBcUJBO0lBQ3JCQyw2RUFBa0JBO0lBRWxCLE9BQU87QUFDVCIsInNvdXJjZXMiOlsiQzpcXE1vbW15IEx1Y3lcXFByb2plY3RzXFxMdWNpZCBEcmVhbVxcYXBwXFxjb21wb25lbnRzXFxBY2hpZXZlbWVudFRyaWdnZXJNYW5hZ2VyLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XHJcblxyXG5pbXBvcnQgeyB1c2VTaGFtZUFjaGlldmVtZW50cyB9IGZyb20gXCIuLi9ob29rcy91c2VTaGFtZUFjaGlldmVtZW50c1wiO1xyXG5pbXBvcnQgeyB1c2VEdW5nZW9uQWNoaWV2ZW1lbnRzIH0gZnJvbSBcIi4uL2hvb2tzL3VzZUR1bmdlb25BY2hpZXZlbWVudHNcIjtcclxuaW1wb3J0IHsgdXNlQ29tcGFuaW9uQWNoaWV2ZW1lbnRzIH0gZnJvbSBcIi4uL2hvb2tzL3VzZUNvbXBhbmlvbkFjaGlldmVtZW50c1wiO1xyXG5pbXBvcnQgeyB1c2VSaXR1YWxBY2hpZXZlbWVudHMgfSBmcm9tIFwiLi4vaG9va3MvdXNlUml0dWFsQWNoaWV2ZW1lbnRzXCI7XHJcbmltcG9ydCB7IHVzZU1hcEFjaGlldmVtZW50cyB9IGZyb20gXCIuLi9ob29rcy91c2VNYXBBY2hpZXZlbWVudHNcIjtcclxuXHJcbi8qKlxyXG4gKiBUaGlzIGlzIGEgY2xpZW50LXNpZGUgY29tcG9uZW50IHRoYXQgZXhpc3RzIG9ubHkgdG8gaW5zdGFudGlhdGUgdGhlIGFjaGlldmVtZW50IHRyaWdnZXIgaG9va3MuXHJcbiAqIFRoZXNlIGhvb2tzIGxpc3RlbiB0byB2YXJpb3VzIHN0YXRlIGNoYW5nZXMgaW4gdGhlIGFwcGxpY2F0aW9uIGFuZCB0cmlnZ2VyIGFjaGlldmVtZW50cyBhY2NvcmRpbmdseS5cclxuICogSXQgcmVuZGVycyBubyBVSSBhbmQgaGFzIG5vIGRpcmVjdCBlZmZlY3Qgb24gdGhlIGNvbXBvbmVudCB0cmVlIG90aGVyd2lzZS5cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFjaGlldmVtZW50VHJpZ2dlck1hbmFnZXIoKSB7XHJcbiAgdXNlU2hhbWVBY2hpZXZlbWVudHMoKTtcclxuICB1c2VEdW5nZW9uQWNoaWV2ZW1lbnRzKCk7XHJcbiAgdXNlQ29tcGFuaW9uQWNoaWV2ZW1lbnRzKCk7XHJcbiAgdXNlUml0dWFsQWNoaWV2ZW1lbnRzKCk7XHJcbiAgdXNlTWFwQWNoaWV2ZW1lbnRzKCk7XHJcblxyXG4gIHJldHVybiBudWxsO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJ1c2VTaGFtZUFjaGlldmVtZW50cyIsInVzZUR1bmdlb25BY2hpZXZlbWVudHMiLCJ1c2VDb21wYW5pb25BY2hpZXZlbWVudHMiLCJ1c2VSaXR1YWxBY2hpZXZlbWVudHMiLCJ1c2VNYXBBY2hpZXZlbWVudHMiLCJBY2hpZXZlbWVudFRyaWdnZXJNYW5hZ2VyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/components/AchievementTriggerManager.tsx\n");

/***/ }),

/***/ "(ssr)/./app/components/ThemeController.tsx":
/*!********************************************!*\
  !*** ./app/components/ThemeController.tsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   isBrightTheme: () => (/* binding */ isBrightTheme)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* __next_internal_client_entry_do_not_use__ isBrightTheme,default auto */ \n// Helper: detect bright themes by name or computed body background\nconst isBrightTheme = (theme)=>[\n        \"Femboy Peach\",\n        \"Lucid Pink\",\n        \"Candy Vibe\",\n        \"Bubblegirl\"\n    ].includes(theme) ||  false && 0;\nfunction ThemeController() {\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"ThemeController.useEffect\": ()=>{\n            const apply = {\n                \"ThemeController.useEffect.apply\": ()=>{\n                    if (typeof document === \"undefined\") return;\n                    const root = document.documentElement;\n                    const body = document.body;\n                    try {\n                        const theme = localStorage.getItem(\"lucid_theme\") || localStorage.getItem(\"theme\") || \"peach\";\n                        const brightness = (localStorage.getItem(\"lucid_brightness\") || \"bright\").toLowerCase();\n                        const autoDim = (localStorage.getItem(\"autoDimBrightThemes\") || \"off\").toLowerCase();\n                        root.setAttribute(\"data-theme\", theme);\n                        body.setAttribute(\"data-theme\", theme);\n                        body.setAttribute(\"data-brightness\", brightness === \"low\" ? \"low\" : \"bright\");\n                        root.setAttribute(\"data-auto-dim\", autoDim === \"on\" || autoDim === \"true\" ? \"on\" : \"off\");\n                        body.setAttribute(\"data-auto-dim\", autoDim === \"on\" || autoDim === \"true\" ? \"on\" : \"off\");\n                    } catch  {}\n                }\n            }[\"ThemeController.useEffect.apply\"];\n            apply();\n            const onStorage = {\n                \"ThemeController.useEffect.onStorage\": (e)=>{\n                    if (!e.key || [\n                        \"lucid_theme\",\n                        \"theme\",\n                        \"lucid_brightness\",\n                        \"autoDimBrightThemes\"\n                    ].includes(e.key)) apply();\n                }\n            }[\"ThemeController.useEffect.onStorage\"];\n            window.addEventListener(\"storage\", onStorage);\n            return ({\n                \"ThemeController.useEffect\": ()=>window.removeEventListener(\"storage\", onStorage)\n            })[\"ThemeController.useEffect\"];\n        }\n    }[\"ThemeController.useEffect\"], []);\n    return null;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ThemeController);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvY29tcG9uZW50cy9UaGVtZUNvbnRyb2xsZXIudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7MkVBQ2tDO0FBRWxDLG1FQUFtRTtBQUM1RCxNQUFNQyxnQkFBZ0IsQ0FBQ0MsUUFDNUI7UUFBQztRQUFnQjtRQUFjO1FBQWM7S0FBYSxDQUFDQyxRQUFRLENBQUNELFVBQ25FLE1BQTZCLElBQUlFLENBQStELENBQUU7QUFFckcsU0FBU0k7SUFDUFIsZ0RBQVNBO3FDQUFDO1lBQ1IsTUFBTVM7bURBQVE7b0JBQ1osSUFBSSxPQUFPSixhQUFhLGFBQWE7b0JBQ3JDLE1BQU1LLE9BQU9MLFNBQVNNLGVBQWU7b0JBQ3JDLE1BQU1MLE9BQU9ELFNBQVNDLElBQUk7b0JBQzFCLElBQUk7d0JBQ1IsTUFBTUosUUFBUVUsYUFBYUMsT0FBTyxDQUFDLGtCQUFrQkQsYUFBYUMsT0FBTyxDQUFDLFlBQVk7d0JBQ2hGLE1BQU1DLGFBQWEsQ0FBQ0YsYUFBYUMsT0FBTyxDQUFDLHVCQUF1QixRQUFPLEVBQUdFLFdBQVc7d0JBQ3JGLE1BQU1DLFVBQVUsQ0FBQ0osYUFBYUMsT0FBTyxDQUFDLDBCQUEwQixLQUFJLEVBQUdFLFdBQVc7d0JBRWxGTCxLQUFLTyxZQUFZLENBQUMsY0FBY2Y7d0JBQ2hDSSxLQUFLVyxZQUFZLENBQUMsY0FBY2Y7d0JBQ2hDSSxLQUFLVyxZQUFZLENBQUMsbUJBQW1CSCxlQUFlLFFBQVEsUUFBUTt3QkFDcEVKLEtBQUtPLFlBQVksQ0FBQyxpQkFBaUJELFlBQVksUUFBUUEsWUFBWSxTQUFTLE9BQU87d0JBQ25GVixLQUFLVyxZQUFZLENBQUMsaUJBQWlCRCxZQUFZLFFBQVFBLFlBQVksU0FBUyxPQUFPO29CQUNyRixFQUFFLE9BQU0sQ0FBQztnQkFDWDs7WUFFQVA7WUFDQSxNQUFNUzt1REFBWSxDQUFDQztvQkFDakIsSUFBSSxDQUFDQSxFQUFFQyxHQUFHLElBQUk7d0JBQUM7d0JBQWU7d0JBQVM7d0JBQW9CO3FCQUFzQixDQUFDakIsUUFBUSxDQUFDZ0IsRUFBRUMsR0FBRyxHQUFHWDtnQkFDckc7O1lBQ0FZLE9BQU9DLGdCQUFnQixDQUFDLFdBQVdKO1lBQ25DOzZDQUFPLElBQU1HLE9BQU9FLG1CQUFtQixDQUFDLFdBQVdMOztRQUNyRDtvQ0FBRyxFQUFFO0lBRUwsT0FBTztBQUNUO0FBRUEsaUVBQWVWLGVBQWVBLEVBQUMiLCJzb3VyY2VzIjpbIkM6XFxNb21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxcY29tcG9uZW50c1xcVGhlbWVDb250cm9sbGVyLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBIZWxwZXI6IGRldGVjdCBicmlnaHQgdGhlbWVzIGJ5IG5hbWUgb3IgY29tcHV0ZWQgYm9keSBiYWNrZ3JvdW5kXG5leHBvcnQgY29uc3QgaXNCcmlnaHRUaGVtZSA9ICh0aGVtZTogc3RyaW5nKSA9PlxuICBbXCJGZW1ib3kgUGVhY2hcIiwgXCJMdWNpZCBQaW5rXCIsIFwiQ2FuZHkgVmliZVwiLCBcIkJ1YmJsZWdpcmxcIl0uaW5jbHVkZXModGhlbWUpIHx8XG4gICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuYmFja2dyb3VuZENvbG9yLmluY2x1ZGVzKFwiMjU1XCIpKTtcblxuZnVuY3Rpb24gVGhlbWVDb250cm9sbGVyKCkge1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGFwcGx5ID0gKCkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xuICAgICAgY29uc3Qgcm9vdCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuICAgICAgdHJ5IHtcbiAgY29uc3QgdGhlbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImx1Y2lkX3RoZW1lXCIpIHx8IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidGhlbWVcIikgfHwgXCJwZWFjaFwiO1xuICAgICAgICBjb25zdCBicmlnaHRuZXNzID0gKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibHVjaWRfYnJpZ2h0bmVzc1wiKSB8fCBcImJyaWdodFwiKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBhdXRvRGltID0gKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiYXV0b0RpbUJyaWdodFRoZW1lc1wiKSB8fCBcIm9mZlwiKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIHJvb3Quc2V0QXR0cmlidXRlKFwiZGF0YS10aGVtZVwiLCB0aGVtZSk7XG4gICAgICAgIGJvZHkuc2V0QXR0cmlidXRlKFwiZGF0YS10aGVtZVwiLCB0aGVtZSk7XG4gICAgICAgIGJvZHkuc2V0QXR0cmlidXRlKFwiZGF0YS1icmlnaHRuZXNzXCIsIGJyaWdodG5lc3MgPT09IFwibG93XCIgPyBcImxvd1wiIDogXCJicmlnaHRcIik7XG4gICAgICAgIHJvb3Quc2V0QXR0cmlidXRlKFwiZGF0YS1hdXRvLWRpbVwiLCBhdXRvRGltID09PSBcIm9uXCIgfHwgYXV0b0RpbSA9PT0gXCJ0cnVlXCIgPyBcIm9uXCIgOiBcIm9mZlwiKTtcbiAgICAgICAgYm9keS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWF1dG8tZGltXCIsIGF1dG9EaW0gPT09IFwib25cIiB8fCBhdXRvRGltID09PSBcInRydWVcIiA/IFwib25cIiA6IFwib2ZmXCIpO1xuICAgICAgfSBjYXRjaCB7fVxuICAgIH07XG5cbiAgICBhcHBseSgpO1xuICAgIGNvbnN0IG9uU3RvcmFnZSA9IChlOiBTdG9yYWdlRXZlbnQpID0+IHtcbiAgICAgIGlmICghZS5rZXkgfHwgW1wibHVjaWRfdGhlbWVcIiwgXCJ0aGVtZVwiLCBcImx1Y2lkX2JyaWdodG5lc3NcIiwgXCJhdXRvRGltQnJpZ2h0VGhlbWVzXCJdLmluY2x1ZGVzKGUua2V5KSkgYXBwbHkoKTtcbiAgICB9O1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLCBvblN0b3JhZ2UpO1xuICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgb25TdG9yYWdlKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgZGVmYXVsdCBUaGVtZUNvbnRyb2xsZXI7XG5cbiJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJpc0JyaWdodFRoZW1lIiwidGhlbWUiLCJpbmNsdWRlcyIsImdldENvbXB1dGVkU3R5bGUiLCJkb2N1bWVudCIsImJvZHkiLCJiYWNrZ3JvdW5kQ29sb3IiLCJUaGVtZUNvbnRyb2xsZXIiLCJhcHBseSIsInJvb3QiLCJkb2N1bWVudEVsZW1lbnQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiYnJpZ2h0bmVzcyIsInRvTG93ZXJDYXNlIiwiYXV0b0RpbSIsInNldEF0dHJpYnV0ZSIsIm9uU3RvcmFnZSIsImUiLCJrZXkiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/components/ThemeController.tsx\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useAchievements.ts":
/*!**************************************!*\
  !*** ./app/hooks/useAchievements.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAchievements: () => (/* binding */ useAchievements)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _data_achievements_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../data/achievements.json */ \"(ssr)/./data/achievements.json\");\n/* harmony import */ var _useShame__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useShame */ \"(ssr)/./app/hooks/useShame.ts\");\n/* harmony import */ var _useDungeons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useDungeons */ \"(ssr)/./app/hooks/useDungeons.ts\");\n/* harmony import */ var _useCompanions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useCompanions */ \"(ssr)/./app/hooks/useCompanions.ts\");\n/* harmony import */ var _useDreamJournal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./useDreamJournal */ \"(ssr)/./app/hooks/useDreamJournal.ts\");\n/* harmony import */ var _useRitualsEngine__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./useRitualsEngine */ \"(ssr)/./app/hooks/useRitualsEngine.ts\");\n/* harmony import */ var _usePunishments__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./usePunishments */ \"(ssr)/./app/hooks/usePunishments.ts\");\n/* harmony import */ var _useInventory__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./useInventory */ \"(ssr)/./app/hooks/useInventory.ts\");\n/* __next_internal_client_entry_do_not_use__ useAchievements auto */ \n\n\n\n\n\n\n\n\n\n// This would be a real toast library\nconst showToast = (message)=>{\n    console.log(`TOAST: ${message}`);\n// In a real app, you'd integrate a library like react-hot-toast here\n};\nfunction useAchievements() {\n    const [achievements, setAchievements] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)('achievements', {\n        \"useAchievements.usePersistentState\": ()=>_data_achievements_json__WEBPACK_IMPORTED_MODULE_2__\n    }[\"useAchievements.usePersistentState\"]);\n    const { shame } = (0,_useShame__WEBPACK_IMPORTED_MODULE_3__.useShame)();\n    const { dungeons } = (0,_useDungeons__WEBPACK_IMPORTED_MODULE_4__.useDungeons)();\n    const { companions } = (0,_useCompanions__WEBPACK_IMPORTED_MODULE_5__.useCompanions)();\n    const { entries } = (0,_useDreamJournal__WEBPACK_IMPORTED_MODULE_6__.useDreamJournal)();\n    const { progressById: ritualProgressById } = (0,_useRitualsEngine__WEBPACK_IMPORTED_MODULE_7__.useRitualsEngine)();\n    const { activePunishments } = (0,_usePunishments__WEBPACK_IMPORTED_MODULE_8__.usePunishments)();\n    const { awardXp, awardTokens } = (0,_useInventory__WEBPACK_IMPORTED_MODULE_9__.useInventory)();\n    const unlockAchievement = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useAchievements.useCallback[unlockAchievement]\": (achievementId)=>{\n            setAchievements({\n                \"useAchievements.useCallback[unlockAchievement]\": (prev)=>{\n                    const achievement = prev.find({\n                        \"useAchievements.useCallback[unlockAchievement].achievement\": (a)=>a.id === achievementId\n                    }[\"useAchievements.useCallback[unlockAchievement].achievement\"]);\n                    if (achievement && !achievement.unlocked) {\n                        showToast(` Achievement Unlocked: ${achievement.title}!`);\n                        // Grant rewards\n                        if (achievement.reward.xp) {\n                            awardXp(achievement.reward.xp);\n                        }\n                        if (achievement.reward.tokens) {\n                            awardTokens(achievement.reward.tokens);\n                        }\n                        // TODO: Add title reward logic\n                        return prev.map({\n                            \"useAchievements.useCallback[unlockAchievement]\": (a)=>a.id === achievementId ? {\n                                    ...a,\n                                    unlocked: true,\n                                    date: new Date().toISOString()\n                                } : a\n                        }[\"useAchievements.useCallback[unlockAchievement]\"]);\n                    }\n                    return prev;\n                }\n            }[\"useAchievements.useCallback[unlockAchievement]\"]);\n        }\n    }[\"useAchievements.useCallback[unlockAchievement]\"], [\n        setAchievements,\n        awardXp,\n        awardTokens\n    ]);\n    const triggerAchievement = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useAchievements.useCallback[triggerAchievement]\": (type, value)=>{\n            achievements.forEach({\n                \"useAchievements.useCallback[triggerAchievement]\": (achievement)=>{\n                    if (achievement.unlocked) return;\n                    const { trigger } = achievement;\n                    let conditionMet = false;\n                    if (trigger.type === type) {\n                        switch(trigger.type){\n                            case 'MAP_NODE_UNLOCKED':\n                                if (trigger.value === value) {\n                                    conditionMet = true;\n                                }\n                                break;\n                            case 'MAP_ALL_NODES_UNLOCKED':\n                                conditionMet = true; // The check is now done in the calling hook\n                                break;\n                        }\n                    }\n                    if (conditionMet) {\n                        unlockAchievement(achievement.id);\n                    }\n                }\n            }[\"useAchievements.useCallback[triggerAchievement]\"]);\n        }\n    }[\"useAchievements.useCallback[triggerAchievement]\"], [\n        achievements,\n        unlockAchievement\n    ]);\n    const checkTriggers = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useAchievements.useCallback[checkTriggers]\": ()=>{\n            if (!achievements) return;\n            achievements.forEach({\n                \"useAchievements.useCallback[checkTriggers]\": (achievement)=>{\n                    if (achievement.unlocked) return;\n                    const { trigger } = achievement;\n                    let conditionMet = false;\n                    switch(trigger.type){\n                        case 'SHAME_COUNTER':\n                            if (shame[trigger.counter] >= trigger.value) {\n                                conditionMet = true;\n                            }\n                            break;\n                        case 'DUNGEON_CLEARED':\n                            const clearedDungeons = dungeons.filter({\n                                \"useAchievements.useCallback[checkTriggers]\": (d)=>d.completed\n                            }[\"useAchievements.useCallback[checkTriggers]\"]).length;\n                            if (clearedDungeons >= trigger.value) {\n                                conditionMet = true;\n                            }\n                            break;\n                        case 'COMPANION_EVOLVED':\n                            const evolvedCompanions = companions.filter({\n                                \"useAchievements.useCallback[checkTriggers]\": (c)=>(c.evolutionTree || c.forms || []).length > 1\n                            }[\"useAchievements.useCallback[checkTriggers]\"]).length; // Simplified\n                            if (evolvedCompanions >= trigger.value) {\n                                conditionMet = true;\n                            }\n                            break;\n                        case 'DREAM_TAG':\n                            const hasTag = entries.some({\n                                \"useAchievements.useCallback[checkTriggers].hasTag\": (e)=>e.tags.includes(trigger.value)\n                            }[\"useAchievements.useCallback[checkTriggers].hasTag\"]);\n                            if (hasTag) {\n                                conditionMet = true;\n                            }\n                            break;\n                        case 'CONFESSION_LOGGED':\n                            if (shame.confessions.length >= trigger.value) {\n                                conditionMet = true;\n                            }\n                            break;\n                        case 'RITUAL_COMPLETED':\n                            const completedRituals = Object.values(ritualProgressById).filter({\n                                \"useAchievements.useCallback[checkTriggers]\": (p)=>p.completed\n                            }[\"useAchievements.useCallback[checkTriggers]\"]).length;\n                            if (completedRituals >= trigger.value) {\n                                conditionMet = true;\n                            }\n                            break;\n                        case 'PUNISHMENT_TIER_REACHED':\n                            // Assuming tier is the number of active punishments\n                            if (activePunishments.length >= trigger.value) {\n                                conditionMet = true;\n                            }\n                            break;\n                    }\n                    if (conditionMet) {\n                        unlockAchievement(achievement.id);\n                    }\n                }\n            }[\"useAchievements.useCallback[checkTriggers]\"]);\n        }\n    }[\"useAchievements.useCallback[checkTriggers]\"], [\n        achievements,\n        shame,\n        dungeons,\n        companions,\n        entries,\n        ritualProgressById,\n        activePunishments,\n        unlockAchievement\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useAchievements.useEffect\": ()=>{\n            // Debounce or throttle this in a real app if it becomes expensive\n            checkTriggers();\n        }\n    }[\"useAchievements.useEffect\"], [\n        checkTriggers\n    ]);\n    const addAchievement = (newAchievement)=>{\n        const achievementToAdd = {\n            ...newAchievement,\n            unlocked: false,\n            date: null\n        };\n        setAchievements((prev)=>[\n                ...prev,\n                achievementToAdd\n            ]);\n    };\n    const resetAchievements = ()=>{\n        setAchievements(_data_achievements_json__WEBPACK_IMPORTED_MODULE_2__);\n    };\n    return {\n        achievements,\n        unlockAchievement,\n        addAchievement,\n        resetAchievements,\n        checkTriggers,\n        triggerAchievement\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QW9CbkIsUUFBUUYsS0FBSyxFQUFFO2dDQUNuQ0csZUFBZTs0QkFDbkI7NEJBQ0E7d0JBQ0osS0FBSzs0QkFDRCxvREFBb0Q7NEJBQ3BELElBQUl4QixrQkFBa0IrQixNQUFNLElBQUlSLFFBQVFGLEtBQUssRUFBRTtnQ0FDM0NHLGVBQWU7NEJBQ25COzRCQUNBO29CQUNOO29CQUVBLElBQUlBLGNBQWM7d0JBQ2hCckIsa0JBQWtCRyxZQUFZRyxFQUFFO29CQUNsQztnQkFDRjs7UUFDRjtxREFBRztRQUFDakI7UUFBY0U7UUFBT0M7UUFBVUM7UUFBWUM7UUFBU0U7UUFBb0JDO1FBQW1CRztLQUFrQjtJQUVqSDFCLGdEQUFTQTtxQ0FBQztZQUNSLGtFQUFrRTtZQUNsRWdEO1FBQ0Y7b0NBQUc7UUFBQ0E7S0FBYztJQUVsQixNQUFNcUIsaUJBQWlCLENBQUNDO1FBQ3RCLE1BQU1DLG1CQUFnQztZQUNwQyxHQUFHRCxjQUFjO1lBQ2pCckMsVUFBVTtZQUNWTSxNQUFNO1FBQ1I7UUFDQXZCLGdCQUFnQlksQ0FBQUEsT0FBUTttQkFBSUE7Z0JBQU0yQzthQUFpQjtJQUNyRDtJQUVBLE1BQU1DLG9CQUFvQjtRQUN4QnhELGdCQUFnQmQsb0RBQW1CQTtJQUNyQztJQUVBLE9BQU87UUFBRWE7UUFBY1c7UUFBbUIyQztRQUFnQkc7UUFBbUJ4QjtRQUFlTjtJQUFtQjtBQUNqSCIsInNvdXJjZXMiOlsiQzpcXE1vbW15IEx1Y3lcXFByb2plY3RzXFxMdWNpZCBEcmVhbVxcYXBwXFxob29rc1xcdXNlQWNoaWV2ZW1lbnRzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcclxuXHJcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVzZVBlcnNpc3RlbnRTdGF0ZSB9IGZyb20gJy4vdXNlUGVyc2lzdGVudFN0YXRlJztcclxuaW1wb3J0IGRlZmF1bHRBY2hpZXZlbWVudHMgZnJvbSAnLi4vLi4vZGF0YS9hY2hpZXZlbWVudHMuanNvbic7XHJcbmltcG9ydCB7IHR5cGUgQWNoaWV2ZW1lbnQgfSBmcm9tICcuLi9saWIvYWNoaWV2ZW1lbnRzJztcclxuaW1wb3J0IHsgdXNlU2hhbWUgfSBmcm9tICcuL3VzZVNoYW1lJztcclxuaW1wb3J0IHsgdXNlRHVuZ2VvbnMgfSBmcm9tICcuL3VzZUR1bmdlb25zJztcclxuaW1wb3J0IHsgdXNlQ29tcGFuaW9ucyB9IGZyb20gJy4vdXNlQ29tcGFuaW9ucyc7XHJcbmltcG9ydCB7IHVzZURyZWFtSm91cm5hbCB9IGZyb20gJy4vdXNlRHJlYW1Kb3VybmFsJztcclxuaW1wb3J0IHsgdXNlUml0dWFsc0VuZ2luZSB9IGZyb20gJy4vdXNlUml0dWFsc0VuZ2luZSc7XHJcbmltcG9ydCB7IHVzZVB1bmlzaG1lbnRzIH0gZnJvbSAnLi91c2VQdW5pc2htZW50cyc7XHJcbmltcG9ydCB7IHVzZUludmVudG9yeSB9IGZyb20gJy4vdXNlSW52ZW50b3J5JztcclxuXHJcbi8vIFRoaXMgd291bGQgYmUgYSByZWFsIHRvYXN0IGxpYnJhcnlcclxuY29uc3Qgc2hvd1RvYXN0ID0gKG1lc3NhZ2U6IHN0cmluZykgPT4ge1xyXG4gIGNvbnNvbGUubG9nKGBUT0FTVDogJHttZXNzYWdlfWApO1xyXG4gIC8vIEluIGEgcmVhbCBhcHAsIHlvdSdkIGludGVncmF0ZSBhIGxpYnJhcnkgbGlrZSByZWFjdC1ob3QtdG9hc3QgaGVyZVxyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZUFjaGlldmVtZW50cygpIHtcclxuICBjb25zdCBbYWNoaWV2ZW1lbnRzLCBzZXRBY2hpZXZlbWVudHNdID0gdXNlUGVyc2lzdGVudFN0YXRlPEFjaGlldmVtZW50W10+KCdhY2hpZXZlbWVudHMnLCAoKSA9PiBkZWZhdWx0QWNoaWV2ZW1lbnRzIGFzIEFjaGlldmVtZW50W10pO1xyXG4gIGNvbnN0IHsgc2hhbWUgfSA9IHVzZVNoYW1lKCk7XHJcbiAgY29uc3QgeyBkdW5nZW9ucyB9ID0gdXNlRHVuZ2VvbnMoKTtcclxuICBjb25zdCB7IGNvbXBhbmlvbnMgfSA9IHVzZUNvbXBhbmlvbnMoKTtcclxuICBjb25zdCB7IGVudHJpZXMgfSA9IHVzZURyZWFtSm91cm5hbCgpO1xyXG4gIGNvbnN0IHsgcHJvZ3Jlc3NCeUlkOiByaXR1YWxQcm9ncmVzc0J5SWQgfSA9IHVzZVJpdHVhbHNFbmdpbmUoKTtcclxuICBjb25zdCB7IGFjdGl2ZVB1bmlzaG1lbnRzIH0gPSB1c2VQdW5pc2htZW50cygpO1xyXG4gIGNvbnN0IHsgYXdhcmRYcCwgYXdhcmRUb2tlbnMgfSA9IHVzZUludmVudG9yeSgpO1xyXG5cclxuICBjb25zdCB1bmxvY2tBY2hpZXZlbWVudCA9IHVzZUNhbGxiYWNrKChhY2hpZXZlbWVudElkOiBzdHJpbmcpID0+IHtcclxuICAgIHNldEFjaGlldmVtZW50cyhwcmV2ID0+IHtcclxuICAgICAgY29uc3QgYWNoaWV2ZW1lbnQgPSBwcmV2LmZpbmQoYSA9PiBhLmlkID09PSBhY2hpZXZlbWVudElkKTtcclxuICAgICAgaWYgKGFjaGlldmVtZW50ICYmICFhY2hpZXZlbWVudC51bmxvY2tlZCkge1xyXG4gICAgICAgIHNob3dUb2FzdChg8J+PhiBBY2hpZXZlbWVudCBVbmxvY2tlZDogJHthY2hpZXZlbWVudC50aXRsZX0hYCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gR3JhbnQgcmV3YXJkc1xyXG4gICAgICAgIGlmIChhY2hpZXZlbWVudC5yZXdhcmQueHApIHtcclxuICAgICAgICAgIGF3YXJkWHAoYWNoaWV2ZW1lbnQucmV3YXJkLnhwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFjaGlldmVtZW50LnJld2FyZC50b2tlbnMpIHtcclxuICAgICAgICAgIGF3YXJkVG9rZW5zKGFjaGlldmVtZW50LnJld2FyZC50b2tlbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUT0RPOiBBZGQgdGl0bGUgcmV3YXJkIGxvZ2ljXHJcblxyXG4gICAgICAgIHJldHVybiBwcmV2Lm1hcChhID0+XHJcbiAgICAgICAgICBhLmlkID09PSBhY2hpZXZlbWVudElkXHJcbiAgICAgICAgICAgID8geyAuLi5hLCB1bmxvY2tlZDogdHJ1ZSwgZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH1cclxuICAgICAgICAgICAgOiBhXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcHJldjtcclxuICAgIH0pO1xyXG4gIH0sIFtzZXRBY2hpZXZlbWVudHMsIGF3YXJkWHAsIGF3YXJkVG9rZW5zXSk7XHJcblxyXG4gIGNvbnN0IHRyaWdnZXJBY2hpZXZlbWVudCA9IHVzZUNhbGxiYWNrKCh0eXBlOiBzdHJpbmcsIHZhbHVlPzogYW55KSA9PiB7XHJcbiAgICBhY2hpZXZlbWVudHMuZm9yRWFjaChhY2hpZXZlbWVudCA9PiB7XHJcbiAgICAgIGlmIChhY2hpZXZlbWVudC51bmxvY2tlZCkgcmV0dXJuO1xyXG5cclxuICAgICAgY29uc3QgeyB0cmlnZ2VyIH0gPSBhY2hpZXZlbWVudDtcclxuICAgICAgbGV0IGNvbmRpdGlvbk1ldCA9IGZhbHNlO1xyXG5cclxuICAgICAgaWYgKHRyaWdnZXIudHlwZSA9PT0gdHlwZSkge1xyXG4gICAgICAgIHN3aXRjaCAodHJpZ2dlci50eXBlKSB7XHJcbiAgICAgICAgICBjYXNlICdNQVBfTk9ERV9VTkxPQ0tFRCc6XHJcbiAgICAgICAgICAgIGlmICh0cmlnZ2VyLnZhbHVlID09PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgIGNvbmRpdGlvbk1ldCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlICdNQVBfQUxMX05PREVTX1VOTE9DS0VEJzpcclxuICAgICAgICAgICAgY29uZGl0aW9uTWV0ID0gdHJ1ZTsgLy8gVGhlIGNoZWNrIGlzIG5vdyBkb25lIGluIHRoZSBjYWxsaW5nIGhvb2tcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAvLyBvdGhlciBjYXNlcyBjYW4gYmUgYWRkZWQgaGVyZSBpZiBuZWVkZWQgZm9yIGRpcmVjdCB0cmlnZ2VyaW5nXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoY29uZGl0aW9uTWV0KSB7XHJcbiAgICAgICAgdW5sb2NrQWNoaWV2ZW1lbnQoYWNoaWV2ZW1lbnQuaWQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9LCBbYWNoaWV2ZW1lbnRzLCB1bmxvY2tBY2hpZXZlbWVudF0pO1xyXG5cclxuICBjb25zdCBjaGVja1RyaWdnZXJzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgaWYgKCFhY2hpZXZlbWVudHMpIHJldHVybjtcclxuICAgIGFjaGlldmVtZW50cy5mb3JFYWNoKGFjaGlldmVtZW50ID0+IHtcclxuICAgICAgaWYgKGFjaGlldmVtZW50LnVubG9ja2VkKSByZXR1cm47XHJcblxyXG4gICAgICBjb25zdCB7IHRyaWdnZXIgfSA9IGFjaGlldmVtZW50O1xyXG4gICAgICBsZXQgY29uZGl0aW9uTWV0ID0gZmFsc2U7XHJcblxyXG4gICAgICBzd2l0Y2ggKHRyaWdnZXIudHlwZSkge1xyXG4gICAgICAgIGNhc2UgJ1NIQU1FX0NPVU5URVInOlxyXG4gICAgICAgICAgaWYgKHNoYW1lW3RyaWdnZXIuY291bnRlcl0gPj0gdHJpZ2dlci52YWx1ZSkge1xyXG4gICAgICAgICAgICBjb25kaXRpb25NZXQgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnRFVOR0VPTl9DTEVBUkVEJzpcclxuICAgICAgICAgIGNvbnN0IGNsZWFyZWREdW5nZW9ucyA9IGR1bmdlb25zLmZpbHRlcihkID0+IGQuY29tcGxldGVkKS5sZW5ndGg7XHJcbiAgICAgICAgICBpZiAoY2xlYXJlZER1bmdlb25zID49IHRyaWdnZXIudmFsdWUpIHtcclxuICAgICAgICAgICAgY29uZGl0aW9uTWV0ID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ0NPTVBBTklPTl9FVk9MVkVEJzpcclxuICAgICAgICAgICAgY29uc3QgZXZvbHZlZENvbXBhbmlvbnMgPSBjb21wYW5pb25zLmZpbHRlcihjID0+IChjLmV2b2x1dGlvblRyZWUgfHwgYy5mb3JtcyB8fCBbXSkubGVuZ3RoID4gMSkubGVuZ3RoOyAvLyBTaW1wbGlmaWVkXHJcbiAgICAgICAgICAgIGlmIChldm9sdmVkQ29tcGFuaW9ucyA+PSB0cmlnZ2VyLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25kaXRpb25NZXQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ0RSRUFNX1RBRyc6XHJcbiAgICAgICAgICAgIGNvbnN0IGhhc1RhZyA9IGVudHJpZXMuc29tZShlID0+IGUudGFncy5pbmNsdWRlcyh0cmlnZ2VyLnZhbHVlKSk7XHJcbiAgICAgICAgICAgIGlmIChoYXNUYWcpIHtcclxuICAgICAgICAgICAgICAgIGNvbmRpdGlvbk1ldCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnQ09ORkVTU0lPTl9MT0dHRUQnOlxyXG4gICAgICAgICAgICBpZiAoc2hhbWUuY29uZmVzc2lvbnMubGVuZ3RoID49IHRyaWdnZXIudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbmRpdGlvbk1ldCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnUklUVUFMX0NPTVBMRVRFRCc6XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlZFJpdHVhbHMgPSBPYmplY3QudmFsdWVzKHJpdHVhbFByb2dyZXNzQnlJZCkuZmlsdGVyKHAgPT4gcC5jb21wbGV0ZWQpLmxlbmd0aDtcclxuICAgICAgICAgICAgaWYgKGNvbXBsZXRlZFJpdHVhbHMgPj0gdHJpZ2dlci52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uTWV0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdQVU5JU0hNRU5UX1RJRVJfUkVBQ0hFRCc6XHJcbiAgICAgICAgICAgIC8vIEFzc3VtaW5nIHRpZXIgaXMgdGhlIG51bWJlciBvZiBhY3RpdmUgcHVuaXNobWVudHNcclxuICAgICAgICAgICAgaWYgKGFjdGl2ZVB1bmlzaG1lbnRzLmxlbmd0aCA+PSB0cmlnZ2VyLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25kaXRpb25NZXQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoY29uZGl0aW9uTWV0KSB7XHJcbiAgICAgICAgdW5sb2NrQWNoaWV2ZW1lbnQoYWNoaWV2ZW1lbnQuaWQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9LCBbYWNoaWV2ZW1lbnRzLCBzaGFtZSwgZHVuZ2VvbnMsIGNvbXBhbmlvbnMsIGVudHJpZXMsIHJpdHVhbFByb2dyZXNzQnlJZCwgYWN0aXZlUHVuaXNobWVudHMsIHVubG9ja0FjaGlldmVtZW50XSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAvLyBEZWJvdW5jZSBvciB0aHJvdHRsZSB0aGlzIGluIGEgcmVhbCBhcHAgaWYgaXQgYmVjb21lcyBleHBlbnNpdmVcclxuICAgIGNoZWNrVHJpZ2dlcnMoKTtcclxuICB9LCBbY2hlY2tUcmlnZ2Vyc10pO1xyXG5cclxuICBjb25zdCBhZGRBY2hpZXZlbWVudCA9IChuZXdBY2hpZXZlbWVudDogT21pdDxBY2hpZXZlbWVudCwgJ3VubG9ja2VkJyB8ICdkYXRlJz4pID0+IHtcclxuICAgIGNvbnN0IGFjaGlldmVtZW50VG9BZGQ6IEFjaGlldmVtZW50ID0ge1xyXG4gICAgICAuLi5uZXdBY2hpZXZlbWVudCxcclxuICAgICAgdW5sb2NrZWQ6IGZhbHNlLFxyXG4gICAgICBkYXRlOiBudWxsLFxyXG4gICAgfTtcclxuICAgIHNldEFjaGlldmVtZW50cyhwcmV2ID0+IFsuLi5wcmV2LCBhY2hpZXZlbWVudFRvQWRkXSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcmVzZXRBY2hpZXZlbWVudHMgPSAoKSA9PiB7XHJcbiAgICBzZXRBY2hpZXZlbWVudHMoZGVmYXVsdEFjaGlldmVtZW50cyBhcyBBY2hpZXZlbWVudFtdKTtcclxuICB9O1xyXG5cclxuICByZXR1cm4geyBhY2hpZXZlbWVudHMsIHVubG9ja0FjaGlldmVtZW50LCBhZGRBY2hpZXZlbWVudCwgcmVzZXRBY2hpZXZlbWVudHMsIGNoZWNrVHJpZ2dlcnMsIHRyaWdnZXJBY2hpZXZlbWVudCB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsInVzZVBlcnNpc3RlbnRTdGF0ZSIsImRlZmF1bHRBY2hpZXZlbWVudHMiLCJ1c2VTaGFtZSIsInVzZUR1bmdlb25zIiwidXNlQ29tcGFuaW9ucyIsInVzZURyZWFtSm91cm5hbCIsInVzZVJpdHVhbHNFbmdpbmUiLCJ1c2VQdW5pc2htZW50cyIsInVzZUludmVudG9yeSIsInNob3dUb2FzdCIsIm1lc3NhZ2UiLCJjb25zb2xlIiwibG9nIiwidXNlQWNoaWV2ZW1lbnRzIiwiYWNoaWV2ZW1lbnRzIiwic2V0QWNoaWV2ZW1lbnRzIiwic2hhbWUiLCJkdW5nZW9ucyIsImNvbXBhbmlvbnMiLCJlbnRyaWVzIiwicHJvZ3Jlc3NCeUlkIiwicml0dWFsUHJvZ3Jlc3NCeUlkIiwiYWN0aXZlUHVuaXNobWVudHMiLCJhd2FyZFhwIiwiYXdhcmRUb2tlbnMiLCJ1bmxvY2tBY2hpZXZlbWVudCIsImFjaGlldmVtZW50SWQiLCJwcmV2IiwiYWNoaWV2ZW1lbnQiLCJmaW5kIiwiYSIsImlkIiwidW5sb2NrZWQiLCJ0aXRsZSIsInJld2FyZCIsInhwIiwidG9rZW5zIiwibWFwIiwiZGF0ZSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInRyaWdnZXJBY2hpZXZlbWVudCIsInR5cGUiLCJ2YWx1ZSIsImZvckVhY2giLCJ0cmlnZ2VyIiwiY29uZGl0aW9uTWV0IiwiY2hlY2tUcmlnZ2VycyIsImNvdW50ZXIiLCJjbGVhcmVkRHVuZ2VvbnMiLCJmaWx0ZXIiLCJkIiwiY29tcGxldGVkIiwibGVuZ3RoIiwiZXZvbHZlZENvbXBhbmlvbnMiLCJjIiwiZXZvbHV0aW9uVHJlZSIsImZvcm1zIiwiaGFzVGFnIiwic29tZSIsImUiLCJ0YWdzIiwiaW5jbHVkZXMiLCJjb25mZXNzaW9ucyIsImNvbXBsZXRlZFJpdHVhbHMiLCJPYmplY3QiLCJ2YWx1ZXMiLCJwIiwiYWRkQWNoaWV2ZW1lbnQiLCJuZXdBY2hpZXZlbWVudCIsImFjaGlldmVtZW50VG9BZGQiLCJyZXNldEFjaGlldmVtZW50cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useAchievements.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useBuffs.ts":
/*!*******************************!*\
  !*** ./app/hooks/useBuffs.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useBuffs: () => (/* binding */ useBuffs)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _data_buffs_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../data/buffs.json */ \"(ssr)/./data/buffs.json\");\n/* __next_internal_client_entry_do_not_use__ useBuffs auto */ \n\n// Load initial data from JSON\n\nconst defaultBuffData = _data_buffs_json__WEBPACK_IMPORTED_MODULE_2__;\nfunction useBuffs() {\n    const [buffData, setBuffData] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)('buffData_v2', {\n        \"useBuffs.usePersistentState\": ()=>defaultBuffData\n    }[\"useBuffs.usePersistentState\"]);\n    const [currentTime, setCurrentTime] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(Date.now());\n    console.log('useBuffs Debug:', {\n        buffData,\n        defaultBuffData,\n        activeCount: buffData?.active?.length || 0,\n        historyCount: buffData?.history?.length || 0\n    });\n    // Update current time every second for real-time countdown\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useBuffs.useEffect\": ()=>{\n            const interval = setInterval({\n                \"useBuffs.useEffect.interval\": ()=>{\n                    setCurrentTime(Date.now());\n                }\n            }[\"useBuffs.useEffect.interval\"], 1000);\n            return ({\n                \"useBuffs.useEffect\": ()=>clearInterval(interval)\n            })[\"useBuffs.useEffect\"];\n        }\n    }[\"useBuffs.useEffect\"], []);\n    // Auto-expire buffs when they expire\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useBuffs.useEffect\": ()=>{\n            const now = Date.now();\n            const expired = buffData.active.filter({\n                \"useBuffs.useEffect.expired\": (buff)=>buff.expiresAt <= now\n            }[\"useBuffs.useEffect.expired\"]);\n            if (expired.length > 0) {\n                const stillActive = buffData.active.filter({\n                    \"useBuffs.useEffect.stillActive\": (buff)=>buff.expiresAt > now\n                }[\"useBuffs.useEffect.stillActive\"]);\n                const expiredHistory = expired.map({\n                    \"useBuffs.useEffect.expiredHistory\": (buff)=>({\n                            id: buff.id,\n                            name: buff.name,\n                            type: buff.type,\n                            desc: buff.desc,\n                            duration: buff.duration,\n                            source: buff.source,\n                            icon: buff.icon,\n                            rarity: buff.rarity,\n                            effects: buff.effects,\n                            expiredAt: now\n                        })\n                }[\"useBuffs.useEffect.expiredHistory\"]);\n                setBuffData({\n                    active: stillActive,\n                    history: [\n                        ...expiredHistory,\n                        ...buffData.history\n                    ].slice(0, 50) // Keep last 50 history entries\n                });\n            }\n        }\n    }[\"useBuffs.useEffect\"], [\n        currentTime,\n        buffData.active,\n        setBuffData,\n        buffData.history\n    ]);\n    // Calculate combined effects from all active buffs\n    const calculateEffects = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBuffs.useCallback[calculateEffects]\": ()=>{\n            const effects = {};\n            buffData.active.forEach({\n                \"useBuffs.useCallback[calculateEffects]\": (buff)=>{\n                    Object.entries(buff.effects).forEach({\n                        \"useBuffs.useCallback[calculateEffects]\": ([key, value])=>{\n                            const effectKey = key;\n                            if (typeof value === 'number') {\n                                if (effectKey.includes('Multiplier')) {\n                                    // For multipliers, multiply them together\n                                    effects[effectKey] = (effects[effectKey] || 1) * value;\n                                } else {\n                                    // For additive effects, add them together\n                                    effects[effectKey] = (effects[effectKey] || 0) + value;\n                                }\n                            }\n                        }\n                    }[\"useBuffs.useCallback[calculateEffects]\"]);\n                }\n            }[\"useBuffs.useCallback[calculateEffects]\"]);\n            return effects;\n        }\n    }[\"useBuffs.useCallback[calculateEffects]\"], [\n        buffData.active\n    ]);\n    // Add a new buff\n    const addBuff = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBuffs.useCallback[addBuff]\": (buffInput)=>{\n            const now = Date.now();\n            const newBuff = {\n                ...buffInput,\n                id: `${buffInput.type[0]}${now}`,\n                createdAt: now,\n                expiresAt: now + buffInput.durationMs\n            };\n            setBuffData({\n                \"useBuffs.useCallback[addBuff]\": (prev)=>({\n                        ...prev,\n                        active: [\n                            ...prev.active,\n                            newBuff\n                        ]\n                    })\n            }[\"useBuffs.useCallback[addBuff]\"]);\n            return newBuff.id;\n        }\n    }[\"useBuffs.useCallback[addBuff]\"], [\n        setBuffData\n    ]);\n    // Remove an active buff manually\n    const removeBuff = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBuffs.useCallback[removeBuff]\": (buffId)=>{\n            const buffToRemove = buffData.active.find({\n                \"useBuffs.useCallback[removeBuff].buffToRemove\": (b)=>b.id === buffId\n            }[\"useBuffs.useCallback[removeBuff].buffToRemove\"]);\n            if (!buffToRemove) return false;\n            const now = Date.now();\n            const expiredBuff = {\n                id: buffToRemove.id,\n                name: buffToRemove.name,\n                type: buffToRemove.type,\n                desc: buffToRemove.desc,\n                duration: buffToRemove.duration,\n                source: buffToRemove.source,\n                icon: buffToRemove.icon,\n                rarity: buffToRemove.rarity,\n                effects: buffToRemove.effects,\n                expiredAt: now\n            };\n            setBuffData({\n                \"useBuffs.useCallback[removeBuff]\": (prev)=>({\n                        active: prev.active.filter({\n                            \"useBuffs.useCallback[removeBuff]\": (b)=>b.id !== buffId\n                        }[\"useBuffs.useCallback[removeBuff]\"]),\n                        history: [\n                            expiredBuff,\n                            ...prev.history\n                        ].slice(0, 50)\n                    })\n            }[\"useBuffs.useCallback[removeBuff]\"]);\n            return true;\n        }\n    }[\"useBuffs.useCallback[removeBuff]\"], [\n        buffData.active,\n        setBuffData\n    ]);\n    // Clear all expired buffs from history\n    const clearHistory = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBuffs.useCallback[clearHistory]\": ()=>{\n            setBuffData({\n                \"useBuffs.useCallback[clearHistory]\": (prev)=>({\n                        ...prev,\n                        history: []\n                    })\n            }[\"useBuffs.useCallback[clearHistory]\"]);\n        }\n    }[\"useBuffs.useCallback[clearHistory]\"], [\n        setBuffData\n    ]);\n    // Get time remaining for a buff\n    const getTimeRemaining = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBuffs.useCallback[getTimeRemaining]\": (buff)=>{\n            return Math.max(0, buff.expiresAt - currentTime);\n        }\n    }[\"useBuffs.useCallback[getTimeRemaining]\"], [\n        currentTime\n    ]);\n    // Get formatted time remaining\n    const getFormattedTimeRemaining = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBuffs.useCallback[getFormattedTimeRemaining]\": (buff)=>{\n            const remaining = getTimeRemaining(buff);\n            if (remaining === 0) return 'Expired';\n            const seconds = Math.floor(remaining / 1000);\n            const minutes = Math.floor(seconds / 60);\n            const hours = Math.floor(minutes / 60);\n            const days = Math.floor(hours / 24);\n            if (days > 0) return `${days}d ${hours % 24}h`;\n            if (hours > 0) return `${hours}h ${minutes % 60}m`;\n            if (minutes > 0) return `${minutes}m ${seconds % 60}s`;\n            return `${seconds}s`;\n        }\n    }[\"useBuffs.useCallback[getFormattedTimeRemaining]\"], [\n        getTimeRemaining\n    ]);\n    // Get active buffs by type\n    const getActiveBuffs = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBuffs.useCallback[getActiveBuffs]\": ()=>{\n            return buffData.active.filter({\n                \"useBuffs.useCallback[getActiveBuffs]\": (b)=>b.type === 'buff'\n            }[\"useBuffs.useCallback[getActiveBuffs]\"]);\n        }\n    }[\"useBuffs.useCallback[getActiveBuffs]\"], [\n        buffData.active\n    ]);\n    const getActiveCurses = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBuffs.useCallback[getActiveCurses]\": ()=>{\n            return buffData.active.filter({\n                \"useBuffs.useCallback[getActiveCurses]\": (b)=>b.type === 'curse'\n            }[\"useBuffs.useCallback[getActiveCurses]\"]);\n        }\n    }[\"useBuffs.useCallback[getActiveCurses]\"], [\n        buffData.active\n    ]);\n    // Get effect multiplier for specific effect type\n    const getEffectMultiplier = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBuffs.useCallback[getEffectMultiplier]\": (effectType)=>{\n            const effects = calculateEffects();\n            return effects[effectType] || (effectType.includes('Multiplier') ? 1 : 0);\n        }\n    }[\"useBuffs.useCallback[getEffectMultiplier]\"], [\n        calculateEffects\n    ]);\n    // Legacy compatibility methods for existing code\n    const applyEvent = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useBuffs.useCallback[applyEvent]\": (event, baseValue)=>{\n            const effects = calculateEffects();\n            let multiplier = 1;\n            switch(event){\n                case 'xp':\n                    multiplier = effects.xpMultiplier || 1;\n                    break;\n                case 'obedience':\n                    multiplier = effects.obedienceGain || 1;\n                    break;\n                case 'tokens':\n                    multiplier = effects.tokenMultiplier || 1;\n                    break;\n                case 'clarity':\n                    multiplier = effects.dreamClarity || 1;\n                    break;\n            }\n            return Math.round(baseValue * multiplier);\n        }\n    }[\"useBuffs.useCallback[applyEvent]\"], [\n        calculateEffects\n    ]);\n    return {\n        // New API\n        activeBuffs: getActiveBuffs(),\n        activeCurses: getActiveCurses(),\n        allActive: buffData.active,\n        history: buffData.history,\n        effects: calculateEffects(),\n        getEffectMultiplier,\n        addBuff,\n        removeBuff,\n        clearHistory,\n        getTimeRemaining,\n        getFormattedTimeRemaining,\n        currentTime,\n        totalActive: buffData.active.length,\n        buffCount: getActiveBuffs().length,\n        curseCount: getActiveCurses().length,\n        historyCount: buffData.history.length,\n        // Legacy compatibility for existing code\n        buffs: buffData.active,\n        applyEvent\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNkYyxXQUFXaEYsU0FBU1MsTUFBTTtRQUMxQkcsU0FBU1osU0FBU1ksT0FBTztRQUN6Qm1CLFNBQVNHO1FBQ1RpQztRQUNBekI7UUFDQU07UUFDQU07UUFDQUM7UUFDQUc7UUFDQXhEO1FBQ0ErRSxhQUFhakYsU0FBU1MsTUFBTSxDQUFDQyxNQUFNO1FBQ25Dd0UsV0FBV2pCLGlCQUFpQnZELE1BQU07UUFDbEN5RSxZQUFZakIsa0JBQWtCeEQsTUFBTTtRQUNwQ0MsY0FBY1gsU0FBU1ksT0FBTyxDQUFDRixNQUFNO1FBRXJDLHlDQUF5QztRQUN6QzBFLE9BQU9wRixTQUFTUyxNQUFNO1FBQ3RCNEQ7SUFDRjtBQUNGIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXGhvb2tzXFx1c2VCdWZmcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VQZXJzaXN0ZW50U3RhdGUgfSBmcm9tIFwiLi91c2VQZXJzaXN0ZW50U3RhdGVcIjtcblxuZXhwb3J0IGludGVyZmFjZSBCdWZmRWZmZWN0IHtcbiAgeHBNdWx0aXBsaWVyPzogbnVtYmVyO1xuICBib25kTXVsdGlwbGllcj86IG51bWJlcjtcbiAgZHJlYW1DbGFyaXR5PzogbnVtYmVyO1xuICBtb3ZlbWVudFNwZWVkPzogbnVtYmVyO1xuICBsdWNpZFhwTXVsdGlwbGllcj86IG51bWJlcjtcbiAgcml0dWFsU3VjY2Vzc1JhdGU/OiBudW1iZXI7XG4gIG9iZWRpZW5jZUdhaW4/OiBudW1iZXI7XG4gIHRva2VuTXVsdGlwbGllcj86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCdWZmIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICB0eXBlOiAnYnVmZicgfCAnY3Vyc2UnO1xuICBkZXNjOiBzdHJpbmc7XG4gIGR1cmF0aW9uOiBzdHJpbmc7XG4gIGR1cmF0aW9uTXM6IG51bWJlcjtcbiAgY3JlYXRlZEF0OiBudW1iZXI7XG4gIGV4cGlyZXNBdDogbnVtYmVyO1xuICBzb3VyY2U6IHN0cmluZztcbiAgaWNvbjogc3RyaW5nO1xuICByYXJpdHk6ICdjb21tb24nIHwgJ3VuY29tbW9uJyB8ICdyYXJlJyB8ICdlcGljJyB8ICdsZWdlbmRhcnknO1xuICBlZmZlY3RzOiBCdWZmRWZmZWN0O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEV4cGlyZWRCdWZmIGV4dGVuZHMgT21pdDxCdWZmLCAnZHVyYXRpb25NcycgfCAnY3JlYXRlZEF0JyB8ICdleHBpcmVzQXQnPiB7XG4gIGV4cGlyZWRBdDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJ1ZmZEYXRhIHtcbiAgYWN0aXZlOiBCdWZmW107XG4gIGhpc3Rvcnk6IEV4cGlyZWRCdWZmW107XG59XG5cbi8vIExvYWQgaW5pdGlhbCBkYXRhIGZyb20gSlNPTlxuaW1wb3J0IGJ1ZmZEYXRhSnNvbiBmcm9tIFwiLi4vLi4vZGF0YS9idWZmcy5qc29uXCI7XG5jb25zdCBkZWZhdWx0QnVmZkRhdGE6IEJ1ZmZEYXRhID0gYnVmZkRhdGFKc29uIGFzIEJ1ZmZEYXRhO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlQnVmZnMoKSB7XG4gIGNvbnN0IFtidWZmRGF0YSwgc2V0QnVmZkRhdGFdID0gdXNlUGVyc2lzdGVudFN0YXRlPEJ1ZmZEYXRhPignYnVmZkRhdGFfdjInLCAoKSA9PiBkZWZhdWx0QnVmZkRhdGEpO1xuICBjb25zdCBbY3VycmVudFRpbWUsIHNldEN1cnJlbnRUaW1lXSA9IHVzZVN0YXRlKERhdGUubm93KCkpO1xuXG4gIGNvbnNvbGUubG9nKCd1c2VCdWZmcyBEZWJ1ZzonLCB7XG4gICAgYnVmZkRhdGEsXG4gICAgZGVmYXVsdEJ1ZmZEYXRhLFxuICAgIGFjdGl2ZUNvdW50OiBidWZmRGF0YT8uYWN0aXZlPy5sZW5ndGggfHwgMCxcbiAgICBoaXN0b3J5Q291bnQ6IGJ1ZmZEYXRhPy5oaXN0b3J5Py5sZW5ndGggfHwgMFxuICB9KTtcblxuICAvLyBVcGRhdGUgY3VycmVudCB0aW1lIGV2ZXJ5IHNlY29uZCBmb3IgcmVhbC10aW1lIGNvdW50ZG93blxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgc2V0Q3VycmVudFRpbWUoRGF0ZS5ub3coKSk7XG4gICAgfSwgMTAwMCk7XG5cbiAgICByZXR1cm4gKCkgPT4gY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gIH0sIFtdKTtcblxuICAvLyBBdXRvLWV4cGlyZSBidWZmcyB3aGVuIHRoZXkgZXhwaXJlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBleHBpcmVkID0gYnVmZkRhdGEuYWN0aXZlLmZpbHRlcihidWZmID0+IGJ1ZmYuZXhwaXJlc0F0IDw9IG5vdyk7XG4gICAgXG4gICAgaWYgKGV4cGlyZWQubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgc3RpbGxBY3RpdmUgPSBidWZmRGF0YS5hY3RpdmUuZmlsdGVyKGJ1ZmYgPT4gYnVmZi5leHBpcmVzQXQgPiBub3cpO1xuICAgICAgY29uc3QgZXhwaXJlZEhpc3Rvcnk6IEV4cGlyZWRCdWZmW10gPSBleHBpcmVkLm1hcChidWZmID0+ICh7XG4gICAgICAgIGlkOiBidWZmLmlkLFxuICAgICAgICBuYW1lOiBidWZmLm5hbWUsXG4gICAgICAgIHR5cGU6IGJ1ZmYudHlwZSxcbiAgICAgICAgZGVzYzogYnVmZi5kZXNjLFxuICAgICAgICBkdXJhdGlvbjogYnVmZi5kdXJhdGlvbixcbiAgICAgICAgc291cmNlOiBidWZmLnNvdXJjZSxcbiAgICAgICAgaWNvbjogYnVmZi5pY29uLFxuICAgICAgICByYXJpdHk6IGJ1ZmYucmFyaXR5LFxuICAgICAgICBlZmZlY3RzOiBidWZmLmVmZmVjdHMsXG4gICAgICAgIGV4cGlyZWRBdDogbm93XG4gICAgICB9KSk7XG5cbiAgICAgIHNldEJ1ZmZEYXRhKHtcbiAgICAgICAgYWN0aXZlOiBzdGlsbEFjdGl2ZSxcbiAgICAgICAgaGlzdG9yeTogWy4uLmV4cGlyZWRIaXN0b3J5LCAuLi5idWZmRGF0YS5oaXN0b3J5XS5zbGljZSgwLCA1MCkgLy8gS2VlcCBsYXN0IDUwIGhpc3RvcnkgZW50cmllc1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbY3VycmVudFRpbWUsIGJ1ZmZEYXRhLmFjdGl2ZSwgc2V0QnVmZkRhdGEsIGJ1ZmZEYXRhLmhpc3RvcnldKTtcblxuICAvLyBDYWxjdWxhdGUgY29tYmluZWQgZWZmZWN0cyBmcm9tIGFsbCBhY3RpdmUgYnVmZnNcbiAgY29uc3QgY2FsY3VsYXRlRWZmZWN0cyA9IHVzZUNhbGxiYWNrKCgpOiBCdWZmRWZmZWN0ID0+IHtcbiAgICBjb25zdCBlZmZlY3RzOiBCdWZmRWZmZWN0ID0ge307XG4gICAgXG4gICAgYnVmZkRhdGEuYWN0aXZlLmZvckVhY2goYnVmZiA9PiB7XG4gICAgICBPYmplY3QuZW50cmllcyhidWZmLmVmZmVjdHMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBjb25zdCBlZmZlY3RLZXkgPSBrZXkgYXMga2V5b2YgQnVmZkVmZmVjdDtcbiAgICAgICAgXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgaWYgKGVmZmVjdEtleS5pbmNsdWRlcygnTXVsdGlwbGllcicpKSB7XG4gICAgICAgICAgICAvLyBGb3IgbXVsdGlwbGllcnMsIG11bHRpcGx5IHRoZW0gdG9nZXRoZXJcbiAgICAgICAgICAgIGVmZmVjdHNbZWZmZWN0S2V5XSA9IChlZmZlY3RzW2VmZmVjdEtleV0gfHwgMSkgKiB2YWx1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRm9yIGFkZGl0aXZlIGVmZmVjdHMsIGFkZCB0aGVtIHRvZ2V0aGVyXG4gICAgICAgICAgICBlZmZlY3RzW2VmZmVjdEtleV0gPSAoZWZmZWN0c1tlZmZlY3RLZXldIHx8IDApICsgdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBlZmZlY3RzO1xuICB9LCBbYnVmZkRhdGEuYWN0aXZlXSk7XG5cbiAgLy8gQWRkIGEgbmV3IGJ1ZmZcbiAgY29uc3QgYWRkQnVmZiA9IHVzZUNhbGxiYWNrKChidWZmSW5wdXQ6IE9taXQ8QnVmZiwgJ2lkJyB8ICdjcmVhdGVkQXQnIHwgJ2V4cGlyZXNBdCc+KSA9PiB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBuZXdCdWZmOiBCdWZmID0ge1xuICAgICAgLi4uYnVmZklucHV0LFxuICAgICAgaWQ6IGAke2J1ZmZJbnB1dC50eXBlWzBdfSR7bm93fWAsIC8vIEdlbmVyYXRlIHVuaXF1ZSBJRFxuICAgICAgY3JlYXRlZEF0OiBub3csXG4gICAgICBleHBpcmVzQXQ6IG5vdyArIGJ1ZmZJbnB1dC5kdXJhdGlvbk1zXG4gICAgfTtcblxuICAgIHNldEJ1ZmZEYXRhKHByZXYgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBhY3RpdmU6IFsuLi5wcmV2LmFjdGl2ZSwgbmV3QnVmZl1cbiAgICB9KSk7XG5cbiAgICByZXR1cm4gbmV3QnVmZi5pZDtcbiAgfSwgW3NldEJ1ZmZEYXRhXSk7XG5cbiAgLy8gUmVtb3ZlIGFuIGFjdGl2ZSBidWZmIG1hbnVhbGx5XG4gIGNvbnN0IHJlbW92ZUJ1ZmYgPSB1c2VDYWxsYmFjaygoYnVmZklkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBidWZmVG9SZW1vdmUgPSBidWZmRGF0YS5hY3RpdmUuZmluZChiID0+IGIuaWQgPT09IGJ1ZmZJZCk7XG4gICAgaWYgKCFidWZmVG9SZW1vdmUpIHJldHVybiBmYWxzZTtcblxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3QgZXhwaXJlZEJ1ZmY6IEV4cGlyZWRCdWZmID0ge1xuICAgICAgaWQ6IGJ1ZmZUb1JlbW92ZS5pZCxcbiAgICAgIG5hbWU6IGJ1ZmZUb1JlbW92ZS5uYW1lLFxuICAgICAgdHlwZTogYnVmZlRvUmVtb3ZlLnR5cGUsXG4gICAgICBkZXNjOiBidWZmVG9SZW1vdmUuZGVzYyxcbiAgICAgIGR1cmF0aW9uOiBidWZmVG9SZW1vdmUuZHVyYXRpb24sXG4gICAgICBzb3VyY2U6IGJ1ZmZUb1JlbW92ZS5zb3VyY2UsXG4gICAgICBpY29uOiBidWZmVG9SZW1vdmUuaWNvbixcbiAgICAgIHJhcml0eTogYnVmZlRvUmVtb3ZlLnJhcml0eSxcbiAgICAgIGVmZmVjdHM6IGJ1ZmZUb1JlbW92ZS5lZmZlY3RzLFxuICAgICAgZXhwaXJlZEF0OiBub3dcbiAgICB9O1xuXG4gICAgc2V0QnVmZkRhdGEocHJldiA9PiAoe1xuICAgICAgYWN0aXZlOiBwcmV2LmFjdGl2ZS5maWx0ZXIoYiA9PiBiLmlkICE9PSBidWZmSWQpLFxuICAgICAgaGlzdG9yeTogW2V4cGlyZWRCdWZmLCAuLi5wcmV2Lmhpc3RvcnldLnNsaWNlKDAsIDUwKVxuICAgIH0pKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9LCBbYnVmZkRhdGEuYWN0aXZlLCBzZXRCdWZmRGF0YV0pO1xuXG4gIC8vIENsZWFyIGFsbCBleHBpcmVkIGJ1ZmZzIGZyb20gaGlzdG9yeVxuICBjb25zdCBjbGVhckhpc3RvcnkgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0QnVmZkRhdGEocHJldiA9PiAoe1xuICAgICAgLi4ucHJldixcbiAgICAgIGhpc3Rvcnk6IFtdXG4gICAgfSkpO1xuICB9LCBbc2V0QnVmZkRhdGFdKTtcblxuICAvLyBHZXQgdGltZSByZW1haW5pbmcgZm9yIGEgYnVmZlxuICBjb25zdCBnZXRUaW1lUmVtYWluaW5nID0gdXNlQ2FsbGJhY2soKGJ1ZmY6IEJ1ZmYpOiBudW1iZXIgPT4ge1xuICAgIHJldHVybiBNYXRoLm1heCgwLCBidWZmLmV4cGlyZXNBdCAtIGN1cnJlbnRUaW1lKTtcbiAgfSwgW2N1cnJlbnRUaW1lXSk7XG5cbiAgLy8gR2V0IGZvcm1hdHRlZCB0aW1lIHJlbWFpbmluZ1xuICBjb25zdCBnZXRGb3JtYXR0ZWRUaW1lUmVtYWluaW5nID0gdXNlQ2FsbGJhY2soKGJ1ZmY6IEJ1ZmYpOiBzdHJpbmcgPT4ge1xuICAgIGNvbnN0IHJlbWFpbmluZyA9IGdldFRpbWVSZW1haW5pbmcoYnVmZik7XG4gICAgXG4gICAgaWYgKHJlbWFpbmluZyA9PT0gMCkgcmV0dXJuICdFeHBpcmVkJztcbiAgICBcbiAgICBjb25zdCBzZWNvbmRzID0gTWF0aC5mbG9vcihyZW1haW5pbmcgLyAxMDAwKTtcbiAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gNjApO1xuICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihtaW51dGVzIC8gNjApO1xuICAgIGNvbnN0IGRheXMgPSBNYXRoLmZsb29yKGhvdXJzIC8gMjQpO1xuXG4gICAgaWYgKGRheXMgPiAwKSByZXR1cm4gYCR7ZGF5c31kICR7aG91cnMgJSAyNH1oYDtcbiAgICBpZiAoaG91cnMgPiAwKSByZXR1cm4gYCR7aG91cnN9aCAke21pbnV0ZXMgJSA2MH1tYDtcbiAgICBpZiAobWludXRlcyA+IDApIHJldHVybiBgJHttaW51dGVzfW0gJHtzZWNvbmRzICUgNjB9c2A7XG4gICAgcmV0dXJuIGAke3NlY29uZHN9c2A7XG4gIH0sIFtnZXRUaW1lUmVtYWluaW5nXSk7XG5cbiAgLy8gR2V0IGFjdGl2ZSBidWZmcyBieSB0eXBlXG4gIGNvbnN0IGdldEFjdGl2ZUJ1ZmZzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHJldHVybiBidWZmRGF0YS5hY3RpdmUuZmlsdGVyKGIgPT4gYi50eXBlID09PSAnYnVmZicpO1xuICB9LCBbYnVmZkRhdGEuYWN0aXZlXSk7XG5cbiAgY29uc3QgZ2V0QWN0aXZlQ3Vyc2VzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHJldHVybiBidWZmRGF0YS5hY3RpdmUuZmlsdGVyKGIgPT4gYi50eXBlID09PSAnY3Vyc2UnKTtcbiAgfSwgW2J1ZmZEYXRhLmFjdGl2ZV0pO1xuXG4gIC8vIEdldCBlZmZlY3QgbXVsdGlwbGllciBmb3Igc3BlY2lmaWMgZWZmZWN0IHR5cGVcbiAgY29uc3QgZ2V0RWZmZWN0TXVsdGlwbGllciA9IHVzZUNhbGxiYWNrKChlZmZlY3RUeXBlOiBrZXlvZiBCdWZmRWZmZWN0KTogbnVtYmVyID0+IHtcbiAgICBjb25zdCBlZmZlY3RzID0gY2FsY3VsYXRlRWZmZWN0cygpO1xuICAgIHJldHVybiBlZmZlY3RzW2VmZmVjdFR5cGVdIHx8IChlZmZlY3RUeXBlLmluY2x1ZGVzKCdNdWx0aXBsaWVyJykgPyAxIDogMCk7XG4gIH0sIFtjYWxjdWxhdGVFZmZlY3RzXSk7XG5cbiAgLy8gTGVnYWN5IGNvbXBhdGliaWxpdHkgbWV0aG9kcyBmb3IgZXhpc3RpbmcgY29kZVxuICBjb25zdCBhcHBseUV2ZW50ID0gdXNlQ2FsbGJhY2soKGV2ZW50OiBzdHJpbmcsIGJhc2VWYWx1ZTogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgZWZmZWN0cyA9IGNhbGN1bGF0ZUVmZmVjdHMoKTtcbiAgICBsZXQgbXVsdGlwbGllciA9IDE7XG4gICAgXG4gICAgc3dpdGNoIChldmVudCkge1xuICAgICAgY2FzZSAneHAnOlxuICAgICAgICBtdWx0aXBsaWVyID0gZWZmZWN0cy54cE11bHRpcGxpZXIgfHwgMTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdvYmVkaWVuY2UnOlxuICAgICAgICBtdWx0aXBsaWVyID0gZWZmZWN0cy5vYmVkaWVuY2VHYWluIHx8IDE7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndG9rZW5zJzpcbiAgICAgICAgbXVsdGlwbGllciA9IGVmZmVjdHMudG9rZW5NdWx0aXBsaWVyIHx8IDE7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnY2xhcml0eSc6XG4gICAgICAgIG11bHRpcGxpZXIgPSBlZmZlY3RzLmRyZWFtQ2xhcml0eSB8fCAxO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIE1hdGgucm91bmQoYmFzZVZhbHVlICogbXVsdGlwbGllcik7XG4gIH0sIFtjYWxjdWxhdGVFZmZlY3RzXSk7XG5cbiAgcmV0dXJuIHtcbiAgICAvLyBOZXcgQVBJXG4gICAgYWN0aXZlQnVmZnM6IGdldEFjdGl2ZUJ1ZmZzKCksXG4gICAgYWN0aXZlQ3Vyc2VzOiBnZXRBY3RpdmVDdXJzZXMoKSxcbiAgICBhbGxBY3RpdmU6IGJ1ZmZEYXRhLmFjdGl2ZSxcbiAgICBoaXN0b3J5OiBidWZmRGF0YS5oaXN0b3J5LFxuICAgIGVmZmVjdHM6IGNhbGN1bGF0ZUVmZmVjdHMoKSxcbiAgICBnZXRFZmZlY3RNdWx0aXBsaWVyLFxuICAgIGFkZEJ1ZmYsXG4gICAgcmVtb3ZlQnVmZixcbiAgICBjbGVhckhpc3RvcnksXG4gICAgZ2V0VGltZVJlbWFpbmluZyxcbiAgICBnZXRGb3JtYXR0ZWRUaW1lUmVtYWluaW5nLFxuICAgIGN1cnJlbnRUaW1lLFxuICAgIHRvdGFsQWN0aXZlOiBidWZmRGF0YS5hY3RpdmUubGVuZ3RoLFxuICAgIGJ1ZmZDb3VudDogZ2V0QWN0aXZlQnVmZnMoKS5sZW5ndGgsXG4gICAgY3Vyc2VDb3VudDogZ2V0QWN0aXZlQ3Vyc2VzKCkubGVuZ3RoLFxuICAgIGhpc3RvcnlDb3VudDogYnVmZkRhdGEuaGlzdG9yeS5sZW5ndGgsXG4gICAgXG4gICAgLy8gTGVnYWN5IGNvbXBhdGliaWxpdHkgZm9yIGV4aXN0aW5nIGNvZGVcbiAgICBidWZmczogYnVmZkRhdGEuYWN0aXZlLFxuICAgIGFwcGx5RXZlbnRcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsInVzZVN0YXRlIiwidXNlUGVyc2lzdGVudFN0YXRlIiwiYnVmZkRhdGFKc29uIiwiZGVmYXVsdEJ1ZmZEYXRhIiwidXNlQnVmZnMiLCJidWZmRGF0YSIsInNldEJ1ZmZEYXRhIiwiY3VycmVudFRpbWUiLCJzZXRDdXJyZW50VGltZSIsIkRhdGUiLCJub3ciLCJjb25zb2xlIiwibG9nIiwiYWN0aXZlQ291bnQiLCJhY3RpdmUiLCJsZW5ndGgiLCJoaXN0b3J5Q291bnQiLCJoaXN0b3J5IiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJleHBpcmVkIiwiZmlsdGVyIiwiYnVmZiIsImV4cGlyZXNBdCIsInN0aWxsQWN0aXZlIiwiZXhwaXJlZEhpc3RvcnkiLCJtYXAiLCJpZCIsIm5hbWUiLCJ0eXBlIiwiZGVzYyIsImR1cmF0aW9uIiwic291cmNlIiwiaWNvbiIsInJhcml0eSIsImVmZmVjdHMiLCJleHBpcmVkQXQiLCJzbGljZSIsImNhbGN1bGF0ZUVmZmVjdHMiLCJmb3JFYWNoIiwiT2JqZWN0IiwiZW50cmllcyIsImtleSIsInZhbHVlIiwiZWZmZWN0S2V5IiwiaW5jbHVkZXMiLCJhZGRCdWZmIiwiYnVmZklucHV0IiwibmV3QnVmZiIsImNyZWF0ZWRBdCIsImR1cmF0aW9uTXMiLCJwcmV2IiwicmVtb3ZlQnVmZiIsImJ1ZmZJZCIsImJ1ZmZUb1JlbW92ZSIsImZpbmQiLCJiIiwiZXhwaXJlZEJ1ZmYiLCJjbGVhckhpc3RvcnkiLCJnZXRUaW1lUmVtYWluaW5nIiwiTWF0aCIsIm1heCIsImdldEZvcm1hdHRlZFRpbWVSZW1haW5pbmciLCJyZW1haW5pbmciLCJzZWNvbmRzIiwiZmxvb3IiLCJtaW51dGVzIiwiaG91cnMiLCJkYXlzIiwiZ2V0QWN0aXZlQnVmZnMiLCJnZXRBY3RpdmVDdXJzZXMiLCJnZXRFZmZlY3RNdWx0aXBsaWVyIiwiZWZmZWN0VHlwZSIsImFwcGx5RXZlbnQiLCJldmVudCIsImJhc2VWYWx1ZSIsIm11bHRpcGxpZXIiLCJ4cE11bHRpcGxpZXIiLCJvYmVkaWVuY2VHYWluIiwidG9rZW5NdWx0aXBsaWVyIiwiZHJlYW1DbGFyaXR5Iiwicm91bmQiLCJhY3RpdmVCdWZmcyIsImFjdGl2ZUN1cnNlcyIsImFsbEFjdGl2ZSIsInRvdGFsQWN0aXZlIiwiYnVmZkNvdW50IiwiY3Vyc2VDb3VudCIsImJ1ZmZzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useBuffs.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useCompanionAchievements.ts":
/*!***********************************************!*\
  !*** ./app/hooks/useCompanionAchievements.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useCompanionAchievements: () => (/* binding */ useCompanionAchievements)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _useAchievements__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useAchievements */ \"(ssr)/./app/hooks/useAchievements.ts\");\n/* harmony import */ var _useCompanions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useCompanions */ \"(ssr)/./app/hooks/useCompanions.ts\");\n/* __next_internal_client_entry_do_not_use__ useCompanionAchievements auto */ \n\n\n/**\r\n * A custom hook to manage companion-related achievements.\r\n * It listens to changes in companion state and unlocks achievements when their triggers are met.\r\n */ function useCompanionAchievements() {\n    const { achievements, unlockAchievement } = (0,_useAchievements__WEBPACK_IMPORTED_MODULE_1__.useAchievements)();\n    const { companions } = (0,_useCompanions__WEBPACK_IMPORTED_MODULE_2__.useCompanions)();\n    const evolvedCompanionsCount = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useCompanionAchievements.useMemo[evolvedCompanionsCount]\": ()=>{\n            const list = companions ?? [];\n            // A companion is considered \"evolved\" if it has more than one form in the evolution tree.\n            return list.filter({\n                \"useCompanionAchievements.useMemo[evolvedCompanionsCount]\": (c)=>Array.isArray(c.evolutionTree) && c.evolutionTree.length > 1\n            }[\"useCompanionAchievements.useMemo[evolvedCompanionsCount]\"]).length;\n        }\n    }[\"useCompanionAchievements.useMemo[evolvedCompanionsCount]\"], [\n        companions\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useCompanionAchievements.useEffect\": ()=>{\n            if (!achievements || achievements.length === 0) return;\n            const companionAchievements = achievements.filter({\n                \"useCompanionAchievements.useEffect.companionAchievements\": (a)=>!a.unlocked && a.category === 'Companion'\n            }[\"useCompanionAchievements.useEffect.companionAchievements\"]);\n            if (companionAchievements.length === 0) return;\n            companionAchievements.forEach({\n                \"useCompanionAchievements.useEffect\": (achievement)=>{\n                    const { trigger } = achievement;\n                    let conditionMet = false;\n                    if (trigger?.type === 'COMPANION_EVOLVED' && evolvedCompanionsCount >= (trigger.value ?? 1)) {\n                        conditionMet = true;\n                    }\n                    if (conditionMet) {\n                        unlockAchievement(achievement.id);\n                    }\n                }\n            }[\"useCompanionAchievements.useEffect\"]);\n        }\n    }[\"useCompanionAchievements.useEffect\"], [\n        evolvedCompanionsCount,\n        achievements,\n        unlockAchievement\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvaG9va3MvdXNlQ29tcGFuaW9uQWNoaWV2ZW1lbnRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OzhFQUUyQztBQUNTO0FBQ0o7QUFFaEQ7OztDQUdDLEdBQ00sU0FBU0k7SUFDZCxNQUFNLEVBQUVDLFlBQVksRUFBRUMsaUJBQWlCLEVBQUUsR0FBR0osaUVBQWVBO0lBQzNELE1BQU0sRUFBRUssVUFBVSxFQUFFLEdBQUdKLDZEQUFhQTtJQUVwQyxNQUFNSyx5QkFBeUJQLDhDQUFPQTtvRUFBQztZQUNyQyxNQUFNUSxPQUFPRixjQUFjLEVBQUU7WUFDN0IsMEZBQTBGO1lBQzFGLE9BQU9FLEtBQUtDLE1BQU07NEVBQUMsQ0FBQ0MsSUFBV0MsTUFBTUMsT0FBTyxDQUFDLEVBQVdDLGFBQWEsS0FBSyxFQUFXQSxhQUFhLENBQUNDLE1BQU0sR0FBRzsyRUFBR0EsTUFBTTtRQUN2SDttRUFBRztRQUFDUjtLQUFXO0lBRWZQLGdEQUFTQTs4Q0FBQztZQUNSLElBQUksQ0FBQ0ssZ0JBQWdCQSxhQUFhVSxNQUFNLEtBQUssR0FBRztZQUVoRCxNQUFNQyx3QkFBd0JYLGFBQWFLLE1BQU07NEVBQy9DLENBQUNPLElBQU0sQ0FBQ0EsRUFBRUMsUUFBUSxJQUFJRCxFQUFFRSxRQUFRLEtBQUs7O1lBR3ZDLElBQUlILHNCQUFzQkQsTUFBTSxLQUFLLEdBQUc7WUFFeENDLHNCQUFzQkksT0FBTztzREFBQyxDQUFDQztvQkFDN0IsTUFBTSxFQUFFQyxPQUFPLEVBQUUsR0FBR0Q7b0JBQ3BCLElBQUlFLGVBQWU7b0JBRW5CLElBQUlELFNBQVNFLFNBQVMsdUJBQXVCaEIsMEJBQTJCYyxDQUFBQSxRQUFRRyxLQUFLLElBQUksSUFBSTt3QkFDM0ZGLGVBQWU7b0JBQ2pCO29CQUVBLElBQUlBLGNBQWM7d0JBQ2hCakIsa0JBQWtCZSxZQUFZSyxFQUFFO29CQUNsQztnQkFDRjs7UUFDRjs2Q0FBRztRQUFDbEI7UUFBd0JIO1FBQWNDO0tBQWtCO0FBQzlEIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXGhvb2tzXFx1c2VDb21wYW5pb25BY2hpZXZlbWVudHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xyXG5cclxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyB1c2VBY2hpZXZlbWVudHMgfSBmcm9tICcuL3VzZUFjaGlldmVtZW50cyc7XHJcbmltcG9ydCB7IHVzZUNvbXBhbmlvbnMgfSBmcm9tICcuL3VzZUNvbXBhbmlvbnMnO1xyXG5cclxuLyoqXHJcbiAqIEEgY3VzdG9tIGhvb2sgdG8gbWFuYWdlIGNvbXBhbmlvbi1yZWxhdGVkIGFjaGlldmVtZW50cy5cclxuICogSXQgbGlzdGVucyB0byBjaGFuZ2VzIGluIGNvbXBhbmlvbiBzdGF0ZSBhbmQgdW5sb2NrcyBhY2hpZXZlbWVudHMgd2hlbiB0aGVpciB0cmlnZ2VycyBhcmUgbWV0LlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZUNvbXBhbmlvbkFjaGlldmVtZW50cygpIHtcclxuICBjb25zdCB7IGFjaGlldmVtZW50cywgdW5sb2NrQWNoaWV2ZW1lbnQgfSA9IHVzZUFjaGlldmVtZW50cygpO1xyXG4gIGNvbnN0IHsgY29tcGFuaW9ucyB9ID0gdXNlQ29tcGFuaW9ucygpO1xyXG5cclxuICBjb25zdCBldm9sdmVkQ29tcGFuaW9uc0NvdW50ID0gdXNlTWVtbygoKSA9PiB7XHJcbiAgICBjb25zdCBsaXN0ID0gY29tcGFuaW9ucyA/PyBbXTtcclxuICAgIC8vIEEgY29tcGFuaW9uIGlzIGNvbnNpZGVyZWQgXCJldm9sdmVkXCIgaWYgaXQgaGFzIG1vcmUgdGhhbiBvbmUgZm9ybSBpbiB0aGUgZXZvbHV0aW9uIHRyZWUuXHJcbiAgICByZXR1cm4gbGlzdC5maWx0ZXIoKGM6IGFueSkgPT4gQXJyYXkuaXNBcnJheSgoYyBhcyBhbnkpLmV2b2x1dGlvblRyZWUpICYmIChjIGFzIGFueSkuZXZvbHV0aW9uVHJlZS5sZW5ndGggPiAxKS5sZW5ndGg7XHJcbiAgfSwgW2NvbXBhbmlvbnNdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmICghYWNoaWV2ZW1lbnRzIHx8IGFjaGlldmVtZW50cy5sZW5ndGggPT09IDApIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBjb21wYW5pb25BY2hpZXZlbWVudHMgPSBhY2hpZXZlbWVudHMuZmlsdGVyKFxyXG4gICAgICAoYSkgPT4gIWEudW5sb2NrZWQgJiYgYS5jYXRlZ29yeSA9PT0gJ0NvbXBhbmlvbidcclxuICAgICk7XHJcblxyXG4gICAgaWYgKGNvbXBhbmlvbkFjaGlldmVtZW50cy5sZW5ndGggPT09IDApIHJldHVybjtcclxuXHJcbiAgICBjb21wYW5pb25BY2hpZXZlbWVudHMuZm9yRWFjaCgoYWNoaWV2ZW1lbnQpID0+IHtcclxuICAgICAgY29uc3QgeyB0cmlnZ2VyIH0gPSBhY2hpZXZlbWVudCBhcyBhbnk7XHJcbiAgICAgIGxldCBjb25kaXRpb25NZXQgPSBmYWxzZTtcclxuXHJcbiAgICAgIGlmICh0cmlnZ2VyPy50eXBlID09PSAnQ09NUEFOSU9OX0VWT0xWRUQnICYmIGV2b2x2ZWRDb21wYW5pb25zQ291bnQgPj0gKHRyaWdnZXIudmFsdWUgPz8gMSkpIHtcclxuICAgICAgICBjb25kaXRpb25NZXQgPSB0cnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoY29uZGl0aW9uTWV0KSB7XHJcbiAgICAgICAgdW5sb2NrQWNoaWV2ZW1lbnQoYWNoaWV2ZW1lbnQuaWQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9LCBbZXZvbHZlZENvbXBhbmlvbnNDb3VudCwgYWNoaWV2ZW1lbnRzLCB1bmxvY2tBY2hpZXZlbWVudF0pO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VNZW1vIiwidXNlQWNoaWV2ZW1lbnRzIiwidXNlQ29tcGFuaW9ucyIsInVzZUNvbXBhbmlvbkFjaGlldmVtZW50cyIsImFjaGlldmVtZW50cyIsInVubG9ja0FjaGlldmVtZW50IiwiY29tcGFuaW9ucyIsImV2b2x2ZWRDb21wYW5pb25zQ291bnQiLCJsaXN0IiwiZmlsdGVyIiwiYyIsIkFycmF5IiwiaXNBcnJheSIsImV2b2x1dGlvblRyZWUiLCJsZW5ndGgiLCJjb21wYW5pb25BY2hpZXZlbWVudHMiLCJhIiwidW5sb2NrZWQiLCJjYXRlZ29yeSIsImZvckVhY2giLCJhY2hpZXZlbWVudCIsInRyaWdnZXIiLCJjb25kaXRpb25NZXQiLCJ0eXBlIiwidmFsdWUiLCJpZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useCompanionAchievements.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useCompanions.ts":
/*!************************************!*\
  !*** ./app/hooks/useCompanions.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useCompanions: () => (/* binding */ useCompanions)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _useBuffs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useBuffs */ \"(ssr)/./app/hooks/useBuffs.ts\");\n/* harmony import */ var _lib_companions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/companions */ \"(ssr)/./app/lib/companions.ts\");\n/* __next_internal_client_entry_do_not_use__ useCompanions auto */ \n\n\n\nfunction useCompanions() {\n    const [companions, setCompanions] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)('companions', _lib_companions__WEBPACK_IMPORTED_MODULE_3__.cloneDefaultCompanions);\n    const gainXp = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useCompanions.useCallback[gainXp]\": (companionId, source, amount)=>{\n            const { applyEvent } = (0,_useBuffs__WEBPACK_IMPORTED_MODULE_2__.useBuffs)();\n            // Apply buff effects to XP gain\n            const buffedAmount = applyEvent('xp', amount);\n            setCompanions({\n                \"useCompanions.useCallback[gainXp]\": (prev)=>{\n                    const companionIndex = prev.findIndex({\n                        \"useCompanions.useCallback[gainXp].companionIndex\": (c)=>c.id === companionId\n                    }[\"useCompanions.useCallback[gainXp].companionIndex\"]);\n                    if (companionIndex === -1) return prev;\n                    const updatedCompanions = [\n                        ...prev\n                    ];\n                    const companion = {\n                        ...updatedCompanions[companionIndex]\n                    };\n                    let newXp = companion.xp + buffedAmount;\n                    let newLevel = companion.level;\n                    let neededXp = (0,_lib_companions__WEBPACK_IMPORTED_MODULE_3__.xpNeededForLevel)(newLevel + 1);\n                    while(newXp >= neededXp){\n                        newXp -= neededXp;\n                        newLevel++;\n                        neededXp = (0,_lib_companions__WEBPACK_IMPORTED_MODULE_3__.xpNeededForLevel)(newLevel + 1);\n                    }\n                    companion.xp = newXp;\n                    companion.level = newLevel;\n                    // Check for auto-evolution\n                    if (companion.autoEvolve) {\n                        const nextForm = (0,_lib_companions__WEBPACK_IMPORTED_MODULE_3__.getNextForm)(companion);\n                        if (nextForm && (0,_lib_companions__WEBPACK_IMPORTED_MODULE_3__.canEvolve)(companion)) {\n                            companion.currentForm = nextForm.id;\n                        }\n                    }\n                    updatedCompanions[companionIndex] = companion;\n                    return updatedCompanions;\n                }\n            }[\"useCompanions.useCallback[gainXp]\"]);\n        }\n    }[\"useCompanions.useCallback[gainXp]\"], [\n        setCompanions\n    ]);\n    const changeForm = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useCompanions.useCallback[changeForm]\": (companionId, formId)=>{\n            setCompanions({\n                \"useCompanions.useCallback[changeForm]\": (prev)=>prev.map({\n                        \"useCompanions.useCallback[changeForm]\": (c)=>{\n                            if (c.id === companionId) {\n                                const targetForm = c.evolutionTree.find({\n                                    \"useCompanions.useCallback[changeForm].targetForm\": (f)=>f.id === formId\n                                }[\"useCompanions.useCallback[changeForm].targetForm\"]);\n                                // Only allow changing to an unlocked form\n                                if (targetForm && c.level >= targetForm.unlockLevel) {\n                                    return {\n                                        ...c,\n                                        currentForm: formId\n                                    };\n                                }\n                            }\n                            return c;\n                        }\n                    }[\"useCompanions.useCallback[changeForm]\"])\n            }[\"useCompanions.useCallback[changeForm]\"]);\n        }\n    }[\"useCompanions.useCallback[changeForm]\"], [\n        setCompanions\n    ]);\n    const adjustBond = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useCompanions.useCallback[adjustBond]\": (companionId, amount)=>{\n            const { getEffectMultiplier } = (0,_useBuffs__WEBPACK_IMPORTED_MODULE_2__.useBuffs)();\n            // Apply bond multiplier from buffs\n            const bondMultiplier = getEffectMultiplier('bondMultiplier');\n            const buffedAmount = amount * bondMultiplier;\n            setCompanions({\n                \"useCompanions.useCallback[adjustBond]\": (prev)=>prev.map({\n                        \"useCompanions.useCallback[adjustBond]\": (c)=>{\n                            if (c.id === companionId) {\n                                const newBond = Math.max(0, Math.min(100, c.bond + buffedAmount));\n                                return {\n                                    ...c,\n                                    bond: newBond\n                                };\n                            }\n                            return c;\n                        }\n                    }[\"useCompanions.useCallback[adjustBond]\"])\n            }[\"useCompanions.useCallback[adjustBond]\"]);\n        }\n    }[\"useCompanions.useCallback[adjustBond]\"], [\n        setCompanions\n    ]);\n    const gainXpForCompanions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useCompanions.useCallback[gainXpForCompanions]\": (source, amount)=>{\n            companions.forEach({\n                \"useCompanions.useCallback[gainXpForCompanions]\": (c)=>gainXp(c.id, source, amount)\n            }[\"useCompanions.useCallback[gainXpForCompanions]\"]);\n        }\n    }[\"useCompanions.useCallback[gainXpForCompanions]\"], [\n        companions,\n        gainXp\n    ]);\n    return {\n        companions: companions ?? [],\n        gainXp,\n        gainXpForCompanions,\n        changeForm,\n        adjustBond\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWM7SUFHakIsTUFBTXNDLHNCQUFzQi9DLGtEQUFXQTswREFDckMsQ0FBQ1ksUUFBMEJDO1lBQ3pCTCxXQUFXd0MsT0FBTztrRUFBQyxDQUFDN0IsSUFBTVQsT0FBT1MsRUFBRUMsRUFBRSxFQUFFUixRQUFRQzs7UUFDakQ7eURBQ0E7UUFBQ0w7UUFBWUU7S0FBTztJQUd0QixPQUFPO1FBQ0xGLFlBQVlBLGNBQWMsRUFBRTtRQUM1QkU7UUFDQXFDO1FBQ0FoQjtRQUNBUTtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxNb21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxcaG9va3NcXHVzZUNvbXBhbmlvbnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgeyB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVBlcnNpc3RlbnRTdGF0ZSB9IGZyb20gJy4vdXNlUGVyc2lzdGVudFN0YXRlJztcbmltcG9ydCB7IHVzZUJ1ZmZzIH0gZnJvbSAnLi91c2VCdWZmcyc7XG5pbXBvcnQge1xuICBjbG9uZURlZmF1bHRDb21wYW5pb25zLFxuICB4cE5lZWRlZEZvckxldmVsLFxuICBjYW5Fdm9sdmUsXG4gIGdldE5leHRGb3JtLFxuICB0eXBlIENvbXBhbmlvbixcbiAgdHlwZSBDb21wYW5pb25YcEV2ZW50LFxufSBmcm9tICcuLi9saWIvY29tcGFuaW9ucyc7XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VDb21wYW5pb25zKCkge1xuICBjb25zdCBbY29tcGFuaW9ucywgc2V0Q29tcGFuaW9uc10gPSB1c2VQZXJzaXN0ZW50U3RhdGU8Q29tcGFuaW9uW10+KFxuICAgICdjb21wYW5pb25zJyxcbiAgICBjbG9uZURlZmF1bHRDb21wYW5pb25zXG4gICk7XG5cbiAgY29uc3QgZ2FpblhwID0gdXNlQ2FsbGJhY2soXG4gICAgKGNvbXBhbmlvbklkOiBzdHJpbmcsIHNvdXJjZTogQ29tcGFuaW9uWHBFdmVudCwgYW1vdW50OiBudW1iZXIpID0+IHtcbiAgICAgIGNvbnN0IHsgYXBwbHlFdmVudCB9ID0gdXNlQnVmZnMoKTtcbiAgICAgIFxuICAgICAgLy8gQXBwbHkgYnVmZiBlZmZlY3RzIHRvIFhQIGdhaW5cbiAgICAgIGNvbnN0IGJ1ZmZlZEFtb3VudCA9IGFwcGx5RXZlbnQoJ3hwJywgYW1vdW50KTtcbiAgICAgIFxuICAgICAgc2V0Q29tcGFuaW9ucygocHJldikgPT4ge1xuICAgICAgICBjb25zdCBjb21wYW5pb25JbmRleCA9IHByZXYuZmluZEluZGV4KChjKSA9PiBjLmlkID09PSBjb21wYW5pb25JZCk7XG4gICAgICAgIGlmIChjb21wYW5pb25JbmRleCA9PT0gLTEpIHJldHVybiBwcmV2O1xuXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRDb21wYW5pb25zID0gWy4uLnByZXZdO1xuICAgICAgICBjb25zdCBjb21wYW5pb24gPSB7IC4uLnVwZGF0ZWRDb21wYW5pb25zW2NvbXBhbmlvbkluZGV4XSB9O1xuXG4gICAgICAgIGxldCBuZXdYcCA9IGNvbXBhbmlvbi54cCArIGJ1ZmZlZEFtb3VudDtcbiAgICAgICAgbGV0IG5ld0xldmVsID0gY29tcGFuaW9uLmxldmVsO1xuICAgICAgICBsZXQgbmVlZGVkWHAgPSB4cE5lZWRlZEZvckxldmVsKG5ld0xldmVsICsgMSk7XG5cbiAgICAgICAgd2hpbGUgKG5ld1hwID49IG5lZWRlZFhwKSB7XG4gICAgICAgICAgbmV3WHAgLT0gbmVlZGVkWHA7XG4gICAgICAgICAgbmV3TGV2ZWwrKztcbiAgICAgICAgICBuZWVkZWRYcCA9IHhwTmVlZGVkRm9yTGV2ZWwobmV3TGV2ZWwgKyAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbXBhbmlvbi54cCA9IG5ld1hwO1xuICAgICAgICBjb21wYW5pb24ubGV2ZWwgPSBuZXdMZXZlbDtcblxuICAgICAgICAvLyBDaGVjayBmb3IgYXV0by1ldm9sdXRpb25cbiAgICAgICAgaWYgKGNvbXBhbmlvbi5hdXRvRXZvbHZlKSB7XG4gICAgICAgICAgY29uc3QgbmV4dEZvcm0gPSBnZXROZXh0Rm9ybShjb21wYW5pb24pO1xuICAgICAgICAgIGlmIChuZXh0Rm9ybSAmJiBjYW5Fdm9sdmUoY29tcGFuaW9uKSkge1xuICAgICAgICAgICAgY29tcGFuaW9uLmN1cnJlbnRGb3JtID0gbmV4dEZvcm0uaWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdXBkYXRlZENvbXBhbmlvbnNbY29tcGFuaW9uSW5kZXhdID0gY29tcGFuaW9uO1xuICAgICAgICByZXR1cm4gdXBkYXRlZENvbXBhbmlvbnM7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIFtzZXRDb21wYW5pb25zXVxuICApO1xuXG4gIGNvbnN0IGNoYW5nZUZvcm0gPSB1c2VDYWxsYmFjayhcbiAgICAoY29tcGFuaW9uSWQ6IHN0cmluZywgZm9ybUlkOiBzdHJpbmcpID0+IHtcbiAgICAgIHNldENvbXBhbmlvbnMoKHByZXYpID0+XG4gICAgICAgIHByZXYubWFwKChjKSA9PiB7XG4gICAgICAgICAgaWYgKGMuaWQgPT09IGNvbXBhbmlvbklkKSB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRGb3JtID0gYy5ldm9sdXRpb25UcmVlLmZpbmQoKGYpID0+IGYuaWQgPT09IGZvcm1JZCk7XG4gICAgICAgICAgICAvLyBPbmx5IGFsbG93IGNoYW5naW5nIHRvIGFuIHVubG9ja2VkIGZvcm1cbiAgICAgICAgICAgIGlmICh0YXJnZXRGb3JtICYmIGMubGV2ZWwgPj0gdGFyZ2V0Rm9ybS51bmxvY2tMZXZlbCkge1xuICAgICAgICAgICAgICByZXR1cm4geyAuLi5jLCBjdXJyZW50Rm9ybTogZm9ybUlkIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBjO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9LFxuICAgIFtzZXRDb21wYW5pb25zXVxuICApO1xuXG4gIGNvbnN0IGFkanVzdEJvbmQgPSB1c2VDYWxsYmFjayhcbiAgICAoY29tcGFuaW9uSWQ6IHN0cmluZywgYW1vdW50OiBudW1iZXIpID0+IHtcbiAgICAgIGNvbnN0IHsgZ2V0RWZmZWN0TXVsdGlwbGllciB9ID0gdXNlQnVmZnMoKTtcbiAgICAgIFxuICAgICAgLy8gQXBwbHkgYm9uZCBtdWx0aXBsaWVyIGZyb20gYnVmZnNcbiAgICAgIGNvbnN0IGJvbmRNdWx0aXBsaWVyID0gZ2V0RWZmZWN0TXVsdGlwbGllcignYm9uZE11bHRpcGxpZXInKTtcbiAgICAgIGNvbnN0IGJ1ZmZlZEFtb3VudCA9IGFtb3VudCAqIGJvbmRNdWx0aXBsaWVyO1xuICAgICAgXG4gICAgICBzZXRDb21wYW5pb25zKChwcmV2KSA9PlxuICAgICAgICBwcmV2Lm1hcCgoYykgPT4ge1xuICAgICAgICAgIGlmIChjLmlkID09PSBjb21wYW5pb25JZCkge1xuICAgICAgICAgICAgY29uc3QgbmV3Qm9uZCA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEwMCwgYy5ib25kICsgYnVmZmVkQW1vdW50KSk7XG4gICAgICAgICAgICByZXR1cm4geyAuLi5jLCBib25kOiBuZXdCb25kIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBjO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9LFxuICAgIFtzZXRDb21wYW5pb25zXVxuICApO1xuXG4gIGNvbnN0IGdhaW5YcEZvckNvbXBhbmlvbnMgPSB1c2VDYWxsYmFjayhcbiAgICAoc291cmNlOiBDb21wYW5pb25YcEV2ZW50LCBhbW91bnQ6IG51bWJlcikgPT4ge1xuICAgICAgY29tcGFuaW9ucy5mb3JFYWNoKChjKSA9PiBnYWluWHAoYy5pZCwgc291cmNlLCBhbW91bnQpKTtcbiAgICB9LFxuICAgIFtjb21wYW5pb25zLCBnYWluWHBdXG4gICk7XG5cbiAgcmV0dXJuIHtcbiAgICBjb21wYW5pb25zOiBjb21wYW5pb25zID8/IFtdLFxuICAgIGdhaW5YcCxcbiAgICBnYWluWHBGb3JDb21wYW5pb25zLFxuICAgIGNoYW5nZUZvcm0sXG4gICAgYWRqdXN0Qm9uZCxcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VDYWxsYmFjayIsInVzZVBlcnNpc3RlbnRTdGF0ZSIsInVzZUJ1ZmZzIiwiY2xvbmVEZWZhdWx0Q29tcGFuaW9ucyIsInhwTmVlZGVkRm9yTGV2ZWwiLCJjYW5Fdm9sdmUiLCJnZXROZXh0Rm9ybSIsInVzZUNvbXBhbmlvbnMiLCJjb21wYW5pb25zIiwic2V0Q29tcGFuaW9ucyIsImdhaW5YcCIsImNvbXBhbmlvbklkIiwic291cmNlIiwiYW1vdW50IiwiYXBwbHlFdmVudCIsImJ1ZmZlZEFtb3VudCIsInByZXYiLCJjb21wYW5pb25JbmRleCIsImZpbmRJbmRleCIsImMiLCJpZCIsInVwZGF0ZWRDb21wYW5pb25zIiwiY29tcGFuaW9uIiwibmV3WHAiLCJ4cCIsIm5ld0xldmVsIiwibGV2ZWwiLCJuZWVkZWRYcCIsImF1dG9Fdm9sdmUiLCJuZXh0Rm9ybSIsImN1cnJlbnRGb3JtIiwiY2hhbmdlRm9ybSIsImZvcm1JZCIsIm1hcCIsInRhcmdldEZvcm0iLCJldm9sdXRpb25UcmVlIiwiZmluZCIsImYiLCJ1bmxvY2tMZXZlbCIsImFkanVzdEJvbmQiLCJnZXRFZmZlY3RNdWx0aXBsaWVyIiwiYm9uZE11bHRpcGxpZXIiLCJuZXdCb25kIiwiTWF0aCIsIm1heCIsIm1pbiIsImJvbmQiLCJnYWluWHBGb3JDb21wYW5pb25zIiwiZm9yRWFjaCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useCompanions.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useDreamJournal.ts":
/*!**************************************!*\
  !*** ./app/hooks/useDreamJournal.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useDreamJournal: () => (/* binding */ useDreamJournal)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _useInventory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useInventory */ \"(ssr)/./app/hooks/useInventory.ts\");\n/* harmony import */ var _useCompanions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useCompanions */ \"(ssr)/./app/hooks/useCompanions.ts\");\n/* harmony import */ var _types_journal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../types/journal */ \"(ssr)/./app/types/journal.ts\");\n/* harmony import */ var _data_journal_json__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../data/journal.json */ \"(ssr)/./data/journal.json\");\n/* __next_internal_client_entry_do_not_use__ useDreamJournal auto */ \n\n\n\n\n\nconst JOURNAL_KEY = 'dreamJournal';\nconst STREAK_KEY = 'journalStreak';\nconst XP_CONFIG_KEY = 'journalXpConfig';\nconst ACHIEVEMENTS_KEY = 'journalAchievements';\nfunction useDreamJournal() {\n    const [entries, setEntries] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(JOURNAL_KEY, {\n        \"useDreamJournal.usePersistentState\": ()=>_data_journal_json__WEBPACK_IMPORTED_MODULE_5__\n    }[\"useDreamJournal.usePersistentState\"]);\n    const [streak, setStreak] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(STREAK_KEY, {\n        \"useDreamJournal.usePersistentState\": ()=>({\n                current: 0,\n                longest: 0,\n                lastEntryDate: null\n            })\n    }[\"useDreamJournal.usePersistentState\"]);\n    const [xpConfig, setXpConfig] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(XP_CONFIG_KEY, {\n        \"useDreamJournal.usePersistentState\": ()=>_types_journal__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_XP_CONFIG\n    }[\"useDreamJournal.usePersistentState\"]);\n    const [achievements, setAchievements] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(ACHIEVEMENTS_KEY, {\n        \"useDreamJournal.usePersistentState\": ()=>[]\n    }[\"useDreamJournal.usePersistentState\"]);\n    const { awardXp } = (0,_useInventory__WEBPACK_IMPORTED_MODULE_2__.useInventory)();\n    const { gainXpForCompanions } = (0,_useCompanions__WEBPACK_IMPORTED_MODULE_3__.useCompanions)();\n    const calculateEntryXp = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDreamJournal.useCallback[calculateEntryXp]\": (entry)=>{\n            let xp = xpConfig.baseEntry;\n            entry.tags.forEach({\n                \"useDreamJournal.useCallback[calculateEntryXp]\": (tag)=>{\n                    switch(tag.toLowerCase()){\n                        case 'lucid':\n                            xp += xpConfig.lucidTag;\n                            break;\n                        case 'ritual':\n                            xp += xpConfig.ritualTag;\n                            break;\n                        case 'panty':\n                            xp += xpConfig.pantyTag;\n                            break;\n                        case 'temple':\n                            xp += xpConfig.templeTag;\n                            break;\n                        case 'quest':\n                            xp += xpConfig.questTag;\n                            break;\n                    }\n                }\n            }[\"useDreamJournal.useCallback[calculateEntryXp]\"]);\n            return xp;\n        }\n    }[\"useDreamJournal.useCallback[calculateEntryXp]\"], [\n        xpConfig\n    ]);\n    const updateStreak = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDreamJournal.useCallback[updateStreak]\": (entryDate)=>{\n            const today = new Date().toISOString().split('T')[0];\n            const yesterday = new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString().split('T')[0];\n            setStreak({\n                \"useDreamJournal.useCallback[updateStreak]\": (prev)=>{\n                    let newCurrent = prev.current;\n                    let newLongest = prev.longest;\n                    if (prev.lastEntryDate === yesterday || prev.lastEntryDate === null) {\n                        newCurrent = prev.current + 1;\n                    } else if (prev.lastEntryDate !== today) {\n                        newCurrent = 1;\n                    }\n                    if (newCurrent > newLongest) {\n                        newLongest = newCurrent;\n                    }\n                    return {\n                        current: newCurrent,\n                        longest: newLongest,\n                        lastEntryDate: entryDate\n                    };\n                }\n            }[\"useDreamJournal.useCallback[updateStreak]\"]);\n            // Award streak bonus XP\n            if (streak.current > 0) {\n                const streakBonus = xpConfig.streakBonus * Math.min(streak.current, 10); // Cap bonus at 10 days\n                awardXp(streakBonus);\n                gainXpForCompanions('dream', streakBonus);\n            }\n        }\n    }[\"useDreamJournal.useCallback[updateStreak]\"], [\n        streak.current,\n        xpConfig.streakBonus,\n        awardXp,\n        setStreak,\n        gainXpForCompanions\n    ]);\n    const checkAchievements = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDreamJournal.useCallback[checkAchievements]\": (newEntries)=>{\n            const newAchievements = [];\n            // First Entry\n            if (newEntries.length === 1 && !achievements.includes('First Entry')) {\n                newAchievements.push('First Entry');\n                awardXp(50);\n            }\n            // 10-Day Streak\n            if (streak.current >= 10 && !achievements.includes('10-Day Streak')) {\n                newAchievements.push('10-Day Streak');\n            }\n            // 100 Dreams Logged\n            if (newEntries.length >= 100 && !achievements.includes('100 Dreams Logged')) {\n                newAchievements.push('100 Dreams Logged');\n            }\n            // Panty Dream Lord\n            const pantyEntries = newEntries.filter({\n                \"useDreamJournal.useCallback[checkAchievements].pantyEntries\": (e)=>e.tags.includes('panty')\n            }[\"useDreamJournal.useCallback[checkAchievements].pantyEntries\"]);\n            if (pantyEntries.length >= 50 && !achievements.includes('Panty Dream Lord')) {\n                newAchievements.push('Panty Dream Lord');\n            }\n            if (newAchievements.length > 0) {\n                setAchievements({\n                    \"useDreamJournal.useCallback[checkAchievements]\": (prev)=>[\n                            ...prev,\n                            ...newAchievements\n                        ]\n                }[\"useDreamJournal.useCallback[checkAchievements]\"]);\n            }\n        }\n    }[\"useDreamJournal.useCallback[checkAchievements]\"], [\n        achievements,\n        streak.current,\n        awardXp,\n        setAchievements\n    ]);\n    const addEntry = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDreamJournal.useCallback[addEntry]\": (entry)=>{\n            const newEntry = {\n                ...entry,\n                id: `d${Date.now()}-${Math.random().toString(36).slice(2, 7)}`,\n                xpEarned: 0,\n                createdAt: new Date().toISOString(),\n                updatedAt: new Date().toISOString()\n            };\n            newEntry.xpEarned = calculateEntryXp(newEntry);\n            const updatedEntries = [\n                ...entries,\n                newEntry\n            ].sort({\n                \"useDreamJournal.useCallback[addEntry].updatedEntries\": (a, b)=>new Date(b.date).getTime() - new Date(a.date).getTime()\n            }[\"useDreamJournal.useCallback[addEntry].updatedEntries\"]);\n            setEntries(updatedEntries);\n            updateStreak(newEntry.date);\n            awardXp(newEntry.xpEarned);\n            gainXpForCompanions('dream', newEntry.xpEarned);\n            checkAchievements(updatedEntries);\n            return newEntry;\n        }\n    }[\"useDreamJournal.useCallback[addEntry]\"], [\n        entries,\n        calculateEntryXp,\n        setEntries,\n        updateStreak,\n        awardXp,\n        checkAchievements,\n        gainXpForCompanions\n    ]);\n    const updateEntry = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDreamJournal.useCallback[updateEntry]\": (id, updates)=>{\n            let xpDifference = 0;\n            setEntries({\n                \"useDreamJournal.useCallback[updateEntry]\": (prev)=>prev.map({\n                        \"useDreamJournal.useCallback[updateEntry]\": (entry)=>{\n                            if (entry.id === id) {\n                                const originalXp = entry.xpEarned;\n                                const updated = {\n                                    ...entry,\n                                    ...updates,\n                                    updatedAt: new Date().toISOString()\n                                };\n                                updated.xpEarned = calculateEntryXp(updated);\n                                xpDifference = updated.xpEarned - originalXp;\n                                return updated;\n                            }\n                            return entry;\n                        }\n                    }[\"useDreamJournal.useCallback[updateEntry]\"])\n            }[\"useDreamJournal.useCallback[updateEntry]\"]);\n            if (xpDifference !== 0) {\n                awardXp(xpDifference);\n                gainXpForCompanions('dream', xpDifference);\n            }\n        }\n    }[\"useDreamJournal.useCallback[updateEntry]\"], [\n        setEntries,\n        calculateEntryXp,\n        awardXp,\n        gainXpForCompanions\n    ]);\n    const deleteEntry = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDreamJournal.useCallback[deleteEntry]\": (id)=>{\n            const entryToDelete = entries.find({\n                \"useDreamJournal.useCallback[deleteEntry].entryToDelete\": (entry)=>entry.id === id\n            }[\"useDreamJournal.useCallback[deleteEntry].entryToDelete\"]);\n            if (entryToDelete) {\n                awardXp(-entryToDelete.xpEarned);\n                gainXpForCompanions('dream', -entryToDelete.xpEarned);\n            }\n            setEntries({\n                \"useDreamJournal.useCallback[deleteEntry]\": (prev)=>prev.filter({\n                        \"useDreamJournal.useCallback[deleteEntry]\": (entry)=>entry.id !== id\n                    }[\"useDreamJournal.useCallback[deleteEntry]\"])\n            }[\"useDreamJournal.useCallback[deleteEntry]\"]);\n        }\n    }[\"useDreamJournal.useCallback[deleteEntry]\"], [\n        setEntries,\n        entries,\n        awardXp,\n        gainXpForCompanions\n    ]);\n    const filterEntries = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDreamJournal.useCallback[filterEntries]\": (filter)=>{\n            return entries.filter({\n                \"useDreamJournal.useCallback[filterEntries]\": (entry)=>{\n                    if (filter.searchText) {\n                        const search = filter.searchText.toLowerCase();\n                        if (!entry.title.toLowerCase().includes(search) && !entry.content.toLowerCase().includes(search)) {\n                            return false;\n                        }\n                    }\n                    if (filter.tags?.length && !filter.tags.some({\n                        \"useDreamJournal.useCallback[filterEntries]\": (tag)=>entry.tags.includes(tag)\n                    }[\"useDreamJournal.useCallback[filterEntries]\"])) {\n                        return false;\n                    }\n                    if (filter.companions?.length && !filter.companions.some({\n                        \"useDreamJournal.useCallback[filterEntries]\": (comp)=>entry.companions.includes(comp)\n                    }[\"useDreamJournal.useCallback[filterEntries]\"])) {\n                        return false;\n                    }\n                    if (filter.places?.length && !filter.places.some({\n                        \"useDreamJournal.useCallback[filterEntries]\": (place)=>entry.places.includes(place)\n                    }[\"useDreamJournal.useCallback[filterEntries]\"])) {\n                        return false;\n                    }\n                    if (filter.dateFrom && entry.date < filter.dateFrom) {\n                        return false;\n                    }\n                    if (filter.dateTo && entry.date > filter.dateTo) {\n                        return false;\n                    }\n                    if (filter.minXp && entry.xpEarned < filter.minXp) {\n                        return false;\n                    }\n                    if (filter.maxXp && entry.xpEarned > filter.maxXp) {\n                        return false;\n                    }\n                    return true;\n                }\n            }[\"useDreamJournal.useCallback[filterEntries]\"]);\n        }\n    }[\"useDreamJournal.useCallback[filterEntries]\"], [\n        entries\n    ]);\n    const stats = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useDreamJournal.useMemo[stats]\": ()=>{\n            const totalEntries = entries.length;\n            const totalXpEarned = entries.reduce({\n                \"useDreamJournal.useMemo[stats].totalXpEarned\": (sum, entry)=>sum + entry.xpEarned\n            }[\"useDreamJournal.useMemo[stats].totalXpEarned\"], 0);\n            const averageXpPerEntry = totalEntries > 0 ? totalXpEarned / totalEntries : 0;\n            const tagCounts = new Map();\n            const companionCounts = new Map();\n            const placeCounts = new Map();\n            entries.forEach({\n                \"useDreamJournal.useMemo[stats]\": (entry)=>{\n                    entry.tags.forEach({\n                        \"useDreamJournal.useMemo[stats]\": (tag)=>tagCounts.set(tag, (tagCounts.get(tag) || 0) + 1)\n                    }[\"useDreamJournal.useMemo[stats]\"]);\n                    entry.companions.forEach({\n                        \"useDreamJournal.useMemo[stats]\": (comp)=>companionCounts.set(comp, (companionCounts.get(comp) || 0) + 1)\n                    }[\"useDreamJournal.useMemo[stats]\"]);\n                    entry.places.forEach({\n                        \"useDreamJournal.useMemo[stats]\": (place)=>placeCounts.set(place, (placeCounts.get(place) || 0) + 1)\n                    }[\"useDreamJournal.useMemo[stats]\"]);\n                }\n            }[\"useDreamJournal.useMemo[stats]\"]);\n            const currentMonth = new Date().toISOString().slice(0, 7);\n            const entriesThisMonth = entries.filter({\n                \"useDreamJournal.useMemo[stats]\": (entry)=>entry.date.startsWith(currentMonth)\n            }[\"useDreamJournal.useMemo[stats]\"]).length;\n            const lucidDreamCount = entries.filter({\n                \"useDreamJournal.useMemo[stats]\": (entry)=>entry.tags.includes('lucid')\n            }[\"useDreamJournal.useMemo[stats]\"]).length;\n            return {\n                totalEntries,\n                totalXpEarned,\n                averageXpPerEntry,\n                mostUsedTags: Array.from(tagCounts.entries()).map({\n                    \"useDreamJournal.useMemo[stats]\": ([tag, count])=>({\n                            tag,\n                            count\n                        })\n                }[\"useDreamJournal.useMemo[stats]\"]).sort({\n                    \"useDreamJournal.useMemo[stats]\": (a, b)=>b.count - a.count\n                }[\"useDreamJournal.useMemo[stats]\"]).slice(0, 10),\n                favoriteCompanions: Array.from(companionCounts.entries()).map({\n                    \"useDreamJournal.useMemo[stats]\": ([name, count])=>({\n                            name,\n                            count\n                        })\n                }[\"useDreamJournal.useMemo[stats]\"]).sort({\n                    \"useDreamJournal.useMemo[stats]\": (a, b)=>b.count - a.count\n                }[\"useDreamJournal.useMemo[stats]\"]).slice(0, 10),\n                favoriteLocations: Array.from(placeCounts.entries()).map({\n                    \"useDreamJournal.useMemo[stats]\": ([place, count])=>({\n                            place,\n                            count\n                        })\n                }[\"useDreamJournal.useMemo[stats]\"]).sort({\n                    \"useDreamJournal.useMemo[stats]\": (a, b)=>b.count - a.count\n                }[\"useDreamJournal.useMemo[stats]\"]).slice(0, 10),\n                entriesThisMonth,\n                lucidDreamCount\n            };\n        }\n    }[\"useDreamJournal.useMemo[stats]\"], [\n        entries\n    ]);\n    const exportJournal = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDreamJournal.useCallback[exportJournal]\": ()=>{\n            const data = JSON.stringify(entries, null, 2);\n            const blob = new Blob([\n                data\n            ], {\n                type: 'application/json'\n            });\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = `dream-journal-export-${new Date().toISOString().split('T')[0]}.json`;\n            document.body.appendChild(a);\n            a.click();\n            document.body.removeChild(a);\n            URL.revokeObjectURL(url);\n        }\n    }[\"useDreamJournal.useCallback[exportJournal]\"], [\n        entries\n    ]);\n    const importJournal = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDreamJournal.useCallback[importJournal]\": (jsonData)=>{\n            try {\n                const imported = JSON.parse(jsonData);\n                const errors = [];\n                let importedCount = 0;\n                imported.forEach({\n                    \"useDreamJournal.useCallback[importJournal]\": (entry, index)=>{\n                        try {\n                            if (!entry.id || !entry.title || !entry.date || !entry.content) {\n                                errors.push(`Entry ${index + 1}: Missing required fields`);\n                                return;\n                            }\n                            const existingEntry = entries.find({\n                                \"useDreamJournal.useCallback[importJournal].existingEntry\": (e)=>e.id === entry.id\n                            }[\"useDreamJournal.useCallback[importJournal].existingEntry\"]);\n                            if (!existingEntry) {\n                                addEntry(entry);\n                                importedCount++;\n                            }\n                        } catch (err) {\n                            errors.push(`Entry ${index + 1}: ${err}`);\n                        }\n                    }\n                }[\"useDreamJournal.useCallback[importJournal]\"]);\n                return {\n                    success: true,\n                    imported: importedCount,\n                    errors\n                };\n            } catch (err) {\n                return {\n                    success: false,\n                    imported: 0,\n                    errors: [\n                        `Invalid JSON: ${err}`\n                    ]\n                };\n            }\n        }\n    }[\"useDreamJournal.useCallback[importJournal]\"], [\n        entries,\n        addEntry\n    ]);\n    return {\n        entries,\n        streak,\n        stats,\n        achievements,\n        xpConfig,\n        addEntry,\n        updateEntry,\n        deleteEntry,\n        filterEntries,\n        exportJournal,\n        importJournal,\n        setXpConfig,\n        calculateEntryXp\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxcaG9va3NcXHVzZURyZWFtSm91cm5hbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XHJcblxyXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlUGVyc2lzdGVudFN0YXRlIH0gZnJvbSAnLi91c2VQZXJzaXN0ZW50U3RhdGUnO1xyXG5pbXBvcnQgeyB1c2VJbnZlbnRvcnkgfSBmcm9tICcuL3VzZUludmVudG9yeSc7XHJcbmltcG9ydCB7IHVzZUNvbXBhbmlvbnMgfSBmcm9tICcuL3VzZUNvbXBhbmlvbnMnO1xyXG5pbXBvcnQgeyBcclxuICBEcmVhbUpvdXJuYWxFbnRyeSwgXHJcbiAgSm91cm5hbFN0cmVhaywgXHJcbiAgSm91cm5hbFN0YXRzLCBcclxuICBKb3VybmFsRmlsdGVyLFxyXG4gIFhwUmV3YXJkQ29uZmlnLFxyXG4gIERFRkFVTFRfWFBfQ09ORklHIFxyXG59IGZyb20gJy4uL3R5cGVzL2pvdXJuYWwnO1xyXG5pbXBvcnQgam91cm5hbERhdGEgZnJvbSAnLi4vLi4vZGF0YS9qb3VybmFsLmpzb24nO1xyXG5cclxuY29uc3QgSk9VUk5BTF9LRVkgPSAnZHJlYW1Kb3VybmFsJztcclxuY29uc3QgU1RSRUFLX0tFWSA9ICdqb3VybmFsU3RyZWFrJztcclxuY29uc3QgWFBfQ09ORklHX0tFWSA9ICdqb3VybmFsWHBDb25maWcnO1xyXG5jb25zdCBBQ0hJRVZFTUVOVFNfS0VZID0gJ2pvdXJuYWxBY2hpZXZlbWVudHMnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZURyZWFtSm91cm5hbCgpIHtcclxuICBjb25zdCBbZW50cmllcywgc2V0RW50cmllc10gPSB1c2VQZXJzaXN0ZW50U3RhdGU8RHJlYW1Kb3VybmFsRW50cnlbXT4oXHJcbiAgICBKT1VSTkFMX0tFWSwgXHJcbiAgICAoKSA9PiBqb3VybmFsRGF0YSBhcyBEcmVhbUpvdXJuYWxFbnRyeVtdXHJcbiAgKTtcclxuICBcclxuICBjb25zdCBbc3RyZWFrLCBzZXRTdHJlYWtdID0gdXNlUGVyc2lzdGVudFN0YXRlPEpvdXJuYWxTdHJlYWs+KFxyXG4gICAgU1RSRUFLX0tFWSxcclxuICAgICgpID0+ICh7IGN1cnJlbnQ6IDAsIGxvbmdlc3Q6IDAsIGxhc3RFbnRyeURhdGU6IG51bGwgfSlcclxuICApO1xyXG4gIFxyXG4gIGNvbnN0IFt4cENvbmZpZywgc2V0WHBDb25maWddID0gdXNlUGVyc2lzdGVudFN0YXRlPFhwUmV3YXJkQ29uZmlnPihcclxuICAgIFhQX0NPTkZJR19LRVksXHJcbiAgICAoKSA9PiBERUZBVUxUX1hQX0NPTkZJR1xyXG4gICk7XHJcbiAgXHJcbiAgY29uc3QgW2FjaGlldmVtZW50cywgc2V0QWNoaWV2ZW1lbnRzXSA9IHVzZVBlcnNpc3RlbnRTdGF0ZTxzdHJpbmdbXT4oXHJcbiAgICBBQ0hJRVZFTUVOVFNfS0VZLFxyXG4gICAgKCkgPT4gW11cclxuICApO1xyXG5cclxuICBjb25zdCB7IGF3YXJkWHAgfSA9IHVzZUludmVudG9yeSgpO1xyXG4gIGNvbnN0IHsgZ2FpblhwRm9yQ29tcGFuaW9ucyB9ID0gdXNlQ29tcGFuaW9ucygpO1xyXG5cclxuICBjb25zdCBjYWxjdWxhdGVFbnRyeVhwID0gdXNlQ2FsbGJhY2soKGVudHJ5OiBEcmVhbUpvdXJuYWxFbnRyeSk6IG51bWJlciA9PiB7XHJcbiAgICBsZXQgeHAgPSB4cENvbmZpZy5iYXNlRW50cnk7XHJcbiAgICBcclxuICAgIGVudHJ5LnRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xyXG4gICAgICBzd2l0Y2ggKHRhZy50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgY2FzZSAnbHVjaWQnOlxyXG4gICAgICAgICAgeHAgKz0geHBDb25maWcubHVjaWRUYWc7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdyaXR1YWwnOlxyXG4gICAgICAgICAgeHAgKz0geHBDb25maWcucml0dWFsVGFnO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAncGFudHknOlxyXG4gICAgICAgICAgeHAgKz0geHBDb25maWcucGFudHlUYWc7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICd0ZW1wbGUnOlxyXG4gICAgICAgICAgeHAgKz0geHBDb25maWcudGVtcGxlVGFnO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAncXVlc3QnOlxyXG4gICAgICAgICAgeHAgKz0geHBDb25maWcucXVlc3RUYWc7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHJldHVybiB4cDtcclxuICB9LCBbeHBDb25maWddKTtcclxuXHJcbiAgY29uc3QgdXBkYXRlU3RyZWFrID0gdXNlQ2FsbGJhY2soKGVudHJ5RGF0ZTogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xyXG4gICAgY29uc3QgeWVzdGVyZGF5ID0gbmV3IERhdGUoRGF0ZS5ub3coKSAtIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcclxuICAgIFxyXG4gICAgc2V0U3RyZWFrKHByZXYgPT4ge1xyXG4gICAgICBsZXQgbmV3Q3VycmVudCA9IHByZXYuY3VycmVudDtcclxuICAgICAgbGV0IG5ld0xvbmdlc3QgPSBwcmV2Lmxvbmdlc3Q7XHJcbiAgICAgIFxyXG4gICAgICBpZiAocHJldi5sYXN0RW50cnlEYXRlID09PSB5ZXN0ZXJkYXkgfHwgcHJldi5sYXN0RW50cnlEYXRlID09PSBudWxsKSB7XHJcbiAgICAgICAgbmV3Q3VycmVudCA9IHByZXYuY3VycmVudCArIDE7XHJcbiAgICAgIH0gZWxzZSBpZiAocHJldi5sYXN0RW50cnlEYXRlICE9PSB0b2RheSkge1xyXG4gICAgICAgIG5ld0N1cnJlbnQgPSAxO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBpZiAobmV3Q3VycmVudCA+IG5ld0xvbmdlc3QpIHtcclxuICAgICAgICBuZXdMb25nZXN0ID0gbmV3Q3VycmVudDtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBjdXJyZW50OiBuZXdDdXJyZW50LFxyXG4gICAgICAgIGxvbmdlc3Q6IG5ld0xvbmdlc3QsXHJcbiAgICAgICAgbGFzdEVudHJ5RGF0ZTogZW50cnlEYXRlXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gQXdhcmQgc3RyZWFrIGJvbnVzIFhQXHJcbiAgICBpZiAoc3RyZWFrLmN1cnJlbnQgPiAwKSB7XHJcbiAgICAgIGNvbnN0IHN0cmVha0JvbnVzID0geHBDb25maWcuc3RyZWFrQm9udXMgKiBNYXRoLm1pbihzdHJlYWsuY3VycmVudCwgMTApOyAvLyBDYXAgYm9udXMgYXQgMTAgZGF5c1xyXG4gICAgICBhd2FyZFhwKHN0cmVha0JvbnVzKTtcclxuICAgICAgZ2FpblhwRm9yQ29tcGFuaW9ucygnZHJlYW0nLCBzdHJlYWtCb251cyk7XHJcbiAgICB9XHJcbiAgfSwgW3N0cmVhay5jdXJyZW50LCB4cENvbmZpZy5zdHJlYWtCb251cywgYXdhcmRYcCwgc2V0U3RyZWFrLCBnYWluWHBGb3JDb21wYW5pb25zXSk7XHJcblxyXG4gIGNvbnN0IGNoZWNrQWNoaWV2ZW1lbnRzID0gdXNlQ2FsbGJhY2soKG5ld0VudHJpZXM6IERyZWFtSm91cm5hbEVudHJ5W10pID0+IHtcclxuICAgIGNvbnN0IG5ld0FjaGlldmVtZW50czogc3RyaW5nW10gPSBbXTtcclxuICAgIFxyXG4gICAgLy8gRmlyc3QgRW50cnlcclxuICAgIGlmIChuZXdFbnRyaWVzLmxlbmd0aCA9PT0gMSAmJiAhYWNoaWV2ZW1lbnRzLmluY2x1ZGVzKCdGaXJzdCBFbnRyeScpKSB7XHJcbiAgICAgIG5ld0FjaGlldmVtZW50cy5wdXNoKCdGaXJzdCBFbnRyeScpO1xyXG4gICAgICBhd2FyZFhwKDUwKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gMTAtRGF5IFN0cmVha1xyXG4gICAgaWYgKHN0cmVhay5jdXJyZW50ID49IDEwICYmICFhY2hpZXZlbWVudHMuaW5jbHVkZXMoJzEwLURheSBTdHJlYWsnKSkge1xyXG4gICAgICBuZXdBY2hpZXZlbWVudHMucHVzaCgnMTAtRGF5IFN0cmVhaycpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyAxMDAgRHJlYW1zIExvZ2dlZFxyXG4gICAgaWYgKG5ld0VudHJpZXMubGVuZ3RoID49IDEwMCAmJiAhYWNoaWV2ZW1lbnRzLmluY2x1ZGVzKCcxMDAgRHJlYW1zIExvZ2dlZCcpKSB7XHJcbiAgICAgIG5ld0FjaGlldmVtZW50cy5wdXNoKCcxMDAgRHJlYW1zIExvZ2dlZCcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBQYW50eSBEcmVhbSBMb3JkXHJcbiAgICBjb25zdCBwYW50eUVudHJpZXMgPSBuZXdFbnRyaWVzLmZpbHRlcihlID0+IGUudGFncy5pbmNsdWRlcygncGFudHknKSk7XHJcbiAgICBpZiAocGFudHlFbnRyaWVzLmxlbmd0aCA+PSA1MCAmJiAhYWNoaWV2ZW1lbnRzLmluY2x1ZGVzKCdQYW50eSBEcmVhbSBMb3JkJykpIHtcclxuICAgICAgbmV3QWNoaWV2ZW1lbnRzLnB1c2goJ1BhbnR5IERyZWFtIExvcmQnKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKG5ld0FjaGlldmVtZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHNldEFjaGlldmVtZW50cyhwcmV2ID0+IFsuLi5wcmV2LCAuLi5uZXdBY2hpZXZlbWVudHNdKTtcclxuICAgIH1cclxuICB9LCBbYWNoaWV2ZW1lbnRzLCBzdHJlYWsuY3VycmVudCwgYXdhcmRYcCwgc2V0QWNoaWV2ZW1lbnRzXSk7XHJcblxyXG4gIGNvbnN0IGFkZEVudHJ5ID0gdXNlQ2FsbGJhY2soKGVudHJ5OiBPbWl0PERyZWFtSm91cm5hbEVudHJ5LCAnaWQnIHwgJ3hwRWFybmVkJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCc+KSA9PiB7XHJcbiAgICBjb25zdCBuZXdFbnRyeTogRHJlYW1Kb3VybmFsRW50cnkgPSB7XHJcbiAgICAgIC4uLmVudHJ5LFxyXG4gICAgICBpZDogYGQke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMiwgNyl9YCxcclxuICAgICAgeHBFYXJuZWQ6IDAsXHJcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgIH07XHJcbiAgICBcclxuICAgIG5ld0VudHJ5LnhwRWFybmVkID0gY2FsY3VsYXRlRW50cnlYcChuZXdFbnRyeSk7XHJcbiAgICBcclxuICAgIGNvbnN0IHVwZGF0ZWRFbnRyaWVzID0gWy4uLmVudHJpZXMsIG5ld0VudHJ5XS5zb3J0KChhLCBiKSA9PiBcclxuICAgICAgbmV3IERhdGUoYi5kYXRlKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLmRhdGUpLmdldFRpbWUoKVxyXG4gICAgKTtcclxuICAgIFxyXG4gICAgc2V0RW50cmllcyh1cGRhdGVkRW50cmllcyk7XHJcbiAgICB1cGRhdGVTdHJlYWsobmV3RW50cnkuZGF0ZSk7XHJcbiAgICBhd2FyZFhwKG5ld0VudHJ5LnhwRWFybmVkKTtcclxuICAgIGdhaW5YcEZvckNvbXBhbmlvbnMoJ2RyZWFtJywgbmV3RW50cnkueHBFYXJuZWQpO1xyXG4gICAgY2hlY2tBY2hpZXZlbWVudHModXBkYXRlZEVudHJpZXMpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gbmV3RW50cnk7XHJcbiAgfSwgW2VudHJpZXMsIGNhbGN1bGF0ZUVudHJ5WHAsIHNldEVudHJpZXMsIHVwZGF0ZVN0cmVhaywgYXdhcmRYcCwgY2hlY2tBY2hpZXZlbWVudHMsIGdhaW5YcEZvckNvbXBhbmlvbnNdKTtcclxuXHJcbiAgY29uc3QgdXBkYXRlRW50cnkgPSB1c2VDYWxsYmFjaygoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxEcmVhbUpvdXJuYWxFbnRyeT4pID0+IHtcclxuICAgIGxldCB4cERpZmZlcmVuY2UgPSAwO1xyXG4gICAgc2V0RW50cmllcyhwcmV2ID0+IHByZXYubWFwKGVudHJ5ID0+IHtcclxuICAgICAgaWYgKGVudHJ5LmlkID09PSBpZCkge1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsWHAgPSBlbnRyeS54cEVhcm5lZDtcclxuICAgICAgICBjb25zdCB1cGRhdGVkID0geyBcclxuICAgICAgICAgIC4uLmVudHJ5LCBcclxuICAgICAgICAgIC4uLnVwZGF0ZXMsIFxyXG4gICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgXHJcbiAgICAgICAgfTtcclxuICAgICAgICB1cGRhdGVkLnhwRWFybmVkID0gY2FsY3VsYXRlRW50cnlYcCh1cGRhdGVkKTtcclxuICAgICAgICB4cERpZmZlcmVuY2UgPSB1cGRhdGVkLnhwRWFybmVkIC0gb3JpZ2luYWxYcDtcclxuICAgICAgICByZXR1cm4gdXBkYXRlZDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZW50cnk7XHJcbiAgICB9KSk7XHJcblxyXG4gICAgaWYgKHhwRGlmZmVyZW5jZSAhPT0gMCkge1xyXG4gICAgICBhd2FyZFhwKHhwRGlmZmVyZW5jZSk7XHJcbiAgICAgIGdhaW5YcEZvckNvbXBhbmlvbnMoJ2RyZWFtJywgeHBEaWZmZXJlbmNlKTtcclxuICAgIH1cclxuICB9LCBbc2V0RW50cmllcywgY2FsY3VsYXRlRW50cnlYcCwgYXdhcmRYcCwgZ2FpblhwRm9yQ29tcGFuaW9uc10pO1xyXG5cclxuICBjb25zdCBkZWxldGVFbnRyeSA9IHVzZUNhbGxiYWNrKChpZDogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCBlbnRyeVRvRGVsZXRlID0gZW50cmllcy5maW5kKGVudHJ5ID0+IGVudHJ5LmlkID09PSBpZCk7XHJcbiAgICBpZiAoZW50cnlUb0RlbGV0ZSkge1xyXG4gICAgICBhd2FyZFhwKC1lbnRyeVRvRGVsZXRlLnhwRWFybmVkKTtcclxuICAgICAgZ2FpblhwRm9yQ29tcGFuaW9ucygnZHJlYW0nLCAtZW50cnlUb0RlbGV0ZS54cEVhcm5lZCk7XHJcbiAgICB9XHJcbiAgICBzZXRFbnRyaWVzKHByZXYgPT4gcHJldi5maWx0ZXIoZW50cnkgPT4gZW50cnkuaWQgIT09IGlkKSk7XHJcbiAgfSwgW3NldEVudHJpZXMsIGVudHJpZXMsIGF3YXJkWHAsIGdhaW5YcEZvckNvbXBhbmlvbnNdKTtcclxuXHJcbiAgY29uc3QgZmlsdGVyRW50cmllcyA9IHVzZUNhbGxiYWNrKChmaWx0ZXI6IFBhcnRpYWw8Sm91cm5hbEZpbHRlcj4pID0+IHtcclxuICAgIHJldHVybiBlbnRyaWVzLmZpbHRlcihlbnRyeSA9PiB7XHJcbiAgICAgIGlmIChmaWx0ZXIuc2VhcmNoVGV4dCkge1xyXG4gICAgICAgIGNvbnN0IHNlYXJjaCA9IGZpbHRlci5zZWFyY2hUZXh0LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgaWYgKCFlbnRyeS50aXRsZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaCkgJiYgXHJcbiAgICAgICAgICAgICFlbnRyeS5jb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoKSkge1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKGZpbHRlci50YWdzPy5sZW5ndGggJiYgIWZpbHRlci50YWdzLnNvbWUodGFnID0+IGVudHJ5LnRhZ3MuaW5jbHVkZXModGFnKSkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmIChmaWx0ZXIuY29tcGFuaW9ucz8ubGVuZ3RoICYmICFmaWx0ZXIuY29tcGFuaW9ucy5zb21lKGNvbXAgPT4gZW50cnkuY29tcGFuaW9ucy5pbmNsdWRlcyhjb21wKSkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmIChmaWx0ZXIucGxhY2VzPy5sZW5ndGggJiYgIWZpbHRlci5wbGFjZXMuc29tZShwbGFjZSA9PiBlbnRyeS5wbGFjZXMuaW5jbHVkZXMocGxhY2UpKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKGZpbHRlci5kYXRlRnJvbSAmJiBlbnRyeS5kYXRlIDwgZmlsdGVyLmRhdGVGcm9tKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBpZiAoZmlsdGVyLmRhdGVUbyAmJiBlbnRyeS5kYXRlID4gZmlsdGVyLmRhdGVUbykge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKGZpbHRlci5taW5YcCAmJiBlbnRyeS54cEVhcm5lZCA8IGZpbHRlci5taW5YcCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKGZpbHRlci5tYXhYcCAmJiBlbnRyeS54cEVhcm5lZCA+IGZpbHRlci5tYXhYcCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9KTtcclxuICB9LCBbZW50cmllc10pO1xyXG5cclxuICBjb25zdCBzdGF0cyA9IHVzZU1lbW8oKCk6IEpvdXJuYWxTdGF0cyA9PiB7XHJcbiAgICBjb25zdCB0b3RhbEVudHJpZXMgPSBlbnRyaWVzLmxlbmd0aDtcclxuICAgIGNvbnN0IHRvdGFsWHBFYXJuZWQgPSBlbnRyaWVzLnJlZHVjZSgoc3VtLCBlbnRyeSkgPT4gc3VtICsgZW50cnkueHBFYXJuZWQsIDApO1xyXG4gICAgY29uc3QgYXZlcmFnZVhwUGVyRW50cnkgPSB0b3RhbEVudHJpZXMgPiAwID8gdG90YWxYcEVhcm5lZCAvIHRvdGFsRW50cmllcyA6IDA7XHJcbiAgICBcclxuICAgIGNvbnN0IHRhZ0NvdW50cyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XHJcbiAgICBjb25zdCBjb21wYW5pb25Db3VudHMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xyXG4gICAgY29uc3QgcGxhY2VDb3VudHMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xyXG4gICAgXHJcbiAgICBlbnRyaWVzLmZvckVhY2goZW50cnkgPT4ge1xyXG4gICAgICBlbnRyeS50YWdzLmZvckVhY2godGFnID0+IHRhZ0NvdW50cy5zZXQodGFnLCAodGFnQ291bnRzLmdldCh0YWcpIHx8IDApICsgMSkpO1xyXG4gICAgICBlbnRyeS5jb21wYW5pb25zLmZvckVhY2goY29tcCA9PiBjb21wYW5pb25Db3VudHMuc2V0KGNvbXAsIChjb21wYW5pb25Db3VudHMuZ2V0KGNvbXApIHx8IDApICsgMSkpO1xyXG4gICAgICBlbnRyeS5wbGFjZXMuZm9yRWFjaChwbGFjZSA9PiBwbGFjZUNvdW50cy5zZXQocGxhY2UsIChwbGFjZUNvdW50cy5nZXQocGxhY2UpIHx8IDApICsgMSkpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGNvbnN0IGN1cnJlbnRNb250aCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCA3KTtcclxuICAgIGNvbnN0IGVudHJpZXNUaGlzTW9udGggPSBlbnRyaWVzLmZpbHRlcihlbnRyeSA9PiBlbnRyeS5kYXRlLnN0YXJ0c1dpdGgoY3VycmVudE1vbnRoKSkubGVuZ3RoO1xyXG4gICAgY29uc3QgbHVjaWREcmVhbUNvdW50ID0gZW50cmllcy5maWx0ZXIoZW50cnkgPT4gZW50cnkudGFncy5pbmNsdWRlcygnbHVjaWQnKSkubGVuZ3RoO1xyXG4gICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0b3RhbEVudHJpZXMsXHJcbiAgICAgIHRvdGFsWHBFYXJuZWQsXHJcbiAgICAgIGF2ZXJhZ2VYcFBlckVudHJ5LFxyXG4gICAgICBtb3N0VXNlZFRhZ3M6IEFycmF5LmZyb20odGFnQ291bnRzLmVudHJpZXMoKSlcclxuICAgICAgICAubWFwKChbdGFnLCBjb3VudF0pID0+ICh7IHRhZywgY291bnQgfSkpXHJcbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IGIuY291bnQgLSBhLmNvdW50KVxyXG4gICAgICAgIC5zbGljZSgwLCAxMCksXHJcbiAgICAgIGZhdm9yaXRlQ29tcGFuaW9uczogQXJyYXkuZnJvbShjb21wYW5pb25Db3VudHMuZW50cmllcygpKVxyXG4gICAgICAgIC5tYXAoKFtuYW1lLCBjb3VudF0pID0+ICh7IG5hbWUsIGNvdW50IH0pKVxyXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmNvdW50IC0gYS5jb3VudClcclxuICAgICAgICAuc2xpY2UoMCwgMTApLFxyXG4gICAgICBmYXZvcml0ZUxvY2F0aW9uczogQXJyYXkuZnJvbShwbGFjZUNvdW50cy5lbnRyaWVzKCkpXHJcbiAgICAgICAgLm1hcCgoW3BsYWNlLCBjb3VudF0pID0+ICh7IHBsYWNlLCBjb3VudCB9KSlcclxuICAgICAgICAuc29ydCgoYSwgYikgPT4gYi5jb3VudCAtIGEuY291bnQpXHJcbiAgICAgICAgLnNsaWNlKDAsIDEwKSxcclxuICAgICAgZW50cmllc1RoaXNNb250aCxcclxuICAgICAgbHVjaWREcmVhbUNvdW50LFxyXG4gICAgfTtcclxuICB9LCBbZW50cmllc10pO1xyXG5cclxuICBjb25zdCBleHBvcnRKb3VybmFsID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgY29uc3QgZGF0YSA9IEpTT04uc3RyaW5naWZ5KGVudHJpZXMsIG51bGwsIDIpO1xyXG4gICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtkYXRhXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vanNvbicgfSk7XHJcbiAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgIGEuaHJlZiA9IHVybDtcclxuICAgIGEuZG93bmxvYWQgPSBgZHJlYW0tam91cm5hbC1leHBvcnQtJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXX0uanNvbmA7XHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpO1xyXG4gICAgYS5jbGljaygpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKTtcclxuICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcclxuICB9LCBbZW50cmllc10pO1xyXG5cclxuICBjb25zdCBpbXBvcnRKb3VybmFsID0gdXNlQ2FsbGJhY2soKGpzb25EYXRhOiBzdHJpbmcpOiB7IHN1Y2Nlc3M6IGJvb2xlYW47IGltcG9ydGVkOiBudW1iZXI7IGVycm9yczogc3RyaW5nW10gfSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBpbXBvcnRlZCA9IEpTT04ucGFyc2UoanNvbkRhdGEpIGFzIERyZWFtSm91cm5hbEVudHJ5W107XHJcbiAgICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgbGV0IGltcG9ydGVkQ291bnQgPSAwO1xyXG4gICAgICBcclxuICAgICAgaW1wb3J0ZWQuZm9yRWFjaCgoZW50cnksIGluZGV4KSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGlmICghZW50cnkuaWQgfHwgIWVudHJ5LnRpdGxlIHx8ICFlbnRyeS5kYXRlIHx8ICFlbnRyeS5jb250ZW50KSB7XHJcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKGBFbnRyeSAke2luZGV4ICsgMX06IE1pc3NpbmcgcmVxdWlyZWQgZmllbGRzYCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgY29uc3QgZXhpc3RpbmdFbnRyeSA9IGVudHJpZXMuZmluZChlID0+IGUuaWQgPT09IGVudHJ5LmlkKTtcclxuICAgICAgICAgIGlmICghZXhpc3RpbmdFbnRyeSkge1xyXG4gICAgICAgICAgICBhZGRFbnRyeShlbnRyeSk7XHJcbiAgICAgICAgICAgIGltcG9ydGVkQ291bnQrKztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgIGVycm9ycy5wdXNoKGBFbnRyeSAke2luZGV4ICsgMX06ICR7ZXJyfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBpbXBvcnRlZDogaW1wb3J0ZWRDb3VudCwgZXJyb3JzIH07XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGltcG9ydGVkOiAwLCBlcnJvcnM6IFtgSW52YWxpZCBKU09OOiAke2Vycn1gXSB9O1xyXG4gICAgfVxyXG4gIH0sIFtlbnRyaWVzLCBhZGRFbnRyeV0pO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgZW50cmllcyxcclxuICAgIHN0cmVhayxcclxuICAgIHN0YXRzLFxyXG4gICAgYWNoaWV2ZW1lbnRzLFxyXG4gICAgeHBDb25maWcsXHJcbiAgICBhZGRFbnRyeSxcclxuICAgIHVwZGF0ZUVudHJ5LFxyXG4gICAgZGVsZXRlRW50cnksXHJcbiAgICBmaWx0ZXJFbnRyaWVzLFxyXG4gICAgZXhwb3J0Sm91cm5hbCxcclxuICAgIGltcG9ydEpvdXJuYWwsXHJcbiAgICBzZXRYcENvbmZpZyxcclxuICAgIGNhbGN1bGF0ZUVudHJ5WHAsXHJcbiAgfSBhcyBjb25zdDtcclxufSJdLCJuYW1lcyI6WyJ1c2VDYWxsYmFjayIsInVzZU1lbW8iLCJ1c2VQZXJzaXN0ZW50U3RhdGUiLCJ1c2VJbnZlbnRvcnkiLCJ1c2VDb21wYW5pb25zIiwiREVGQVVMVF9YUF9DT05GSUciLCJqb3VybmFsRGF0YSIsIkpPVVJOQUxfS0VZIiwiU1RSRUFLX0tFWSIsIlhQX0NPTkZJR19LRVkiLCJBQ0hJRVZFTUVOVFNfS0VZIiwidXNlRHJlYW1Kb3VybmFsIiwiZW50cmllcyIsInNldEVudHJpZXMiLCJzdHJlYWsiLCJzZXRTdHJlYWsiLCJjdXJyZW50IiwibG9uZ2VzdCIsImxhc3RFbnRyeURhdGUiLCJ4cENvbmZpZyIsInNldFhwQ29uZmlnIiwiYWNoaWV2ZW1lbnRzIiwic2V0QWNoaWV2ZW1lbnRzIiwiYXdhcmRYcCIsImdhaW5YcEZvckNvbXBhbmlvbnMiLCJjYWxjdWxhdGVFbnRyeVhwIiwiZW50cnkiLCJ4cCIsImJhc2VFbnRyeSIsInRhZ3MiLCJmb3JFYWNoIiwidGFnIiwidG9Mb3dlckNhc2UiLCJsdWNpZFRhZyIsInJpdHVhbFRhZyIsInBhbnR5VGFnIiwidGVtcGxlVGFnIiwicXVlc3RUYWciLCJ1cGRhdGVTdHJlYWsiLCJlbnRyeURhdGUiLCJ0b2RheSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwieWVzdGVyZGF5Iiwibm93IiwicHJldiIsIm5ld0N1cnJlbnQiLCJuZXdMb25nZXN0Iiwic3RyZWFrQm9udXMiLCJNYXRoIiwibWluIiwiY2hlY2tBY2hpZXZlbWVudHMiLCJuZXdFbnRyaWVzIiwibmV3QWNoaWV2ZW1lbnRzIiwibGVuZ3RoIiwiaW5jbHVkZXMiLCJwdXNoIiwicGFudHlFbnRyaWVzIiwiZmlsdGVyIiwiZSIsImFkZEVudHJ5IiwibmV3RW50cnkiLCJpZCIsInJhbmRvbSIsInRvU3RyaW5nIiwic2xpY2UiLCJ4cEVhcm5lZCIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsInVwZGF0ZWRFbnRyaWVzIiwic29ydCIsImEiLCJiIiwiZGF0ZSIsImdldFRpbWUiLCJ1cGRhdGVFbnRyeSIsInVwZGF0ZXMiLCJ4cERpZmZlcmVuY2UiLCJtYXAiLCJvcmlnaW5hbFhwIiwidXBkYXRlZCIsImRlbGV0ZUVudHJ5IiwiZW50cnlUb0RlbGV0ZSIsImZpbmQiLCJmaWx0ZXJFbnRyaWVzIiwic2VhcmNoVGV4dCIsInNlYXJjaCIsInRpdGxlIiwiY29udGVudCIsInNvbWUiLCJjb21wYW5pb25zIiwiY29tcCIsInBsYWNlcyIsInBsYWNlIiwiZGF0ZUZyb20iLCJkYXRlVG8iLCJtaW5YcCIsIm1heFhwIiwic3RhdHMiLCJ0b3RhbEVudHJpZXMiLCJ0b3RhbFhwRWFybmVkIiwicmVkdWNlIiwic3VtIiwiYXZlcmFnZVhwUGVyRW50cnkiLCJ0YWdDb3VudHMiLCJNYXAiLCJjb21wYW5pb25Db3VudHMiLCJwbGFjZUNvdW50cyIsInNldCIsImdldCIsImN1cnJlbnRNb250aCIsImVudHJpZXNUaGlzTW9udGgiLCJzdGFydHNXaXRoIiwibHVjaWREcmVhbUNvdW50IiwibW9zdFVzZWRUYWdzIiwiQXJyYXkiLCJmcm9tIiwiY291bnQiLCJmYXZvcml0ZUNvbXBhbmlvbnMiLCJuYW1lIiwiZmF2b3JpdGVMb2NhdGlvbnMiLCJleHBvcnRKb3VybmFsIiwiZGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJibG9iIiwiQmxvYiIsInR5cGUiLCJ1cmwiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJocmVmIiwiZG93bmxvYWQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJjbGljayIsInJlbW92ZUNoaWxkIiwicmV2b2tlT2JqZWN0VVJMIiwiaW1wb3J0Sm91cm5hbCIsImpzb25EYXRhIiwiaW1wb3J0ZWQiLCJwYXJzZSIsImVycm9ycyIsImltcG9ydGVkQ291bnQiLCJpbmRleCIsImV4aXN0aW5nRW50cnkiLCJlcnIiLCJzdWNjZXNzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useDreamJournal.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useDungeonAchievements.ts":
/*!*********************************************!*\
  !*** ./app/hooks/useDungeonAchievements.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useDungeonAchievements: () => (/* binding */ useDungeonAchievements)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _useAchievements__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useAchievements */ \"(ssr)/./app/hooks/useAchievements.ts\");\n/* harmony import */ var _useDungeons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useDungeons */ \"(ssr)/./app/hooks/useDungeons.ts\");\n/* __next_internal_client_entry_do_not_use__ useDungeonAchievements auto */ \n\n\n/**\r\n * A custom hook to manage dungeon-related achievements.\r\n * It listens to changes in dungeon state and unlocks achievements when their triggers are met.\r\n */ function useDungeonAchievements() {\n    const { achievements, unlockAchievement } = (0,_useAchievements__WEBPACK_IMPORTED_MODULE_1__.useAchievements)();\n    const { dungeons } = (0,_useDungeons__WEBPACK_IMPORTED_MODULE_2__.useDungeons)();\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useDungeonAchievements.useEffect\": ()=>{\n            // Don't run if achievements or dungeons haven't loaded yet\n            if (!achievements || achievements.length === 0 || !dungeons || dungeons.length === 0) return;\n            // Filter for only un-unlocked Dungeon achievements to check\n            const dungeonAchievements = achievements.filter({\n                \"useDungeonAchievements.useEffect.dungeonAchievements\": (a)=>!a.unlocked && a.category === 'Dungeon'\n            }[\"useDungeonAchievements.useEffect.dungeonAchievements\"]);\n            if (dungeonAchievements.length === 0) return;\n            const clearedDungeonsCount = dungeons.filter({\n                \"useDungeonAchievements.useEffect\": (d)=>d.completed\n            }[\"useDungeonAchievements.useEffect\"]).length;\n            dungeonAchievements.forEach({\n                \"useDungeonAchievements.useEffect\": (achievement)=>{\n                    const { trigger } = achievement;\n                    let conditionMet = false;\n                    if (trigger.type === 'DUNGEON_CLEARED' && clearedDungeonsCount >= trigger.value) {\n                        conditionMet = true;\n                    }\n                    if (conditionMet) {\n                        unlockAchievement(achievement.id);\n                    }\n                }\n            }[\"useDungeonAchievements.useEffect\"]);\n        // This effect should re-run whenever the player's dungeon progress changes.\n        }\n    }[\"useDungeonAchievements.useEffect\"], [\n        dungeons,\n        achievements,\n        unlockAchievement\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvaG9va3MvdXNlRHVuZ2VvbkFjaGlldmVtZW50cy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs0RUFFa0M7QUFDa0I7QUFDUjtBQUU1Qzs7O0NBR0MsR0FDTSxTQUFTRztJQUNkLE1BQU0sRUFBRUMsWUFBWSxFQUFFQyxpQkFBaUIsRUFBRSxHQUFHSixpRUFBZUE7SUFDM0QsTUFBTSxFQUFFSyxRQUFRLEVBQUUsR0FBR0oseURBQVdBO0lBRWhDRixnREFBU0E7NENBQUM7WUFDUiwyREFBMkQ7WUFDM0QsSUFBSSxDQUFDSSxnQkFBZ0JBLGFBQWFHLE1BQU0sS0FBSyxLQUFLLENBQUNELFlBQVlBLFNBQVNDLE1BQU0sS0FBSyxHQUFHO1lBRXRGLDREQUE0RDtZQUM1RCxNQUFNQyxzQkFBc0JKLGFBQWFLLE1BQU07d0VBQzdDQyxDQUFBQSxJQUFLLENBQUNBLEVBQUVDLFFBQVEsSUFBSUQsRUFBRUUsUUFBUSxLQUFLOztZQUdyQyxJQUFJSixvQkFBb0JELE1BQU0sS0FBSyxHQUFHO1lBRXRDLE1BQU1NLHVCQUF1QlAsU0FBU0csTUFBTTtvREFBQ0ssQ0FBQUEsSUFBS0EsRUFBRUMsU0FBUzttREFBRVIsTUFBTTtZQUVyRUMsb0JBQW9CUSxPQUFPO29EQUFDQyxDQUFBQTtvQkFDMUIsTUFBTSxFQUFFQyxPQUFPLEVBQUUsR0FBR0Q7b0JBQ3BCLElBQUlFLGVBQWU7b0JBRW5CLElBQUlELFFBQVFFLElBQUksS0FBSyxxQkFBcUJQLHdCQUF3QkssUUFBUUcsS0FBSyxFQUFFO3dCQUMvRUYsZUFBZTtvQkFDakI7b0JBRUEsSUFBSUEsY0FBYzt3QkFDaEJkLGtCQUFrQlksWUFBWUssRUFBRTtvQkFDbEM7Z0JBQ0Y7O1FBQ0EsNEVBQTRFO1FBQzlFOzJDQUFHO1FBQUNoQjtRQUFVRjtRQUFjQztLQUFrQjtBQUNoRCIsInNvdXJjZXMiOlsiQzpcXE1vbW15IEx1Y3lcXFByb2plY3RzXFxMdWNpZCBEcmVhbVxcYXBwXFxob29rc1xcdXNlRHVuZ2VvbkFjaGlldmVtZW50cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XHJcblxyXG5pbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVzZUFjaGlldmVtZW50cyB9IGZyb20gJy4vdXNlQWNoaWV2ZW1lbnRzJztcclxuaW1wb3J0IHsgdXNlRHVuZ2VvbnMgfSBmcm9tICcuL3VzZUR1bmdlb25zJztcclxuXHJcbi8qKlxyXG4gKiBBIGN1c3RvbSBob29rIHRvIG1hbmFnZSBkdW5nZW9uLXJlbGF0ZWQgYWNoaWV2ZW1lbnRzLlxyXG4gKiBJdCBsaXN0ZW5zIHRvIGNoYW5nZXMgaW4gZHVuZ2VvbiBzdGF0ZSBhbmQgdW5sb2NrcyBhY2hpZXZlbWVudHMgd2hlbiB0aGVpciB0cmlnZ2VycyBhcmUgbWV0LlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZUR1bmdlb25BY2hpZXZlbWVudHMoKSB7XHJcbiAgY29uc3QgeyBhY2hpZXZlbWVudHMsIHVubG9ja0FjaGlldmVtZW50IH0gPSB1c2VBY2hpZXZlbWVudHMoKTtcclxuICBjb25zdCB7IGR1bmdlb25zIH0gPSB1c2VEdW5nZW9ucygpO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gRG9uJ3QgcnVuIGlmIGFjaGlldmVtZW50cyBvciBkdW5nZW9ucyBoYXZlbid0IGxvYWRlZCB5ZXRcclxuICAgIGlmICghYWNoaWV2ZW1lbnRzIHx8IGFjaGlldmVtZW50cy5sZW5ndGggPT09IDAgfHwgIWR1bmdlb25zIHx8IGR1bmdlb25zLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG5cclxuICAgIC8vIEZpbHRlciBmb3Igb25seSB1bi11bmxvY2tlZCBEdW5nZW9uIGFjaGlldmVtZW50cyB0byBjaGVja1xyXG4gICAgY29uc3QgZHVuZ2VvbkFjaGlldmVtZW50cyA9IGFjaGlldmVtZW50cy5maWx0ZXIoXHJcbiAgICAgIGEgPT4gIWEudW5sb2NrZWQgJiYgYS5jYXRlZ29yeSA9PT0gJ0R1bmdlb24nXHJcbiAgICApO1xyXG5cclxuICAgIGlmIChkdW5nZW9uQWNoaWV2ZW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGNsZWFyZWREdW5nZW9uc0NvdW50ID0gZHVuZ2VvbnMuZmlsdGVyKGQgPT4gZC5jb21wbGV0ZWQpLmxlbmd0aDtcclxuXHJcbiAgICBkdW5nZW9uQWNoaWV2ZW1lbnRzLmZvckVhY2goYWNoaWV2ZW1lbnQgPT4ge1xyXG4gICAgICBjb25zdCB7IHRyaWdnZXIgfSA9IGFjaGlldmVtZW50O1xyXG4gICAgICBsZXQgY29uZGl0aW9uTWV0ID0gZmFsc2U7XHJcblxyXG4gICAgICBpZiAodHJpZ2dlci50eXBlID09PSAnRFVOR0VPTl9DTEVBUkVEJyAmJiBjbGVhcmVkRHVuZ2VvbnNDb3VudCA+PSB0cmlnZ2VyLnZhbHVlKSB7XHJcbiAgICAgICAgY29uZGl0aW9uTWV0ID0gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGNvbmRpdGlvbk1ldCkge1xyXG4gICAgICAgIHVubG9ja0FjaGlldmVtZW50KGFjaGlldmVtZW50LmlkKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvLyBUaGlzIGVmZmVjdCBzaG91bGQgcmUtcnVuIHdoZW5ldmVyIHRoZSBwbGF5ZXIncyBkdW5nZW9uIHByb2dyZXNzIGNoYW5nZXMuXHJcbiAgfSwgW2R1bmdlb25zLCBhY2hpZXZlbWVudHMsIHVubG9ja0FjaGlldmVtZW50XSk7XHJcbn1cclxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZUFjaGlldmVtZW50cyIsInVzZUR1bmdlb25zIiwidXNlRHVuZ2VvbkFjaGlldmVtZW50cyIsImFjaGlldmVtZW50cyIsInVubG9ja0FjaGlldmVtZW50IiwiZHVuZ2VvbnMiLCJsZW5ndGgiLCJkdW5nZW9uQWNoaWV2ZW1lbnRzIiwiZmlsdGVyIiwiYSIsInVubG9ja2VkIiwiY2F0ZWdvcnkiLCJjbGVhcmVkRHVuZ2VvbnNDb3VudCIsImQiLCJjb21wbGV0ZWQiLCJmb3JFYWNoIiwiYWNoaWV2ZW1lbnQiLCJ0cmlnZ2VyIiwiY29uZGl0aW9uTWV0IiwidHlwZSIsInZhbHVlIiwiaWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useDungeonAchievements.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useDungeons.ts":
/*!**********************************!*\
  !*** ./app/hooks/useDungeons.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useDungeons: () => (/* binding */ useDungeons)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _lib_dungeons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/dungeons */ \"(ssr)/./app/lib/dungeons.ts\");\n/* __next_internal_client_entry_do_not_use__ useDungeons auto */ \n\n\nconst getDefaultState = ()=>({\n        dungeons: (0,_lib_dungeons__WEBPACK_IMPORTED_MODULE_2__.cloneDefaultDungeons)(),\n        activeRun: null,\n        inventory: [],\n        achievements: [],\n        totalClearedDungeons: 0,\n        totalBossesDefeated: 0\n    });\nfunction useDungeons() {\n    const [state, setState] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)('dungeonData_v2', getDefaultState);\n    const setSafe = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[setSafe]\": (updater)=>{\n            setState({\n                \"useDungeons.useCallback[setSafe]\": (previous)=>{\n                    const next = updater(previous);\n                    return {\n                        ...next,\n                        dungeons: next.dungeons.map(_lib_dungeons__WEBPACK_IMPORTED_MODULE_2__.ensureDungeon)\n                    };\n                }\n            }[\"useDungeons.useCallback[setSafe]\"]);\n        }\n    }[\"useDungeons.useCallback[setSafe]\"], [\n        setState\n    ]);\n    // Legacy compatibility methods\n    const dungeons = state.dungeons;\n    const addDungeon = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[addDungeon]\": (dungeon)=>{\n            setSafe({\n                \"useDungeons.useCallback[addDungeon]\": (previous)=>{\n                    const updatedDungeons = previous.dungeons.some({\n                        \"useDungeons.useCallback[addDungeon]\": (entry)=>entry.id === dungeon.id\n                    }[\"useDungeons.useCallback[addDungeon]\"]) ? previous.dungeons.map({\n                        \"useDungeons.useCallback[addDungeon]\": (entry)=>entry.id === dungeon.id ? (0,_lib_dungeons__WEBPACK_IMPORTED_MODULE_2__.ensureDungeon)(dungeon) : entry\n                    }[\"useDungeons.useCallback[addDungeon]\"]) : [\n                        ...previous.dungeons,\n                        (0,_lib_dungeons__WEBPACK_IMPORTED_MODULE_2__.ensureDungeon)(dungeon)\n                    ];\n                    return {\n                        ...previous,\n                        dungeons: updatedDungeons\n                    };\n                }\n            }[\"useDungeons.useCallback[addDungeon]\"]);\n        }\n    }[\"useDungeons.useCallback[addDungeon]\"], [\n        setSafe\n    ]);\n    const updateDungeon = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[updateDungeon]\": (dungeonId, updater)=>{\n            setSafe({\n                \"useDungeons.useCallback[updateDungeon]\": (previous)=>({\n                        ...previous,\n                        dungeons: previous.dungeons.map({\n                            \"useDungeons.useCallback[updateDungeon]\": (entry)=>entry.id === dungeonId ? (0,_lib_dungeons__WEBPACK_IMPORTED_MODULE_2__.ensureDungeon)(updater((0,_lib_dungeons__WEBPACK_IMPORTED_MODULE_2__.cloneDungeon)(entry))) : entry\n                        }[\"useDungeons.useCallback[updateDungeon]\"])\n                    })\n            }[\"useDungeons.useCallback[updateDungeon]\"]);\n        }\n    }[\"useDungeons.useCallback[updateDungeon]\"], [\n        setSafe\n    ]);\n    const removeDungeon = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[removeDungeon]\": (dungeonId)=>{\n            setSafe({\n                \"useDungeons.useCallback[removeDungeon]\": (previous)=>({\n                        ...previous,\n                        dungeons: previous.dungeons.filter({\n                            \"useDungeons.useCallback[removeDungeon]\": (entry)=>entry.id !== dungeonId\n                        }[\"useDungeons.useCallback[removeDungeon]\"])\n                    })\n            }[\"useDungeons.useCallback[removeDungeon]\"]);\n        }\n    }[\"useDungeons.useCallback[removeDungeon]\"], [\n        setSafe\n    ]);\n    const addRoom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[addRoom]\": (dungeonId, room)=>{\n            updateDungeon(dungeonId, {\n                \"useDungeons.useCallback[addRoom]\": (dungeon)=>({\n                        ...dungeon,\n                        rooms: [\n                            ...dungeon.rooms || [],\n                            (0,_lib_dungeons__WEBPACK_IMPORTED_MODULE_2__.ensureRoom)(room)\n                        ]\n                    })\n            }[\"useDungeons.useCallback[addRoom]\"]);\n        }\n    }[\"useDungeons.useCallback[addRoom]\"], [\n        updateDungeon\n    ]);\n    const updateRoom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[updateRoom]\": (dungeonId, roomId, patch)=>{\n            updateDungeon(dungeonId, {\n                \"useDungeons.useCallback[updateRoom]\": (dungeon)=>({\n                        ...dungeon,\n                        rooms: (dungeon.rooms || []).map({\n                            \"useDungeons.useCallback[updateRoom]\": (room)=>room.id === roomId ? (0,_lib_dungeons__WEBPACK_IMPORTED_MODULE_2__.ensureRoom)({\n                                    ...room,\n                                    ...patch\n                                }) : room\n                        }[\"useDungeons.useCallback[updateRoom]\"])\n                    })\n            }[\"useDungeons.useCallback[updateRoom]\"]);\n        }\n    }[\"useDungeons.useCallback[updateRoom]\"], [\n        updateDungeon\n    ]);\n    const removeRoom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[removeRoom]\": (dungeonId, roomId)=>{\n            updateDungeon(dungeonId, {\n                \"useDungeons.useCallback[removeRoom]\": (dungeon)=>({\n                        ...dungeon,\n                        rooms: (dungeon.rooms || []).filter({\n                            \"useDungeons.useCallback[removeRoom]\": (room)=>room.id !== roomId\n                        }[\"useDungeons.useCallback[removeRoom]\"])\n                    })\n            }[\"useDungeons.useCallback[removeRoom]\"]);\n        }\n    }[\"useDungeons.useCallback[removeRoom]\"], [\n        updateDungeon\n    ]);\n    const resetDungeon = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[resetDungeon]\": (dungeonId)=>{\n            updateDungeon(dungeonId, {\n                \"useDungeons.useCallback[resetDungeon]\": (dungeon)=>({\n                        ...dungeon,\n                        completed: false,\n                        cleared: false\n                    })\n            }[\"useDungeons.useCallback[resetDungeon]\"]);\n        }\n    }[\"useDungeons.useCallback[resetDungeon]\"], [\n        updateDungeon\n    ]);\n    const markCompleted = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[markCompleted]\": (dungeonId)=>{\n            updateDungeon(dungeonId, {\n                \"useDungeons.useCallback[markCompleted]\": (dungeon)=>({\n                        ...dungeon,\n                        completed: true,\n                        cleared: true\n                    })\n            }[\"useDungeons.useCallback[markCompleted]\"]);\n        }\n    }[\"useDungeons.useCallback[markCompleted]\"], [\n        updateDungeon\n    ]);\n    const replaceAll = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[replaceAll]\": (next)=>{\n            setSafe({\n                \"useDungeons.useCallback[replaceAll]\": (previous)=>({\n                        ...previous,\n                        dungeons: next\n                    })\n            }[\"useDungeons.useCallback[replaceAll]\"]);\n        }\n    }[\"useDungeons.useCallback[replaceAll]\"], [\n        setSafe\n    ]);\n    // NEW Phase 31 methods\n    const startDungeonRun = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[startDungeonRun]\": (dungeonId)=>{\n            const dungeon = state.dungeons.find({\n                \"useDungeons.useCallback[startDungeonRun].dungeon\": (d)=>d.id === dungeonId\n            }[\"useDungeons.useCallback[startDungeonRun].dungeon\"]);\n            if (!dungeon || !dungeon.unlocked) return false;\n            const rooms = (0,_lib_dungeons__WEBPACK_IMPORTED_MODULE_2__.generateDungeonRun)(dungeon);\n            const newRun = {\n                dungeonId,\n                rooms,\n                currentRoomIndex: 0,\n                startTime: Date.now(),\n                completedRooms: 0,\n                totalRooms: rooms.length,\n                lootCollected: []\n            };\n            setSafe({\n                \"useDungeons.useCallback[startDungeonRun]\": (prev)=>({\n                        ...prev,\n                        activeRun: newRun\n                    })\n            }[\"useDungeons.useCallback[startDungeonRun]\"]);\n            return true;\n        }\n    }[\"useDungeons.useCallback[startDungeonRun]\"], [\n        state.dungeons,\n        setSafe\n    ]);\n    const completeRoom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[completeRoom]\": (roomRewards)=>{\n            if (!state.activeRun) return false;\n            const currentRoom = state.activeRun.rooms[state.activeRun.currentRoomIndex];\n            if (!currentRoom) return false;\n            const updatedRun = {\n                ...state.activeRun\n            };\n            updatedRun.rooms[updatedRun.currentRoomIndex].completed = true;\n            updatedRun.completedRooms += 1;\n            // Add loot if this was a loot room\n            if (currentRoom.type === 'loot' && roomRewards) {\n                updatedRun.lootCollected.push(...roomRewards.items || []);\n            }\n            // Check if dungeon is complete\n            if (updatedRun.currentRoomIndex >= updatedRun.rooms.length - 1) {\n                // Dungeon completed!\n                return completeDungeon(updatedRun);\n            } else {\n                // Advance to next room\n                updatedRun.currentRoomIndex += 1;\n                setSafe({\n                    \"useDungeons.useCallback[completeRoom]\": (prev)=>({\n                            ...prev,\n                            activeRun: updatedRun\n                        })\n                }[\"useDungeons.useCallback[completeRoom]\"]);\n            }\n            return true;\n        }\n    }[\"useDungeons.useCallback[completeRoom]\"], [\n        state.activeRun,\n        setSafe\n    ]);\n    const completeDungeon = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[completeDungeon]\": (run)=>{\n            const dungeon = state.dungeons.find({\n                \"useDungeons.useCallback[completeDungeon].dungeon\": (d)=>d.id === run.dungeonId\n            }[\"useDungeons.useCallback[completeDungeon].dungeon\"]);\n            if (!dungeon) return false;\n            // Update dungeon completion status\n            const updatedDungeons = state.dungeons.map({\n                \"useDungeons.useCallback[completeDungeon].updatedDungeons\": (d)=>{\n                    if (d.id === run.dungeonId) {\n                        return {\n                            ...d,\n                            cleared: true,\n                            completed: true,\n                            timesCleared: (d.timesCleared || 0) + 1\n                        };\n                    }\n                    return d;\n                }\n            }[\"useDungeons.useCallback[completeDungeon].updatedDungeons\"]);\n            // Add loot to inventory\n            const newLoot = run.lootCollected.map({\n                \"useDungeons.useCallback[completeDungeon].newLoot\": (item)=>({\n                        ...item,\n                        obtained: Date.now()\n                    })\n            }[\"useDungeons.useCallback[completeDungeon].newLoot\"]);\n            // Check for achievements\n            const newAchievements = [\n                ...state.achievements\n            ];\n            if (!newAchievements.includes('first_dungeon') && state.totalClearedDungeons === 0) {\n                newAchievements.push('first_dungeon');\n            }\n            if (run.rooms.some({\n                \"useDungeons.useCallback[completeDungeon]\": (r)=>r.type === 'boss' && r.completed\n            }[\"useDungeons.useCallback[completeDungeon]\"]) && !newAchievements.includes('boss_slayer')) {\n                newAchievements.push('boss_slayer');\n            }\n            // Unlock next dungeon\n            const nextDungeonIndex = updatedDungeons.findIndex({\n                \"useDungeons.useCallback[completeDungeon]\": (d)=>d.id === run.dungeonId\n            }[\"useDungeons.useCallback[completeDungeon]\"]) + 1;\n            if (nextDungeonIndex < updatedDungeons.length) {\n                updatedDungeons[nextDungeonIndex].unlocked = true;\n            }\n            setSafe({\n                \"useDungeons.useCallback[completeDungeon]\": (prev)=>({\n                        ...prev,\n                        dungeons: updatedDungeons,\n                        activeRun: null,\n                        inventory: [\n                            ...prev.inventory,\n                            ...newLoot\n                        ],\n                        achievements: newAchievements,\n                        totalClearedDungeons: prev.totalClearedDungeons + 1,\n                        totalBossesDefeated: prev.totalBossesDefeated + (run.rooms.some({\n                            \"useDungeons.useCallback[completeDungeon]\": (r)=>r.type === 'boss' && r.completed\n                        }[\"useDungeons.useCallback[completeDungeon]\"]) ? 1 : 0)\n                    })\n            }[\"useDungeons.useCallback[completeDungeon]\"]);\n            return true;\n        }\n    }[\"useDungeons.useCallback[completeDungeon]\"], [\n        state.dungeons,\n        state.achievements,\n        state.totalClearedDungeons,\n        setSafe\n    ]);\n    const abandonDungeon = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[abandonDungeon]\": ()=>{\n            setSafe({\n                \"useDungeons.useCallback[abandonDungeon]\": (prev)=>({\n                        ...prev,\n                        activeRun: null\n                    })\n            }[\"useDungeons.useCallback[abandonDungeon]\"]);\n        }\n    }[\"useDungeons.useCallback[abandonDungeon]\"], [\n        setSafe\n    ]);\n    const getAvailableDungeons = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[getAvailableDungeons]\": ()=>{\n            return state.dungeons.filter({\n                \"useDungeons.useCallback[getAvailableDungeons]\": (d)=>d.unlocked\n            }[\"useDungeons.useCallback[getAvailableDungeons]\"]);\n        }\n    }[\"useDungeons.useCallback[getAvailableDungeons]\"], [\n        state.dungeons\n    ]);\n    const getCurrentRoom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[getCurrentRoom]\": ()=>{\n            if (!state.activeRun) return null;\n            return state.activeRun.rooms[state.activeRun.currentRoomIndex] || null;\n        }\n    }[\"useDungeons.useCallback[getCurrentRoom]\"], [\n        state.activeRun\n    ]);\n    const completeTrial = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[completeTrial]\": (trialType, input)=>{\n            const currentRoom = getCurrentRoom();\n            if (!currentRoom || currentRoom.type !== 'trial') return false;\n            // Validate trial completion based on type\n            let success = false;\n            switch(trialType){\n                case 'shame':\n                    success = input && input.length > 10; // Requires meaningful confession\n                    break;\n                case 'obedience':\n                    success = true; // Just requires submission act\n                    break;\n                case 'combat':\n                    success = Math.random() > 0.3; // 70% success rate\n                    break;\n                case 'ritual':\n                    success = true; // Requires ritual performance\n                    break;\n                case 'psychic':\n                    success = Math.random() > 0.4; // 60% success rate\n                    break;\n                case 'puzzle':\n                    success = Math.random() > 0.5; // 50% success rate\n                    break;\n                default:\n                    success = false;\n            }\n            if (success) {\n                return completeRoom(currentRoom.rewards);\n            }\n            return false;\n        }\n    }[\"useDungeons.useCallback[completeTrial]\"], [\n        getCurrentRoom,\n        completeRoom\n    ]);\n    const fightBoss = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[fightBoss]\": (strategy)=>{\n            const currentRoom = getCurrentRoom();\n            if (!currentRoom || currentRoom.type !== 'boss') return false;\n            const dungeon = state.dungeons.find({\n                \"useDungeons.useCallback[fightBoss].dungeon\": (d)=>d.id === state.activeRun?.dungeonId\n            }[\"useDungeons.useCallback[fightBoss].dungeon\"]);\n            if (!dungeon || !dungeon.boss) return false;\n            // Boss fight logic based on weakness\n            let success = false;\n            if (strategy === dungeon.boss.weakness) {\n                success = Math.random() > 0.2; // 80% success with correct strategy\n            } else {\n                success = Math.random() > 0.7; // 30% success with wrong strategy\n            }\n            if (success) {\n                return completeRoom(dungeon.boss.rewards);\n            }\n            return false;\n        }\n    }[\"useDungeons.useCallback[fightBoss]\"], [\n        getCurrentRoom,\n        completeRoom,\n        state.dungeons,\n        state.activeRun\n    ]);\n    const collectLoot = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useDungeons.useCallback[collectLoot]\": ()=>{\n            const currentRoom = getCurrentRoom();\n            if (!currentRoom || currentRoom.type !== 'loot') return false;\n            const dungeon = state.dungeons.find({\n                \"useDungeons.useCallback[collectLoot].dungeon\": (d)=>d.id === state.activeRun?.dungeonId\n            }[\"useDungeons.useCallback[collectLoot].dungeon\"]);\n            if (!dungeon) return false;\n            // Random loot from dungeon's loot pool\n            const lootPool = dungeon.lootPool || [];\n            if (lootPool.length === 0) return completeRoom();\n            const loot = lootPool[Math.floor(Math.random() * lootPool.length)];\n            return completeRoom({\n                items: [\n                    loot\n                ]\n            });\n        }\n    }[\"useDungeons.useCallback[collectLoot]\"], [\n        getCurrentRoom,\n        completeRoom,\n        state.dungeons,\n        state.activeRun\n    ]);\n    return {\n        // Legacy compatibility\n        dungeons,\n        addDungeon,\n        updateDungeon,\n        removeDungeon,\n        addRoom,\n        updateRoom,\n        removeRoom,\n        resetDungeon,\n        markCompleted,\n        replaceAll,\n        // New Phase 31 state\n        activeRun: state.activeRun,\n        inventory: state.inventory,\n        achievements: state.achievements,\n        totalClearedDungeons: state.totalClearedDungeons,\n        totalBossesDefeated: state.totalBossesDefeated,\n        // New Phase 31 actions\n        startDungeonRun,\n        completeRoom,\n        completeDungeon,\n        abandonDungeon,\n        completeTrial,\n        fightBoss,\n        collectLoot,\n        getAvailableDungeons,\n        getCurrentRoom\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFDTCx1QkFBdUI7UUFDdkJEO1FBQ0FjO1FBQ0FNO1FBQ0FFO1FBQ0FFO1FBQ0FHO1FBQ0FHO1FBQ0FDO1FBQ0FHO1FBQ0FDO1FBRUEscUJBQXFCO1FBQ3JCbEMsV0FBV00sTUFBTU4sU0FBUztRQUMxQkMsV0FBV0ssTUFBTUwsU0FBUztRQUMxQkMsY0FBY0ksTUFBTUosWUFBWTtRQUNoQ0Msc0JBQXNCRyxNQUFNSCxvQkFBb0I7UUFDaERDLHFCQUFxQkUsTUFBTUYsbUJBQW1CO1FBRTlDLHVCQUF1QjtRQUN2QitCO1FBQ0FjO1FBQ0FPO1FBQ0FXO1FBQ0FHO1FBQ0FPO1FBQ0FJO1FBQ0FiO1FBQ0FDO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiQzpcXE1vbW15IEx1Y3lcXFByb2plY3RzXFxMdWNpZCBEcmVhbVxcYXBwXFxob29rc1xcdXNlRHVuZ2VvbnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VQZXJzaXN0ZW50U3RhdGUgfSBmcm9tICcuL3VzZVBlcnNpc3RlbnRTdGF0ZSc7XG5pbXBvcnQgeyBcbiAgY2xvbmVEdW5nZW9uLCBcbiAgY2xvbmVEZWZhdWx0RHVuZ2VvbnMsIFxuICBlbnN1cmVEdW5nZW9uLCBcbiAgZW5zdXJlUm9vbSwgXG4gIGdlbmVyYXRlRHVuZ2VvblJ1bixcbiAgdHlwZSBEdW5nZW9uLCBcbiAgdHlwZSBEdW5nZW9uUm9vbSwgXG4gIHR5cGUgQWN0aXZlRHVuZ2VvblJ1bixcbiAgdHlwZSBEdW5nZW9uTG9vdCBcbn0gZnJvbSAnLi4vbGliL2R1bmdlb25zJztcblxuZXhwb3J0IGludGVyZmFjZSBEdW5nZW9uU3RhdGUge1xuICBkdW5nZW9uczogRHVuZ2VvbltdO1xuICBhY3RpdmVSdW46IEFjdGl2ZUR1bmdlb25SdW4gfCBudWxsO1xuICBpbnZlbnRvcnk6IER1bmdlb25Mb290W107XG4gIGFjaGlldmVtZW50czogc3RyaW5nW107XG4gIHRvdGFsQ2xlYXJlZER1bmdlb25zOiBudW1iZXI7XG4gIHRvdGFsQm9zc2VzRGVmZWF0ZWQ6IG51bWJlcjtcbn1cblxuY29uc3QgZ2V0RGVmYXVsdFN0YXRlID0gKCk6IER1bmdlb25TdGF0ZSA9PiAoe1xuICBkdW5nZW9uczogY2xvbmVEZWZhdWx0RHVuZ2VvbnMoKSxcbiAgYWN0aXZlUnVuOiBudWxsLFxuICBpbnZlbnRvcnk6IFtdLFxuICBhY2hpZXZlbWVudHM6IFtdLFxuICB0b3RhbENsZWFyZWREdW5nZW9uczogMCxcbiAgdG90YWxCb3NzZXNEZWZlYXRlZDogMFxufSk7XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VEdW5nZW9ucygpIHtcbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VQZXJzaXN0ZW50U3RhdGU8RHVuZ2VvblN0YXRlPignZHVuZ2VvbkRhdGFfdjInLCBnZXREZWZhdWx0U3RhdGUpO1xuXG4gIGNvbnN0IHNldFNhZmUgPSB1c2VDYWxsYmFjayhcbiAgICAodXBkYXRlcjogKHByZXZpb3VzOiBEdW5nZW9uU3RhdGUpID0+IER1bmdlb25TdGF0ZSkgPT4ge1xuICAgICAgc2V0U3RhdGUoKHByZXZpb3VzKSA9PiB7XG4gICAgICAgIGNvbnN0IG5leHQgPSB1cGRhdGVyKHByZXZpb3VzKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5uZXh0LFxuICAgICAgICAgIGR1bmdlb25zOiBuZXh0LmR1bmdlb25zLm1hcChlbnN1cmVEdW5nZW9uKVxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBbc2V0U3RhdGVdXG4gICk7XG5cbiAgLy8gTGVnYWN5IGNvbXBhdGliaWxpdHkgbWV0aG9kc1xuICBjb25zdCBkdW5nZW9ucyA9IHN0YXRlLmR1bmdlb25zO1xuICBcbiAgY29uc3QgYWRkRHVuZ2VvbiA9IHVzZUNhbGxiYWNrKFxuICAgIChkdW5nZW9uOiBEdW5nZW9uKSA9PiB7XG4gICAgICBzZXRTYWZlKChwcmV2aW91cykgPT4ge1xuICAgICAgICBjb25zdCB1cGRhdGVkRHVuZ2VvbnMgPSBwcmV2aW91cy5kdW5nZW9ucy5zb21lKChlbnRyeSkgPT4gZW50cnkuaWQgPT09IGR1bmdlb24uaWQpXG4gICAgICAgICAgPyBwcmV2aW91cy5kdW5nZW9ucy5tYXAoKGVudHJ5KSA9PlxuICAgICAgICAgICAgICBlbnRyeS5pZCA9PT0gZHVuZ2Vvbi5pZCA/IGVuc3VyZUR1bmdlb24oZHVuZ2VvbikgOiBlbnRyeVxuICAgICAgICAgICAgKVxuICAgICAgICAgIDogWy4uLnByZXZpb3VzLmR1bmdlb25zLCBlbnN1cmVEdW5nZW9uKGR1bmdlb24pXTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7IC4uLnByZXZpb3VzLCBkdW5nZW9uczogdXBkYXRlZER1bmdlb25zIH07XG4gICAgICB9KTtcbiAgICB9LFxuICAgIFtzZXRTYWZlXVxuICApO1xuXG4gIGNvbnN0IHVwZGF0ZUR1bmdlb24gPSB1c2VDYWxsYmFjayhcbiAgICAoZHVuZ2VvbklkOiBzdHJpbmcsIHVwZGF0ZXI6IChkdW5nZW9uOiBEdW5nZW9uKSA9PiBEdW5nZW9uKSA9PiB7XG4gICAgICBzZXRTYWZlKChwcmV2aW91cykgPT4gKHtcbiAgICAgICAgLi4ucHJldmlvdXMsXG4gICAgICAgIGR1bmdlb25zOiBwcmV2aW91cy5kdW5nZW9ucy5tYXAoKGVudHJ5KSA9PlxuICAgICAgICAgIGVudHJ5LmlkID09PSBkdW5nZW9uSWQgPyBlbnN1cmVEdW5nZW9uKHVwZGF0ZXIoY2xvbmVEdW5nZW9uKGVudHJ5KSkpIDogZW50cnlcbiAgICAgICAgKVxuICAgICAgfSkpO1xuICAgIH0sXG4gICAgW3NldFNhZmVdXG4gICk7XG5cbiAgY29uc3QgcmVtb3ZlRHVuZ2VvbiA9IHVzZUNhbGxiYWNrKFxuICAgIChkdW5nZW9uSWQ6IHN0cmluZykgPT4ge1xuICAgICAgc2V0U2FmZSgocHJldmlvdXMpID0+ICh7XG4gICAgICAgIC4uLnByZXZpb3VzLFxuICAgICAgICBkdW5nZW9uczogcHJldmlvdXMuZHVuZ2VvbnMuZmlsdGVyKChlbnRyeSkgPT4gZW50cnkuaWQgIT09IGR1bmdlb25JZClcbiAgICAgIH0pKTtcbiAgICB9LFxuICAgIFtzZXRTYWZlXVxuICApO1xuXG4gIGNvbnN0IGFkZFJvb20gPSB1c2VDYWxsYmFjayhcbiAgICAoZHVuZ2VvbklkOiBzdHJpbmcsIHJvb206IER1bmdlb25Sb29tKSA9PiB7XG4gICAgICB1cGRhdGVEdW5nZW9uKGR1bmdlb25JZCwgKGR1bmdlb24pID0+ICh7XG4gICAgICAgIC4uLmR1bmdlb24sXG4gICAgICAgIHJvb21zOiBbLi4uKGR1bmdlb24ucm9vbXMgfHwgW10pLCBlbnN1cmVSb29tKHJvb20pXSxcbiAgICAgIH0pKTtcbiAgICB9LFxuICAgIFt1cGRhdGVEdW5nZW9uXVxuICApO1xuXG4gIGNvbnN0IHVwZGF0ZVJvb20gPSB1c2VDYWxsYmFjayhcbiAgICAoZHVuZ2VvbklkOiBzdHJpbmcsIHJvb21JZDogc3RyaW5nLCBwYXRjaDogUGFydGlhbDxEdW5nZW9uUm9vbT4pID0+IHtcbiAgICAgIHVwZGF0ZUR1bmdlb24oZHVuZ2VvbklkLCAoZHVuZ2VvbikgPT4gKHtcbiAgICAgICAgLi4uZHVuZ2VvbixcbiAgICAgICAgcm9vbXM6IChkdW5nZW9uLnJvb21zIHx8IFtdKS5tYXAoKHJvb20pID0+XG4gICAgICAgICAgcm9vbS5pZCA9PT0gcm9vbUlkID8gZW5zdXJlUm9vbSh7IC4uLnJvb20sIC4uLnBhdGNoIH0pIDogcm9vbVxuICAgICAgICApLFxuICAgICAgfSkpO1xuICAgIH0sXG4gICAgW3VwZGF0ZUR1bmdlb25dXG4gICk7XG5cbiAgY29uc3QgcmVtb3ZlUm9vbSA9IHVzZUNhbGxiYWNrKFxuICAgIChkdW5nZW9uSWQ6IHN0cmluZywgcm9vbUlkOiBzdHJpbmcpID0+IHtcbiAgICAgIHVwZGF0ZUR1bmdlb24oZHVuZ2VvbklkLCAoZHVuZ2VvbikgPT4gKHtcbiAgICAgICAgLi4uZHVuZ2VvbixcbiAgICAgICAgcm9vbXM6IChkdW5nZW9uLnJvb21zIHx8IFtdKS5maWx0ZXIoKHJvb20pID0+IHJvb20uaWQgIT09IHJvb21JZCksXG4gICAgICB9KSk7XG4gICAgfSxcbiAgICBbdXBkYXRlRHVuZ2Vvbl1cbiAgKTtcblxuICBjb25zdCByZXNldER1bmdlb24gPSB1c2VDYWxsYmFjayhcbiAgICAoZHVuZ2VvbklkOiBzdHJpbmcpID0+IHtcbiAgICAgIHVwZGF0ZUR1bmdlb24oZHVuZ2VvbklkLCAoZHVuZ2VvbikgPT4gKHtcbiAgICAgICAgLi4uZHVuZ2VvbixcbiAgICAgICAgY29tcGxldGVkOiBmYWxzZSxcbiAgICAgICAgY2xlYXJlZDogZmFsc2UsXG4gICAgICB9KSk7XG4gICAgfSxcbiAgICBbdXBkYXRlRHVuZ2Vvbl1cbiAgKTtcblxuICBjb25zdCBtYXJrQ29tcGxldGVkID0gdXNlQ2FsbGJhY2soXG4gICAgKGR1bmdlb25JZDogc3RyaW5nKSA9PiB7XG4gICAgICB1cGRhdGVEdW5nZW9uKGR1bmdlb25JZCwgKGR1bmdlb24pID0+ICh7XG4gICAgICAgIC4uLmR1bmdlb24sXG4gICAgICAgIGNvbXBsZXRlZDogdHJ1ZSxcbiAgICAgICAgY2xlYXJlZDogdHJ1ZSxcbiAgICAgIH0pKTtcbiAgICB9LFxuICAgIFt1cGRhdGVEdW5nZW9uXVxuICApO1xuXG4gIGNvbnN0IHJlcGxhY2VBbGwgPSB1c2VDYWxsYmFjayhcbiAgICAobmV4dDogRHVuZ2VvbltdKSA9PiB7XG4gICAgICBzZXRTYWZlKChwcmV2aW91cykgPT4gKHsgLi4ucHJldmlvdXMsIGR1bmdlb25zOiBuZXh0IH0pKTtcbiAgICB9LFxuICAgIFtzZXRTYWZlXVxuICApO1xuXG4gIC8vIE5FVyBQaGFzZSAzMSBtZXRob2RzXG4gIGNvbnN0IHN0YXJ0RHVuZ2VvblJ1biA9IHVzZUNhbGxiYWNrKFxuICAgIChkdW5nZW9uSWQ6IHN0cmluZykgPT4ge1xuICAgICAgY29uc3QgZHVuZ2VvbiA9IHN0YXRlLmR1bmdlb25zLmZpbmQoZCA9PiBkLmlkID09PSBkdW5nZW9uSWQpO1xuICAgICAgaWYgKCFkdW5nZW9uIHx8ICFkdW5nZW9uLnVubG9ja2VkKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgIGNvbnN0IHJvb21zID0gZ2VuZXJhdGVEdW5nZW9uUnVuKGR1bmdlb24pO1xuICAgICAgY29uc3QgbmV3UnVuOiBBY3RpdmVEdW5nZW9uUnVuID0ge1xuICAgICAgICBkdW5nZW9uSWQsXG4gICAgICAgIHJvb21zLFxuICAgICAgICBjdXJyZW50Um9vbUluZGV4OiAwLFxuICAgICAgICBzdGFydFRpbWU6IERhdGUubm93KCksXG4gICAgICAgIGNvbXBsZXRlZFJvb21zOiAwLFxuICAgICAgICB0b3RhbFJvb21zOiByb29tcy5sZW5ndGgsXG4gICAgICAgIGxvb3RDb2xsZWN0ZWQ6IFtdXG4gICAgICB9O1xuXG4gICAgICBzZXRTYWZlKHByZXYgPT4gKHsgLi4ucHJldiwgYWN0aXZlUnVuOiBuZXdSdW4gfSkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBbc3RhdGUuZHVuZ2VvbnMsIHNldFNhZmVdXG4gICk7XG5cbiAgY29uc3QgY29tcGxldGVSb29tID0gdXNlQ2FsbGJhY2soXG4gICAgKHJvb21SZXdhcmRzPzogYW55KSA9PiB7XG4gICAgICBpZiAoIXN0YXRlLmFjdGl2ZVJ1bikgcmV0dXJuIGZhbHNlO1xuXG4gICAgICBjb25zdCBjdXJyZW50Um9vbSA9IHN0YXRlLmFjdGl2ZVJ1bi5yb29tc1tzdGF0ZS5hY3RpdmVSdW4uY3VycmVudFJvb21JbmRleF07XG4gICAgICBpZiAoIWN1cnJlbnRSb29tKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgIGNvbnN0IHVwZGF0ZWRSdW4gPSB7IC4uLnN0YXRlLmFjdGl2ZVJ1biB9O1xuICAgICAgdXBkYXRlZFJ1bi5yb29tc1t1cGRhdGVkUnVuLmN1cnJlbnRSb29tSW5kZXhdLmNvbXBsZXRlZCA9IHRydWU7XG4gICAgICB1cGRhdGVkUnVuLmNvbXBsZXRlZFJvb21zICs9IDE7XG5cbiAgICAgIC8vIEFkZCBsb290IGlmIHRoaXMgd2FzIGEgbG9vdCByb29tXG4gICAgICBpZiAoY3VycmVudFJvb20udHlwZSA9PT0gJ2xvb3QnICYmIHJvb21SZXdhcmRzKSB7XG4gICAgICAgIHVwZGF0ZWRSdW4ubG9vdENvbGxlY3RlZC5wdXNoKC4uLihyb29tUmV3YXJkcy5pdGVtcyB8fCBbXSkpO1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBpZiBkdW5nZW9uIGlzIGNvbXBsZXRlXG4gICAgICBpZiAodXBkYXRlZFJ1bi5jdXJyZW50Um9vbUluZGV4ID49IHVwZGF0ZWRSdW4ucm9vbXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAvLyBEdW5nZW9uIGNvbXBsZXRlZCFcbiAgICAgICAgcmV0dXJuIGNvbXBsZXRlRHVuZ2Vvbih1cGRhdGVkUnVuKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEFkdmFuY2UgdG8gbmV4dCByb29tXG4gICAgICAgIHVwZGF0ZWRSdW4uY3VycmVudFJvb21JbmRleCArPSAxO1xuICAgICAgICBzZXRTYWZlKHByZXYgPT4gKHsgLi4ucHJldiwgYWN0aXZlUnVuOiB1cGRhdGVkUnVuIH0pKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBbc3RhdGUuYWN0aXZlUnVuLCBzZXRTYWZlXVxuICApO1xuXG4gIGNvbnN0IGNvbXBsZXRlRHVuZ2VvbiA9IHVzZUNhbGxiYWNrKFxuICAgIChydW46IEFjdGl2ZUR1bmdlb25SdW4pID0+IHtcbiAgICAgIGNvbnN0IGR1bmdlb24gPSBzdGF0ZS5kdW5nZW9ucy5maW5kKGQgPT4gZC5pZCA9PT0gcnVuLmR1bmdlb25JZCk7XG4gICAgICBpZiAoIWR1bmdlb24pIHJldHVybiBmYWxzZTtcblxuICAgICAgLy8gVXBkYXRlIGR1bmdlb24gY29tcGxldGlvbiBzdGF0dXNcbiAgICAgIGNvbnN0IHVwZGF0ZWREdW5nZW9ucyA9IHN0YXRlLmR1bmdlb25zLm1hcChkID0+IHtcbiAgICAgICAgaWYgKGQuaWQgPT09IHJ1bi5kdW5nZW9uSWQpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZCxcbiAgICAgICAgICAgIGNsZWFyZWQ6IHRydWUsXG4gICAgICAgICAgICBjb21wbGV0ZWQ6IHRydWUsIC8vIExlZ2FjeSBjb21wYXRpYmlsaXR5XG4gICAgICAgICAgICB0aW1lc0NsZWFyZWQ6IChkLnRpbWVzQ2xlYXJlZCB8fCAwKSArIDFcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEFkZCBsb290IHRvIGludmVudG9yeVxuICAgICAgY29uc3QgbmV3TG9vdDogRHVuZ2Vvbkxvb3RbXSA9IHJ1bi5sb290Q29sbGVjdGVkLm1hcChpdGVtID0+ICh7XG4gICAgICAgIC4uLml0ZW0sXG4gICAgICAgIG9idGFpbmVkOiBEYXRlLm5vdygpXG4gICAgICB9KSk7XG5cbiAgICAgIC8vIENoZWNrIGZvciBhY2hpZXZlbWVudHNcbiAgICAgIGNvbnN0IG5ld0FjaGlldmVtZW50cyA9IFsuLi5zdGF0ZS5hY2hpZXZlbWVudHNdO1xuICAgICAgXG4gICAgICBpZiAoIW5ld0FjaGlldmVtZW50cy5pbmNsdWRlcygnZmlyc3RfZHVuZ2VvbicpICYmIHN0YXRlLnRvdGFsQ2xlYXJlZER1bmdlb25zID09PSAwKSB7XG4gICAgICAgIG5ld0FjaGlldmVtZW50cy5wdXNoKCdmaXJzdF9kdW5nZW9uJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChydW4ucm9vbXMuc29tZShyID0+IHIudHlwZSA9PT0gJ2Jvc3MnICYmIHIuY29tcGxldGVkKSAmJiAhbmV3QWNoaWV2ZW1lbnRzLmluY2x1ZGVzKCdib3NzX3NsYXllcicpKSB7XG4gICAgICAgIG5ld0FjaGlldmVtZW50cy5wdXNoKCdib3NzX3NsYXllcicpO1xuICAgICAgfVxuXG4gICAgICAvLyBVbmxvY2sgbmV4dCBkdW5nZW9uXG4gICAgICBjb25zdCBuZXh0RHVuZ2VvbkluZGV4ID0gdXBkYXRlZER1bmdlb25zLmZpbmRJbmRleChkID0+IGQuaWQgPT09IHJ1bi5kdW5nZW9uSWQpICsgMTtcbiAgICAgIGlmIChuZXh0RHVuZ2VvbkluZGV4IDwgdXBkYXRlZER1bmdlb25zLmxlbmd0aCkge1xuICAgICAgICB1cGRhdGVkRHVuZ2VvbnNbbmV4dER1bmdlb25JbmRleF0udW5sb2NrZWQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBzZXRTYWZlKHByZXYgPT4gKHtcbiAgICAgICAgLi4ucHJldixcbiAgICAgICAgZHVuZ2VvbnM6IHVwZGF0ZWREdW5nZW9ucyxcbiAgICAgICAgYWN0aXZlUnVuOiBudWxsLFxuICAgICAgICBpbnZlbnRvcnk6IFsuLi5wcmV2LmludmVudG9yeSwgLi4ubmV3TG9vdF0sXG4gICAgICAgIGFjaGlldmVtZW50czogbmV3QWNoaWV2ZW1lbnRzLFxuICAgICAgICB0b3RhbENsZWFyZWREdW5nZW9uczogcHJldi50b3RhbENsZWFyZWREdW5nZW9ucyArIDEsXG4gICAgICAgIHRvdGFsQm9zc2VzRGVmZWF0ZWQ6IHByZXYudG90YWxCb3NzZXNEZWZlYXRlZCArIChydW4ucm9vbXMuc29tZShyID0+IHIudHlwZSA9PT0gJ2Jvc3MnICYmIHIuY29tcGxldGVkKSA/IDEgOiAwKVxuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIFtzdGF0ZS5kdW5nZW9ucywgc3RhdGUuYWNoaWV2ZW1lbnRzLCBzdGF0ZS50b3RhbENsZWFyZWREdW5nZW9ucywgc2V0U2FmZV1cbiAgKTtcblxuICBjb25zdCBhYmFuZG9uRHVuZ2VvbiA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRTYWZlKHByZXYgPT4gKHsgLi4ucHJldiwgYWN0aXZlUnVuOiBudWxsIH0pKTtcbiAgfSwgW3NldFNhZmVdKTtcblxuICBjb25zdCBnZXRBdmFpbGFibGVEdW5nZW9ucyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICByZXR1cm4gc3RhdGUuZHVuZ2VvbnMuZmlsdGVyKGQgPT4gZC51bmxvY2tlZCk7XG4gIH0sIFtzdGF0ZS5kdW5nZW9uc10pO1xuXG4gIGNvbnN0IGdldEN1cnJlbnRSb29tID0gdXNlQ2FsbGJhY2soKCk6IER1bmdlb25Sb29tIHwgbnVsbCA9PiB7XG4gICAgaWYgKCFzdGF0ZS5hY3RpdmVSdW4pIHJldHVybiBudWxsO1xuICAgIHJldHVybiBzdGF0ZS5hY3RpdmVSdW4ucm9vbXNbc3RhdGUuYWN0aXZlUnVuLmN1cnJlbnRSb29tSW5kZXhdIHx8IG51bGw7XG4gIH0sIFtzdGF0ZS5hY3RpdmVSdW5dKTtcblxuICBjb25zdCBjb21wbGV0ZVRyaWFsID0gdXNlQ2FsbGJhY2soXG4gICAgKHRyaWFsVHlwZTogc3RyaW5nLCBpbnB1dD86IHN0cmluZykgPT4ge1xuICAgICAgY29uc3QgY3VycmVudFJvb20gPSBnZXRDdXJyZW50Um9vbSgpO1xuICAgICAgaWYgKCFjdXJyZW50Um9vbSB8fCBjdXJyZW50Um9vbS50eXBlICE9PSAndHJpYWwnKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgIC8vIFZhbGlkYXRlIHRyaWFsIGNvbXBsZXRpb24gYmFzZWQgb24gdHlwZVxuICAgICAgbGV0IHN1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgIHN3aXRjaCAodHJpYWxUeXBlKSB7XG4gICAgICAgIGNhc2UgJ3NoYW1lJzpcbiAgICAgICAgICBzdWNjZXNzID0gaW5wdXQgJiYgaW5wdXQubGVuZ3RoID4gMTA7IC8vIFJlcXVpcmVzIG1lYW5pbmdmdWwgY29uZmVzc2lvblxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdvYmVkaWVuY2UnOlxuICAgICAgICAgIHN1Y2Nlc3MgPSB0cnVlOyAvLyBKdXN0IHJlcXVpcmVzIHN1Ym1pc3Npb24gYWN0XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2NvbWJhdCc6XG4gICAgICAgICAgc3VjY2VzcyA9IE1hdGgucmFuZG9tKCkgPiAwLjM7IC8vIDcwJSBzdWNjZXNzIHJhdGVcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncml0dWFsJzpcbiAgICAgICAgICBzdWNjZXNzID0gdHJ1ZTsgLy8gUmVxdWlyZXMgcml0dWFsIHBlcmZvcm1hbmNlXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3BzeWNoaWMnOlxuICAgICAgICAgIHN1Y2Nlc3MgPSBNYXRoLnJhbmRvbSgpID4gMC40OyAvLyA2MCUgc3VjY2VzcyByYXRlXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3B1enpsZSc6XG4gICAgICAgICAgc3VjY2VzcyA9IE1hdGgucmFuZG9tKCkgPiAwLjU7IC8vIDUwJSBzdWNjZXNzIHJhdGVcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBzdWNjZXNzID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiBjb21wbGV0ZVJvb20oY3VycmVudFJvb20ucmV3YXJkcyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuICAgIFtnZXRDdXJyZW50Um9vbSwgY29tcGxldGVSb29tXVxuICApO1xuXG4gIGNvbnN0IGZpZ2h0Qm9zcyA9IHVzZUNhbGxiYWNrKFxuICAgIChzdHJhdGVneTogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50Um9vbSA9IGdldEN1cnJlbnRSb29tKCk7XG4gICAgICBpZiAoIWN1cnJlbnRSb29tIHx8IGN1cnJlbnRSb29tLnR5cGUgIT09ICdib3NzJykgcmV0dXJuIGZhbHNlO1xuXG4gICAgICBjb25zdCBkdW5nZW9uID0gc3RhdGUuZHVuZ2VvbnMuZmluZChkID0+IGQuaWQgPT09IHN0YXRlLmFjdGl2ZVJ1bj8uZHVuZ2VvbklkKTtcbiAgICAgIGlmICghZHVuZ2VvbiB8fCAhZHVuZ2Vvbi5ib3NzKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgIC8vIEJvc3MgZmlnaHQgbG9naWMgYmFzZWQgb24gd2Vha25lc3NcbiAgICAgIGxldCBzdWNjZXNzID0gZmFsc2U7XG4gICAgICBpZiAoc3RyYXRlZ3kgPT09IGR1bmdlb24uYm9zcy53ZWFrbmVzcykge1xuICAgICAgICBzdWNjZXNzID0gTWF0aC5yYW5kb20oKSA+IDAuMjsgLy8gODAlIHN1Y2Nlc3Mgd2l0aCBjb3JyZWN0IHN0cmF0ZWd5XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdWNjZXNzID0gTWF0aC5yYW5kb20oKSA+IDAuNzsgLy8gMzAlIHN1Y2Nlc3Mgd2l0aCB3cm9uZyBzdHJhdGVneVxuICAgICAgfVxuXG4gICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICByZXR1cm4gY29tcGxldGVSb29tKGR1bmdlb24uYm9zcy5yZXdhcmRzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG4gICAgW2dldEN1cnJlbnRSb29tLCBjb21wbGV0ZVJvb20sIHN0YXRlLmR1bmdlb25zLCBzdGF0ZS5hY3RpdmVSdW5dXG4gICk7XG5cbiAgY29uc3QgY29sbGVjdExvb3QgPSB1c2VDYWxsYmFjayhcbiAgICAoKSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50Um9vbSA9IGdldEN1cnJlbnRSb29tKCk7XG4gICAgICBpZiAoIWN1cnJlbnRSb29tIHx8IGN1cnJlbnRSb29tLnR5cGUgIT09ICdsb290JykgcmV0dXJuIGZhbHNlO1xuXG4gICAgICBjb25zdCBkdW5nZW9uID0gc3RhdGUuZHVuZ2VvbnMuZmluZChkID0+IGQuaWQgPT09IHN0YXRlLmFjdGl2ZVJ1bj8uZHVuZ2VvbklkKTtcbiAgICAgIGlmICghZHVuZ2VvbikgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAvLyBSYW5kb20gbG9vdCBmcm9tIGR1bmdlb24ncyBsb290IHBvb2xcbiAgICAgIGNvbnN0IGxvb3RQb29sID0gZHVuZ2Vvbi5sb290UG9vbCB8fCBbXTtcbiAgICAgIGlmIChsb290UG9vbC5sZW5ndGggPT09IDApIHJldHVybiBjb21wbGV0ZVJvb20oKTtcblxuICAgICAgY29uc3QgbG9vdCA9IGxvb3RQb29sW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGxvb3RQb29sLmxlbmd0aCldO1xuICAgICAgcmV0dXJuIGNvbXBsZXRlUm9vbSh7IGl0ZW1zOiBbbG9vdF0gfSk7XG4gICAgfSxcbiAgICBbZ2V0Q3VycmVudFJvb20sIGNvbXBsZXRlUm9vbSwgc3RhdGUuZHVuZ2VvbnMsIHN0YXRlLmFjdGl2ZVJ1bl1cbiAgKTtcblxuICByZXR1cm4ge1xuICAgIC8vIExlZ2FjeSBjb21wYXRpYmlsaXR5XG4gICAgZHVuZ2VvbnMsXG4gICAgYWRkRHVuZ2VvbixcbiAgICB1cGRhdGVEdW5nZW9uLFxuICAgIHJlbW92ZUR1bmdlb24sXG4gICAgYWRkUm9vbSxcbiAgICB1cGRhdGVSb29tLFxuICAgIHJlbW92ZVJvb20sXG4gICAgcmVzZXREdW5nZW9uLFxuICAgIG1hcmtDb21wbGV0ZWQsXG4gICAgcmVwbGFjZUFsbCxcbiAgICBcbiAgICAvLyBOZXcgUGhhc2UgMzEgc3RhdGVcbiAgICBhY3RpdmVSdW46IHN0YXRlLmFjdGl2ZVJ1bixcbiAgICBpbnZlbnRvcnk6IHN0YXRlLmludmVudG9yeSxcbiAgICBhY2hpZXZlbWVudHM6IHN0YXRlLmFjaGlldmVtZW50cyxcbiAgICB0b3RhbENsZWFyZWREdW5nZW9uczogc3RhdGUudG90YWxDbGVhcmVkRHVuZ2VvbnMsXG4gICAgdG90YWxCb3NzZXNEZWZlYXRlZDogc3RhdGUudG90YWxCb3NzZXNEZWZlYXRlZCxcbiAgICBcbiAgICAvLyBOZXcgUGhhc2UgMzEgYWN0aW9uc1xuICAgIHN0YXJ0RHVuZ2VvblJ1bixcbiAgICBjb21wbGV0ZVJvb20sXG4gICAgY29tcGxldGVEdW5nZW9uLFxuICAgIGFiYW5kb25EdW5nZW9uLFxuICAgIGNvbXBsZXRlVHJpYWwsXG4gICAgZmlnaHRCb3NzLFxuICAgIGNvbGxlY3RMb290LFxuICAgIGdldEF2YWlsYWJsZUR1bmdlb25zLFxuICAgIGdldEN1cnJlbnRSb29tLFxuICB9IGFzIGNvbnN0O1xufVxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlUGVyc2lzdGVudFN0YXRlIiwiY2xvbmVEdW5nZW9uIiwiY2xvbmVEZWZhdWx0RHVuZ2VvbnMiLCJlbnN1cmVEdW5nZW9uIiwiZW5zdXJlUm9vbSIsImdlbmVyYXRlRHVuZ2VvblJ1biIsImdldERlZmF1bHRTdGF0ZSIsImR1bmdlb25zIiwiYWN0aXZlUnVuIiwiaW52ZW50b3J5IiwiYWNoaWV2ZW1lbnRzIiwidG90YWxDbGVhcmVkRHVuZ2VvbnMiLCJ0b3RhbEJvc3Nlc0RlZmVhdGVkIiwidXNlRHVuZ2VvbnMiLCJzdGF0ZSIsInNldFN0YXRlIiwic2V0U2FmZSIsInVwZGF0ZXIiLCJwcmV2aW91cyIsIm5leHQiLCJtYXAiLCJhZGREdW5nZW9uIiwiZHVuZ2VvbiIsInVwZGF0ZWREdW5nZW9ucyIsInNvbWUiLCJlbnRyeSIsImlkIiwidXBkYXRlRHVuZ2VvbiIsImR1bmdlb25JZCIsInJlbW92ZUR1bmdlb24iLCJmaWx0ZXIiLCJhZGRSb29tIiwicm9vbSIsInJvb21zIiwidXBkYXRlUm9vbSIsInJvb21JZCIsInBhdGNoIiwicmVtb3ZlUm9vbSIsInJlc2V0RHVuZ2VvbiIsImNvbXBsZXRlZCIsImNsZWFyZWQiLCJtYXJrQ29tcGxldGVkIiwicmVwbGFjZUFsbCIsInN0YXJ0RHVuZ2VvblJ1biIsImZpbmQiLCJkIiwidW5sb2NrZWQiLCJuZXdSdW4iLCJjdXJyZW50Um9vbUluZGV4Iiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsImNvbXBsZXRlZFJvb21zIiwidG90YWxSb29tcyIsImxlbmd0aCIsImxvb3RDb2xsZWN0ZWQiLCJwcmV2IiwiY29tcGxldGVSb29tIiwicm9vbVJld2FyZHMiLCJjdXJyZW50Um9vbSIsInVwZGF0ZWRSdW4iLCJ0eXBlIiwicHVzaCIsIml0ZW1zIiwiY29tcGxldGVEdW5nZW9uIiwicnVuIiwidGltZXNDbGVhcmVkIiwibmV3TG9vdCIsIml0ZW0iLCJvYnRhaW5lZCIsIm5ld0FjaGlldmVtZW50cyIsImluY2x1ZGVzIiwiciIsIm5leHREdW5nZW9uSW5kZXgiLCJmaW5kSW5kZXgiLCJhYmFuZG9uRHVuZ2VvbiIsImdldEF2YWlsYWJsZUR1bmdlb25zIiwiZ2V0Q3VycmVudFJvb20iLCJjb21wbGV0ZVRyaWFsIiwidHJpYWxUeXBlIiwiaW5wdXQiLCJzdWNjZXNzIiwiTWF0aCIsInJhbmRvbSIsInJld2FyZHMiLCJmaWdodEJvc3MiLCJzdHJhdGVneSIsImJvc3MiLCJ3ZWFrbmVzcyIsImNvbGxlY3RMb290IiwibG9vdFBvb2wiLCJsb290IiwiZmxvb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useDungeons.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useInventory.ts":
/*!***********************************!*\
  !*** ./app/hooks/useInventory.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useInventory: () => (/* binding */ useInventory)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _useBuffs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useBuffs */ \"(ssr)/./app/hooks/useBuffs.ts\");\n/* harmony import */ var _lib_inventory__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/inventory */ \"(ssr)/./app/lib/inventory.ts\");\n/* __next_internal_client_entry_do_not_use__ useInventory auto */ \n\n\n\nconst MAX_EQUIPPED_RELICS = 2;\nconst ITEM_ACQUIRE_XP = 25;\nconst EQUIP_OBEDIENCE_RELIC = 6;\nconst EQUIP_OBEDIENCE_PANTY = 8;\nfunction normaliseIcon(item) {\n    if (!item.icon || item.icon.trim().length === 0) {\n        return {\n            ...item,\n            icon: (0,_lib_inventory__WEBPACK_IMPORTED_MODULE_3__.getDefaultIcon)(item.type)\n        };\n    }\n    return item;\n}\nfunction useInventory() {\n    const [inventory, setInventory] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(\"inventory\", _lib_inventory__WEBPACK_IMPORTED_MODULE_3__.cloneDefaultInventory);\n    const [xp, setXp] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(\"xpTotal\", {\n        \"useInventory.usePersistentState\": ()=>3400\n    }[\"useInventory.usePersistentState\"]);\n    const [obedience, setObedience] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(\"obediencePoints\", {\n        \"useInventory.usePersistentState\": ()=>0\n    }[\"useInventory.usePersistentState\"]);\n    const [tokens, setTokens] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(\"dirtyTokens\", {\n        \"useInventory.usePersistentState\": ()=>0\n    }[\"useInventory.usePersistentState\"]);\n    const { applyEvent, activateBuffsBySource, deactivateBuffsBySource, triggerBuffBySource } = (0,_useBuffs__WEBPACK_IMPORTED_MODULE_2__.useBuffs)();\n    const equippedRelicCount = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useInventory.useMemo[equippedRelicCount]\": ()=>inventory.filter({\n                \"useInventory.useMemo[equippedRelicCount]\": (item)=>item.type === \"relic\" && item.equipped\n            }[\"useInventory.useMemo[equippedRelicCount]\"]).length\n    }[\"useInventory.useMemo[equippedRelicCount]\"], [\n        inventory\n    ]);\n    const grouped = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useInventory.useMemo[grouped]\": ()=>{\n            return _lib_inventory__WEBPACK_IMPORTED_MODULE_3__.ITEM_TYPE_ORDER.reduce({\n                \"useInventory.useMemo[grouped]\": (acc, type)=>{\n                    acc[type] = inventory.filter({\n                        \"useInventory.useMemo[grouped]\": (item)=>item.type === type\n                    }[\"useInventory.useMemo[grouped]\"]).sort({\n                        \"useInventory.useMemo[grouped]\": (a, b)=>a.name.localeCompare(b.name)\n                    }[\"useInventory.useMemo[grouped]\"]);\n                    return acc;\n                }\n            }[\"useInventory.useMemo[grouped]\"], {\n                relic: [],\n                panty: [],\n                shard: [],\n                consumable: [],\n                quest: []\n            });\n        }\n    }[\"useInventory.useMemo[grouped]\"], [\n        inventory\n    ]);\n    const ensureItem = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[ensureItem]\": (id, template)=>{\n            const existing = inventory.find({\n                \"useInventory.useCallback[ensureItem].existing\": (item)=>item.id === id\n            }[\"useInventory.useCallback[ensureItem].existing\"]);\n            if (existing) return normaliseIcon(existing);\n            const base = template ? {\n                id,\n                name: template.name ?? `Item ${id}`,\n                type: template.type ?? \"quest\",\n                desc: template.desc ?? \"A mysterious item discovered in the temple.\",\n                owned: template.owned ?? 0,\n                icon: template.icon,\n                equipped: template.equipped ?? false\n            } : (0,_lib_inventory__WEBPACK_IMPORTED_MODULE_3__.getDefaultItemTemplate)(id);\n            if (!base) {\n                return normaliseIcon({\n                    id,\n                    name: `Item ${id}`,\n                    type: \"quest\",\n                    desc: \"A mysterious item discovered in the temple.\",\n                    owned: 0\n                });\n            }\n            return normaliseIcon(base);\n        }\n    }[\"useInventory.useCallback[ensureItem]\"], [\n        inventory\n    ]);\n    const setInventorySafe = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[setInventorySafe]\": (updater)=>{\n            setInventory({\n                \"useInventory.useCallback[setInventorySafe]\": (previous)=>{\n                    const next = updater(previous);\n                    return next.map(normaliseIcon);\n                }\n            }[\"useInventory.useCallback[setInventorySafe]\"]);\n        }\n    }[\"useInventory.useCallback[setInventorySafe]\"], [\n        setInventory\n    ]);\n    const awardXp = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[awardXp]\": (amount)=>{\n            if (amount <= 0) return 0;\n            const total = applyEvent(\"xp\", amount);\n            setXp({\n                \"useInventory.useCallback[awardXp]\": (prev)=>prev + total\n            }[\"useInventory.useCallback[awardXp]\"]);\n            return total;\n        }\n    }[\"useInventory.useCallback[awardXp]\"], [\n        applyEvent,\n        setXp\n    ]);\n    const spendXp = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[spendXp]\": (amount)=>{\n            if (amount <= 0) return 0;\n            let deducted = 0;\n            setXp({\n                \"useInventory.useCallback[spendXp]\": (previous)=>{\n                    const next = Math.max(0, previous - amount);\n                    deducted = previous - next;\n                    return next;\n                }\n            }[\"useInventory.useCallback[spendXp]\"]);\n            return deducted;\n        }\n    }[\"useInventory.useCallback[spendXp]\"], [\n        setXp\n    ]);\n    const awardObedience = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[awardObedience]\": (amount)=>{\n            if (amount <= 0) return 0;\n            const total = applyEvent(\"obedience\", amount);\n            setObedience({\n                \"useInventory.useCallback[awardObedience]\": (prev)=>prev + total\n            }[\"useInventory.useCallback[awardObedience]\"]);\n            return total;\n        }\n    }[\"useInventory.useCallback[awardObedience]\"], [\n        applyEvent,\n        setObedience\n    ]);\n    const awardTokens = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[awardTokens]\": (amount)=>{\n            if (amount <= 0) return 0;\n            const value = Math.max(0, Math.round(amount));\n            setTokens({\n                \"useInventory.useCallback[awardTokens]\": (previous)=>previous + value\n            }[\"useInventory.useCallback[awardTokens]\"]);\n            return value;\n        }\n    }[\"useInventory.useCallback[awardTokens]\"], [\n        setTokens\n    ]);\n    const spendTokens = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[spendTokens]\": (amount)=>{\n            if (amount <= 0) return 0;\n            let deducted = 0;\n            setTokens({\n                \"useInventory.useCallback[spendTokens]\": (previous)=>{\n                    const next = Math.max(0, previous - amount);\n                    deducted = previous - next;\n                    return next;\n                }\n            }[\"useInventory.useCallback[spendTokens]\"]);\n            return deducted;\n        }\n    }[\"useInventory.useCallback[spendTokens]\"], [\n        setTokens\n    ]);\n    const gainItem = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[gainItem]\": (id, amount = 1, template)=>{\n            if (!id || amount === 0) return;\n            setInventorySafe({\n                \"useInventory.useCallback[gainItem]\": (previous)=>{\n                    const ensured = ensureItem(id, template);\n                    const existing = previous.find({\n                        \"useInventory.useCallback[gainItem].existing\": (item)=>item.id === id\n                    }[\"useInventory.useCallback[gainItem].existing\"]);\n                    if (existing) {\n                        return previous.map({\n                            \"useInventory.useCallback[gainItem]\": (item)=>item.id === id ? {\n                                    ...item,\n                                    owned: Math.max(0, item.owned + amount)\n                                } : item\n                        }[\"useInventory.useCallback[gainItem]\"]);\n                    }\n                    return [\n                        ...previous,\n                        {\n                            ...ensured,\n                            owned: Math.max(0, ensured.owned + amount)\n                        }\n                    ];\n                }\n            }[\"useInventory.useCallback[gainItem]\"]);\n            awardXp(Math.max(1, amount) * ITEM_ACQUIRE_XP);\n        }\n    }[\"useInventory.useCallback[gainItem]\"], [\n        awardXp,\n        ensureItem,\n        setInventorySafe\n    ]);\n    const setOwned = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[setOwned]\": (id, owned)=>{\n            setInventorySafe({\n                \"useInventory.useCallback[setOwned]\": (previous)=>previous.map({\n                        \"useInventory.useCallback[setOwned]\": (item)=>item.id === id ? {\n                                ...item,\n                                owned: Math.max(0, Math.round(Number.isFinite(owned) ? owned : item.owned))\n                            } : item\n                    }[\"useInventory.useCallback[setOwned]\"])\n            }[\"useInventory.useCallback[setOwned]\"]);\n        }\n    }[\"useInventory.useCallback[setOwned]\"], [\n        setInventorySafe\n    ]);\n    const adjustOwned = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[adjustOwned]\": (id, delta)=>{\n            if (!delta) return;\n            setInventorySafe({\n                \"useInventory.useCallback[adjustOwned]\": (previous)=>previous.map({\n                        \"useInventory.useCallback[adjustOwned]\": (item)=>item.id === id ? {\n                                ...item,\n                                owned: Math.max(0, item.owned + delta)\n                            } : item\n                    }[\"useInventory.useCallback[adjustOwned]\"])\n            }[\"useInventory.useCallback[adjustOwned]\"]);\n        }\n    }[\"useInventory.useCallback[adjustOwned]\"], [\n        setInventorySafe\n    ]);\n    const updateItem = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[updateItem]\": (id, patch)=>{\n            setInventorySafe({\n                \"useInventory.useCallback[updateItem]\": (previous)=>previous.map({\n                        \"useInventory.useCallback[updateItem]\": (item)=>item.id === id ? {\n                                ...item,\n                                ...patch\n                            } : item\n                    }[\"useInventory.useCallback[updateItem]\"])\n            }[\"useInventory.useCallback[updateItem]\"]);\n        }\n    }[\"useInventory.useCallback[updateItem]\"], [\n        setInventorySafe\n    ]);\n    const addOrReplaceItem = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[addOrReplaceItem]\": (item)=>{\n            const normalised = normaliseIcon(item);\n            setInventorySafe({\n                \"useInventory.useCallback[addOrReplaceItem]\": (previous)=>{\n                    const exists = previous.some({\n                        \"useInventory.useCallback[addOrReplaceItem].exists\": (entry)=>entry.id === normalised.id\n                    }[\"useInventory.useCallback[addOrReplaceItem].exists\"]);\n                    return exists ? previous.map({\n                        \"useInventory.useCallback[addOrReplaceItem]\": (entry)=>entry.id === normalised.id ? {\n                                ...entry,\n                                ...normalised\n                            } : entry\n                    }[\"useInventory.useCallback[addOrReplaceItem]\"]) : [\n                        ...previous,\n                        normalised\n                    ];\n                }\n            }[\"useInventory.useCallback[addOrReplaceItem]\"]);\n            if ((0,_lib_inventory__WEBPACK_IMPORTED_MODULE_3__.isEquippable)(normalised)) {\n                if (normalised.equipped) {\n                    activateBuffsBySource(normalised.name);\n                } else {\n                    deactivateBuffsBySource(normalised.name);\n                }\n            }\n        }\n    }[\"useInventory.useCallback[addOrReplaceItem]\"], [\n        activateBuffsBySource,\n        deactivateBuffsBySource,\n        setInventorySafe\n    ]);\n    const removeItem = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[removeItem]\": (id)=>{\n            const item = inventory.find({\n                \"useInventory.useCallback[removeItem].item\": (entry)=>entry.id === id\n            }[\"useInventory.useCallback[removeItem].item\"]);\n            if (item && (0,_lib_inventory__WEBPACK_IMPORTED_MODULE_3__.isEquippable)(item)) {\n                deactivateBuffsBySource(item.name);\n            }\n            setInventorySafe({\n                \"useInventory.useCallback[removeItem]\": (previous)=>previous.filter({\n                        \"useInventory.useCallback[removeItem]\": (item)=>item.id !== id\n                    }[\"useInventory.useCallback[removeItem]\"])\n            }[\"useInventory.useCallback[removeItem]\"]);\n        }\n    }[\"useInventory.useCallback[removeItem]\"], [\n        deactivateBuffsBySource,\n        inventory,\n        setInventorySafe\n    ]);\n    const toggleEquip = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[toggleEquip]\": (id)=>{\n            const item = inventory.find({\n                \"useInventory.useCallback[toggleEquip].item\": (entry)=>entry.id === id\n            }[\"useInventory.useCallback[toggleEquip].item\"]);\n            if (!item || !(0,_lib_inventory__WEBPACK_IMPORTED_MODULE_3__.isEquippable)(item)) {\n                return \"no-change\";\n            }\n            if (item.type === \"relic\") {\n                if (!item.equipped && equippedRelicCount >= MAX_EQUIPPED_RELICS) {\n                    return \"limit-reached\";\n                }\n            }\n            const nextEquipped = !item.equipped;\n            setInventorySafe({\n                \"useInventory.useCallback[toggleEquip]\": (previous)=>previous.map({\n                        \"useInventory.useCallback[toggleEquip]\": (entry)=>entry.id === id ? {\n                                ...entry,\n                                equipped: nextEquipped\n                            } : entry\n                    }[\"useInventory.useCallback[toggleEquip]\"])\n            }[\"useInventory.useCallback[toggleEquip]\"]);\n            if (nextEquipped) {\n                awardObedience(item.type === \"panty\" ? EQUIP_OBEDIENCE_PANTY : EQUIP_OBEDIENCE_RELIC);\n                activateBuffsBySource(item.name);\n            } else {\n                deactivateBuffsBySource(item.name);\n            }\n            return nextEquipped ? \"equipped\" : \"unequipped\";\n        }\n    }[\"useInventory.useCallback[toggleEquip]\"], [\n        activateBuffsBySource,\n        awardObedience,\n        deactivateBuffsBySource,\n        equippedRelicCount,\n        inventory,\n        setInventorySafe\n    ]);\n    const unequipAllOfType = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[unequipAllOfType]\": (type)=>{\n            const affectedNames = inventory.filter({\n                \"useInventory.useCallback[unequipAllOfType].affectedNames\": (item)=>item.type === type && item.equipped\n            }[\"useInventory.useCallback[unequipAllOfType].affectedNames\"]).map({\n                \"useInventory.useCallback[unequipAllOfType].affectedNames\": (item)=>item.name\n            }[\"useInventory.useCallback[unequipAllOfType].affectedNames\"]);\n            setInventorySafe({\n                \"useInventory.useCallback[unequipAllOfType]\": (previous)=>previous.map({\n                        \"useInventory.useCallback[unequipAllOfType]\": (item)=>item.type === type && item.equipped ? {\n                                ...item,\n                                equipped: false\n                            } : item\n                    }[\"useInventory.useCallback[unequipAllOfType]\"])\n            }[\"useInventory.useCallback[unequipAllOfType]\"]);\n            if (type === \"relic\" || type === \"panty\") {\n                affectedNames.forEach({\n                    \"useInventory.useCallback[unequipAllOfType]\": (name)=>deactivateBuffsBySource(name)\n                }[\"useInventory.useCallback[unequipAllOfType]\"]);\n            }\n        }\n    }[\"useInventory.useCallback[unequipAllOfType]\"], [\n        deactivateBuffsBySource,\n        inventory,\n        setInventorySafe\n    ]);\n    const consumeItem = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[consumeItem]\": (id)=>{\n            const item = inventory.find({\n                \"useInventory.useCallback[consumeItem].item\": (entry)=>entry.id === id\n            }[\"useInventory.useCallback[consumeItem].item\"]);\n            if (!item || item.owned <= 0) {\n                return false;\n            }\n            adjustOwned(id, -1);\n            if (item.type === \"consumable\") {\n                triggerBuffBySource(item.name);\n            }\n            return true;\n        }\n    }[\"useInventory.useCallback[consumeItem]\"], [\n        adjustOwned,\n        inventory,\n        triggerBuffBySource\n    ]);\n    const replaceInventory = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[replaceInventory]\": (items)=>{\n            setInventory(items.map({\n                \"useInventory.useCallback[replaceInventory]\": (entry)=>normaliseIcon({\n                        ...entry\n                    })\n            }[\"useInventory.useCallback[replaceInventory]\"]));\n            items.forEach({\n                \"useInventory.useCallback[replaceInventory]\": (item)=>{\n                    if (!(0,_lib_inventory__WEBPACK_IMPORTED_MODULE_3__.isEquippable)(item)) return;\n                    if (item.equipped) {\n                        activateBuffsBySource(item.name);\n                    } else {\n                        deactivateBuffsBySource(item.name);\n                    }\n                }\n            }[\"useInventory.useCallback[replaceInventory]\"]);\n        }\n    }[\"useInventory.useCallback[replaceInventory]\"], [\n        activateBuffsBySource,\n        deactivateBuffsBySource,\n        setInventory\n    ]);\n    const clearInventory = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInventory.useCallback[clearInventory]\": ()=>{\n            const equippedNames = inventory.filter({\n                \"useInventory.useCallback[clearInventory].equippedNames\": (item)=>(0,_lib_inventory__WEBPACK_IMPORTED_MODULE_3__.isEquippable)(item) && item.equipped\n            }[\"useInventory.useCallback[clearInventory].equippedNames\"]).map({\n                \"useInventory.useCallback[clearInventory].equippedNames\": (item)=>item.name\n            }[\"useInventory.useCallback[clearInventory].equippedNames\"]);\n            setInventory((0,_lib_inventory__WEBPACK_IMPORTED_MODULE_3__.cloneDefaultInventory)());\n            equippedNames.forEach({\n                \"useInventory.useCallback[clearInventory]\": (name)=>deactivateBuffsBySource(name)\n            }[\"useInventory.useCallback[clearInventory]\"]);\n        }\n    }[\"useInventory.useCallback[clearInventory]\"], [\n        deactivateBuffsBySource,\n        inventory,\n        setInventory\n    ]);\n    return {\n        inventory,\n        grouped,\n        labels: _lib_inventory__WEBPACK_IMPORTED_MODULE_3__.ITEM_TYPE_LABELS,\n        xp,\n        obedience,\n        tokens,\n        equippedRelicCount,\n        maxRelics: MAX_EQUIPPED_RELICS,\n        gainItem,\n        setOwned,\n        adjustOwned,\n        updateItem,\n        addOrReplaceItem,\n        removeItem,\n        toggleEquip,\n        unequipAllOfType,\n        consumeItem,\n        replaceInventory,\n        clearInventory,\n        awardXp,\n        spendXp,\n        awardTokens,\n        spendTokens,\n        awardObedience\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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M0Y7UUFDWGlFO1FBQ0FFO1FBQ0FHO1FBQ0FFO1FBQ0FFO1FBQ0FLO1FBQ0FDO1FBQ0FFO1FBQ0FHO1FBQ0FDO1FBQ0FFO1FBQ0FwQztRQUNBSTtRQUNBSztRQUNBRztRQUNBSjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxNb21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxcaG9va3NcXHVzZUludmVudG9yeS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VNZW1vIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VQZXJzaXN0ZW50U3RhdGUgfSBmcm9tIFwiLi91c2VQZXJzaXN0ZW50U3RhdGVcIjtcbmltcG9ydCB7IHVzZUJ1ZmZzIH0gZnJvbSBcIi4vdXNlQnVmZnNcIjtcbmltcG9ydCB7XG4gIGNsb25lRGVmYXVsdEludmVudG9yeSxcbiAgZ2V0RGVmYXVsdEl0ZW1UZW1wbGF0ZSxcbiAgZ2V0RGVmYXVsdEljb24sXG4gIEludmVudG9yeUl0ZW0sXG4gIElURU1fVFlQRV9MQUJFTFMsXG4gIElURU1fVFlQRV9PUkRFUixcbiAgSXRlbVR5cGUsXG4gIGlzRXF1aXBwYWJsZSxcbn0gZnJvbSBcIi4uL2xpYi9pbnZlbnRvcnlcIjtcblxuY29uc3QgTUFYX0VRVUlQUEVEX1JFTElDUyA9IDI7XG5jb25zdCBJVEVNX0FDUVVJUkVfWFAgPSAyNTtcbmNvbnN0IEVRVUlQX09CRURJRU5DRV9SRUxJQyA9IDY7XG5jb25zdCBFUVVJUF9PQkVESUVOQ0VfUEFOVFkgPSA4O1xuXG5leHBvcnQgdHlwZSBFcXVpcFJlc3VsdCA9IFwiZXF1aXBwZWRcIiB8IFwidW5lcXVpcHBlZFwiIHwgXCJsaW1pdC1yZWFjaGVkXCIgfCBcIm5vLWNoYW5nZVwiO1xuXG5leHBvcnQgdHlwZSBJbnZlbnRvcnlHcm91cGVkID0gUmVjb3JkPEl0ZW1UeXBlLCBJbnZlbnRvcnlJdGVtW10+O1xuXG5mdW5jdGlvbiBub3JtYWxpc2VJY29uKGl0ZW06IEludmVudG9yeUl0ZW0pOiBJbnZlbnRvcnlJdGVtIHtcbiAgaWYgKCFpdGVtLmljb24gfHwgaXRlbS5pY29uLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4geyAuLi5pdGVtLCBpY29uOiBnZXREZWZhdWx0SWNvbihpdGVtLnR5cGUpIH07XG4gIH1cbiAgcmV0dXJuIGl0ZW07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VJbnZlbnRvcnkoKSB7XG4gIGNvbnN0IFtpbnZlbnRvcnksIHNldEludmVudG9yeV0gPSB1c2VQZXJzaXN0ZW50U3RhdGU8SW52ZW50b3J5SXRlbVtdPihcbiAgICBcImludmVudG9yeVwiLFxuICAgIGNsb25lRGVmYXVsdEludmVudG9yeVxuICApO1xuICBjb25zdCBbeHAsIHNldFhwXSA9IHVzZVBlcnNpc3RlbnRTdGF0ZTxudW1iZXI+KFwieHBUb3RhbFwiLCAoKSA9PiAzNDAwKTtcbiAgY29uc3QgW29iZWRpZW5jZSwgc2V0T2JlZGllbmNlXSA9IHVzZVBlcnNpc3RlbnRTdGF0ZTxudW1iZXI+KFwib2JlZGllbmNlUG9pbnRzXCIsICgpID0+IDApO1xuICBjb25zdCBbdG9rZW5zLCBzZXRUb2tlbnNdID0gdXNlUGVyc2lzdGVudFN0YXRlPG51bWJlcj4oXCJkaXJ0eVRva2Vuc1wiLCAoKSA9PiAwKTtcbiAgY29uc3Qge1xuICAgIGFwcGx5RXZlbnQsXG4gICAgYWN0aXZhdGVCdWZmc0J5U291cmNlLFxuICAgIGRlYWN0aXZhdGVCdWZmc0J5U291cmNlLFxuICAgIHRyaWdnZXJCdWZmQnlTb3VyY2UsXG4gIH0gPSB1c2VCdWZmcygpO1xuXG4gIGNvbnN0IGVxdWlwcGVkUmVsaWNDb3VudCA9IHVzZU1lbW8oXG4gICAgKCkgPT4gaW52ZW50b3J5LmZpbHRlcigoaXRlbSkgPT4gaXRlbS50eXBlID09PSBcInJlbGljXCIgJiYgaXRlbS5lcXVpcHBlZCkubGVuZ3RoLFxuICAgIFtpbnZlbnRvcnldXG4gICk7XG5cbiAgY29uc3QgZ3JvdXBlZCA9IHVzZU1lbW88SW52ZW50b3J5R3JvdXBlZD4oKCkgPT4ge1xuICAgIHJldHVybiBJVEVNX1RZUEVfT1JERVIucmVkdWNlPEludmVudG9yeUdyb3VwZWQ+KChhY2MsIHR5cGUpID0+IHtcbiAgICAgIGFjY1t0eXBlXSA9IGludmVudG9yeVxuICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtLnR5cGUgPT09IHR5cGUpXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKTtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge1xuICAgICAgcmVsaWM6IFtdLFxuICAgICAgcGFudHk6IFtdLFxuICAgICAgc2hhcmQ6IFtdLFxuICAgICAgY29uc3VtYWJsZTogW10sXG4gICAgICBxdWVzdDogW10sXG4gICAgfSk7XG4gIH0sIFtpbnZlbnRvcnldKTtcblxuICBjb25zdCBlbnN1cmVJdGVtID0gdXNlQ2FsbGJhY2soXG4gICAgKGlkOiBzdHJpbmcsIHRlbXBsYXRlPzogUGFydGlhbDxJbnZlbnRvcnlJdGVtPikgPT4ge1xuICAgICAgY29uc3QgZXhpc3RpbmcgPSBpbnZlbnRvcnkuZmluZCgoaXRlbSkgPT4gaXRlbS5pZCA9PT0gaWQpO1xuICAgICAgaWYgKGV4aXN0aW5nKSByZXR1cm4gbm9ybWFsaXNlSWNvbihleGlzdGluZyk7XG5cbiAgICAgIGNvbnN0IGJhc2UgPSB0ZW1wbGF0ZVxuICAgICAgICA/ICh7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIG5hbWU6IHRlbXBsYXRlLm5hbWUgPz8gYEl0ZW0gJHtpZH1gLFxuICAgICAgICAgICAgdHlwZTogdGVtcGxhdGUudHlwZSA/PyBcInF1ZXN0XCIsXG4gICAgICAgICAgICBkZXNjOiB0ZW1wbGF0ZS5kZXNjID8/IFwiQSBteXN0ZXJpb3VzIGl0ZW0gZGlzY292ZXJlZCBpbiB0aGUgdGVtcGxlLlwiLFxuICAgICAgICAgICAgb3duZWQ6IHRlbXBsYXRlLm93bmVkID8/IDAsXG4gICAgICAgICAgICBpY29uOiB0ZW1wbGF0ZS5pY29uLFxuICAgICAgICAgICAgZXF1aXBwZWQ6IHRlbXBsYXRlLmVxdWlwcGVkID8/IGZhbHNlLFxuICAgICAgICAgIH0gYXMgSW52ZW50b3J5SXRlbSlcbiAgICAgICAgOiBnZXREZWZhdWx0SXRlbVRlbXBsYXRlKGlkKTtcblxuICAgICAgaWYgKCFiYXNlKSB7XG4gICAgICAgIHJldHVybiBub3JtYWxpc2VJY29uKHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBuYW1lOiBgSXRlbSAke2lkfWAsXG4gICAgICAgICAgdHlwZTogXCJxdWVzdFwiLFxuICAgICAgICAgIGRlc2M6IFwiQSBteXN0ZXJpb3VzIGl0ZW0gZGlzY292ZXJlZCBpbiB0aGUgdGVtcGxlLlwiLFxuICAgICAgICAgIG93bmVkOiAwLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5vcm1hbGlzZUljb24oYmFzZSk7XG4gICAgfSxcbiAgICBbaW52ZW50b3J5XVxuICApO1xuXG4gIGNvbnN0IHNldEludmVudG9yeVNhZmUgPSB1c2VDYWxsYmFjayhcbiAgICAodXBkYXRlcjogKHByZXZpb3VzOiBJbnZlbnRvcnlJdGVtW10pID0+IEludmVudG9yeUl0ZW1bXSkgPT4ge1xuICAgICAgc2V0SW52ZW50b3J5KChwcmV2aW91cykgPT4ge1xuICAgICAgICBjb25zdCBuZXh0ID0gdXBkYXRlcihwcmV2aW91cyk7XG4gICAgICAgIHJldHVybiBuZXh0Lm1hcChub3JtYWxpc2VJY29uKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW3NldEludmVudG9yeV1cbiAgKTtcblxuICBjb25zdCBhd2FyZFhwID0gdXNlQ2FsbGJhY2soXG4gICAgKGFtb3VudDogbnVtYmVyKSA9PiB7XG4gICAgICBpZiAoYW1vdW50IDw9IDApIHJldHVybiAwO1xuICAgICAgY29uc3QgdG90YWwgPSBhcHBseUV2ZW50KFwieHBcIiwgYW1vdW50KTtcbiAgICAgIHNldFhwKChwcmV2KSA9PiBwcmV2ICsgdG90YWwpO1xuICAgICAgcmV0dXJuIHRvdGFsO1xuICAgIH0sXG4gICAgW2FwcGx5RXZlbnQsIHNldFhwXVxuICApO1xuXG4gIGNvbnN0IHNwZW5kWHAgPSB1c2VDYWxsYmFjayhcbiAgICAoYW1vdW50OiBudW1iZXIpID0+IHtcbiAgICAgIGlmIChhbW91bnQgPD0gMCkgcmV0dXJuIDA7XG4gICAgICBsZXQgZGVkdWN0ZWQgPSAwO1xuICAgICAgc2V0WHAoKHByZXZpb3VzKSA9PiB7XG4gICAgICAgIGNvbnN0IG5leHQgPSBNYXRoLm1heCgwLCBwcmV2aW91cyAtIGFtb3VudCk7XG4gICAgICAgIGRlZHVjdGVkID0gcHJldmlvdXMgLSBuZXh0O1xuICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRlZHVjdGVkO1xuICAgIH0sXG4gICAgW3NldFhwXVxuICApO1xuXG4gIGNvbnN0IGF3YXJkT2JlZGllbmNlID0gdXNlQ2FsbGJhY2soXG4gICAgKGFtb3VudDogbnVtYmVyKSA9PiB7XG4gICAgICBpZiAoYW1vdW50IDw9IDApIHJldHVybiAwO1xuICAgICAgY29uc3QgdG90YWwgPSBhcHBseUV2ZW50KFwib2JlZGllbmNlXCIsIGFtb3VudCk7XG4gICAgICBzZXRPYmVkaWVuY2UoKHByZXYpID0+IHByZXYgKyB0b3RhbCk7XG4gICAgICByZXR1cm4gdG90YWw7XG4gICAgfSxcbiAgICBbYXBwbHlFdmVudCwgc2V0T2JlZGllbmNlXVxuICApO1xuXG4gIGNvbnN0IGF3YXJkVG9rZW5zID0gdXNlQ2FsbGJhY2soXG4gICAgKGFtb3VudDogbnVtYmVyKSA9PiB7XG4gICAgICBpZiAoYW1vdW50IDw9IDApIHJldHVybiAwO1xuICAgICAgY29uc3QgdmFsdWUgPSBNYXRoLm1heCgwLCBNYXRoLnJvdW5kKGFtb3VudCkpO1xuICAgICAgc2V0VG9rZW5zKChwcmV2aW91cykgPT4gcHJldmlvdXMgKyB2YWx1ZSk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBbc2V0VG9rZW5zXVxuICApO1xuXG4gIGNvbnN0IHNwZW5kVG9rZW5zID0gdXNlQ2FsbGJhY2soXG4gICAgKGFtb3VudDogbnVtYmVyKSA9PiB7XG4gICAgICBpZiAoYW1vdW50IDw9IDApIHJldHVybiAwO1xuICAgICAgbGV0IGRlZHVjdGVkID0gMDtcbiAgICAgIHNldFRva2VucygocHJldmlvdXMpID0+IHtcbiAgICAgICAgY29uc3QgbmV4dCA9IE1hdGgubWF4KDAsIHByZXZpb3VzIC0gYW1vdW50KTtcbiAgICAgICAgZGVkdWN0ZWQgPSBwcmV2aW91cyAtIG5leHQ7XG4gICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGVkdWN0ZWQ7XG4gICAgfSxcbiAgICBbc2V0VG9rZW5zXVxuICApO1xuXG4gIGNvbnN0IGdhaW5JdGVtID0gdXNlQ2FsbGJhY2soXG4gICAgKGlkOiBzdHJpbmcsIGFtb3VudCA9IDEsIHRlbXBsYXRlPzogUGFydGlhbDxJbnZlbnRvcnlJdGVtPikgPT4ge1xuICAgICAgaWYgKCFpZCB8fCBhbW91bnQgPT09IDApIHJldHVybjtcbiAgICAgIHNldEludmVudG9yeVNhZmUoKHByZXZpb3VzKSA9PiB7XG4gICAgICAgIGNvbnN0IGVuc3VyZWQgPSBlbnN1cmVJdGVtKGlkLCB0ZW1wbGF0ZSk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gcHJldmlvdXMuZmluZCgoaXRlbSkgPT4gaXRlbS5pZCA9PT0gaWQpO1xuICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICByZXR1cm4gcHJldmlvdXMubWFwKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5pZCA9PT0gaWQgPyB7IC4uLml0ZW0sIG93bmVkOiBNYXRoLm1heCgwLCBpdGVtLm93bmVkICsgYW1vdW50KSB9IDogaXRlbVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFsuLi5wcmV2aW91cywgeyAuLi5lbnN1cmVkLCBvd25lZDogTWF0aC5tYXgoMCwgZW5zdXJlZC5vd25lZCArIGFtb3VudCkgfV07XG4gICAgICB9KTtcbiAgICAgIGF3YXJkWHAoTWF0aC5tYXgoMSwgYW1vdW50KSAqIElURU1fQUNRVUlSRV9YUCk7XG4gICAgfSxcbiAgICBbYXdhcmRYcCwgZW5zdXJlSXRlbSwgc2V0SW52ZW50b3J5U2FmZV1cbiAgKTtcblxuICBjb25zdCBzZXRPd25lZCA9IHVzZUNhbGxiYWNrKFxuICAgIChpZDogc3RyaW5nLCBvd25lZDogbnVtYmVyKSA9PiB7XG4gICAgICBzZXRJbnZlbnRvcnlTYWZlKChwcmV2aW91cykgPT5cbiAgICAgICAgcHJldmlvdXMubWFwKChpdGVtKSA9PlxuICAgICAgICAgIGl0ZW0uaWQgPT09IGlkXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgICAgIG93bmVkOiBNYXRoLm1heCgwLCBNYXRoLnJvdW5kKE51bWJlci5pc0Zpbml0ZShvd25lZCkgPyBvd25lZCA6IGl0ZW0ub3duZWQpKSxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiBpdGVtXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfSxcbiAgICBbc2V0SW52ZW50b3J5U2FmZV1cbiAgKTtcblxuICBjb25zdCBhZGp1c3RPd25lZCA9IHVzZUNhbGxiYWNrKFxuICAgIChpZDogc3RyaW5nLCBkZWx0YTogbnVtYmVyKSA9PiB7XG4gICAgICBpZiAoIWRlbHRhKSByZXR1cm47XG4gICAgICBzZXRJbnZlbnRvcnlTYWZlKChwcmV2aW91cykgPT5cbiAgICAgICAgcHJldmlvdXMubWFwKChpdGVtKSA9PlxuICAgICAgICAgIGl0ZW0uaWQgPT09IGlkXG4gICAgICAgICAgICA/IHsgLi4uaXRlbSwgb3duZWQ6IE1hdGgubWF4KDAsIGl0ZW0ub3duZWQgKyBkZWx0YSkgfVxuICAgICAgICAgICAgOiBpdGVtXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfSxcbiAgICBbc2V0SW52ZW50b3J5U2FmZV1cbiAgKTtcblxuICBjb25zdCB1cGRhdGVJdGVtID0gdXNlQ2FsbGJhY2soXG4gICAgKGlkOiBzdHJpbmcsIHBhdGNoOiBQYXJ0aWFsPEludmVudG9yeUl0ZW0+KSA9PiB7XG4gICAgICBzZXRJbnZlbnRvcnlTYWZlKChwcmV2aW91cykgPT5cbiAgICAgICAgcHJldmlvdXMubWFwKChpdGVtKSA9PiAoaXRlbS5pZCA9PT0gaWQgPyB7IC4uLml0ZW0sIC4uLnBhdGNoIH0gOiBpdGVtKSlcbiAgICAgICk7XG4gICAgfSxcbiAgICBbc2V0SW52ZW50b3J5U2FmZV1cbiAgKTtcblxuICBjb25zdCBhZGRPclJlcGxhY2VJdGVtID0gdXNlQ2FsbGJhY2soXG4gICAgKGl0ZW06IEludmVudG9yeUl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IG5vcm1hbGlzZWQgPSBub3JtYWxpc2VJY29uKGl0ZW0pO1xuICAgICAgc2V0SW52ZW50b3J5U2FmZSgocHJldmlvdXMpID0+IHtcbiAgICAgICAgY29uc3QgZXhpc3RzID0gcHJldmlvdXMuc29tZSgoZW50cnkpID0+IGVudHJ5LmlkID09PSBub3JtYWxpc2VkLmlkKTtcbiAgICAgICAgcmV0dXJuIGV4aXN0c1xuICAgICAgICAgID8gcHJldmlvdXMubWFwKChlbnRyeSkgPT4gKGVudHJ5LmlkID09PSBub3JtYWxpc2VkLmlkID8geyAuLi5lbnRyeSwgLi4ubm9ybWFsaXNlZCB9IDogZW50cnkpKVxuICAgICAgICAgIDogWy4uLnByZXZpb3VzLCBub3JtYWxpc2VkXTtcbiAgICAgIH0pO1xuICAgICAgaWYgKGlzRXF1aXBwYWJsZShub3JtYWxpc2VkKSkge1xuICAgICAgICBpZiAobm9ybWFsaXNlZC5lcXVpcHBlZCkge1xuICAgICAgICAgIGFjdGl2YXRlQnVmZnNCeVNvdXJjZShub3JtYWxpc2VkLm5hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlYWN0aXZhdGVCdWZmc0J5U291cmNlKG5vcm1hbGlzZWQubmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIFthY3RpdmF0ZUJ1ZmZzQnlTb3VyY2UsIGRlYWN0aXZhdGVCdWZmc0J5U291cmNlLCBzZXRJbnZlbnRvcnlTYWZlXVxuICApO1xuXG4gIGNvbnN0IHJlbW92ZUl0ZW0gPSB1c2VDYWxsYmFjayhcbiAgICAoaWQ6IHN0cmluZykgPT4ge1xuICAgICAgY29uc3QgaXRlbSA9IGludmVudG9yeS5maW5kKChlbnRyeSkgPT4gZW50cnkuaWQgPT09IGlkKTtcbiAgICAgIGlmIChpdGVtICYmIGlzRXF1aXBwYWJsZShpdGVtKSkge1xuICAgICAgICBkZWFjdGl2YXRlQnVmZnNCeVNvdXJjZShpdGVtLm5hbWUpO1xuICAgICAgfVxuICAgICAgc2V0SW52ZW50b3J5U2FmZSgocHJldmlvdXMpID0+IHByZXZpb3VzLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5pZCAhPT0gaWQpKTtcbiAgICB9LFxuICAgIFtkZWFjdGl2YXRlQnVmZnNCeVNvdXJjZSwgaW52ZW50b3J5LCBzZXRJbnZlbnRvcnlTYWZlXVxuICApO1xuXG4gIGNvbnN0IHRvZ2dsZUVxdWlwID0gdXNlQ2FsbGJhY2soXG4gICAgKGlkOiBzdHJpbmcpOiBFcXVpcFJlc3VsdCA9PiB7XG4gICAgICBjb25zdCBpdGVtID0gaW52ZW50b3J5LmZpbmQoKGVudHJ5KSA9PiBlbnRyeS5pZCA9PT0gaWQpO1xuICAgICAgaWYgKCFpdGVtIHx8ICFpc0VxdWlwcGFibGUoaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuIFwibm8tY2hhbmdlXCI7XG4gICAgICB9XG5cbiAgICAgIGlmIChpdGVtLnR5cGUgPT09IFwicmVsaWNcIikge1xuICAgICAgICBpZiAoIWl0ZW0uZXF1aXBwZWQgJiYgZXF1aXBwZWRSZWxpY0NvdW50ID49IE1BWF9FUVVJUFBFRF9SRUxJQ1MpIHtcbiAgICAgICAgICByZXR1cm4gXCJsaW1pdC1yZWFjaGVkXCI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgbmV4dEVxdWlwcGVkID0gIWl0ZW0uZXF1aXBwZWQ7XG4gICAgICBzZXRJbnZlbnRvcnlTYWZlKChwcmV2aW91cykgPT5cbiAgICAgICAgcHJldmlvdXMubWFwKChlbnRyeSkgPT5cbiAgICAgICAgICBlbnRyeS5pZCA9PT0gaWRcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIC4uLmVudHJ5LFxuICAgICAgICAgICAgICAgIGVxdWlwcGVkOiBuZXh0RXF1aXBwZWQsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogZW50cnlcbiAgICAgICAgKVxuICAgICAgKTtcblxuICAgICAgaWYgKG5leHRFcXVpcHBlZCkge1xuICAgICAgICBhd2FyZE9iZWRpZW5jZShpdGVtLnR5cGUgPT09IFwicGFudHlcIiA/IEVRVUlQX09CRURJRU5DRV9QQU5UWSA6IEVRVUlQX09CRURJRU5DRV9SRUxJQyk7XG4gICAgICAgIGFjdGl2YXRlQnVmZnNCeVNvdXJjZShpdGVtLm5hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVhY3RpdmF0ZUJ1ZmZzQnlTb3VyY2UoaXRlbS5uYW1lKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5leHRFcXVpcHBlZCA/IFwiZXF1aXBwZWRcIiA6IFwidW5lcXVpcHBlZFwiO1xuICAgIH0sXG4gICAgW2FjdGl2YXRlQnVmZnNCeVNvdXJjZSwgYXdhcmRPYmVkaWVuY2UsIGRlYWN0aXZhdGVCdWZmc0J5U291cmNlLCBlcXVpcHBlZFJlbGljQ291bnQsIGludmVudG9yeSwgc2V0SW52ZW50b3J5U2FmZV1cbiAgKTtcblxuICBjb25zdCB1bmVxdWlwQWxsT2ZUeXBlID0gdXNlQ2FsbGJhY2soXG4gICAgKHR5cGU6IEl0ZW1UeXBlKSA9PiB7XG4gICAgICBjb25zdCBhZmZlY3RlZE5hbWVzID0gaW52ZW50b3J5XG4gICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udHlwZSA9PT0gdHlwZSAmJiBpdGVtLmVxdWlwcGVkKVxuICAgICAgICAubWFwKChpdGVtKSA9PiBpdGVtLm5hbWUpO1xuICAgICAgc2V0SW52ZW50b3J5U2FmZSgocHJldmlvdXMpID0+XG4gICAgICAgIHByZXZpb3VzLm1hcCgoaXRlbSkgPT5cbiAgICAgICAgICBpdGVtLnR5cGUgPT09IHR5cGUgJiYgaXRlbS5lcXVpcHBlZCA/IHsgLi4uaXRlbSwgZXF1aXBwZWQ6IGZhbHNlIH0gOiBpdGVtXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgICBpZiAodHlwZSA9PT0gXCJyZWxpY1wiIHx8IHR5cGUgPT09IFwicGFudHlcIikge1xuICAgICAgICBhZmZlY3RlZE5hbWVzLmZvckVhY2goKG5hbWUpID0+IGRlYWN0aXZhdGVCdWZmc0J5U291cmNlKG5hbWUpKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtkZWFjdGl2YXRlQnVmZnNCeVNvdXJjZSwgaW52ZW50b3J5LCBzZXRJbnZlbnRvcnlTYWZlXVxuICApO1xuXG4gIGNvbnN0IGNvbnN1bWVJdGVtID0gdXNlQ2FsbGJhY2soXG4gICAgKGlkOiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBpbnZlbnRvcnkuZmluZCgoZW50cnkpID0+IGVudHJ5LmlkID09PSBpZCk7XG4gICAgICBpZiAoIWl0ZW0gfHwgaXRlbS5vd25lZCA8PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGFkanVzdE93bmVkKGlkLCAtMSk7XG4gICAgICBpZiAoaXRlbS50eXBlID09PSBcImNvbnN1bWFibGVcIikge1xuICAgICAgICB0cmlnZ2VyQnVmZkJ5U291cmNlKGl0ZW0ubmFtZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIFthZGp1c3RPd25lZCwgaW52ZW50b3J5LCB0cmlnZ2VyQnVmZkJ5U291cmNlXVxuICApO1xuXG4gIGNvbnN0IHJlcGxhY2VJbnZlbnRvcnkgPSB1c2VDYWxsYmFjayhcbiAgICAoaXRlbXM6IEludmVudG9yeUl0ZW1bXSkgPT4ge1xuICAgICAgc2V0SW52ZW50b3J5KGl0ZW1zLm1hcCgoZW50cnkpID0+IG5vcm1hbGlzZUljb24oeyAuLi5lbnRyeSB9KSkpO1xuICAgICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICBpZiAoIWlzRXF1aXBwYWJsZShpdGVtKSkgcmV0dXJuO1xuICAgICAgICBpZiAoaXRlbS5lcXVpcHBlZCkge1xuICAgICAgICAgIGFjdGl2YXRlQnVmZnNCeVNvdXJjZShpdGVtLm5hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlYWN0aXZhdGVCdWZmc0J5U291cmNlKGl0ZW0ubmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW2FjdGl2YXRlQnVmZnNCeVNvdXJjZSwgZGVhY3RpdmF0ZUJ1ZmZzQnlTb3VyY2UsIHNldEludmVudG9yeV1cbiAgKTtcblxuICBjb25zdCBjbGVhckludmVudG9yeSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBlcXVpcHBlZE5hbWVzID0gaW52ZW50b3J5XG4gICAgICAuZmlsdGVyKChpdGVtKSA9PiBpc0VxdWlwcGFibGUoaXRlbSkgJiYgaXRlbS5lcXVpcHBlZClcbiAgICAgIC5tYXAoKGl0ZW0pID0+IGl0ZW0ubmFtZSk7XG4gICAgc2V0SW52ZW50b3J5KGNsb25lRGVmYXVsdEludmVudG9yeSgpKTtcbiAgICBlcXVpcHBlZE5hbWVzLmZvckVhY2goKG5hbWUpID0+IGRlYWN0aXZhdGVCdWZmc0J5U291cmNlKG5hbWUpKTtcbiAgfSwgW2RlYWN0aXZhdGVCdWZmc0J5U291cmNlLCBpbnZlbnRvcnksIHNldEludmVudG9yeV0pO1xuXG4gIHJldHVybiB7XG4gICAgaW52ZW50b3J5LFxuICAgIGdyb3VwZWQsXG4gICAgbGFiZWxzOiBJVEVNX1RZUEVfTEFCRUxTLFxuICAgIHhwLFxuICAgIG9iZWRpZW5jZSxcbiAgICB0b2tlbnMsXG4gICAgZXF1aXBwZWRSZWxpY0NvdW50LFxuICAgIG1heFJlbGljczogTUFYX0VRVUlQUEVEX1JFTElDUyxcbiAgICBnYWluSXRlbSxcbiAgICBzZXRPd25lZCxcbiAgICBhZGp1c3RPd25lZCxcbiAgICB1cGRhdGVJdGVtLFxuICAgIGFkZE9yUmVwbGFjZUl0ZW0sXG4gICAgcmVtb3ZlSXRlbSxcbiAgICB0b2dnbGVFcXVpcCxcbiAgICB1bmVxdWlwQWxsT2ZUeXBlLFxuICAgIGNvbnN1bWVJdGVtLFxuICAgIHJlcGxhY2VJbnZlbnRvcnksXG4gICAgY2xlYXJJbnZlbnRvcnksXG4gICAgYXdhcmRYcCxcbiAgICBzcGVuZFhwLFxuICAgIGF3YXJkVG9rZW5zLFxuICAgIHNwZW5kVG9rZW5zLFxuICAgIGF3YXJkT2JlZGllbmNlLFxuICB9O1xufVxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlTWVtbyIsInVzZVBlcnNpc3RlbnRTdGF0ZSIsInVzZUJ1ZmZzIiwiY2xvbmVEZWZhdWx0SW52ZW50b3J5IiwiZ2V0RGVmYXVsdEl0ZW1UZW1wbGF0ZSIsImdldERlZmF1bHRJY29uIiwiSVRFTV9UWVBFX0xBQkVMUyIsIklURU1fVFlQRV9PUkRFUiIsImlzRXF1aXBwYWJsZSIsIk1BWF9FUVVJUFBFRF9SRUxJQ1MiLCJJVEVNX0FDUVVJUkVfWFAiLCJFUVVJUF9PQkVESUVOQ0VfUkVMSUMiLCJFUVVJUF9PQkVESUVOQ0VfUEFOVFkiLCJub3JtYWxpc2VJY29uIiwiaXRlbSIsImljb24iLCJ0cmltIiwibGVuZ3RoIiwidHlwZSIsInVzZUludmVudG9yeSIsImludmVudG9yeSIsInNldEludmVudG9yeSIsInhwIiwic2V0WHAiLCJvYmVkaWVuY2UiLCJzZXRPYmVkaWVuY2UiLCJ0b2tlbnMiLCJzZXRUb2tlbnMiLCJhcHBseUV2ZW50IiwiYWN0aXZhdGVCdWZmc0J5U291cmNlIiwiZGVhY3RpdmF0ZUJ1ZmZzQnlTb3VyY2UiLCJ0cmlnZ2VyQnVmZkJ5U291cmNlIiwiZXF1aXBwZWRSZWxpY0NvdW50IiwiZmlsdGVyIiwiZXF1aXBwZWQiLCJncm91cGVkIiwicmVkdWNlIiwiYWNjIiwic29ydCIsImEiLCJiIiwibmFtZSIsImxvY2FsZUNvbXBhcmUiLCJyZWxpYyIsInBhbnR5Iiwic2hhcmQiLCJjb25zdW1hYmxlIiwicXVlc3QiLCJlbnN1cmVJdGVtIiwiaWQiLCJ0ZW1wbGF0ZSIsImV4aXN0aW5nIiwiZmluZCIsImJhc2UiLCJkZXNjIiwib3duZWQiLCJzZXRJbnZlbnRvcnlTYWZlIiwidXBkYXRlciIsInByZXZpb3VzIiwibmV4dCIsIm1hcCIsImF3YXJkWHAiLCJhbW91bnQiLCJ0b3RhbCIsInByZXYiLCJzcGVuZFhwIiwiZGVkdWN0ZWQiLCJNYXRoIiwibWF4IiwiYXdhcmRPYmVkaWVuY2UiLCJhd2FyZFRva2VucyIsInZhbHVlIiwicm91bmQiLCJzcGVuZFRva2VucyIsImdhaW5JdGVtIiwiZW5zdXJlZCIsInNldE93bmVkIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJhZGp1c3RPd25lZCIsImRlbHRhIiwidXBkYXRlSXRlbSIsInBhdGNoIiwiYWRkT3JSZXBsYWNlSXRlbSIsIm5vcm1hbGlzZWQiLCJleGlzdHMiLCJzb21lIiwiZW50cnkiLCJyZW1vdmVJdGVtIiwidG9nZ2xlRXF1aXAiLCJuZXh0RXF1aXBwZWQiLCJ1bmVxdWlwQWxsT2ZUeXBlIiwiYWZmZWN0ZWROYW1lcyIsImZvckVhY2giLCJjb25zdW1lSXRlbSIsInJlcGxhY2VJbnZlbnRvcnkiLCJpdGVtcyIsImNsZWFySW52ZW50b3J5IiwiZXF1aXBwZWROYW1lcyIsImxhYmVscyIsIm1heFJlbGljcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useInventory.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useMap.ts":
/*!*****************************!*\
  !*** ./app/hooks/useMap.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useMap: () => (/* binding */ useMap)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _lib_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/map */ \"(ssr)/./app/lib/map.ts\");\n/* harmony import */ var _useInventory__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useInventory */ \"(ssr)/./app/hooks/useInventory.ts\");\n/* harmony import */ var _useShame__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useShame */ \"(ssr)/./app/hooks/useShame.ts\");\n/* harmony import */ var _useRitualsEngine__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useRitualsEngine */ \"(ssr)/./app/hooks/useRitualsEngine.ts\");\n/* harmony import */ var _useQuestlines__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./useQuestlines */ \"(ssr)/./app/hooks/useQuestlines.ts\");\n/* __next_internal_client_entry_do_not_use__ useMap auto */ \n\n\n\n\n\n\nfunction useMap() {\n    // Force use the updated coordinates immediately, no caching\n    const freshMapData = (0,_lib_map__WEBPACK_IMPORTED_MODULE_2__.cloneDefaultMap)();\n    const [mapData, setMapData] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)('map_v2', {\n        \"useMap.usePersistentState\": ()=>freshMapData\n    }[\"useMap.usePersistentState\"]);\n    const { awardXp } = (0,_useInventory__WEBPACK_IMPORTED_MODULE_3__.useInventory)();\n    const { shame } = (0,_useShame__WEBPACK_IMPORTED_MODULE_4__.useShame)();\n    const { logs: ritualLogs } = (0,_useRitualsEngine__WEBPACK_IMPORTED_MODULE_5__.useRitualsEngine)();\n    const { questlines } = (0,_useQuestlines__WEBPACK_IMPORTED_MODULE_6__.useQuestlines)();\n    const checkUnlockCondition = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMap.useCallback[checkUnlockCondition]\": (condition)=>{\n            switch(condition.type){\n                case 'shame':\n                    // This is a placeholder for shame level logic.\n                    // Let's assume total shame points / 100 is the level.\n                    const shameLevel = (shame.pantiesSniffed + shame.ritualsFailed + shame.dirtyTokensBurned) / 100;\n                    return shameLevel >= (condition.level ?? 999);\n                case 'ritual':\n                    return ritualLogs.some({\n                        \"useMap.useCallback[checkUnlockCondition]\": (log)=>log.ritualId === condition.id\n                    }[\"useMap.useCallback[checkUnlockCondition]\"]);\n                case 'quest':\n                    const quest = questlines.find({\n                        \"useMap.useCallback[checkUnlockCondition].quest\": (q)=>q.id === condition.id\n                    }[\"useMap.useCallback[checkUnlockCondition].quest\"]);\n                    return quest?.completed ?? false;\n                case 'item':\n                    // Placeholder for inventory check\n                    return false;\n                default:\n                    return false;\n            }\n        }\n    }[\"useMap.useCallback[checkUnlockCondition]\"], [\n        shame,\n        ritualLogs,\n        questlines\n    ]);\n    const unlockNode = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMap.useCallback[unlockNode]\": (nodeId)=>{\n            let nodeWasUnlocked = false;\n            setMapData({\n                \"useMap.useCallback[unlockNode]\": (prev)=>{\n                    const node = prev.nodes.find({\n                        \"useMap.useCallback[unlockNode].node\": (n)=>n.id === nodeId\n                    }[\"useMap.useCallback[unlockNode].node\"]);\n                    if (!node || node.unlocked) {\n                        return prev;\n                    }\n                    nodeWasUnlocked = true;\n                    const newNodes = prev.nodes.map({\n                        \"useMap.useCallback[unlockNode].newNodes\": (n)=>n.id === nodeId ? {\n                                ...n,\n                                unlocked: true\n                            } : n\n                    }[\"useMap.useCallback[unlockNode].newNodes\"]);\n                    const newLinks = prev.links.map({\n                        \"useMap.useCallback[unlockNode].newLinks\": (l)=>{\n                            if (l.from === nodeId) {\n                                // Check if the 'to' node is unlocked\n                                const toNode = newNodes.find({\n                                    \"useMap.useCallback[unlockNode].newLinks.toNode\": (n)=>n.id === l.to\n                                }[\"useMap.useCallback[unlockNode].newLinks.toNode\"]);\n                                if (toNode?.unlocked) {\n                                    return {\n                                        ...l,\n                                        locked: false\n                                    };\n                                }\n                            }\n                            if (l.to === nodeId) {\n                                // Check if the 'from' node is unlocked\n                                const fromNode = newNodes.find({\n                                    \"useMap.useCallback[unlockNode].newLinks.fromNode\": (n)=>n.id === l.from\n                                }[\"useMap.useCallback[unlockNode].newLinks.fromNode\"]);\n                                if (fromNode?.unlocked) {\n                                    return {\n                                        ...l,\n                                        locked: false\n                                    };\n                                }\n                            }\n                            return l;\n                        }\n                    }[\"useMap.useCallback[unlockNode].newLinks\"]);\n                    return {\n                        nodes: newNodes,\n                        links: newLinks\n                    };\n                }\n            }[\"useMap.useCallback[unlockNode]\"]);\n            if (nodeWasUnlocked) {\n                // Grant XP for unlocking a new node\n                awardXp(100);\n            }\n        }\n    }[\"useMap.useCallback[unlockNode]\"], [\n        setMapData,\n        awardXp\n    ]);\n    const attemptUnlockNode = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMap.useCallback[attemptUnlockNode]\": (nodeId)=>{\n            const node = mapData.nodes.find({\n                \"useMap.useCallback[attemptUnlockNode].node\": (n)=>n.id === nodeId\n            }[\"useMap.useCallback[attemptUnlockNode].node\"]);\n            if (!node || node.unlocked || !node.unlockCondition) {\n                return false;\n            }\n            if (checkUnlockCondition(node.unlockCondition)) {\n                unlockNode(nodeId);\n                return true;\n            }\n            return false;\n        }\n    }[\"useMap.useCallback[attemptUnlockNode]\"], [\n        mapData.nodes,\n        checkUnlockCondition,\n        unlockNode\n    ]);\n    const updateNodePosition = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useMap.useCallback[updateNodePosition]\": (nodeId, coords)=>{\n            setMapData({\n                \"useMap.useCallback[updateNodePosition]\": (prev)=>({\n                        ...prev,\n                        nodes: prev.nodes.map({\n                            \"useMap.useCallback[updateNodePosition]\": (n)=>n.id === nodeId ? {\n                                    ...n,\n                                    coords\n                                } : n\n                        }[\"useMap.useCallback[updateNodePosition]\"])\n                    })\n            }[\"useMap.useCallback[updateNodePosition]\"]);\n        }\n    }[\"useMap.useCallback[updateNodePosition]\"], [\n        setMapData\n    ]);\n    return {\n        mapData,\n        unlockNode,\n        attemptUnlockNode,\n        checkUnlockCondition,\n        updateNodePosition,\n        setMapData\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM1Qzs7WUFFQSxJQUFJUixpQkFBaUI7Z0JBQ25CLG9DQUFvQztnQkFDcEN2QixRQUFRO1lBQ1Y7UUFDRjt5Q0FDQTtRQUFDRDtRQUFZQztLQUFRO0lBR3ZCLE1BQU11QyxvQkFBb0JsRCxrREFBV0E7aURBQUMsQ0FBQ2lDO1lBQ3JDLE1BQU1HLE9BQU8zQixRQUFRNEIsS0FBSyxDQUFDUixJQUFJOzhEQUFDUyxDQUFBQSxJQUFLQSxFQUFFWCxFQUFFLEtBQUtNOztZQUM5QyxJQUFJLENBQUNHLFFBQVFBLEtBQUtHLFFBQVEsSUFBSSxDQUFDSCxLQUFLZSxlQUFlLEVBQUU7Z0JBQ25ELE9BQU87WUFDVDtZQUVBLElBQUluQyxxQkFBcUJvQixLQUFLZSxlQUFlLEdBQUc7Z0JBQzlDbkIsV0FBV0M7Z0JBQ1gsT0FBTztZQUNUO1lBRUEsT0FBTztRQUNUO2dEQUFHO1FBQUN4QixRQUFRNEIsS0FBSztRQUFFckI7UUFBc0JnQjtLQUFXO0lBRXBELE1BQU1vQixxQkFBcUJwRCxrREFBV0E7a0RBQUMsQ0FBQ2lDLFFBQWdCb0I7WUFDdEQzQzswREFBV3lCLENBQUFBLE9BQVM7d0JBQ2xCLEdBQUdBLElBQUk7d0JBQ1BFLE9BQU9GLEtBQUtFLEtBQUssQ0FBQ0ksR0FBRztzRUFBQ0gsQ0FBQUEsSUFBS0EsRUFBRVgsRUFBRSxLQUFLTSxTQUFTO29DQUFFLEdBQUdLLENBQUM7b0NBQUVlO2dDQUFPLElBQUlmOztvQkFDbEU7O1FBQ0Y7aURBQUc7UUFBQzVCO0tBQVc7SUFFZixPQUFPO1FBQ0xEO1FBQ0F1QjtRQUNBa0I7UUFDQWxDO1FBQ0FvQztRQUNBMUM7SUFDRjtBQUNGIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXGhvb2tzXFx1c2VNYXAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xyXG5cclxuaW1wb3J0IHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVzZVBlcnNpc3RlbnRTdGF0ZSB9IGZyb20gJy4vdXNlUGVyc2lzdGVudFN0YXRlJztcclxuaW1wb3J0IHsgY2xvbmVEZWZhdWx0TWFwLCB0eXBlIE1hcERhdGEsIHR5cGUgTWFwTm9kZSwgdHlwZSBVbmxvY2tDb25kaXRpb24gfSBmcm9tICcuLi9saWIvbWFwJztcclxuaW1wb3J0IHsgdXNlSW52ZW50b3J5IH0gZnJvbSAnLi91c2VJbnZlbnRvcnknO1xyXG5pbXBvcnQgeyB1c2VTaGFtZSB9IGZyb20gJy4vdXNlU2hhbWUnO1xyXG5pbXBvcnQgeyB1c2VSaXR1YWxzRW5naW5lIH0gZnJvbSAnLi91c2VSaXR1YWxzRW5naW5lJztcclxuaW1wb3J0IHsgdXNlUXVlc3RsaW5lcyB9IGZyb20gJy4vdXNlUXVlc3RsaW5lcyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlTWFwKCkge1xyXG4gIC8vIEZvcmNlIHVzZSB0aGUgdXBkYXRlZCBjb29yZGluYXRlcyBpbW1lZGlhdGVseSwgbm8gY2FjaGluZ1xyXG4gIGNvbnN0IGZyZXNoTWFwRGF0YSA9IGNsb25lRGVmYXVsdE1hcCgpO1xyXG4gIGNvbnN0IFttYXBEYXRhLCBzZXRNYXBEYXRhXSA9IHVzZVBlcnNpc3RlbnRTdGF0ZTxNYXBEYXRhPignbWFwX3YyJywgKCkgPT4gZnJlc2hNYXBEYXRhKTtcclxuICBjb25zdCB7IGF3YXJkWHAgfSA9IHVzZUludmVudG9yeSgpO1xyXG4gIGNvbnN0IHsgc2hhbWUgfSA9IHVzZVNoYW1lKCk7XHJcbiAgY29uc3QgeyBsb2dzOiByaXR1YWxMb2dzIH0gPSB1c2VSaXR1YWxzRW5naW5lKCk7XHJcbiAgY29uc3QgeyBxdWVzdGxpbmVzIH0gPSB1c2VRdWVzdGxpbmVzKCk7XHJcblxyXG4gIGNvbnN0IGNoZWNrVW5sb2NrQ29uZGl0aW9uID0gdXNlQ2FsbGJhY2soKGNvbmRpdGlvbjogVW5sb2NrQ29uZGl0aW9uKTogYm9vbGVhbiA9PiB7XHJcbiAgICBzd2l0Y2ggKGNvbmRpdGlvbi50eXBlKSB7XHJcbiAgICAgIGNhc2UgJ3NoYW1lJzpcclxuICAgICAgICAvLyBUaGlzIGlzIGEgcGxhY2Vob2xkZXIgZm9yIHNoYW1lIGxldmVsIGxvZ2ljLlxyXG4gICAgICAgIC8vIExldCdzIGFzc3VtZSB0b3RhbCBzaGFtZSBwb2ludHMgLyAxMDAgaXMgdGhlIGxldmVsLlxyXG4gICAgICAgIGNvbnN0IHNoYW1lTGV2ZWwgPSAoc2hhbWUucGFudGllc1NuaWZmZWQgKyBzaGFtZS5yaXR1YWxzRmFpbGVkICsgc2hhbWUuZGlydHlUb2tlbnNCdXJuZWQpIC8gMTAwO1xyXG4gICAgICAgIHJldHVybiBzaGFtZUxldmVsID49IChjb25kaXRpb24ubGV2ZWwgPz8gOTk5KTtcclxuICAgICAgY2FzZSAncml0dWFsJzpcclxuICAgICAgICByZXR1cm4gcml0dWFsTG9ncy5zb21lKGxvZyA9PiBsb2cucml0dWFsSWQgPT09IGNvbmRpdGlvbi5pZCk7XHJcbiAgICAgIGNhc2UgJ3F1ZXN0JzpcclxuICAgICAgICBjb25zdCBxdWVzdCA9IHF1ZXN0bGluZXMuZmluZChxID0+IHEuaWQgPT09IGNvbmRpdGlvbi5pZCk7XHJcbiAgICAgICAgcmV0dXJuIHF1ZXN0Py5jb21wbGV0ZWQgPz8gZmFsc2U7XHJcbiAgICAgIGNhc2UgJ2l0ZW0nOlxyXG4gICAgICAgIC8vIFBsYWNlaG9sZGVyIGZvciBpbnZlbnRvcnkgY2hlY2tcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH0sIFtzaGFtZSwgcml0dWFsTG9ncywgcXVlc3RsaW5lc10pO1xyXG5cclxuICBjb25zdCB1bmxvY2tOb2RlID0gdXNlQ2FsbGJhY2soXHJcbiAgICAobm9kZUlkOiBzdHJpbmcpID0+IHtcclxuICAgICAgbGV0IG5vZGVXYXNVbmxvY2tlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgc2V0TWFwRGF0YSgocHJldikgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5vZGUgPSBwcmV2Lm5vZGVzLmZpbmQoKG4pID0+IG4uaWQgPT09IG5vZGVJZCk7XHJcbiAgICAgICAgaWYgKCFub2RlIHx8IG5vZGUudW5sb2NrZWQpIHtcclxuICAgICAgICAgIHJldHVybiBwcmV2O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbm9kZVdhc1VubG9ja2VkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgY29uc3QgbmV3Tm9kZXMgPSBwcmV2Lm5vZGVzLm1hcCgobikgPT5cclxuICAgICAgICAgIG4uaWQgPT09IG5vZGVJZCA/IHsgLi4ubiwgdW5sb2NrZWQ6IHRydWUgfSA6IG5cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCBuZXdMaW5rcyA9IHByZXYubGlua3MubWFwKChsKSA9PiB7XHJcbiAgICAgICAgICBpZiAobC5mcm9tID09PSBub2RlSWQpIHtcclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlICd0bycgbm9kZSBpcyB1bmxvY2tlZFxyXG4gICAgICAgICAgICBjb25zdCB0b05vZGUgPSBuZXdOb2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gbC50byk7XHJcbiAgICAgICAgICAgIGlmICh0b05vZGU/LnVubG9ja2VkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ubCwgbG9ja2VkOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAobC50byA9PT0gbm9kZUlkKSB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSAnZnJvbScgbm9kZSBpcyB1bmxvY2tlZFxyXG4gICAgICAgICAgICBjb25zdCBmcm9tTm9kZSA9IG5ld05vZGVzLmZpbmQobiA9PiBuLmlkID09PSBsLmZyb20pO1xyXG4gICAgICAgICAgICBpZiAoZnJvbU5vZGU/LnVubG9ja2VkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ubCwgbG9ja2VkOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gbDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHsgbm9kZXM6IG5ld05vZGVzLCBsaW5rczogbmV3TGlua3MgfTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAobm9kZVdhc1VubG9ja2VkKSB7XHJcbiAgICAgICAgLy8gR3JhbnQgWFAgZm9yIHVubG9ja2luZyBhIG5ldyBub2RlXHJcbiAgICAgICAgYXdhcmRYcCgxMDApO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgW3NldE1hcERhdGEsIGF3YXJkWHBdXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgYXR0ZW1wdFVubG9ja05vZGUgPSB1c2VDYWxsYmFjaygobm9kZUlkOiBzdHJpbmcpOiBib29sZWFuID0+IHtcclxuICAgIGNvbnN0IG5vZGUgPSBtYXBEYXRhLm5vZGVzLmZpbmQobiA9PiBuLmlkID09PSBub2RlSWQpO1xyXG4gICAgaWYgKCFub2RlIHx8IG5vZGUudW5sb2NrZWQgfHwgIW5vZGUudW5sb2NrQ29uZGl0aW9uKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2hlY2tVbmxvY2tDb25kaXRpb24obm9kZS51bmxvY2tDb25kaXRpb24pKSB7XHJcbiAgICAgIHVubG9ja05vZGUobm9kZUlkKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH0sIFttYXBEYXRhLm5vZGVzLCBjaGVja1VubG9ja0NvbmRpdGlvbiwgdW5sb2NrTm9kZV0pO1xyXG5cclxuICBjb25zdCB1cGRhdGVOb2RlUG9zaXRpb24gPSB1c2VDYWxsYmFjaygobm9kZUlkOiBzdHJpbmcsIGNvb3JkczogW251bWJlciwgbnVtYmVyXSkgPT4ge1xyXG4gICAgc2V0TWFwRGF0YShwcmV2ID0+ICh7XHJcbiAgICAgIC4uLnByZXYsXHJcbiAgICAgIG5vZGVzOiBwcmV2Lm5vZGVzLm1hcChuID0+IG4uaWQgPT09IG5vZGVJZCA/IHsgLi4ubiwgY29vcmRzIH0gOiBuKVxyXG4gICAgfSkpO1xyXG4gIH0sIFtzZXRNYXBEYXRhXSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBtYXBEYXRhLFxyXG4gICAgdW5sb2NrTm9kZSxcclxuICAgIGF0dGVtcHRVbmxvY2tOb2RlLFxyXG4gICAgY2hlY2tVbmxvY2tDb25kaXRpb24sXHJcbiAgICB1cGRhdGVOb2RlUG9zaXRpb24sXHJcbiAgICBzZXRNYXBEYXRhLCAvLyBGb3IgQ29udHJvbCBOZXh1c1xyXG4gIH07XHJcbn1cclxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlUGVyc2lzdGVudFN0YXRlIiwiY2xvbmVEZWZhdWx0TWFwIiwidXNlSW52ZW50b3J5IiwidXNlU2hhbWUiLCJ1c2VSaXR1YWxzRW5naW5lIiwidXNlUXVlc3RsaW5lcyIsInVzZU1hcCIsImZyZXNoTWFwRGF0YSIsIm1hcERhdGEiLCJzZXRNYXBEYXRhIiwiYXdhcmRYcCIsInNoYW1lIiwibG9ncyIsInJpdHVhbExvZ3MiLCJxdWVzdGxpbmVzIiwiY2hlY2tVbmxvY2tDb25kaXRpb24iLCJjb25kaXRpb24iLCJ0eXBlIiwic2hhbWVMZXZlbCIsInBhbnRpZXNTbmlmZmVkIiwicml0dWFsc0ZhaWxlZCIsImRpcnR5VG9rZW5zQnVybmVkIiwibGV2ZWwiLCJzb21lIiwibG9nIiwicml0dWFsSWQiLCJpZCIsInF1ZXN0IiwiZmluZCIsInEiLCJjb21wbGV0ZWQiLCJ1bmxvY2tOb2RlIiwibm9kZUlkIiwibm9kZVdhc1VubG9ja2VkIiwicHJldiIsIm5vZGUiLCJub2RlcyIsIm4iLCJ1bmxvY2tlZCIsIm5ld05vZGVzIiwibWFwIiwibmV3TGlua3MiLCJsaW5rcyIsImwiLCJmcm9tIiwidG9Ob2RlIiwidG8iLCJsb2NrZWQiLCJmcm9tTm9kZSIsImF0dGVtcHRVbmxvY2tOb2RlIiwidW5sb2NrQ29uZGl0aW9uIiwidXBkYXRlTm9kZVBvc2l0aW9uIiwiY29vcmRzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useMap.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useMapAchievements.ts":
/*!*****************************************!*\
  !*** ./app/hooks/useMapAchievements.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useMapAchievements: () => (/* binding */ useMapAchievements)\n/* harmony export */ });\n/* harmony import */ var _useMap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useMap */ \"(ssr)/./app/hooks/useMap.ts\");\n/* harmony import */ var _useAchievements__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useAchievements */ \"(ssr)/./app/hooks/useAchievements.ts\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* __next_internal_client_entry_do_not_use__ useMapAchievements auto */ \n\n\nfunction useMapAchievements() {\n    const { mapData } = (0,_useMap__WEBPACK_IMPORTED_MODULE_0__.useMap)();\n    const { triggerAchievement } = (0,_useAchievements__WEBPACK_IMPORTED_MODULE_1__.useAchievements)();\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"useMapAchievements.useEffect\": ()=>{\n            const unlockedNodes = mapData.nodes.filter({\n                \"useMapAchievements.useEffect.unlockedNodes\": (n)=>n.unlocked\n            }[\"useMapAchievements.useEffect.unlockedNodes\"]);\n            unlockedNodes.forEach({\n                \"useMapAchievements.useEffect\": (node)=>{\n                    triggerAchievement('MAP_NODE_UNLOCKED', node.id);\n                }\n            }[\"useMapAchievements.useEffect\"]);\n            const allNodesUnlocked = mapData.nodes.every({\n                \"useMapAchievements.useEffect.allNodesUnlocked\": (n)=>n.unlocked\n            }[\"useMapAchievements.useEffect.allNodesUnlocked\"]);\n            if (allNodesUnlocked && mapData.nodes.length > 0) {\n                triggerAchievement('MAP_ALL_NODES_UNLOCKED');\n            }\n        }\n    }[\"useMapAchievements.useEffect\"], [\n        mapData.nodes,\n        triggerAchievement\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvaG9va3MvdXNlTWFwQWNoaWV2ZW1lbnRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O3dFQUVrQztBQUNrQjtBQUNsQjtBQUUzQixTQUFTRztJQUNkLE1BQU0sRUFBRUMsT0FBTyxFQUFFLEdBQUdKLCtDQUFNQTtJQUMxQixNQUFNLEVBQUVLLGtCQUFrQixFQUFFLEdBQUdKLGlFQUFlQTtJQUU5Q0MsZ0RBQVNBO3dDQUFDO1lBQ1IsTUFBTUksZ0JBQWdCRixRQUFRRyxLQUFLLENBQUNDLE1BQU07OERBQUNDLENBQUFBLElBQUtBLEVBQUVDLFFBQVE7O1lBRTFESixjQUFjSyxPQUFPO2dEQUFDQyxDQUFBQTtvQkFDcEJQLG1CQUFtQixxQkFBcUJPLEtBQUtDLEVBQUU7Z0JBQ2pEOztZQUVBLE1BQU1DLG1CQUFtQlYsUUFBUUcsS0FBSyxDQUFDUSxLQUFLO2lFQUFDTixDQUFBQSxJQUFLQSxFQUFFQyxRQUFROztZQUM1RCxJQUFJSSxvQkFBb0JWLFFBQVFHLEtBQUssQ0FBQ1MsTUFBTSxHQUFHLEdBQUc7Z0JBQ2hEWCxtQkFBbUI7WUFDckI7UUFDRjt1Q0FBRztRQUFDRCxRQUFRRyxLQUFLO1FBQUVGO0tBQW1CO0FBQ3hDIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXGhvb2tzXFx1c2VNYXBBY2hpZXZlbWVudHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xyXG5cclxuaW1wb3J0IHsgdXNlTWFwIH0gZnJvbSAnLi91c2VNYXAnO1xyXG5pbXBvcnQgeyB1c2VBY2hpZXZlbWVudHMgfSBmcm9tICcuL3VzZUFjaGlldmVtZW50cyc7XHJcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VNYXBBY2hpZXZlbWVudHMoKSB7XHJcbiAgY29uc3QgeyBtYXBEYXRhIH0gPSB1c2VNYXAoKTtcclxuICBjb25zdCB7IHRyaWdnZXJBY2hpZXZlbWVudCB9ID0gdXNlQWNoaWV2ZW1lbnRzKCk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCB1bmxvY2tlZE5vZGVzID0gbWFwRGF0YS5ub2Rlcy5maWx0ZXIobiA9PiBuLnVubG9ja2VkKTtcclxuXHJcbiAgICB1bmxvY2tlZE5vZGVzLmZvckVhY2gobm9kZSA9PiB7XHJcbiAgICAgIHRyaWdnZXJBY2hpZXZlbWVudCgnTUFQX05PREVfVU5MT0NLRUQnLCBub2RlLmlkKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGFsbE5vZGVzVW5sb2NrZWQgPSBtYXBEYXRhLm5vZGVzLmV2ZXJ5KG4gPT4gbi51bmxvY2tlZCk7XHJcbiAgICBpZiAoYWxsTm9kZXNVbmxvY2tlZCAmJiBtYXBEYXRhLm5vZGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgdHJpZ2dlckFjaGlldmVtZW50KCdNQVBfQUxMX05PREVTX1VOTE9DS0VEJyk7XHJcbiAgICB9XHJcbiAgfSwgW21hcERhdGEubm9kZXMsIHRyaWdnZXJBY2hpZXZlbWVudF0pO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJ1c2VNYXAiLCJ1c2VBY2hpZXZlbWVudHMiLCJ1c2VFZmZlY3QiLCJ1c2VNYXBBY2hpZXZlbWVudHMiLCJtYXBEYXRhIiwidHJpZ2dlckFjaGlldmVtZW50IiwidW5sb2NrZWROb2RlcyIsIm5vZGVzIiwiZmlsdGVyIiwibiIsInVubG9ja2VkIiwiZm9yRWFjaCIsIm5vZGUiLCJpZCIsImFsbE5vZGVzVW5sb2NrZWQiLCJldmVyeSIsImxlbmd0aCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useMapAchievements.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useNpcs.ts":
/*!******************************!*\
  !*** ./app/hooks/useNpcs.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   useNpcs: () => (/* binding */ useNpcs)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _lib_npcs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/npcs */ \"(ssr)/./app/lib/npcs.ts\");\n/* harmony import */ var _useInventory__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useInventory */ \"(ssr)/./app/hooks/useInventory.ts\");\n/* __next_internal_client_entry_do_not_use__ useNpcs,default auto */ \n\n\n\nconst NPC_ACHIEVEMENTS_KEY = 'npcAchievements';\nfunction useNpcs() {\n    const [npcs, setNpcs] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)('npcs', _lib_npcs__WEBPACK_IMPORTED_MODULE_2__.cloneDefaultNpcs);\n    const [achievements, setAchievements] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(NPC_ACHIEVEMENTS_KEY, {\n        \"useNpcs.usePersistentState\": ()=>[]\n    }[\"useNpcs.usePersistentState\"]);\n    const [titles, setTitles] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)('titlesUnlocked', {\n        \"useNpcs.usePersistentState\": ()=>[]\n    }[\"useNpcs.usePersistentState\"]);\n    const { awardXp } = (0,_useInventory__WEBPACK_IMPORTED_MODULE_3__.useInventory)();\n    const setSafe = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useNpcs.useCallback[setSafe]\": (updater)=>{\n            setNpcs({\n                \"useNpcs.useCallback[setSafe]\": (previous)=>updater(previous).map({\n                        \"useNpcs.useCallback[setSafe]\": (npc)=>(0,_lib_npcs__WEBPACK_IMPORTED_MODULE_2__.normaliseNpc)(npc)\n                    }[\"useNpcs.useCallback[setSafe]\"])\n            }[\"useNpcs.useCallback[setSafe]\"]);\n        }\n    }[\"useNpcs.useCallback[setSafe]\"], [\n        setNpcs\n    ]);\n    const addNpc = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useNpcs.useCallback[addNpc]\": (npc)=>{\n            setSafe({\n                \"useNpcs.useCallback[addNpc]\": (previous)=>{\n                    const exists = previous.some({\n                        \"useNpcs.useCallback[addNpc].exists\": (entry)=>entry.id === npc.id\n                    }[\"useNpcs.useCallback[addNpc].exists\"]);\n                    return exists ? previous.map({\n                        \"useNpcs.useCallback[addNpc]\": (entry)=>entry.id === npc.id ? (0,_lib_npcs__WEBPACK_IMPORTED_MODULE_2__.normaliseNpc)({\n                                ...entry,\n                                ...npc\n                            }) : entry\n                    }[\"useNpcs.useCallback[addNpc]\"]) : [\n                        ...previous,\n                        (0,_lib_npcs__WEBPACK_IMPORTED_MODULE_2__.normaliseNpc)(npc)\n                    ];\n                }\n            }[\"useNpcs.useCallback[addNpc]\"]);\n            awardXp(10);\n        }\n    }[\"useNpcs.useCallback[addNpc]\"], [\n        awardXp,\n        setSafe\n    ]);\n    const updateNpc = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useNpcs.useCallback[updateNpc]\": (npcId, updater)=>{\n            setSafe({\n                \"useNpcs.useCallback[updateNpc]\": (previous)=>previous.map({\n                        \"useNpcs.useCallback[updateNpc]\": (entry)=>entry.id === npcId ? (0,_lib_npcs__WEBPACK_IMPORTED_MODULE_2__.normaliseNpc)(updater({\n                                ...entry\n                            })) : entry\n                    }[\"useNpcs.useCallback[updateNpc]\"])\n            }[\"useNpcs.useCallback[updateNpc]\"]);\n        }\n    }[\"useNpcs.useCallback[updateNpc]\"], [\n        setSafe\n    ]);\n    const removeNpc = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useNpcs.useCallback[removeNpc]\": (npcId)=>{\n            setSafe({\n                \"useNpcs.useCallback[removeNpc]\": (previous)=>previous.filter({\n                        \"useNpcs.useCallback[removeNpc]\": (npc)=>npc.id !== npcId\n                    }[\"useNpcs.useCallback[removeNpc]\"])\n            }[\"useNpcs.useCallback[removeNpc]\"]);\n        }\n    }[\"useNpcs.useCallback[removeNpc]\"], [\n        setSafe\n    ]);\n    const ensureNpcByName = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useNpcs.useCallback[ensureNpcByName]\": (name, role = 'Friend')=>{\n            const existing = npcs.find({\n                \"useNpcs.useCallback[ensureNpcByName].existing\": (npc)=>npc.name.toLowerCase() === name.toLowerCase()\n            }[\"useNpcs.useCallback[ensureNpcByName].existing\"]);\n            if (existing) return existing;\n            const id = `npc-${Date.now().toString(36)}-${Math.random().toString(36).slice(2, 6)}`;\n            const newNpc = {\n                id,\n                name,\n                role,\n                dreamCount: 0,\n                trust: 30,\n                shame: 10,\n                bio: '',\n                dialogues: []\n            };\n            const normalised = (0,_lib_npcs__WEBPACK_IMPORTED_MODULE_2__.normaliseNpc)(newNpc);\n            setSafe({\n                \"useNpcs.useCallback[ensureNpcByName]\": (previous)=>[\n                        ...previous,\n                        normalised\n                    ]\n            }[\"useNpcs.useCallback[ensureNpcByName]\"]);\n            return normalised;\n        }\n    }[\"useNpcs.useCallback[ensureNpcByName]\"], [\n        npcs,\n        setSafe\n    ]);\n    const incrementDreamCount = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useNpcs.useCallback[incrementDreamCount]\": (npcId, amount = 1)=>{\n            if (amount === 0) return;\n            updateNpc(npcId, {\n                \"useNpcs.useCallback[incrementDreamCount]\": (npc)=>({\n                        ...npc,\n                        dreamCount: Math.max(0, npc.dreamCount + amount)\n                    })\n            }[\"useNpcs.useCallback[incrementDreamCount]\"]);\n        }\n    }[\"useNpcs.useCallback[incrementDreamCount]\"], [\n        updateNpc\n    ]);\n    const adjustTrust = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useNpcs.useCallback[adjustTrust]\": (npcId, delta)=>{\n            if (delta === 0) return;\n            updateNpc(npcId, {\n                \"useNpcs.useCallback[adjustTrust]\": (npc)=>{\n                    const trust = (0,_lib_npcs__WEBPACK_IMPORTED_MODULE_2__.clampMeter)(npc.trust + delta);\n                    if (trust >= 100 && !achievements.includes('Bonded Dreamer')) {\n                        setAchievements({\n                            \"useNpcs.useCallback[adjustTrust]\": (previous)=>previous.includes('Bonded Dreamer') ? previous : [\n                                    ...previous,\n                                    'Bonded Dreamer'\n                                ]\n                        }[\"useNpcs.useCallback[adjustTrust]\"]);\n                        awardXp(25);\n                    }\n                    return {\n                        ...npc,\n                        trust\n                    };\n                }\n            }[\"useNpcs.useCallback[adjustTrust]\"]);\n        }\n    }[\"useNpcs.useCallback[adjustTrust]\"], [\n        achievements,\n        awardXp,\n        setAchievements,\n        updateNpc\n    ]);\n    const adjustShame = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useNpcs.useCallback[adjustShame]\": (npcId, delta)=>{\n            if (delta === 0) return;\n            updateNpc(npcId, {\n                \"useNpcs.useCallback[adjustShame]\": (npc)=>{\n                    const shame = (0,_lib_npcs__WEBPACK_IMPORTED_MODULE_2__.clampMeter)(npc.shame + delta);\n                    if (shame >= 100 && !titles.includes('Worthless Toy')) {\n                        setTitles({\n                            \"useNpcs.useCallback[adjustShame]\": (previous)=>previous.includes('Worthless Toy') ? previous : [\n                                    ...previous,\n                                    'Worthless Toy'\n                                ]\n                        }[\"useNpcs.useCallback[adjustShame]\"]);\n                    }\n                    return {\n                        ...npc,\n                        shame\n                    };\n                }\n            }[\"useNpcs.useCallback[adjustShame]\"]);\n        }\n    }[\"useNpcs.useCallback[adjustShame]\"], [\n        setTitles,\n        titles,\n        updateNpc\n    ]);\n    const addDialogue = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useNpcs.useCallback[addDialogue]\": (npcId, text, date = new Date().toISOString())=>{\n            if (!text.trim()) return;\n            const dialogue = (0,_lib_npcs__WEBPACK_IMPORTED_MODULE_2__.normaliseDialogue)({\n                id: `dlg-${Date.now().toString(36)}-${Math.random().toString(36).slice(2, 6)}`,\n                text: text.trim(),\n                date\n            });\n            let shouldAwardBonus = false;\n            updateNpc(npcId, {\n                \"useNpcs.useCallback[addDialogue]\": (npc)=>{\n                    shouldAwardBonus = npc.dialogues.length === 0;\n                    return {\n                        ...npc,\n                        dialogues: [\n                            ...npc.dialogues,\n                            dialogue\n                        ]\n                    };\n                }\n            }[\"useNpcs.useCallback[addDialogue]\"]);\n            if (shouldAwardBonus) {\n                awardXp(20);\n            }\n        }\n    }[\"useNpcs.useCallback[addDialogue]\"], [\n        awardXp,\n        updateNpc\n    ]);\n    const resetNpcs = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useNpcs.useCallback[resetNpcs]\": ()=>{\n            setNpcs((0,_lib_npcs__WEBPACK_IMPORTED_MODULE_2__.cloneDefaultNpcs)());\n            setAchievements([]);\n        }\n    }[\"useNpcs.useCallback[resetNpcs]\"], [\n        setAchievements,\n        setNpcs\n    ]);\n    return {\n        npcs,\n        achievements,\n        addNpc,\n        updateNpc,\n        removeNpc,\n        ensureNpcByName,\n        incrementDreamCount,\n        adjustTrust,\n        adjustShame,\n        addDialogue,\n        resetNpcs\n    };\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useNpcs);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0lBR2hDLE1BQU04QixjQUFjeEQsa0RBQVdBOzRDQUM3QixDQUFDMkIsT0FBZThCLE1BQWNDLE9BQWUsSUFBSXRCLE9BQU91QixXQUFXLEVBQUU7WUFDbkUsSUFBSSxDQUFDRixLQUFLRyxJQUFJLElBQUk7WUFDbEIsTUFBTUMsV0FBMEJ6RCw0REFBaUJBLENBQUM7Z0JBQ2hEcUIsSUFBSSxDQUFDLElBQUksRUFBRVcsS0FBS0MsR0FBRyxHQUFHQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUVDLEtBQUtDLE1BQU0sR0FBR0YsUUFBUSxDQUFDLElBQUlHLEtBQUssQ0FBQyxHQUFHLElBQUk7Z0JBQzlFZ0IsTUFBTUEsS0FBS0csSUFBSTtnQkFDZkY7WUFDRjtZQUNBLElBQUlJLG1CQUFtQjtZQUN2QnBDLFVBQVVDO29EQUFPLENBQUNQO29CQUNoQjBDLG1CQUFtQjFDLElBQUkyQixTQUFTLENBQUNnQixNQUFNLEtBQUs7b0JBQzVDLE9BQU87d0JBQ0wsR0FBRzNDLEdBQUc7d0JBQ04yQixXQUFXOytCQUFJM0IsSUFBSTJCLFNBQVM7NEJBQUVjO3lCQUFTO29CQUN6QztnQkFDRjs7WUFDQSxJQUFJQyxrQkFBa0I7Z0JBQ3BCL0MsUUFBUTtZQUNWO1FBQ0Y7MkNBQ0E7UUFBQ0E7UUFBU1c7S0FBVTtJQUd0QixNQUFNc0MsWUFBWWhFLGtEQUFXQTswQ0FBQztZQUM1QlUsUUFBUVIsMkRBQWdCQTtZQUN4QlUsZ0JBQWdCLEVBQUU7UUFDcEI7eUNBQUc7UUFBQ0E7UUFBaUJGO0tBQVE7SUFFN0IsT0FBTztRQUNMRDtRQUNBRTtRQUNBVTtRQUNBSztRQUNBRTtRQUNBRTtRQUNBbUI7UUFDQUc7UUFDQUc7UUFDQUM7UUFDQVE7SUFDRjtBQUNGO0FBRUEsaUVBQWV4RCxPQUFPQSxFQUFDIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXGhvb2tzXFx1c2VOcGNzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuaW1wb3J0IHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VQZXJzaXN0ZW50U3RhdGUgfSBmcm9tICcuL3VzZVBlcnNpc3RlbnRTdGF0ZSc7XG5pbXBvcnQgeyBjbG9uZURlZmF1bHROcGNzLCBjbGFtcE1ldGVyLCBub3JtYWxpc2VEaWFsb2d1ZSwgbm9ybWFsaXNlTnBjLCB0eXBlIERpYWxvZ3VlRW50cnksIHR5cGUgTnBjIH0gZnJvbSAnLi4vbGliL25wY3MnO1xuaW1wb3J0IHsgdXNlSW52ZW50b3J5IH0gZnJvbSAnLi91c2VJbnZlbnRvcnknO1xuXG5jb25zdCBOUENfQUNISUVWRU1FTlRTX0tFWSA9ICducGNBY2hpZXZlbWVudHMnO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlTnBjcygpIHtcbiAgY29uc3QgW25wY3MsIHNldE5wY3NdID0gdXNlUGVyc2lzdGVudFN0YXRlPE5wY1tdPignbnBjcycsIGNsb25lRGVmYXVsdE5wY3MpO1xuICBjb25zdCBbYWNoaWV2ZW1lbnRzLCBzZXRBY2hpZXZlbWVudHNdID0gdXNlUGVyc2lzdGVudFN0YXRlPHN0cmluZ1tdPihOUENfQUNISUVWRU1FTlRTX0tFWSwgKCkgPT4gW10pO1xuICBjb25zdCBbdGl0bGVzLCBzZXRUaXRsZXNdID0gdXNlUGVyc2lzdGVudFN0YXRlPHN0cmluZ1tdPigndGl0bGVzVW5sb2NrZWQnLCAoKSA9PiBbXSk7XG4gIGNvbnN0IHsgYXdhcmRYcCB9ID0gdXNlSW52ZW50b3J5KCk7XG5cbiAgY29uc3Qgc2V0U2FmZSA9IHVzZUNhbGxiYWNrKFxuICAgICh1cGRhdGVyOiAocHJldmlvdXM6IE5wY1tdKSA9PiBOcGNbXSkgPT4ge1xuICAgICAgc2V0TnBjcygocHJldmlvdXMpID0+IHVwZGF0ZXIocHJldmlvdXMpLm1hcCgobnBjKSA9PiBub3JtYWxpc2VOcGMobnBjKSkpO1xuICAgIH0sXG4gICAgW3NldE5wY3NdXG4gICk7XG5cbiAgY29uc3QgYWRkTnBjID0gdXNlQ2FsbGJhY2soXG4gICAgKG5wYzogTnBjKSA9PiB7XG4gICAgICBzZXRTYWZlKChwcmV2aW91cykgPT4ge1xuICAgICAgICBjb25zdCBleGlzdHMgPSBwcmV2aW91cy5zb21lKChlbnRyeSkgPT4gZW50cnkuaWQgPT09IG5wYy5pZCk7XG4gICAgICAgIHJldHVybiBleGlzdHNcbiAgICAgICAgICA/IHByZXZpb3VzLm1hcCgoZW50cnkpID0+IChlbnRyeS5pZCA9PT0gbnBjLmlkID8gbm9ybWFsaXNlTnBjKHsgLi4uZW50cnksIC4uLm5wYyB9KSA6IGVudHJ5KSlcbiAgICAgICAgICA6IFsuLi5wcmV2aW91cywgbm9ybWFsaXNlTnBjKG5wYyldO1xuICAgICAgfSk7XG4gICAgICBhd2FyZFhwKDEwKTtcbiAgICB9LFxuICAgIFthd2FyZFhwLCBzZXRTYWZlXVxuICApO1xuXG4gIGNvbnN0IHVwZGF0ZU5wYyA9IHVzZUNhbGxiYWNrKFxuICAgIChucGNJZDogc3RyaW5nLCB1cGRhdGVyOiAobnBjOiBOcGMpID0+IE5wYykgPT4ge1xuICAgICAgc2V0U2FmZSgocHJldmlvdXMpID0+XG4gICAgICAgIHByZXZpb3VzLm1hcCgoZW50cnkpID0+IChlbnRyeS5pZCA9PT0gbnBjSWQgPyBub3JtYWxpc2VOcGModXBkYXRlcih7IC4uLmVudHJ5IH0pKSA6IGVudHJ5KSlcbiAgICAgICk7XG4gICAgfSxcbiAgICBbc2V0U2FmZV1cbiAgKTtcblxuICBjb25zdCByZW1vdmVOcGMgPSB1c2VDYWxsYmFjayhcbiAgICAobnBjSWQ6IHN0cmluZykgPT4ge1xuICAgICAgc2V0U2FmZSgocHJldmlvdXMpID0+IHByZXZpb3VzLmZpbHRlcigobnBjKSA9PiBucGMuaWQgIT09IG5wY0lkKSk7XG4gICAgfSxcbiAgICBbc2V0U2FmZV1cbiAgKTtcblxuICBjb25zdCBlbnN1cmVOcGNCeU5hbWUgPSB1c2VDYWxsYmFjayhcbiAgICAobmFtZTogc3RyaW5nLCByb2xlOiBzdHJpbmcgPSAnRnJpZW5kJykgPT4ge1xuICAgICAgY29uc3QgZXhpc3RpbmcgPSBucGNzLmZpbmQoKG5wYykgPT4gbnBjLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIGlmIChleGlzdGluZykgcmV0dXJuIGV4aXN0aW5nO1xuICAgICAgY29uc3QgaWQgPSBgbnBjLSR7RGF0ZS5ub3coKS50b1N0cmluZygzNil9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMiwgNil9YDtcbiAgICAgIGNvbnN0IG5ld05wYzogTnBjID0ge1xuICAgICAgICBpZCxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgcm9sZSxcbiAgICAgICAgZHJlYW1Db3VudDogMCxcbiAgICAgICAgdHJ1c3Q6IDMwLFxuICAgICAgICBzaGFtZTogMTAsXG4gICAgICAgIGJpbzogJycsXG4gICAgICAgIGRpYWxvZ3VlczogW10sXG4gICAgICB9O1xuICAgICAgY29uc3Qgbm9ybWFsaXNlZCA9IG5vcm1hbGlzZU5wYyhuZXdOcGMpO1xuICAgICAgc2V0U2FmZSgocHJldmlvdXMpID0+IFsuLi5wcmV2aW91cywgbm9ybWFsaXNlZF0pO1xuICAgICAgcmV0dXJuIG5vcm1hbGlzZWQ7XG4gICAgfSxcbiAgICBbbnBjcywgc2V0U2FmZV1cbiAgKTtcblxuICBjb25zdCBpbmNyZW1lbnREcmVhbUNvdW50ID0gdXNlQ2FsbGJhY2soXG4gICAgKG5wY0lkOiBzdHJpbmcsIGFtb3VudDogbnVtYmVyID0gMSkgPT4ge1xuICAgICAgaWYgKGFtb3VudCA9PT0gMCkgcmV0dXJuO1xuICAgICAgdXBkYXRlTnBjKG5wY0lkLCAobnBjKSA9PiAoe1xuICAgICAgICAuLi5ucGMsXG4gICAgICAgIGRyZWFtQ291bnQ6IE1hdGgubWF4KDAsIG5wYy5kcmVhbUNvdW50ICsgYW1vdW50KSxcbiAgICAgIH0pKTtcbiAgICB9LFxuICAgIFt1cGRhdGVOcGNdXG4gICk7XG5cbiAgY29uc3QgYWRqdXN0VHJ1c3QgPSB1c2VDYWxsYmFjayhcbiAgICAobnBjSWQ6IHN0cmluZywgZGVsdGE6IG51bWJlcikgPT4ge1xuICAgICAgaWYgKGRlbHRhID09PSAwKSByZXR1cm47XG4gICAgICB1cGRhdGVOcGMobnBjSWQsIChucGMpID0+IHtcbiAgICAgICAgY29uc3QgdHJ1c3QgPSBjbGFtcE1ldGVyKG5wYy50cnVzdCArIGRlbHRhKTtcbiAgICAgICAgaWYgKHRydXN0ID49IDEwMCAmJiAhYWNoaWV2ZW1lbnRzLmluY2x1ZGVzKCdCb25kZWQgRHJlYW1lcicpKSB7XG4gICAgICAgICAgc2V0QWNoaWV2ZW1lbnRzKChwcmV2aW91cykgPT4gKHByZXZpb3VzLmluY2x1ZGVzKCdCb25kZWQgRHJlYW1lcicpID8gcHJldmlvdXMgOiBbLi4ucHJldmlvdXMsICdCb25kZWQgRHJlYW1lciddKSk7XG4gICAgICAgICAgYXdhcmRYcCgyNSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgLi4ubnBjLCB0cnVzdCB9O1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBbYWNoaWV2ZW1lbnRzLCBhd2FyZFhwLCBzZXRBY2hpZXZlbWVudHMsIHVwZGF0ZU5wY11cbiAgKTtcblxuICBjb25zdCBhZGp1c3RTaGFtZSA9IHVzZUNhbGxiYWNrKFxuICAgIChucGNJZDogc3RyaW5nLCBkZWx0YTogbnVtYmVyKSA9PiB7XG4gICAgICBpZiAoZGVsdGEgPT09IDApIHJldHVybjtcbiAgICAgIHVwZGF0ZU5wYyhucGNJZCwgKG5wYykgPT4ge1xuICAgICAgICBjb25zdCBzaGFtZSA9IGNsYW1wTWV0ZXIobnBjLnNoYW1lICsgZGVsdGEpO1xuICAgICAgICBpZiAoc2hhbWUgPj0gMTAwICYmICF0aXRsZXMuaW5jbHVkZXMoJ1dvcnRobGVzcyBUb3knKSkge1xuICAgICAgICAgIHNldFRpdGxlcygocHJldmlvdXMpID0+IChwcmV2aW91cy5pbmNsdWRlcygnV29ydGhsZXNzIFRveScpID8gcHJldmlvdXMgOiBbLi4ucHJldmlvdXMsICdXb3J0aGxlc3MgVG95J10pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyAuLi5ucGMsIHNoYW1lIH07XG4gICAgICB9KTtcbiAgICB9LFxuICAgIFtzZXRUaXRsZXMsIHRpdGxlcywgdXBkYXRlTnBjXVxuICApO1xuXG4gIGNvbnN0IGFkZERpYWxvZ3VlID0gdXNlQ2FsbGJhY2soXG4gICAgKG5wY0lkOiBzdHJpbmcsIHRleHQ6IHN0cmluZywgZGF0ZTogc3RyaW5nID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpKSA9PiB7XG4gICAgICBpZiAoIXRleHQudHJpbSgpKSByZXR1cm47XG4gICAgICBjb25zdCBkaWFsb2d1ZTogRGlhbG9ndWVFbnRyeSA9IG5vcm1hbGlzZURpYWxvZ3VlKHtcbiAgICAgICAgaWQ6IGBkbGctJHtEYXRlLm5vdygpLnRvU3RyaW5nKDM2KX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyLCA2KX1gLFxuICAgICAgICB0ZXh0OiB0ZXh0LnRyaW0oKSxcbiAgICAgICAgZGF0ZSxcbiAgICAgIH0pO1xuICAgICAgbGV0IHNob3VsZEF3YXJkQm9udXMgPSBmYWxzZTtcbiAgICAgIHVwZGF0ZU5wYyhucGNJZCwgKG5wYykgPT4ge1xuICAgICAgICBzaG91bGRBd2FyZEJvbnVzID0gbnBjLmRpYWxvZ3Vlcy5sZW5ndGggPT09IDA7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ubnBjLFxuICAgICAgICAgIGRpYWxvZ3VlczogWy4uLm5wYy5kaWFsb2d1ZXMsIGRpYWxvZ3VlXSxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgICAgaWYgKHNob3VsZEF3YXJkQm9udXMpIHtcbiAgICAgICAgYXdhcmRYcCgyMCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbYXdhcmRYcCwgdXBkYXRlTnBjXVxuICApO1xuXG4gIGNvbnN0IHJlc2V0TnBjcyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXROcGNzKGNsb25lRGVmYXVsdE5wY3MoKSk7XG4gICAgc2V0QWNoaWV2ZW1lbnRzKFtdKTtcbiAgfSwgW3NldEFjaGlldmVtZW50cywgc2V0TnBjc10pO1xuXG4gIHJldHVybiB7XG4gICAgbnBjcyxcbiAgICBhY2hpZXZlbWVudHMsXG4gICAgYWRkTnBjLFxuICAgIHVwZGF0ZU5wYyxcbiAgICByZW1vdmVOcGMsXG4gICAgZW5zdXJlTnBjQnlOYW1lLFxuICAgIGluY3JlbWVudERyZWFtQ291bnQsXG4gICAgYWRqdXN0VHJ1c3QsXG4gICAgYWRqdXN0U2hhbWUsXG4gICAgYWRkRGlhbG9ndWUsXG4gICAgcmVzZXROcGNzLFxuICB9IGFzIGNvbnN0O1xufVxuXG5leHBvcnQgZGVmYXVsdCB1c2VOcGNzO1xuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlUGVyc2lzdGVudFN0YXRlIiwiY2xvbmVEZWZhdWx0TnBjcyIsImNsYW1wTWV0ZXIiLCJub3JtYWxpc2VEaWFsb2d1ZSIsIm5vcm1hbGlzZU5wYyIsInVzZUludmVudG9yeSIsIk5QQ19BQ0hJRVZFTUVOVFNfS0VZIiwidXNlTnBjcyIsIm5wY3MiLCJzZXROcGNzIiwiYWNoaWV2ZW1lbnRzIiwic2V0QWNoaWV2ZW1lbnRzIiwidGl0bGVzIiwic2V0VGl0bGVzIiwiYXdhcmRYcCIsInNldFNhZmUiLCJ1cGRhdGVyIiwicHJldmlvdXMiLCJtYXAiLCJucGMiLCJhZGROcGMiLCJleGlzdHMiLCJzb21lIiwiZW50cnkiLCJpZCIsInVwZGF0ZU5wYyIsIm5wY0lkIiwicmVtb3ZlTnBjIiwiZmlsdGVyIiwiZW5zdXJlTnBjQnlOYW1lIiwibmFtZSIsInJvbGUiLCJleGlzdGluZyIsImZpbmQiLCJ0b0xvd2VyQ2FzZSIsIkRhdGUiLCJub3ciLCJ0b1N0cmluZyIsIk1hdGgiLCJyYW5kb20iLCJzbGljZSIsIm5ld05wYyIsImRyZWFtQ291bnQiLCJ0cnVzdCIsInNoYW1lIiwiYmlvIiwiZGlhbG9ndWVzIiwibm9ybWFsaXNlZCIsImluY3JlbWVudERyZWFtQ291bnQiLCJhbW91bnQiLCJtYXgiLCJhZGp1c3RUcnVzdCIsImRlbHRhIiwiaW5jbHVkZXMiLCJhZGp1c3RTaGFtZSIsImFkZERpYWxvZ3VlIiwidGV4dCIsImRhdGUiLCJ0b0lTT1N0cmluZyIsInRyaW0iLCJkaWFsb2d1ZSIsInNob3VsZEF3YXJkQm9udXMiLCJsZW5ndGgiLCJyZXNldE5wY3MiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useNpcs.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/usePersistentState.ts":
/*!*****************************************!*\
  !*** ./app/hooks/usePersistentState.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   usePersistentState: () => (/* binding */ usePersistentState)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* __next_internal_client_entry_do_not_use__ usePersistentState auto */ \nfunction usePersistentState(key, initializer) {\n    const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        \"usePersistentState.useState\": ()=>{\n            if (true) {\n                return initializer();\n            }\n            try {\n                const raw = window.localStorage.getItem(key);\n                if (!raw) {\n                    const value = initializer();\n                    window.localStorage.setItem(key, JSON.stringify(value));\n                    return value;\n                }\n                return JSON.parse(raw);\n            } catch (error) {\n                console.warn(`[usePersistentState] failed to read ${key}`, error);\n                const value = initializer();\n                if (false) {}\n                return value;\n            }\n        }\n    }[\"usePersistentState.useState\"]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"usePersistentState.useEffect\": ()=>{\n            if (true) return;\n            try {\n                window.localStorage.setItem(key, JSON.stringify(state));\n            } catch (error) {\n                console.warn(`[usePersistentState] failed to persist ${key}`, error);\n            }\n        }\n    }[\"usePersistentState.useEffect\"], [\n        key,\n        state\n    ]);\n    return [\n        state,\n        setState\n    ];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvaG9va3MvdXNlUGVyc2lzdGVudFN0YXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozt3RUFFNEM7QUFJckMsU0FBU0UsbUJBQ2RDLEdBQVcsRUFDWEMsV0FBMkI7SUFFM0IsTUFBTSxDQUFDQyxPQUFPQyxTQUFTLEdBQUdMLCtDQUFRQTt1Q0FBSTtZQUNwQyxJQUFJLElBQTZCLEVBQUU7Z0JBQ2pDLE9BQU9HO1lBQ1Q7WUFDQSxJQUFJO2dCQUNGLE1BQU1HLE1BQU1DLE9BQU9DLFlBQVksQ0FBQ0MsT0FBTyxDQUFDUDtnQkFDeEMsSUFBSSxDQUFDSSxLQUFLO29CQUNSLE1BQU1JLFFBQVFQO29CQUNkSSxPQUFPQyxZQUFZLENBQUNHLE9BQU8sQ0FBQ1QsS0FBS1UsS0FBS0MsU0FBUyxDQUFDSDtvQkFDaEQsT0FBT0E7Z0JBQ1Q7Z0JBQ0EsT0FBT0UsS0FBS0UsS0FBSyxDQUFDUjtZQUNwQixFQUFFLE9BQU9TLE9BQU87Z0JBQ2RDLFFBQVFDLElBQUksQ0FBQyxDQUFDLG9DQUFvQyxFQUFFZixLQUFLLEVBQUVhO2dCQUMzRCxNQUFNTCxRQUFRUDtnQkFDZCxJQUFJLEtBQTZCLEVBQUUsRUFNbEM7Z0JBQ0QsT0FBT087WUFDVDtRQUNGOztJQUVBWCxnREFBU0E7d0NBQUM7WUFDUixJQUFJLElBQTZCLEVBQUU7WUFDbkMsSUFBSTtnQkFDRlEsT0FBT0MsWUFBWSxDQUFDRyxPQUFPLENBQUNULEtBQUtVLEtBQUtDLFNBQVMsQ0FBQ1Q7WUFDbEQsRUFBRSxPQUFPVyxPQUFPO2dCQUNkQyxRQUFRQyxJQUFJLENBQUMsQ0FBQyx1Q0FBdUMsRUFBRWYsS0FBSyxFQUFFYTtZQUNoRTtRQUNGO3VDQUFHO1FBQUNiO1FBQUtFO0tBQU07SUFFZixPQUFPO1FBQUNBO1FBQU9DO0tBQVM7QUFDMUIiLCJzb3VyY2VzIjpbIkM6XFxNb21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxcaG9va3NcXHVzZVBlcnNpc3RlbnRTdGF0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcblxudHlwZSBJbml0aWFsaXplcjxUPiA9ICgpID0+IFQ7XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VQZXJzaXN0ZW50U3RhdGU8VD4oXG4gIGtleTogc3RyaW5nLFxuICBpbml0aWFsaXplcjogSW5pdGlhbGl6ZXI8VD5cbikge1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlPFQ+KCgpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuIGluaXRpYWxpemVyKCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBjb25zdCByYXcgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICAgIGlmICghcmF3KSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gaW5pdGlhbGl6ZXIoKTtcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIEpTT04ucGFyc2UocmF3KSBhcyBUO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oYFt1c2VQZXJzaXN0ZW50U3RhdGVdIGZhaWxlZCB0byByZWFkICR7a2V5fWAsIGVycm9yKTtcbiAgICAgIGNvbnN0IHZhbHVlID0gaW5pdGlhbGl6ZXIoKTtcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgICAgICAgfSBjYXRjaCAod3JpdGVFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUud2FybihgW3VzZVBlcnNpc3RlbnRTdGF0ZV0gZmFpbGVkIHRvIHdyaXRlIGZhbGxiYWNrIGZvciAke2tleX1gLCB3cml0ZUVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xuICAgIHRyeSB7XG4gICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShzdGF0ZSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oYFt1c2VQZXJzaXN0ZW50U3RhdGVdIGZhaWxlZCB0byBwZXJzaXN0ICR7a2V5fWAsIGVycm9yKTtcbiAgICB9XG4gIH0sIFtrZXksIHN0YXRlXSk7XG5cbiAgcmV0dXJuIFtzdGF0ZSwgc2V0U3RhdGVdIGFzIGNvbnN0O1xufVxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVN0YXRlIiwidXNlUGVyc2lzdGVudFN0YXRlIiwia2V5IiwiaW5pdGlhbGl6ZXIiLCJzdGF0ZSIsInNldFN0YXRlIiwicmF3Iiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInZhbHVlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwYXJzZSIsImVycm9yIiwiY29uc29sZSIsIndhcm4iLCJ3cml0ZUVycm9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/usePersistentState.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/usePunishments.ts":
/*!*************************************!*\
  !*** ./app/hooks/usePunishments.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   usePunishments: () => (/* binding */ usePunishments)\n/* harmony export */ });\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _data_punishments_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../data/punishments.json */ \"(ssr)/./data/punishments.json\");\n/* __next_internal_client_entry_do_not_use__ usePunishments auto */ \n\nconst PUNISHMENTS_STORAGE_KEY = 'punishments';\nconst ACTIVE_PUNISHMENTS_STORAGE_KEY = 'activePunishments';\nfunction usePunishments() {\n    const [punishments, setPunishments] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_0__.usePersistentState)(PUNISHMENTS_STORAGE_KEY, {\n        \"usePunishments.usePersistentState\": ()=>_data_punishments_json__WEBPACK_IMPORTED_MODULE_1__\n    }[\"usePunishments.usePersistentState\"]);\n    const [activePunishments, setActivePunishments] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_0__.usePersistentState)(ACTIVE_PUNISHMENTS_STORAGE_KEY, {\n        \"usePunishments.usePersistentState\": ()=>[]\n    }[\"usePunishments.usePersistentState\"]);\n    const assignPunishment = (punishmentId)=>{\n        const punishment = punishments.find((p)=>p.id === punishmentId);\n        if (punishment && !activePunishments.some((p)=>p.id === punishmentId)) {\n            const newActivePunishment = {\n                ...punishment,\n                assignedAt: new Date().toISOString()\n            };\n            setActivePunishments((prev)=>[\n                    ...prev,\n                    newActivePunishment\n                ]);\n            return newActivePunishment;\n        }\n        return null;\n    };\n    const completePunishment = (punishmentId)=>{\n        setActivePunishments((prev)=>prev.filter((p)=>p.id !== punishmentId));\n    };\n    return {\n        punishments,\n        activePunishments,\n        assignPunishment,\n        completePunishment\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvaG9va3MvdXNlUHVuaXNobWVudHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O29FQUUwRDtBQUNHO0FBWTdELE1BQU1FLDBCQUEwQjtBQUNoQyxNQUFNQyxpQ0FBaUM7QUFFaEMsU0FBU0M7SUFDZCxNQUFNLENBQUNDLGFBQWFDLGVBQWUsR0FBR04sdUVBQWtCQSxDQUN0REU7NkNBQ0EsSUFBTUQsbURBQWtCQTs7SUFHMUIsTUFBTSxDQUFDTSxtQkFBbUJDLHFCQUFxQixHQUFHUix1RUFBa0JBLENBQ2xFRzs2Q0FDQSxJQUFNLEVBQUU7O0lBR1YsTUFBTU0sbUJBQW1CLENBQUNDO1FBQ3hCLE1BQU1DLGFBQWFOLFlBQVlPLElBQUksQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRUMsRUFBRSxLQUFLSjtRQUNsRCxJQUFJQyxjQUFjLENBQUNKLGtCQUFrQlEsSUFBSSxDQUFDRixDQUFBQSxJQUFLQSxFQUFFQyxFQUFFLEtBQUtKLGVBQWU7WUFDckUsTUFBTU0sc0JBQXdDO2dCQUM1QyxHQUFHTCxVQUFVO2dCQUNiTSxZQUFZLElBQUlDLE9BQU9DLFdBQVc7WUFDcEM7WUFDQVgscUJBQXFCWSxDQUFBQSxPQUFRO3VCQUFJQTtvQkFBTUo7aUJBQW9CO1lBQzNELE9BQU9BO1FBQ1Q7UUFDQSxPQUFPO0lBQ1Q7SUFFQSxNQUFNSyxxQkFBcUIsQ0FBQ1g7UUFDMUJGLHFCQUFxQlksQ0FBQUEsT0FBUUEsS0FBS0UsTUFBTSxDQUFDVCxDQUFBQSxJQUFLQSxFQUFFQyxFQUFFLEtBQUtKO0lBQ3pEO0lBRUEsT0FBTztRQUNMTDtRQUNBRTtRQUNBRTtRQUNBWTtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxNb21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxcaG9va3NcXHVzZVB1bmlzaG1lbnRzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcclxuXHJcbmltcG9ydCB7IHVzZVBlcnNpc3RlbnRTdGF0ZSB9IGZyb20gJy4vdXNlUGVyc2lzdGVudFN0YXRlJztcclxuaW1wb3J0IGRlZmF1bHRQdW5pc2htZW50cyBmcm9tICcuLi8uLi9kYXRhL3B1bmlzaG1lbnRzLmpzb24nO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQdW5pc2htZW50IHtcclxuICBpZDogc3RyaW5nO1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFjdGl2ZVB1bmlzaG1lbnQgZXh0ZW5kcyBQdW5pc2htZW50IHtcclxuICBhc3NpZ25lZEF0OiBzdHJpbmc7XHJcbn1cclxuXHJcbmNvbnN0IFBVTklTSE1FTlRTX1NUT1JBR0VfS0VZID0gJ3B1bmlzaG1lbnRzJztcclxuY29uc3QgQUNUSVZFX1BVTklTSE1FTlRTX1NUT1JBR0VfS0VZID0gJ2FjdGl2ZVB1bmlzaG1lbnRzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VQdW5pc2htZW50cygpIHtcclxuICBjb25zdCBbcHVuaXNobWVudHMsIHNldFB1bmlzaG1lbnRzXSA9IHVzZVBlcnNpc3RlbnRTdGF0ZTxQdW5pc2htZW50W10+KFxyXG4gICAgUFVOSVNITUVOVFNfU1RPUkFHRV9LRVksXHJcbiAgICAoKSA9PiBkZWZhdWx0UHVuaXNobWVudHNcclxuICApO1xyXG5cclxuICBjb25zdCBbYWN0aXZlUHVuaXNobWVudHMsIHNldEFjdGl2ZVB1bmlzaG1lbnRzXSA9IHVzZVBlcnNpc3RlbnRTdGF0ZTxBY3RpdmVQdW5pc2htZW50W10+KFxyXG4gICAgQUNUSVZFX1BVTklTSE1FTlRTX1NUT1JBR0VfS0VZLFxyXG4gICAgKCkgPT4gW11cclxuICApO1xyXG5cclxuICBjb25zdCBhc3NpZ25QdW5pc2htZW50ID0gKHB1bmlzaG1lbnRJZDogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCBwdW5pc2htZW50ID0gcHVuaXNobWVudHMuZmluZChwID0+IHAuaWQgPT09IHB1bmlzaG1lbnRJZCk7XHJcbiAgICBpZiAocHVuaXNobWVudCAmJiAhYWN0aXZlUHVuaXNobWVudHMuc29tZShwID0+IHAuaWQgPT09IHB1bmlzaG1lbnRJZCkpIHtcclxuICAgICAgY29uc3QgbmV3QWN0aXZlUHVuaXNobWVudDogQWN0aXZlUHVuaXNobWVudCA9IHtcclxuICAgICAgICAuLi5wdW5pc2htZW50LFxyXG4gICAgICAgIGFzc2lnbmVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgfTtcclxuICAgICAgc2V0QWN0aXZlUHVuaXNobWVudHMocHJldiA9PiBbLi4ucHJldiwgbmV3QWN0aXZlUHVuaXNobWVudF0pO1xyXG4gICAgICByZXR1cm4gbmV3QWN0aXZlUHVuaXNobWVudDtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNvbXBsZXRlUHVuaXNobWVudCA9IChwdW5pc2htZW50SWQ6IHN0cmluZykgPT4ge1xyXG4gICAgc2V0QWN0aXZlUHVuaXNobWVudHMocHJldiA9PiBwcmV2LmZpbHRlcihwID0+IHAuaWQgIT09IHB1bmlzaG1lbnRJZCkpO1xyXG4gIH07XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBwdW5pc2htZW50cyxcclxuICAgIGFjdGl2ZVB1bmlzaG1lbnRzLFxyXG4gICAgYXNzaWduUHVuaXNobWVudCxcclxuICAgIGNvbXBsZXRlUHVuaXNobWVudCxcclxuICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJ1c2VQZXJzaXN0ZW50U3RhdGUiLCJkZWZhdWx0UHVuaXNobWVudHMiLCJQVU5JU0hNRU5UU19TVE9SQUdFX0tFWSIsIkFDVElWRV9QVU5JU0hNRU5UU19TVE9SQUdFX0tFWSIsInVzZVB1bmlzaG1lbnRzIiwicHVuaXNobWVudHMiLCJzZXRQdW5pc2htZW50cyIsImFjdGl2ZVB1bmlzaG1lbnRzIiwic2V0QWN0aXZlUHVuaXNobWVudHMiLCJhc3NpZ25QdW5pc2htZW50IiwicHVuaXNobWVudElkIiwicHVuaXNobWVudCIsImZpbmQiLCJwIiwiaWQiLCJzb21lIiwibmV3QWN0aXZlUHVuaXNobWVudCIsImFzc2lnbmVkQXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJwcmV2IiwiY29tcGxldGVQdW5pc2htZW50IiwiZmlsdGVyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/usePunishments.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useQuestlines.ts":
/*!************************************!*\
  !*** ./app/hooks/useQuestlines.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useQuestlines: () => (/* binding */ useQuestlines)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _useBuffs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useBuffs */ \"(ssr)/./app/hooks/useBuffs.ts\");\n/* harmony import */ var _useInventory__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useInventory */ \"(ssr)/./app/hooks/useInventory.ts\");\n/* harmony import */ var _useCompanions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useCompanions */ \"(ssr)/./app/hooks/useCompanions.ts\");\n/* harmony import */ var _useNpcs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useNpcs */ \"(ssr)/./app/hooks/useNpcs.ts\");\n/* harmony import */ var _lib_questlines__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../lib/questlines */ \"(ssr)/./app/lib/questlines.ts\");\n/* __next_internal_client_entry_do_not_use__ useQuestlines auto */ \n\n\n\n\n\n\nconst TITLES_STORAGE_KEY = \"titlesUnlocked\";\nfunction cloneStage(stage) {\n    return {\n        ...stage,\n        branchChoices: stage.branchChoices?.map((branch)=>({\n                ...branch\n            })) ?? undefined\n    };\n}\nfunction useQuestlines() {\n    const [questlines, setQuestlines] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(\"questlines\", _lib_questlines__WEBPACK_IMPORTED_MODULE_6__.cloneDefaultQuestlines);\n    const [xp, setXp] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(\"xpTotal\", {\n        \"useQuestlines.usePersistentState\": ()=>3400\n    }[\"useQuestlines.usePersistentState\"]);\n    const [titles, setTitles] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(TITLES_STORAGE_KEY, {\n        \"useQuestlines.usePersistentState\": ()=>[]\n    }[\"useQuestlines.usePersistentState\"]);\n    const { applyEvent, triggerBuffBySource } = (0,_useBuffs__WEBPACK_IMPORTED_MODULE_2__.useBuffs)();\n    const { gainItem } = (0,_useInventory__WEBPACK_IMPORTED_MODULE_3__.useInventory)();\n    const { companions, gainXpForCompanions } = (0,_useCompanions__WEBPACK_IMPORTED_MODULE_4__.useCompanions)();\n    const { npcs, adjustTrust: adjustNpcTrust } = (0,_useNpcs__WEBPACK_IMPORTED_MODULE_5__.useNpcs)();\n    const awardTitle = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[awardTitle]\": (title)=>{\n            if (!title || title.trim().length === 0) return;\n            setTitles({\n                \"useQuestlines.useCallback[awardTitle]\": (prev)=>prev.includes(title) ? prev : [\n                        ...prev,\n                        title\n                    ]\n            }[\"useQuestlines.useCallback[awardTitle]\"]);\n        }\n    }[\"useQuestlines.useCallback[awardTitle]\"], [\n        setTitles\n    ]);\n    const awardReward = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[awardReward]\": (reward)=>{\n            if (!reward) return;\n            if (reward.xp && reward.xp > 0) {\n                const rewarded = applyEvent(\"xp\", reward.xp);\n                if (rewarded > 0) {\n                    setXp({\n                        \"useQuestlines.useCallback[awardReward]\": (prev)=>prev + rewarded\n                    }[\"useQuestlines.useCallback[awardReward]\"]);\n                }\n            }\n            if (reward.item) {\n                gainItem(reward.item, 1);\n            }\n            if (reward.buff) {\n                triggerBuffBySource(reward.buff);\n            }\n            if (reward.title) {\n                awardTitle(reward.title);\n            }\n        }\n    }[\"useQuestlines.useCallback[awardReward]\"], [\n        applyEvent,\n        awardTitle,\n        gainItem,\n        setXp,\n        triggerBuffBySource\n    ]);\n    const updateQuestline = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[updateQuestline]\": (questlineId, updater)=>{\n            setQuestlines({\n                \"useQuestlines.useCallback[updateQuestline]\": (previous)=>previous.map({\n                        \"useQuestlines.useCallback[updateQuestline]\": (questline)=>questline.id === questlineId ? updater((0,_lib_questlines__WEBPACK_IMPORTED_MODULE_6__.cloneQuestline)(questline)) : questline\n                    }[\"useQuestlines.useCallback[updateQuestline]\"])\n            }[\"useQuestlines.useCallback[updateQuestline]\"]);\n        }\n    }[\"useQuestlines.useCallback[updateQuestline]\"], [\n        setQuestlines\n    ]);\n    const mutateStage = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[mutateStage]\": (questlineId, stageId, mutator)=>{\n            updateQuestline(questlineId, {\n                \"useQuestlines.useCallback[mutateStage]\": (questline)=>({\n                        ...questline,\n                        stages: questline.stages.map({\n                            \"useQuestlines.useCallback[mutateStage]\": (stage)=>stage.id === stageId ? mutator(cloneStage(stage)) : stage\n                        }[\"useQuestlines.useCallback[mutateStage]\"])\n                    })\n            }[\"useQuestlines.useCallback[mutateStage]\"]);\n        }\n    }[\"useQuestlines.useCallback[mutateStage]\"], [\n        updateQuestline\n    ]);\n    const completeStage = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[completeStage]\": (questlineId, stageId, branchId)=>{\n            let completion = \"completed\";\n            setQuestlines({\n                \"useQuestlines.useCallback[completeStage]\": (previous)=>previous.map({\n                        \"useQuestlines.useCallback[completeStage]\": (questline)=>{\n                            if (questline.id !== questlineId) {\n                                return questline;\n                            }\n                            const working = (0,_lib_questlines__WEBPACK_IMPORTED_MODULE_6__.cloneQuestline)(questline);\n                            const located = (0,_lib_questlines__WEBPACK_IMPORTED_MODULE_6__.findStage)(working, stageId);\n                            if (!located) {\n                                return questline;\n                            }\n                            const { stage, index } = located;\n                            if (stage.completed) {\n                                completion = \"already-completed\";\n                                return questline;\n                            }\n                            if (stage.branchChoices && stage.branchChoices.length > 0) {\n                                const chosen = branchId ?? stage.chosenBranchId ?? undefined;\n                                if (!chosen) {\n                                    completion = \"branch-required\";\n                                    return questline;\n                                }\n                                stage.chosenBranchId = chosen;\n                                const branch = stage.branchChoices.find({\n                                    \"useQuestlines.useCallback[completeStage].branch\": (option)=>option.id === chosen\n                                }[\"useQuestlines.useCallback[completeStage].branch\"]);\n                                if (branch?.reward) {\n                                    awardReward(branch.reward);\n                                    if (branch.reward.xp) {\n                                        gainXpForCompanions(\"quest\", branch.reward.xp);\n                                    }\n                                }\n                            }\n                            stage.completed = true;\n                            const stageReward = {\n                                xp: stage.xp,\n                                ...stage.reward\n                            };\n                            awardReward(stageReward);\n                            if (stageReward.xp) {\n                                gainXpForCompanions(\"quest\", stageReward.xp);\n                            }\n                            const stageText = `${stage.title ?? ''} ${stage.description ?? ''} ${questline.name ?? ''}`.toLowerCase();\n                            npcs.forEach({\n                                \"useQuestlines.useCallback[completeStage]\": (npc)=>{\n                                    if (stageText.includes(npc.name.toLowerCase())) {\n                                        adjustNpcTrust(npc.id, 5);\n                                    }\n                                }\n                            }[\"useQuestlines.useCallback[completeStage]\"]);\n                            working.stages[index] = stage;\n                            if ((0,_lib_questlines__WEBPACK_IMPORTED_MODULE_6__.isQuestlineComplete)(working)) {\n                                working.completed = true;\n                                if (working.reward) {\n                                    awardReward(working.reward);\n                                    if (working.reward.xp) {\n                                        gainXpForCompanions(\"quest\", working.reward.xp);\n                                    }\n                                }\n                                completion = \"questline-completed\";\n                            }\n                            return working;\n                        }\n                    }[\"useQuestlines.useCallback[completeStage]\"])\n            }[\"useQuestlines.useCallback[completeStage]\"]);\n            return completion;\n        }\n    }[\"useQuestlines.useCallback[completeStage]\"], [\n        adjustNpcTrust,\n        awardReward,\n        gainXpForCompanions,\n        npcs,\n        setQuestlines\n    ]);\n    const chooseBranch = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[chooseBranch]\": (questlineId, stageId, branchId)=>{\n            mutateStage(questlineId, stageId, {\n                \"useQuestlines.useCallback[chooseBranch]\": (stage)=>({\n                        ...stage,\n                        chosenBranchId: branchId\n                    })\n            }[\"useQuestlines.useCallback[chooseBranch]\"]);\n        }\n    }[\"useQuestlines.useCallback[chooseBranch]\"], [\n        mutateStage\n    ]);\n    const resetQuestline = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[resetQuestline]\": (questlineId)=>{\n            updateQuestline(questlineId, {\n                \"useQuestlines.useCallback[resetQuestline]\": (questline)=>({\n                        ...questline,\n                        completed: false,\n                        stages: questline.stages.map({\n                            \"useQuestlines.useCallback[resetQuestline]\": (stage)=>({\n                                    ...stage,\n                                    completed: false,\n                                    chosenBranchId: stage.branchChoices ? null : stage.chosenBranchId\n                                })\n                        }[\"useQuestlines.useCallback[resetQuestline]\"])\n                    })\n            }[\"useQuestlines.useCallback[resetQuestline]\"]);\n        }\n    }[\"useQuestlines.useCallback[resetQuestline]\"], [\n        updateQuestline\n    ]);\n    const addQuestline = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[addQuestline]\": (questline)=>{\n            setQuestlines({\n                \"useQuestlines.useCallback[addQuestline]\": (previous)=>[\n                        ...previous,\n                        (0,_lib_questlines__WEBPACK_IMPORTED_MODULE_6__.cloneQuestline)(questline)\n                    ]\n            }[\"useQuestlines.useCallback[addQuestline]\"]);\n        }\n    }[\"useQuestlines.useCallback[addQuestline]\"], [\n        setQuestlines\n    ]);\n    const removeQuestline = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[removeQuestline]\": (questlineId)=>{\n            setQuestlines({\n                \"useQuestlines.useCallback[removeQuestline]\": (previous)=>previous.filter({\n                        \"useQuestlines.useCallback[removeQuestline]\": (questline)=>questline.id !== questlineId\n                    }[\"useQuestlines.useCallback[removeQuestline]\"])\n            }[\"useQuestlines.useCallback[removeQuestline]\"]);\n        }\n    }[\"useQuestlines.useCallback[removeQuestline]\"], [\n        setQuestlines\n    ]);\n    const addStage = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[addStage]\": (questlineId, stage)=>{\n            updateQuestline(questlineId, {\n                \"useQuestlines.useCallback[addStage]\": (questline)=>({\n                        ...questline,\n                        stages: [\n                            ...questline.stages,\n                            cloneStage(stage)\n                        ]\n                    })\n            }[\"useQuestlines.useCallback[addStage]\"]);\n        }\n    }[\"useQuestlines.useCallback[addStage]\"], [\n        updateQuestline\n    ]);\n    const updateStageFields = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[updateStageFields]\": (questlineId, stageId, patch)=>{\n            mutateStage(questlineId, stageId, {\n                \"useQuestlines.useCallback[updateStageFields]\": (stage)=>({\n                        ...stage,\n                        ...patch\n                    })\n            }[\"useQuestlines.useCallback[updateStageFields]\"]);\n        }\n    }[\"useQuestlines.useCallback[updateStageFields]\"], [\n        mutateStage\n    ]);\n    const removeStage = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useQuestlines.useCallback[removeStage]\": (questlineId, stageId)=>{\n            updateQuestline(questlineId, {\n                \"useQuestlines.useCallback[removeStage]\": (questline)=>({\n                        ...questline,\n                        stages: questline.stages.filter({\n                            \"useQuestlines.useCallback[removeStage]\": (stage)=>stage.id !== stageId\n                        }[\"useQuestlines.useCallback[removeStage]\"])\n                    })\n            }[\"useQuestlines.useCallback[removeStage]\"]);\n        }\n    }[\"useQuestlines.useCallback[removeStage]\"], [\n        updateQuestline\n    ]);\n    const questlineSummaries = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useQuestlines.useMemo[questlineSummaries]\": ()=>questlines.map({\n                \"useQuestlines.useMemo[questlineSummaries]\": (questline)=>({\n                        questline,\n                        progress: (0,_lib_questlines__WEBPACK_IMPORTED_MODULE_6__.getQuestlineProgress)(questline),\n                        activeStage: (0,_lib_questlines__WEBPACK_IMPORTED_MODULE_6__.getActiveStage)(questline)\n                    })\n            }[\"useQuestlines.useMemo[questlineSummaries]\"])\n    }[\"useQuestlines.useMemo[questlineSummaries]\"], [\n        questlines\n    ]);\n    return {\n        questlines,\n        questlineSummaries,\n        completeStage,\n        chooseBranch,\n        resetQuestline,\n        addQuestline,\n        updateQuestline,\n        removeQuestline,\n        addStage,\n        updateStage: updateStageFields,\n        removeStage,\n        mutateStage\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzNDLEdBQUdBLFNBQVM7d0JBQ1pLLFFBQVFMLFVBQVVLLE1BQU0sQ0FBQ3VCLE1BQU07c0VBQUMsQ0FBQy9ELFFBQVVBLE1BQU1vQyxFQUFFLEtBQUtFOztvQkFDMUQ7O1FBQ0Y7aURBQ0E7UUFBQ1A7S0FBZ0I7SUFHbkIsTUFBTXFDLHFCQUFxQmxGLDhDQUFPQTtxREFDaEMsSUFDRW9CLFdBQVdKLEdBQUc7NkRBQUMsQ0FBQ2lDLFlBQWU7d0JBQzdCQTt3QkFDQWtDLFVBQVV6RSxxRUFBb0JBLENBQUN1Qzt3QkFDL0JtQyxhQUFhM0UsK0RBQWNBLENBQUN3QztvQkFDOUI7O29EQUNGO1FBQUM3QjtLQUFXO0lBR2QsT0FBTztRQUNMQTtRQUNBOEQ7UUFDQTNCO1FBQ0FrQjtRQUNBQztRQUNBQztRQUNBOUI7UUFDQStCO1FBQ0FFO1FBQ0FPLGFBQWFOO1FBQ2JFO1FBQ0E5QjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxNb21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxcaG9va3NcXHVzZVF1ZXN0bGluZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlUGVyc2lzdGVudFN0YXRlIH0gZnJvbSBcIi4vdXNlUGVyc2lzdGVudFN0YXRlXCI7XG5pbXBvcnQgeyB1c2VCdWZmcyB9IGZyb20gXCIuL3VzZUJ1ZmZzXCI7XG5pbXBvcnQgeyB1c2VJbnZlbnRvcnkgfSBmcm9tIFwiLi91c2VJbnZlbnRvcnlcIjtcbmltcG9ydCB7IHVzZUNvbXBhbmlvbnMgfSBmcm9tIFwiLi91c2VDb21wYW5pb25zXCI7XG5pbXBvcnQgeyB1c2VOcGNzIH0gZnJvbSBcIi4vdXNlTnBjc1wiO1xuaW1wb3J0IHtcbiAgY2xvbmVEZWZhdWx0UXVlc3RsaW5lcyxcbiAgY2xvbmVRdWVzdGxpbmUsXG4gIGZpbmRTdGFnZSxcbiAgZ2V0QWN0aXZlU3RhZ2UsXG4gIGdldFF1ZXN0bGluZVByb2dyZXNzLFxuICBpc1F1ZXN0bGluZUNvbXBsZXRlLFxuICB0eXBlIFF1ZXN0QnJhbmNoLFxuICB0eXBlIFF1ZXN0UmV3YXJkLFxuICB0eXBlIFF1ZXN0U3RhZ2UsXG4gIHR5cGUgUXVlc3RsaW5lLFxufSBmcm9tIFwiLi4vbGliL3F1ZXN0bGluZXNcIjtcblxuZXhwb3J0IHR5cGUgU3RhZ2VDb21wbGV0aW9uUmVzdWx0ID1cbiAgfCBcImNvbXBsZXRlZFwiXG4gIHwgXCJhbHJlYWR5LWNvbXBsZXRlZFwiXG4gIHwgXCJicmFuY2gtcmVxdWlyZWRcIlxuICB8IFwicXVlc3RsaW5lLWNvbXBsZXRlZFwiO1xuXG5jb25zdCBUSVRMRVNfU1RPUkFHRV9LRVkgPSBcInRpdGxlc1VubG9ja2VkXCI7XG5cbmZ1bmN0aW9uIGNsb25lU3RhZ2Uoc3RhZ2U6IFF1ZXN0U3RhZ2UpOiBRdWVzdFN0YWdlIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5zdGFnZSxcbiAgICBicmFuY2hDaG9pY2VzOiBzdGFnZS5icmFuY2hDaG9pY2VzPy5tYXAoKGJyYW5jaCkgPT4gKHsgLi4uYnJhbmNoIH0pKSA/PyB1bmRlZmluZWQsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VRdWVzdGxpbmVzKCkge1xuICBjb25zdCBbcXVlc3RsaW5lcywgc2V0UXVlc3RsaW5lc10gPSB1c2VQZXJzaXN0ZW50U3RhdGU8UXVlc3RsaW5lW10+KFxuICAgIFwicXVlc3RsaW5lc1wiLFxuICAgIGNsb25lRGVmYXVsdFF1ZXN0bGluZXNcbiAgKTtcbiAgY29uc3QgW3hwLCBzZXRYcF0gPSB1c2VQZXJzaXN0ZW50U3RhdGU8bnVtYmVyPihcInhwVG90YWxcIiwgKCkgPT4gMzQwMCk7XG4gIGNvbnN0IFt0aXRsZXMsIHNldFRpdGxlc10gPSB1c2VQZXJzaXN0ZW50U3RhdGU8c3RyaW5nW10+KFRJVExFU19TVE9SQUdFX0tFWSwgKCkgPT4gW10pO1xuICBjb25zdCB7IGFwcGx5RXZlbnQsIHRyaWdnZXJCdWZmQnlTb3VyY2UgfSA9IHVzZUJ1ZmZzKCk7XG4gIGNvbnN0IHsgZ2Fpbkl0ZW0gfSA9IHVzZUludmVudG9yeSgpO1xuICBjb25zdCB7IGNvbXBhbmlvbnMsIGdhaW5YcEZvckNvbXBhbmlvbnMgfSA9IHVzZUNvbXBhbmlvbnMoKTtcbiAgY29uc3QgeyBucGNzLCBhZGp1c3RUcnVzdDogYWRqdXN0TnBjVHJ1c3QgfSA9IHVzZU5wY3MoKTtcblxuICBjb25zdCBhd2FyZFRpdGxlID0gdXNlQ2FsbGJhY2soXG4gICAgKHRpdGxlPzogc3RyaW5nKSA9PiB7XG4gICAgICBpZiAoIXRpdGxlIHx8IHRpdGxlLnRyaW0oKS5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICAgIHNldFRpdGxlcygocHJldikgPT4gKHByZXYuaW5jbHVkZXModGl0bGUpID8gcHJldiA6IFsuLi5wcmV2LCB0aXRsZV0pKTtcbiAgICB9LFxuICAgIFtzZXRUaXRsZXNdXG4gICk7XG5cbiAgY29uc3QgYXdhcmRSZXdhcmQgPSB1c2VDYWxsYmFjayhcbiAgICAocmV3YXJkPzogUXVlc3RSZXdhcmQpID0+IHtcbiAgICAgIGlmICghcmV3YXJkKSByZXR1cm47XG4gICAgICBpZiAocmV3YXJkLnhwICYmIHJld2FyZC54cCA+IDApIHtcbiAgICAgICAgY29uc3QgcmV3YXJkZWQgPSBhcHBseUV2ZW50KFwieHBcIiwgcmV3YXJkLnhwKTtcbiAgICAgICAgaWYgKHJld2FyZGVkID4gMCkge1xuICAgICAgICAgIHNldFhwKChwcmV2KSA9PiBwcmV2ICsgcmV3YXJkZWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocmV3YXJkLml0ZW0pIHtcbiAgICAgICAgZ2Fpbkl0ZW0ocmV3YXJkLml0ZW0sIDEpO1xuICAgICAgfVxuICAgICAgaWYgKHJld2FyZC5idWZmKSB7XG4gICAgICAgIHRyaWdnZXJCdWZmQnlTb3VyY2UocmV3YXJkLmJ1ZmYpO1xuICAgICAgfVxuICAgICAgaWYgKHJld2FyZC50aXRsZSkge1xuICAgICAgICBhd2FyZFRpdGxlKHJld2FyZC50aXRsZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbYXBwbHlFdmVudCwgYXdhcmRUaXRsZSwgZ2Fpbkl0ZW0sIHNldFhwLCB0cmlnZ2VyQnVmZkJ5U291cmNlXVxuICApO1xuXG4gIGNvbnN0IHVwZGF0ZVF1ZXN0bGluZSA9IHVzZUNhbGxiYWNrKFxuICAgIChxdWVzdGxpbmVJZDogc3RyaW5nLCB1cGRhdGVyOiAocXVlc3RsaW5lOiBRdWVzdGxpbmUpID0+IFF1ZXN0bGluZSkgPT4ge1xuICAgICAgc2V0UXVlc3RsaW5lcygocHJldmlvdXMpID0+XG4gICAgICAgIHByZXZpb3VzLm1hcCgocXVlc3RsaW5lKSA9PlxuICAgICAgICAgIHF1ZXN0bGluZS5pZCA9PT0gcXVlc3RsaW5lSWQgPyB1cGRhdGVyKGNsb25lUXVlc3RsaW5lKHF1ZXN0bGluZSkpIDogcXVlc3RsaW5lXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfSxcbiAgICBbc2V0UXVlc3RsaW5lc11cbiAgKTtcblxuICBjb25zdCBtdXRhdGVTdGFnZSA9IHVzZUNhbGxiYWNrKFxuICAgIChcbiAgICAgIHF1ZXN0bGluZUlkOiBzdHJpbmcsXG4gICAgICBzdGFnZUlkOiBzdHJpbmcsXG4gICAgICBtdXRhdG9yOiAoc3RhZ2U6IFF1ZXN0U3RhZ2UpID0+IFF1ZXN0U3RhZ2VcbiAgICApID0+IHtcbiAgICAgIHVwZGF0ZVF1ZXN0bGluZShxdWVzdGxpbmVJZCwgKHF1ZXN0bGluZSkgPT4gKHtcbiAgICAgICAgLi4ucXVlc3RsaW5lLFxuICAgICAgICBzdGFnZXM6IHF1ZXN0bGluZS5zdGFnZXMubWFwKChzdGFnZSkgPT5cbiAgICAgICAgICBzdGFnZS5pZCA9PT0gc3RhZ2VJZCA/IG11dGF0b3IoY2xvbmVTdGFnZShzdGFnZSkpIDogc3RhZ2VcbiAgICAgICAgKSxcbiAgICAgIH0pKTtcbiAgICB9LFxuICAgIFt1cGRhdGVRdWVzdGxpbmVdXG4gICk7XG5cbiAgY29uc3QgY29tcGxldGVTdGFnZSA9IHVzZUNhbGxiYWNrKFxuICAgIChxdWVzdGxpbmVJZDogc3RyaW5nLCBzdGFnZUlkOiBzdHJpbmcsIGJyYW5jaElkPzogc3RyaW5nKTogU3RhZ2VDb21wbGV0aW9uUmVzdWx0ID0+IHtcbiAgICAgIGxldCBjb21wbGV0aW9uOiBTdGFnZUNvbXBsZXRpb25SZXN1bHQgPSBcImNvbXBsZXRlZFwiO1xuXG4gICAgICBzZXRRdWVzdGxpbmVzKChwcmV2aW91cykgPT5cbiAgICAgICAgcHJldmlvdXMubWFwKChxdWVzdGxpbmUpID0+IHtcbiAgICAgICAgICBpZiAocXVlc3RsaW5lLmlkICE9PSBxdWVzdGxpbmVJZCkge1xuICAgICAgICAgICAgcmV0dXJuIHF1ZXN0bGluZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCB3b3JraW5nID0gY2xvbmVRdWVzdGxpbmUocXVlc3RsaW5lKTtcbiAgICAgICAgICBjb25zdCBsb2NhdGVkID0gZmluZFN0YWdlKHdvcmtpbmcsIHN0YWdlSWQpO1xuICAgICAgICAgIGlmICghbG9jYXRlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHF1ZXN0bGluZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCB7IHN0YWdlLCBpbmRleCB9ID0gbG9jYXRlZDtcblxuICAgICAgICAgIGlmIChzdGFnZS5jb21wbGV0ZWQpIHtcbiAgICAgICAgICAgIGNvbXBsZXRpb24gPSBcImFscmVhZHktY29tcGxldGVkXCI7XG4gICAgICAgICAgICByZXR1cm4gcXVlc3RsaW5lO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzdGFnZS5icmFuY2hDaG9pY2VzICYmIHN0YWdlLmJyYW5jaENob2ljZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgY2hvc2VuID0gYnJhbmNoSWQgPz8gc3RhZ2UuY2hvc2VuQnJhbmNoSWQgPz8gdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKCFjaG9zZW4pIHtcbiAgICAgICAgICAgICAgY29tcGxldGlvbiA9IFwiYnJhbmNoLXJlcXVpcmVkXCI7XG4gICAgICAgICAgICAgIHJldHVybiBxdWVzdGxpbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdGFnZS5jaG9zZW5CcmFuY2hJZCA9IGNob3NlbjtcbiAgICAgICAgICAgIGNvbnN0IGJyYW5jaCA9IHN0YWdlLmJyYW5jaENob2ljZXMuZmluZCgob3B0aW9uKSA9PiBvcHRpb24uaWQgPT09IGNob3Nlbik7XG4gICAgICAgICAgICBpZiAoYnJhbmNoPy5yZXdhcmQpIHtcbiAgICAgICAgICAgICAgYXdhcmRSZXdhcmQoYnJhbmNoLnJld2FyZCk7XG4gICAgICAgICAgICAgIGlmIChicmFuY2gucmV3YXJkLnhwKSB7XG4gICAgICAgICAgICAgICAgZ2FpblhwRm9yQ29tcGFuaW9ucyhcInF1ZXN0XCIsIGJyYW5jaC5yZXdhcmQueHApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc3RhZ2UuY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICBjb25zdCBzdGFnZVJld2FyZCA9IHsgeHA6IHN0YWdlLnhwLCAuLi5zdGFnZS5yZXdhcmQgfTtcbiAgICAgICAgICBhd2FyZFJld2FyZChzdGFnZVJld2FyZCk7XG4gICAgICAgICAgaWYgKHN0YWdlUmV3YXJkLnhwKSB7XG4gICAgICAgICAgICBnYWluWHBGb3JDb21wYW5pb25zKFwicXVlc3RcIiwgc3RhZ2VSZXdhcmQueHApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHN0YWdlVGV4dCA9IGAke3N0YWdlLnRpdGxlID8/ICcnfSAke3N0YWdlLmRlc2NyaXB0aW9uID8/ICcnfSAke3F1ZXN0bGluZS5uYW1lID8/ICcnfWAudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICBucGNzLmZvckVhY2goKG5wYykgPT4ge1xuICAgICAgICAgICAgaWYgKHN0YWdlVGV4dC5pbmNsdWRlcyhucGMubmFtZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgICAgICBhZGp1c3ROcGNUcnVzdChucGMuaWQsIDUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgd29ya2luZy5zdGFnZXNbaW5kZXhdID0gc3RhZ2U7XG5cbiAgICAgICAgICBpZiAoaXNRdWVzdGxpbmVDb21wbGV0ZSh3b3JraW5nKSkge1xuICAgICAgICAgICAgd29ya2luZy5jb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHdvcmtpbmcucmV3YXJkKSB7XG4gICAgICAgICAgICAgIGF3YXJkUmV3YXJkKHdvcmtpbmcucmV3YXJkKTtcbiAgICAgICAgICAgICAgaWYgKHdvcmtpbmcucmV3YXJkLnhwKSB7XG4gICAgICAgICAgICAgICAgZ2FpblhwRm9yQ29tcGFuaW9ucyhcInF1ZXN0XCIsIHdvcmtpbmcucmV3YXJkLnhwKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcGxldGlvbiA9IFwicXVlc3RsaW5lLWNvbXBsZXRlZFwiO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB3b3JraW5nO1xuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIGNvbXBsZXRpb247XG4gICAgfSxcbiAgICBbYWRqdXN0TnBjVHJ1c3QsIGF3YXJkUmV3YXJkLCBnYWluWHBGb3JDb21wYW5pb25zLCBucGNzLCBzZXRRdWVzdGxpbmVzXVxuICApO1xuXG4gIGNvbnN0IGNob29zZUJyYW5jaCA9IHVzZUNhbGxiYWNrKFxuICAgIChxdWVzdGxpbmVJZDogc3RyaW5nLCBzdGFnZUlkOiBzdHJpbmcsIGJyYW5jaElkOiBzdHJpbmcpID0+IHtcbiAgICAgIG11dGF0ZVN0YWdlKHF1ZXN0bGluZUlkLCBzdGFnZUlkLCAoc3RhZ2UpID0+ICh7XG4gICAgICAgIC4uLnN0YWdlLFxuICAgICAgICBjaG9zZW5CcmFuY2hJZDogYnJhbmNoSWQsXG4gICAgICB9KSk7XG4gICAgfSxcbiAgICBbbXV0YXRlU3RhZ2VdXG4gICk7XG5cbiAgY29uc3QgcmVzZXRRdWVzdGxpbmUgPSB1c2VDYWxsYmFjayhcbiAgICAocXVlc3RsaW5lSWQ6IHN0cmluZykgPT4ge1xuICAgICAgdXBkYXRlUXVlc3RsaW5lKHF1ZXN0bGluZUlkLCAocXVlc3RsaW5lKSA9PiAoe1xuICAgICAgICAuLi5xdWVzdGxpbmUsXG4gICAgICAgIGNvbXBsZXRlZDogZmFsc2UsXG4gICAgICAgIHN0YWdlczogcXVlc3RsaW5lLnN0YWdlcy5tYXAoKHN0YWdlKSA9PiAoe1xuICAgICAgICAgIC4uLnN0YWdlLFxuICAgICAgICAgIGNvbXBsZXRlZDogZmFsc2UsXG4gICAgICAgICAgY2hvc2VuQnJhbmNoSWQ6IHN0YWdlLmJyYW5jaENob2ljZXMgPyBudWxsIDogc3RhZ2UuY2hvc2VuQnJhbmNoSWQsXG4gICAgICAgIH0pKSxcbiAgICAgIH0pKTtcbiAgICB9LFxuICAgIFt1cGRhdGVRdWVzdGxpbmVdXG4gICk7XG5cbiAgY29uc3QgYWRkUXVlc3RsaW5lID0gdXNlQ2FsbGJhY2soXG4gICAgKHF1ZXN0bGluZTogUXVlc3RsaW5lKSA9PiB7XG4gICAgICBzZXRRdWVzdGxpbmVzKChwcmV2aW91cykgPT4gWy4uLnByZXZpb3VzLCBjbG9uZVF1ZXN0bGluZShxdWVzdGxpbmUpXSk7XG4gICAgfSxcbiAgICBbc2V0UXVlc3RsaW5lc11cbiAgKTtcblxuICBjb25zdCByZW1vdmVRdWVzdGxpbmUgPSB1c2VDYWxsYmFjayhcbiAgICAocXVlc3RsaW5lSWQ6IHN0cmluZykgPT4ge1xuICAgICAgc2V0UXVlc3RsaW5lcygocHJldmlvdXMpID0+IHByZXZpb3VzLmZpbHRlcigocXVlc3RsaW5lKSA9PiBxdWVzdGxpbmUuaWQgIT09IHF1ZXN0bGluZUlkKSk7XG4gICAgfSxcbiAgICBbc2V0UXVlc3RsaW5lc11cbiAgKTtcblxuICBjb25zdCBhZGRTdGFnZSA9IHVzZUNhbGxiYWNrKFxuICAgIChxdWVzdGxpbmVJZDogc3RyaW5nLCBzdGFnZTogUXVlc3RTdGFnZSkgPT4ge1xuICAgICAgdXBkYXRlUXVlc3RsaW5lKHF1ZXN0bGluZUlkLCAocXVlc3RsaW5lKSA9PiAoe1xuICAgICAgICAuLi5xdWVzdGxpbmUsXG4gICAgICAgIHN0YWdlczogWy4uLnF1ZXN0bGluZS5zdGFnZXMsIGNsb25lU3RhZ2Uoc3RhZ2UpXSxcbiAgICAgIH0pKTtcbiAgICB9LFxuICAgIFt1cGRhdGVRdWVzdGxpbmVdXG4gICk7XG5cbiAgY29uc3QgdXBkYXRlU3RhZ2VGaWVsZHMgPSB1c2VDYWxsYmFjayhcbiAgICAocXVlc3RsaW5lSWQ6IHN0cmluZywgc3RhZ2VJZDogc3RyaW5nLCBwYXRjaDogUGFydGlhbDxRdWVzdFN0YWdlPikgPT4ge1xuICAgICAgbXV0YXRlU3RhZ2UocXVlc3RsaW5lSWQsIHN0YWdlSWQsIChzdGFnZSkgPT4gKHtcbiAgICAgICAgLi4uc3RhZ2UsXG4gICAgICAgIC4uLnBhdGNoLFxuICAgICAgfSkpO1xuICAgIH0sXG4gICAgW211dGF0ZVN0YWdlXVxuICApO1xuXG4gIGNvbnN0IHJlbW92ZVN0YWdlID0gdXNlQ2FsbGJhY2soXG4gICAgKHF1ZXN0bGluZUlkOiBzdHJpbmcsIHN0YWdlSWQ6IHN0cmluZykgPT4ge1xuICAgICAgdXBkYXRlUXVlc3RsaW5lKHF1ZXN0bGluZUlkLCAocXVlc3RsaW5lKSA9PiAoe1xuICAgICAgICAuLi5xdWVzdGxpbmUsXG4gICAgICAgIHN0YWdlczogcXVlc3RsaW5lLnN0YWdlcy5maWx0ZXIoKHN0YWdlKSA9PiBzdGFnZS5pZCAhPT0gc3RhZ2VJZCksXG4gICAgICB9KSk7XG4gICAgfSxcbiAgICBbdXBkYXRlUXVlc3RsaW5lXVxuICApO1xuXG4gIGNvbnN0IHF1ZXN0bGluZVN1bW1hcmllcyA9IHVzZU1lbW8oXG4gICAgKCkgPT5cbiAgICAgIHF1ZXN0bGluZXMubWFwKChxdWVzdGxpbmUpID0+ICh7XG4gICAgICAgIHF1ZXN0bGluZSxcbiAgICAgICAgcHJvZ3Jlc3M6IGdldFF1ZXN0bGluZVByb2dyZXNzKHF1ZXN0bGluZSksXG4gICAgICAgIGFjdGl2ZVN0YWdlOiBnZXRBY3RpdmVTdGFnZShxdWVzdGxpbmUpLFxuICAgICAgfSkpLFxuICAgIFtxdWVzdGxpbmVzXVxuICApO1xuXG4gIHJldHVybiB7XG4gICAgcXVlc3RsaW5lcyxcbiAgICBxdWVzdGxpbmVTdW1tYXJpZXMsXG4gICAgY29tcGxldGVTdGFnZSxcbiAgICBjaG9vc2VCcmFuY2gsXG4gICAgcmVzZXRRdWVzdGxpbmUsXG4gICAgYWRkUXVlc3RsaW5lLFxuICAgIHVwZGF0ZVF1ZXN0bGluZSxcbiAgICByZW1vdmVRdWVzdGxpbmUsXG4gICAgYWRkU3RhZ2UsXG4gICAgdXBkYXRlU3RhZ2U6IHVwZGF0ZVN0YWdlRmllbGRzLFxuICAgIHJlbW92ZVN0YWdlLFxuICAgIG11dGF0ZVN0YWdlLFxuICB9O1xufVxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlTWVtbyIsInVzZVBlcnNpc3RlbnRTdGF0ZSIsInVzZUJ1ZmZzIiwidXNlSW52ZW50b3J5IiwidXNlQ29tcGFuaW9ucyIsInVzZU5wY3MiLCJjbG9uZURlZmF1bHRRdWVzdGxpbmVzIiwiY2xvbmVRdWVzdGxpbmUiLCJmaW5kU3RhZ2UiLCJnZXRBY3RpdmVTdGFnZSIsImdldFF1ZXN0bGluZVByb2dyZXNzIiwiaXNRdWVzdGxpbmVDb21wbGV0ZSIsIlRJVExFU19TVE9SQUdFX0tFWSIsImNsb25lU3RhZ2UiLCJzdGFnZSIsImJyYW5jaENob2ljZXMiLCJtYXAiLCJicmFuY2giLCJ1bmRlZmluZWQiLCJ1c2VRdWVzdGxpbmVzIiwicXVlc3RsaW5lcyIsInNldFF1ZXN0bGluZXMiLCJ4cCIsInNldFhwIiwidGl0bGVzIiwic2V0VGl0bGVzIiwiYXBwbHlFdmVudCIsInRyaWdnZXJCdWZmQnlTb3VyY2UiLCJnYWluSXRlbSIsImNvbXBhbmlvbnMiLCJnYWluWHBGb3JDb21wYW5pb25zIiwibnBjcyIsImFkanVzdFRydXN0IiwiYWRqdXN0TnBjVHJ1c3QiLCJhd2FyZFRpdGxlIiwidGl0bGUiLCJ0cmltIiwibGVuZ3RoIiwicHJldiIsImluY2x1ZGVzIiwiYXdhcmRSZXdhcmQiLCJyZXdhcmQiLCJyZXdhcmRlZCIsIml0ZW0iLCJidWZmIiwidXBkYXRlUXVlc3RsaW5lIiwicXVlc3RsaW5lSWQiLCJ1cGRhdGVyIiwicHJldmlvdXMiLCJxdWVzdGxpbmUiLCJpZCIsIm11dGF0ZVN0YWdlIiwic3RhZ2VJZCIsIm11dGF0b3IiLCJzdGFnZXMiLCJjb21wbGV0ZVN0YWdlIiwiYnJhbmNoSWQiLCJjb21wbGV0aW9uIiwid29ya2luZyIsImxvY2F0ZWQiLCJpbmRleCIsImNvbXBsZXRlZCIsImNob3NlbiIsImNob3NlbkJyYW5jaElkIiwiZmluZCIsIm9wdGlvbiIsInN0YWdlUmV3YXJkIiwic3RhZ2VUZXh0IiwiZGVzY3JpcHRpb24iLCJuYW1lIiwidG9Mb3dlckNhc2UiLCJmb3JFYWNoIiwibnBjIiwiY2hvb3NlQnJhbmNoIiwicmVzZXRRdWVzdGxpbmUiLCJhZGRRdWVzdGxpbmUiLCJyZW1vdmVRdWVzdGxpbmUiLCJmaWx0ZXIiLCJhZGRTdGFnZSIsInVwZGF0ZVN0YWdlRmllbGRzIiwicGF0Y2giLCJyZW1vdmVTdGFnZSIsInF1ZXN0bGluZVN1bW1hcmllcyIsInByb2dyZXNzIiwiYWN0aXZlU3RhZ2UiLCJ1cGRhdGVTdGFnZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useQuestlines.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useRitualAchievements.ts":
/*!********************************************!*\
  !*** ./app/hooks/useRitualAchievements.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useRitualAchievements: () => (/* binding */ useRitualAchievements)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _useAchievements__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useAchievements */ \"(ssr)/./app/hooks/useAchievements.ts\");\n/* harmony import */ var _useRitualsEngine__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useRitualsEngine */ \"(ssr)/./app/hooks/useRitualsEngine.ts\");\n/* __next_internal_client_entry_do_not_use__ useRitualAchievements auto */ \n\n\n/**\r\n * A custom hook to manage ritual-related achievements.\r\n * It listens to changes in ritual progress and unlocks achievements when their triggers are met.\r\n */ function useRitualAchievements() {\n    const { achievements, unlockAchievement } = (0,_useAchievements__WEBPACK_IMPORTED_MODULE_1__.useAchievements)();\n    const { progressById } = (0,_useRitualsEngine__WEBPACK_IMPORTED_MODULE_2__.useRitualsEngine)();\n    const completedRitualsCount = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useRitualAchievements.useMemo[completedRitualsCount]\": ()=>{\n            if (!progressById) return 0;\n            // Count how many rituals have their 'completed' flag set to true.\n            return Object.values(progressById).filter({\n                \"useRitualAchievements.useMemo[completedRitualsCount]\": (p)=>p.completed\n            }[\"useRitualAchievements.useMemo[completedRitualsCount]\"]).length;\n        }\n    }[\"useRitualAchievements.useMemo[completedRitualsCount]\"], [\n        progressById\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useRitualAchievements.useEffect\": ()=>{\n            // Don't run if achievements or ritual progress haven't loaded yet\n            if (!achievements || achievements.length === 0 || !progressById) return;\n            // Filter for only un-unlocked Ritual achievements to check\n            const ritualAchievements = achievements.filter({\n                \"useRitualAchievements.useEffect.ritualAchievements\": (a)=>!a.unlocked && a.category === 'Ritual'\n            }[\"useRitualAchievements.useEffect.ritualAchievements\"]);\n            if (ritualAchievements.length === 0) return;\n            ritualAchievements.forEach({\n                \"useRitualAchievements.useEffect\": (achievement)=>{\n                    const { trigger } = achievement;\n                    let conditionMet = false;\n                    if (trigger.type === 'RITUAL_COMPLETED' && completedRitualsCount >= trigger.value) {\n                        conditionMet = true;\n                    }\n                    if (conditionMet) {\n                        unlockAchievement(achievement.id);\n                    }\n                }\n            }[\"useRitualAchievements.useEffect\"]);\n        // This effect should re-run whenever the player's ritual progress changes.\n        }\n    }[\"useRitualAchievements.useEffect\"], [\n        completedRitualsCount,\n        achievements,\n        unlockAchievement\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvaG9va3MvdXNlUml0dWFsQWNoaWV2ZW1lbnRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OzJFQUUyQztBQUNTO0FBQ0U7QUFFdEQ7OztDQUdDLEdBQ00sU0FBU0k7SUFDZCxNQUFNLEVBQUVDLFlBQVksRUFBRUMsaUJBQWlCLEVBQUUsR0FBR0osaUVBQWVBO0lBQzNELE1BQU0sRUFBRUssWUFBWSxFQUFFLEdBQUdKLG1FQUFnQkE7SUFFekMsTUFBTUssd0JBQXdCUCw4Q0FBT0E7Z0VBQUM7WUFDcEMsSUFBSSxDQUFDTSxjQUFjLE9BQU87WUFDMUIsa0VBQWtFO1lBQ2xFLE9BQU9FLE9BQU9DLE1BQU0sQ0FBQ0gsY0FBY0ksTUFBTTt3RUFBQ0MsQ0FBQUEsSUFBS0EsRUFBRUMsU0FBUzt1RUFBRUMsTUFBTTtRQUNwRTsrREFBRztRQUFDUDtLQUFhO0lBRWpCUCxnREFBU0E7MkNBQUM7WUFDUixrRUFBa0U7WUFDbEUsSUFBSSxDQUFDSyxnQkFBZ0JBLGFBQWFTLE1BQU0sS0FBSyxLQUFLLENBQUNQLGNBQWM7WUFFakUsMkRBQTJEO1lBQzNELE1BQU1RLHFCQUFxQlYsYUFBYU0sTUFBTTtzRUFDNUNLLENBQUFBLElBQUssQ0FBQ0EsRUFBRUMsUUFBUSxJQUFJRCxFQUFFRSxRQUFRLEtBQUs7O1lBR3JDLElBQUlILG1CQUFtQkQsTUFBTSxLQUFLLEdBQUc7WUFFckNDLG1CQUFtQkksT0FBTzttREFBQ0MsQ0FBQUE7b0JBQ3pCLE1BQU0sRUFBRUMsT0FBTyxFQUFFLEdBQUdEO29CQUNwQixJQUFJRSxlQUFlO29CQUVuQixJQUFJRCxRQUFRRSxJQUFJLEtBQUssc0JBQXNCZix5QkFBeUJhLFFBQVFHLEtBQUssRUFBRTt3QkFDakZGLGVBQWU7b0JBQ2pCO29CQUVBLElBQUlBLGNBQWM7d0JBQ2hCaEIsa0JBQWtCYyxZQUFZSyxFQUFFO29CQUNsQztnQkFDRjs7UUFDQSwyRUFBMkU7UUFDN0U7MENBQUc7UUFBQ2pCO1FBQXVCSDtRQUFjQztLQUFrQjtBQUM3RCIsInNvdXJjZXMiOlsiQzpcXE1vbW15IEx1Y3lcXFByb2plY3RzXFxMdWNpZCBEcmVhbVxcYXBwXFxob29rc1xcdXNlUml0dWFsQWNoaWV2ZW1lbnRzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcclxuXHJcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlQWNoaWV2ZW1lbnRzIH0gZnJvbSAnLi91c2VBY2hpZXZlbWVudHMnO1xyXG5pbXBvcnQgeyB1c2VSaXR1YWxzRW5naW5lIH0gZnJvbSAnLi91c2VSaXR1YWxzRW5naW5lJztcclxuXHJcbi8qKlxyXG4gKiBBIGN1c3RvbSBob29rIHRvIG1hbmFnZSByaXR1YWwtcmVsYXRlZCBhY2hpZXZlbWVudHMuXHJcbiAqIEl0IGxpc3RlbnMgdG8gY2hhbmdlcyBpbiByaXR1YWwgcHJvZ3Jlc3MgYW5kIHVubG9ja3MgYWNoaWV2ZW1lbnRzIHdoZW4gdGhlaXIgdHJpZ2dlcnMgYXJlIG1ldC5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VSaXR1YWxBY2hpZXZlbWVudHMoKSB7XHJcbiAgY29uc3QgeyBhY2hpZXZlbWVudHMsIHVubG9ja0FjaGlldmVtZW50IH0gPSB1c2VBY2hpZXZlbWVudHMoKTtcclxuICBjb25zdCB7IHByb2dyZXNzQnlJZCB9ID0gdXNlUml0dWFsc0VuZ2luZSgpO1xyXG5cclxuICBjb25zdCBjb21wbGV0ZWRSaXR1YWxzQ291bnQgPSB1c2VNZW1vKCgpID0+IHtcclxuICAgIGlmICghcHJvZ3Jlc3NCeUlkKSByZXR1cm4gMDtcclxuICAgIC8vIENvdW50IGhvdyBtYW55IHJpdHVhbHMgaGF2ZSB0aGVpciAnY29tcGxldGVkJyBmbGFnIHNldCB0byB0cnVlLlxyXG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXMocHJvZ3Jlc3NCeUlkKS5maWx0ZXIocCA9PiBwLmNvbXBsZXRlZCkubGVuZ3RoO1xyXG4gIH0sIFtwcm9ncmVzc0J5SWRdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIERvbid0IHJ1biBpZiBhY2hpZXZlbWVudHMgb3Igcml0dWFsIHByb2dyZXNzIGhhdmVuJ3QgbG9hZGVkIHlldFxyXG4gICAgaWYgKCFhY2hpZXZlbWVudHMgfHwgYWNoaWV2ZW1lbnRzLmxlbmd0aCA9PT0gMCB8fCAhcHJvZ3Jlc3NCeUlkKSByZXR1cm47XHJcblxyXG4gICAgLy8gRmlsdGVyIGZvciBvbmx5IHVuLXVubG9ja2VkIFJpdHVhbCBhY2hpZXZlbWVudHMgdG8gY2hlY2tcclxuICAgIGNvbnN0IHJpdHVhbEFjaGlldmVtZW50cyA9IGFjaGlldmVtZW50cy5maWx0ZXIoXHJcbiAgICAgIGEgPT4gIWEudW5sb2NrZWQgJiYgYS5jYXRlZ29yeSA9PT0gJ1JpdHVhbCdcclxuICAgICk7XHJcblxyXG4gICAgaWYgKHJpdHVhbEFjaGlldmVtZW50cy5sZW5ndGggPT09IDApIHJldHVybjtcclxuXHJcbiAgICByaXR1YWxBY2hpZXZlbWVudHMuZm9yRWFjaChhY2hpZXZlbWVudCA9PiB7XHJcbiAgICAgIGNvbnN0IHsgdHJpZ2dlciB9ID0gYWNoaWV2ZW1lbnQ7XHJcbiAgICAgIGxldCBjb25kaXRpb25NZXQgPSBmYWxzZTtcclxuXHJcbiAgICAgIGlmICh0cmlnZ2VyLnR5cGUgPT09ICdSSVRVQUxfQ09NUExFVEVEJyAmJiBjb21wbGV0ZWRSaXR1YWxzQ291bnQgPj0gdHJpZ2dlci52YWx1ZSkge1xyXG4gICAgICAgIGNvbmRpdGlvbk1ldCA9IHRydWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChjb25kaXRpb25NZXQpIHtcclxuICAgICAgICB1bmxvY2tBY2hpZXZlbWVudChhY2hpZXZlbWVudC5pZCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgLy8gVGhpcyBlZmZlY3Qgc2hvdWxkIHJlLXJ1biB3aGVuZXZlciB0aGUgcGxheWVyJ3Mgcml0dWFsIHByb2dyZXNzIGNoYW5nZXMuXHJcbiAgfSwgW2NvbXBsZXRlZFJpdHVhbHNDb3VudCwgYWNoaWV2ZW1lbnRzLCB1bmxvY2tBY2hpZXZlbWVudF0pO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VNZW1vIiwidXNlQWNoaWV2ZW1lbnRzIiwidXNlUml0dWFsc0VuZ2luZSIsInVzZVJpdHVhbEFjaGlldmVtZW50cyIsImFjaGlldmVtZW50cyIsInVubG9ja0FjaGlldmVtZW50IiwicHJvZ3Jlc3NCeUlkIiwiY29tcGxldGVkUml0dWFsc0NvdW50IiwiT2JqZWN0IiwidmFsdWVzIiwiZmlsdGVyIiwicCIsImNvbXBsZXRlZCIsImxlbmd0aCIsInJpdHVhbEFjaGlldmVtZW50cyIsImEiLCJ1bmxvY2tlZCIsImNhdGVnb3J5IiwiZm9yRWFjaCIsImFjaGlldmVtZW50IiwidHJpZ2dlciIsImNvbmRpdGlvbk1ldCIsInR5cGUiLCJ2YWx1ZSIsImlkIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useRitualAchievements.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useRitualsEngine.ts":
/*!***************************************!*\
  !*** ./app/hooks/useRitualsEngine.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useRitualsEngine: () => (/* binding */ useRitualsEngine)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _useBuffs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useBuffs */ \"(ssr)/./app/hooks/useBuffs.ts\");\n/* harmony import */ var _useCompanions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useCompanions */ \"(ssr)/./app/hooks/useCompanions.ts\");\n/* harmony import */ var _useNpcs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useNpcs */ \"(ssr)/./app/hooks/useNpcs.ts\");\n/* harmony import */ var _useShame__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useShame */ \"(ssr)/./app/hooks/useShame.ts\");\n/* harmony import */ var _lib_rituals__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../lib/rituals */ \"(ssr)/./app/lib/rituals.ts\");\n/* __next_internal_client_entry_do_not_use__ useRitualsEngine auto */ \n\n\n\n\n\n\nconst FALLBACK_ID = ()=>typeof crypto !== \"undefined\" && typeof crypto.randomUUID === \"function\" ? crypto.randomUUID() : 'ritual-' + Date.now().toString(36);\nfunction useRitualsEngine() {\n    const [rituals, setRituals] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(\"rituals\", _lib_rituals__WEBPACK_IMPORTED_MODULE_6__.cloneDefaultRituals);\n    const [logs, setLogs] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(\"ritualLogs\", _lib_rituals__WEBPACK_IMPORTED_MODULE_6__.cloneDefaultRitualLogs);\n    const [xp, setXp] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(\"xpTotal\", {\n        \"useRitualsEngine.usePersistentState\": ()=>3400\n    }[\"useRitualsEngine.usePersistentState\"]);\n    const [obedience, setObedience] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_1__.usePersistentState)(\"obediencePoints\", {\n        \"useRitualsEngine.usePersistentState\": ()=>0\n    }[\"useRitualsEngine.usePersistentState\"]);\n    const { applyEvent, triggerBuffBySource } = (0,_useBuffs__WEBPACK_IMPORTED_MODULE_2__.useBuffs)();\n    const { companions, gainXpForCompanions } = (0,_useCompanions__WEBPACK_IMPORTED_MODULE_3__.useCompanions)();\n    const { npcs, adjustShame: adjustNpcShame } = (0,_useNpcs__WEBPACK_IMPORTED_MODULE_4__.useNpcs)();\n    const { incrementCounter } = (0,_useShame__WEBPACK_IMPORTED_MODULE_5__.useShame)();\n    const progressById = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useRitualsEngine.useMemo[progressById]\": ()=>{\n            const now = new Date();\n            return rituals.reduce({\n                \"useRitualsEngine.useMemo[progressById]\": (acc, ritual)=>{\n                    acc[ritual.id] = (0,_lib_rituals__WEBPACK_IMPORTED_MODULE_6__.computeRitualProgress)(ritual, logs, now);\n                    return acc;\n                }\n            }[\"useRitualsEngine.useMemo[progressById]\"], {});\n        }\n    }[\"useRitualsEngine.useMemo[progressById]\"], [\n        logs,\n        rituals\n    ]);\n    const readStreakMultiplierEnabled = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useRitualsEngine.useCallback[readStreakMultiplierEnabled]\": ()=>{\n            if (true) return true;\n            try {\n                const raw = window.localStorage.getItem(\"controlNexus\");\n                if (!raw) return true;\n                const parsed = JSON.parse(raw);\n                return parsed?.rituals?.streakMultiplierEnabled !== false;\n            } catch  {\n                return true;\n            }\n        }\n    }[\"useRitualsEngine.useCallback[readStreakMultiplierEnabled]\"], []);\n    const completeRitual = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useRitualsEngine.useCallback[completeRitual]\": (ritualId)=>{\n            const ritual = rituals.find({\n                \"useRitualsEngine.useCallback[completeRitual].ritual\": (item)=>item.id === ritualId\n            }[\"useRitualsEngine.useCallback[completeRitual].ritual\"]);\n            if (!ritual) {\n                return {\n                    status: \"not-found\"\n                };\n            }\n            const now = new Date();\n            let outcome = {\n                status: \"already-completed\",\n                ritual,\n                progress: (0,_lib_rituals__WEBPACK_IMPORTED_MODULE_6__.computeRitualProgress)(ritual, logs, now)\n            };\n            setLogs({\n                \"useRitualsEngine.useCallback[completeRitual]\": (previousLogs)=>{\n                    const progressBefore = (0,_lib_rituals__WEBPACK_IMPORTED_MODULE_6__.computeRitualProgress)(ritual, previousLogs, now);\n                    if (progressBefore.completed) {\n                        outcome = {\n                            status: \"already-completed\",\n                            ritual,\n                            progress: progressBefore\n                        };\n                        return previousLogs;\n                    }\n                    const baseLog = {\n                        id: FALLBACK_ID(),\n                        ritualId,\n                        timestamp: now.toISOString()\n                    };\n                    const tentativeLogs = [\n                        ...previousLogs,\n                        baseLog\n                    ];\n                    const progressAfter = (0,_lib_rituals__WEBPACK_IMPORTED_MODULE_6__.computeRitualProgress)(ritual, tentativeLogs, now);\n                    const multiplierEnabled = readStreakMultiplierEnabled();\n                    const appliedMultiplier = multiplierEnabled ? progressAfter.multiplier : 0;\n                    const xpWithBonus = Math.round(ritual.xp * (1 + appliedMultiplier));\n                    const obedienceAwarded = ritual.obedience;\n                    const finalXp = applyEvent(\"xp\", xpWithBonus);\n                    const finalObedience = applyEvent(\"obedience\", obedienceAwarded);\n                    const completedLog = {\n                        ...baseLog,\n                        xpAwarded: finalXp,\n                        obedienceAwarded: finalObedience,\n                        multiplierApplied: appliedMultiplier\n                    };\n                    const updatedLogs = [\n                        ...previousLogs,\n                        completedLog\n                    ];\n                    setXp({\n                        \"useRitualsEngine.useCallback[completeRitual]\": (prev)=>prev + finalXp\n                    }[\"useRitualsEngine.useCallback[completeRitual]\"]);\n                    gainXpForCompanions(\"ritual\", finalXp);\n                    setObedience({\n                        \"useRitualsEngine.useCallback[completeRitual]\": (prev)=>prev + finalObedience\n                    }[\"useRitualsEngine.useCallback[completeRitual]\"]);\n                    setRituals({\n                        \"useRitualsEngine.useCallback[completeRitual]\": (prev)=>prev.map({\n                                \"useRitualsEngine.useCallback[completeRitual]\": (item)=>item.id === ritualId ? {\n                                        ...item,\n                                        streak: progressAfter.streak\n                                    } : item\n                            }[\"useRitualsEngine.useCallback[completeRitual]\"])\n                    }[\"useRitualsEngine.useCallback[completeRitual]\"]);\n                    triggerBuffBySource(ritual.name);\n                    const ritualText = ritual.name.toLowerCase();\n                    npcs.forEach({\n                        \"useRitualsEngine.useCallback[completeRitual]\": (npc)=>{\n                            if (ritualText.includes(npc.name.toLowerCase())) {\n                                adjustNpcShame(npc.id, 5);\n                            }\n                        }\n                    }[\"useRitualsEngine.useCallback[completeRitual]\"]);\n                    outcome = {\n                        status: \"completed\",\n                        ritual,\n                        xpAwarded: finalXp,\n                        obedienceAwarded: finalObedience,\n                        progress: progressAfter,\n                        log: completedLog\n                    };\n                    return updatedLogs;\n                }\n            }[\"useRitualsEngine.useCallback[completeRitual]\"]);\n            return outcome;\n        }\n    }[\"useRitualsEngine.useCallback[completeRitual]\"], [\n        adjustNpcShame,\n        applyEvent,\n        gainXpForCompanions,\n        logs,\n        npcs,\n        readStreakMultiplierEnabled,\n        rituals,\n        setLogs,\n        setObedience,\n        setRituals,\n        setXp,\n        triggerBuffBySource\n    ]);\n    const resetRitualStreak = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useRitualsEngine.useCallback[resetRitualStreak]\": (ritualId)=>{\n            setRituals({\n                \"useRitualsEngine.useCallback[resetRitualStreak]\": (prev)=>prev.map({\n                        \"useRitualsEngine.useCallback[resetRitualStreak]\": (item)=>item.id === ritualId ? {\n                                ...item,\n                                streak: 0\n                            } : item\n                    }[\"useRitualsEngine.useCallback[resetRitualStreak]\"])\n            }[\"useRitualsEngine.useCallback[resetRitualStreak]\"]);\n            setLogs({\n                \"useRitualsEngine.useCallback[resetRitualStreak]\": (prev)=>prev.filter({\n                        \"useRitualsEngine.useCallback[resetRitualStreak]\": (log)=>log.ritualId !== ritualId\n                    }[\"useRitualsEngine.useCallback[resetRitualStreak]\"])\n            }[\"useRitualsEngine.useCallback[resetRitualStreak]\"]);\n        }\n    }[\"useRitualsEngine.useCallback[resetRitualStreak]\"], [\n        setLogs,\n        setRituals\n    ]);\n    const failRitual = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useRitualsEngine.useCallback[failRitual]\": (ritualId)=>{\n            incrementCounter('ritualsFailed', 1);\n            resetRitualStreak(ritualId);\n        }\n    }[\"useRitualsEngine.useCallback[failRitual]\"], [\n        incrementCounter,\n        resetRitualStreak\n    ]);\n    const addRitual = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useRitualsEngine.useCallback[addRitual]\": (ritual)=>{\n            setRituals({\n                \"useRitualsEngine.useCallback[addRitual]\": (prev)=>[\n                        ...prev,\n                        ritual\n                    ]\n            }[\"useRitualsEngine.useCallback[addRitual]\"]);\n        }\n    }[\"useRitualsEngine.useCallback[addRitual]\"], [\n        setRituals\n    ]);\n    const updateRitual = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useRitualsEngine.useCallback[updateRitual]\": (ritualId, patch)=>{\n            setRituals({\n                \"useRitualsEngine.useCallback[updateRitual]\": (prev)=>prev.map({\n                        \"useRitualsEngine.useCallback[updateRitual]\": (item)=>item.id === ritualId ? {\n                                ...item,\n                                ...patch\n                            } : item\n                    }[\"useRitualsEngine.useCallback[updateRitual]\"])\n            }[\"useRitualsEngine.useCallback[updateRitual]\"]);\n        }\n    }[\"useRitualsEngine.useCallback[updateRitual]\"], [\n        setRituals\n    ]);\n    const deleteRitual = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useRitualsEngine.useCallback[deleteRitual]\": (ritualId)=>{\n            setRituals({\n                \"useRitualsEngine.useCallback[deleteRitual]\": (prev)=>prev.filter({\n                        \"useRitualsEngine.useCallback[deleteRitual]\": (item)=>item.id !== ritualId\n                    }[\"useRitualsEngine.useCallback[deleteRitual]\"])\n            }[\"useRitualsEngine.useCallback[deleteRitual]\"]);\n            setLogs({\n                \"useRitualsEngine.useCallback[deleteRitual]\": (prev)=>prev.filter({\n                        \"useRitualsEngine.useCallback[deleteRitual]\": (log)=>log.ritualId !== ritualId\n                    }[\"useRitualsEngine.useCallback[deleteRitual]\"])\n            }[\"useRitualsEngine.useCallback[deleteRitual]\"]);\n        }\n    }[\"useRitualsEngine.useCallback[deleteRitual]\"], [\n        setLogs,\n        setRituals\n    ]);\n    const ritualLogsDescending = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useRitualsEngine.useMemo[ritualLogsDescending]\": ()=>{\n            return [\n                ...logs\n            ].sort({\n                \"useRitualsEngine.useMemo[ritualLogsDescending]\": (a, b)=>new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime()\n            }[\"useRitualsEngine.useMemo[ritualLogsDescending]\"]);\n        }\n    }[\"useRitualsEngine.useMemo[ritualLogsDescending]\"], [\n        logs\n    ]);\n    return {\n        rituals,\n        logs: ritualLogsDescending,\n        progressById,\n        completeRitual,\n        addRitual,\n        updateRitual,\n        deleteRitual,\n        resetRitualStreak,\n        failRitual,\n        xp,\n        obedience,\n        setXp,\n        setObedience\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLVyxNQUFNO3NFQUFDLENBQUNwQyxPQUFTQSxLQUFLYixFQUFFLEtBQUtXOzs7WUFDdkQ1Qjs4REFBUSxDQUFDdUQsT0FBU0EsS0FBS1csTUFBTTtzRUFBQyxDQUFDRixNQUFRQSxJQUFJcEMsUUFBUSxLQUFLQTs7O1FBQzFEO3FEQUNBO1FBQUM1QjtRQUFTRjtLQUFXO0lBR3ZCLE1BQU0wRSx1QkFBdUIzRiw4Q0FBT0E7MERBQUM7WUFDbkMsT0FBTzttQkFBSWtCO2FBQUssQ0FBQzBFLElBQUk7a0VBQUMsQ0FBQ0MsR0FBR0MsSUFBTSxJQUFJbEYsS0FBS2tGLEVBQUVyQyxTQUFTLEVBQUVzQyxPQUFPLEtBQUssSUFBSW5GLEtBQUtpRixFQUFFcEMsU0FBUyxFQUFFc0MsT0FBTzs7UUFDakc7eURBQUc7UUFBQzdFO0tBQUs7SUFFVCxPQUFPO1FBQ0xGO1FBQ0FFLE1BQU15RTtRQUNOM0Q7UUFDQWM7UUFDQXlDO1FBQ0FDO1FBQ0FFO1FBQ0FOO1FBQ0FFO1FBQ0FsRTtRQUNBRTtRQUNBRDtRQUNBRTtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxNb21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxcaG9va3NcXHVzZVJpdHVhbHNFbmdpbmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlUGVyc2lzdGVudFN0YXRlIH0gZnJvbSBcIi4vdXNlUGVyc2lzdGVudFN0YXRlXCI7XG5pbXBvcnQgeyB1c2VCdWZmcyB9IGZyb20gXCIuL3VzZUJ1ZmZzXCI7XG5pbXBvcnQgeyB1c2VDb21wYW5pb25zIH0gZnJvbSBcIi4vdXNlQ29tcGFuaW9uc1wiO1xuaW1wb3J0IHsgdXNlTnBjcyB9IGZyb20gXCIuL3VzZU5wY3NcIjtcbmltcG9ydCB7IHVzZVNoYW1lIH0gZnJvbSBcIi4vdXNlU2hhbWVcIjtcbmltcG9ydCB7XG4gIGNsb25lRGVmYXVsdFJpdHVhbExvZ3MsXG4gIGNsb25lRGVmYXVsdFJpdHVhbHMsXG4gIGNvbXB1dGVSaXR1YWxQcm9ncmVzcyxcbiAgdHlwZSBSaXR1YWwsXG4gIHR5cGUgUml0dWFsTG9nLFxuICB0eXBlIFJpdHVhbFByb2dyZXNzLFxufSBmcm9tIFwiLi4vbGliL3JpdHVhbHNcIjtcblxuZXhwb3J0IHR5cGUgQ29tcGxldGVSaXR1YWxPdXRjb21lID1cbiAgfCB7XG4gICAgICBzdGF0dXM6IFwiY29tcGxldGVkXCI7XG4gICAgICByaXR1YWw6IFJpdHVhbDtcbiAgICAgIHhwQXdhcmRlZDogbnVtYmVyO1xuICAgICAgb2JlZGllbmNlQXdhcmRlZDogbnVtYmVyO1xuICAgICAgcHJvZ3Jlc3M6IFJpdHVhbFByb2dyZXNzO1xuICAgICAgbG9nOiBSaXR1YWxMb2c7XG4gICAgfVxuICB8IHtcbiAgICAgIHN0YXR1czogXCJhbHJlYWR5LWNvbXBsZXRlZFwiO1xuICAgICAgcml0dWFsOiBSaXR1YWw7XG4gICAgICBwcm9ncmVzczogUml0dWFsUHJvZ3Jlc3M7XG4gICAgfVxuICB8IHtcbiAgICAgIHN0YXR1czogXCJub3QtZm91bmRcIjtcbiAgICB9O1xuXG5jb25zdCBGQUxMQkFDS19JRCA9ICgpID0+XG4gIHR5cGVvZiBjcnlwdG8gIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIGNyeXB0by5yYW5kb21VVUlEID09PSBcImZ1bmN0aW9uXCJcbiAgICA/IGNyeXB0by5yYW5kb21VVUlEKClcbiAgICA6ICdyaXR1YWwtJyArIERhdGUubm93KCkudG9TdHJpbmcoMzYpO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlUml0dWFsc0VuZ2luZSgpIHtcbiAgY29uc3QgW3JpdHVhbHMsIHNldFJpdHVhbHNdID0gdXNlUGVyc2lzdGVudFN0YXRlPFJpdHVhbFtdPihcInJpdHVhbHNcIiwgY2xvbmVEZWZhdWx0Uml0dWFscyk7XG4gIGNvbnN0IFtsb2dzLCBzZXRMb2dzXSA9IHVzZVBlcnNpc3RlbnRTdGF0ZTxSaXR1YWxMb2dbXT4oXCJyaXR1YWxMb2dzXCIsIGNsb25lRGVmYXVsdFJpdHVhbExvZ3MpO1xuICBjb25zdCBbeHAsIHNldFhwXSA9IHVzZVBlcnNpc3RlbnRTdGF0ZTxudW1iZXI+KFwieHBUb3RhbFwiLCAoKSA9PiAzNDAwKTtcbiAgY29uc3QgW29iZWRpZW5jZSwgc2V0T2JlZGllbmNlXSA9IHVzZVBlcnNpc3RlbnRTdGF0ZTxudW1iZXI+KFwib2JlZGllbmNlUG9pbnRzXCIsICgpID0+IDApO1xuICBjb25zdCB7IGFwcGx5RXZlbnQsIHRyaWdnZXJCdWZmQnlTb3VyY2UgfSA9IHVzZUJ1ZmZzKCk7XG4gIGNvbnN0IHsgY29tcGFuaW9ucywgZ2FpblhwRm9yQ29tcGFuaW9ucyB9ID0gdXNlQ29tcGFuaW9ucygpO1xuICBjb25zdCB7IG5wY3MsIGFkanVzdFNoYW1lOiBhZGp1c3ROcGNTaGFtZSB9ID0gdXNlTnBjcygpO1xuICBjb25zdCB7IGluY3JlbWVudENvdW50ZXIgfSA9IHVzZVNoYW1lKCk7XG5cbiAgY29uc3QgcHJvZ3Jlc3NCeUlkID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICByZXR1cm4gcml0dWFscy5yZWR1Y2U8UmVjb3JkPHN0cmluZywgUml0dWFsUHJvZ3Jlc3M+PigoYWNjLCByaXR1YWwpID0+IHtcbiAgICAgIGFjY1tyaXR1YWwuaWRdID0gY29tcHV0ZVJpdHVhbFByb2dyZXNzKHJpdHVhbCwgbG9ncywgbm93KTtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xuICB9LCBbbG9ncywgcml0dWFsc10pO1xuXG4gIGNvbnN0IHJlYWRTdHJlYWtNdWx0aXBsaWVyRW5hYmxlZCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIHRydWU7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJhdyA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImNvbnRyb2xOZXh1c1wiKTtcbiAgICAgIGlmICghcmF3KSByZXR1cm4gdHJ1ZTtcbiAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UocmF3KSBhcyB7IHJpdHVhbHM/OiB7IHN0cmVha011bHRpcGxpZXJFbmFibGVkPzogYm9vbGVhbiB9IH07XG4gICAgICByZXR1cm4gcGFyc2VkPy5yaXR1YWxzPy5zdHJlYWtNdWx0aXBsaWVyRW5hYmxlZCAhPT0gZmFsc2U7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCBjb21wbGV0ZVJpdHVhbCA9IHVzZUNhbGxiYWNrKFxuICAgIChyaXR1YWxJZDogc3RyaW5nKTogQ29tcGxldGVSaXR1YWxPdXRjb21lID0+IHtcbiAgICAgIGNvbnN0IHJpdHVhbCA9IHJpdHVhbHMuZmluZCgoaXRlbSkgPT4gaXRlbS5pZCA9PT0gcml0dWFsSWQpO1xuICAgICAgaWYgKCFyaXR1YWwpIHtcbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBcIm5vdC1mb3VuZFwiIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICBsZXQgb3V0Y29tZTogQ29tcGxldGVSaXR1YWxPdXRjb21lID0ge1xuICAgICAgICBzdGF0dXM6IFwiYWxyZWFkeS1jb21wbGV0ZWRcIixcbiAgICAgICAgcml0dWFsLFxuICAgICAgICBwcm9ncmVzczogY29tcHV0ZVJpdHVhbFByb2dyZXNzKHJpdHVhbCwgbG9ncywgbm93KSxcbiAgICAgIH07XG5cbiAgICAgIHNldExvZ3MoKHByZXZpb3VzTG9ncykgPT4ge1xuICAgICAgICBjb25zdCBwcm9ncmVzc0JlZm9yZSA9IGNvbXB1dGVSaXR1YWxQcm9ncmVzcyhyaXR1YWwsIHByZXZpb3VzTG9ncywgbm93KTtcbiAgICAgICAgaWYgKHByb2dyZXNzQmVmb3JlLmNvbXBsZXRlZCkge1xuICAgICAgICAgIG91dGNvbWUgPSB7IHN0YXR1czogXCJhbHJlYWR5LWNvbXBsZXRlZFwiLCByaXR1YWwsIHByb2dyZXNzOiBwcm9ncmVzc0JlZm9yZSB9O1xuICAgICAgICAgIHJldHVybiBwcmV2aW91c0xvZ3M7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBiYXNlTG9nOiBSaXR1YWxMb2cgPSB7XG4gICAgICAgICAgaWQ6IEZBTExCQUNLX0lEKCksXG4gICAgICAgICAgcml0dWFsSWQsXG4gICAgICAgICAgdGltZXN0YW1wOiBub3cudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCB0ZW50YXRpdmVMb2dzID0gWy4uLnByZXZpb3VzTG9ncywgYmFzZUxvZ107XG4gICAgICAgIGNvbnN0IHByb2dyZXNzQWZ0ZXIgPSBjb21wdXRlUml0dWFsUHJvZ3Jlc3Mocml0dWFsLCB0ZW50YXRpdmVMb2dzLCBub3cpO1xuICAgICAgICBjb25zdCBtdWx0aXBsaWVyRW5hYmxlZCA9IHJlYWRTdHJlYWtNdWx0aXBsaWVyRW5hYmxlZCgpO1xuICAgICAgICBjb25zdCBhcHBsaWVkTXVsdGlwbGllciA9IG11bHRpcGxpZXJFbmFibGVkID8gcHJvZ3Jlc3NBZnRlci5tdWx0aXBsaWVyIDogMDtcbiAgICAgICAgY29uc3QgeHBXaXRoQm9udXMgPSBNYXRoLnJvdW5kKHJpdHVhbC54cCAqICgxICsgYXBwbGllZE11bHRpcGxpZXIpKTtcbiAgICAgICAgY29uc3Qgb2JlZGllbmNlQXdhcmRlZCA9IHJpdHVhbC5vYmVkaWVuY2U7XG4gICAgICAgIGNvbnN0IGZpbmFsWHAgPSBhcHBseUV2ZW50KFwieHBcIiwgeHBXaXRoQm9udXMpO1xuICAgICAgICBjb25zdCBmaW5hbE9iZWRpZW5jZSA9IGFwcGx5RXZlbnQoXCJvYmVkaWVuY2VcIiwgb2JlZGllbmNlQXdhcmRlZCk7XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlZExvZzogUml0dWFsTG9nID0ge1xuICAgICAgICAgIC4uLmJhc2VMb2csXG4gICAgICAgICAgeHBBd2FyZGVkOiBmaW5hbFhwLFxuICAgICAgICAgIG9iZWRpZW5jZUF3YXJkZWQ6IGZpbmFsT2JlZGllbmNlLFxuICAgICAgICAgIG11bHRpcGxpZXJBcHBsaWVkOiBhcHBsaWVkTXVsdGlwbGllcixcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCB1cGRhdGVkTG9ncyA9IFsuLi5wcmV2aW91c0xvZ3MsIGNvbXBsZXRlZExvZ107XG5cbiAgICAgICAgc2V0WHAoKHByZXYpID0+IHByZXYgKyBmaW5hbFhwKTtcbiAgICAgICAgZ2FpblhwRm9yQ29tcGFuaW9ucyhcInJpdHVhbFwiLCBmaW5hbFhwKTtcbiAgICAgICAgc2V0T2JlZGllbmNlKChwcmV2KSA9PiBwcmV2ICsgZmluYWxPYmVkaWVuY2UpO1xuICAgICAgICBzZXRSaXR1YWxzKChwcmV2KSA9PlxuICAgICAgICAgIHByZXYubWFwKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5pZCA9PT0gcml0dWFsSWRcbiAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgICAgICAgc3RyZWFrOiBwcm9ncmVzc0FmdGVyLnN0cmVhayxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIDogaXRlbVxuICAgICAgICAgIClcbiAgICAgICAgKTtcblxuICAgICAgICB0cmlnZ2VyQnVmZkJ5U291cmNlKHJpdHVhbC5uYW1lKTtcblxuICAgICAgICBjb25zdCByaXR1YWxUZXh0ID0gcml0dWFsLm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgbnBjcy5mb3JFYWNoKChucGMpID0+IHtcbiAgICAgICAgICBpZiAocml0dWFsVGV4dC5pbmNsdWRlcyhucGMubmFtZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgICAgYWRqdXN0TnBjU2hhbWUobnBjLmlkLCA1KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG91dGNvbWUgPSB7XG4gICAgICAgICAgc3RhdHVzOiBcImNvbXBsZXRlZFwiLFxuICAgICAgICAgIHJpdHVhbCxcbiAgICAgICAgICB4cEF3YXJkZWQ6IGZpbmFsWHAsXG4gICAgICAgICAgb2JlZGllbmNlQXdhcmRlZDogZmluYWxPYmVkaWVuY2UsXG4gICAgICAgICAgcHJvZ3Jlc3M6IHByb2dyZXNzQWZ0ZXIsXG4gICAgICAgICAgbG9nOiBjb21wbGV0ZWRMb2csXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHVwZGF0ZWRMb2dzO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBvdXRjb21lO1xuICAgIH0sXG4gICAgW2FkanVzdE5wY1NoYW1lLCBhcHBseUV2ZW50LCBnYWluWHBGb3JDb21wYW5pb25zLCBsb2dzLCBucGNzLCByZWFkU3RyZWFrTXVsdGlwbGllckVuYWJsZWQsIHJpdHVhbHMsIHNldExvZ3MsIHNldE9iZWRpZW5jZSwgc2V0Uml0dWFscywgc2V0WHAsIHRyaWdnZXJCdWZmQnlTb3VyY2VdXG4gICk7XG5cbiAgY29uc3QgcmVzZXRSaXR1YWxTdHJlYWsgPSB1c2VDYWxsYmFjayhcbiAgICAocml0dWFsSWQ6IHN0cmluZykgPT4ge1xuICAgICAgc2V0Uml0dWFscygocHJldikgPT5cbiAgICAgICAgcHJldi5tYXAoKGl0ZW0pID0+XG4gICAgICAgICAgaXRlbS5pZCA9PT0gcml0dWFsSWRcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICAgICAgc3RyZWFrOiAwLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA6IGl0ZW1cbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIHNldExvZ3MoKHByZXYpID0+IHByZXYuZmlsdGVyKChsb2cpID0+IGxvZy5yaXR1YWxJZCAhPT0gcml0dWFsSWQpKTtcbiAgICB9LFxuICAgIFtzZXRMb2dzLCBzZXRSaXR1YWxzXVxuICApO1xuXG4gIGNvbnN0IGZhaWxSaXR1YWwgPSB1c2VDYWxsYmFjayhcbiAgICAocml0dWFsSWQ6IHN0cmluZykgPT4ge1xuICAgICAgaW5jcmVtZW50Q291bnRlcigncml0dWFsc0ZhaWxlZCcsIDEpO1xuICAgICAgcmVzZXRSaXR1YWxTdHJlYWsocml0dWFsSWQpO1xuICAgIH0sXG4gICAgW2luY3JlbWVudENvdW50ZXIsIHJlc2V0Uml0dWFsU3RyZWFrXVxuICApO1xuXG4gIGNvbnN0IGFkZFJpdHVhbCA9IHVzZUNhbGxiYWNrKFxuICAgIChyaXR1YWw6IFJpdHVhbCkgPT4ge1xuICAgICAgc2V0Uml0dWFscygocHJldikgPT4gWy4uLnByZXYsIHJpdHVhbF0pO1xuICAgIH0sXG4gICAgW3NldFJpdHVhbHNdXG4gICk7XG5cbiAgY29uc3QgdXBkYXRlUml0dWFsID0gdXNlQ2FsbGJhY2soXG4gICAgKHJpdHVhbElkOiBzdHJpbmcsIHBhdGNoOiBQYXJ0aWFsPFJpdHVhbD4pID0+IHtcbiAgICAgIHNldFJpdHVhbHMoKHByZXYpID0+XG4gICAgICAgIHByZXYubWFwKChpdGVtKSA9PlxuICAgICAgICAgIGl0ZW0uaWQgPT09IHJpdHVhbElkXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgICAgIC4uLnBhdGNoLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA6IGl0ZW1cbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9LFxuICAgIFtzZXRSaXR1YWxzXVxuICApO1xuXG4gIGNvbnN0IGRlbGV0ZVJpdHVhbCA9IHVzZUNhbGxiYWNrKFxuICAgIChyaXR1YWxJZDogc3RyaW5nKSA9PiB7XG4gICAgICBzZXRSaXR1YWxzKChwcmV2KSA9PiBwcmV2LmZpbHRlcigoaXRlbSkgPT4gaXRlbS5pZCAhPT0gcml0dWFsSWQpKTtcbiAgICAgIHNldExvZ3MoKHByZXYpID0+IHByZXYuZmlsdGVyKChsb2cpID0+IGxvZy5yaXR1YWxJZCAhPT0gcml0dWFsSWQpKTtcbiAgICB9LFxuICAgIFtzZXRMb2dzLCBzZXRSaXR1YWxzXVxuICApO1xuXG4gIGNvbnN0IHJpdHVhbExvZ3NEZXNjZW5kaW5nID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIFsuLi5sb2dzXS5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLnRpbWVzdGFtcCkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYS50aW1lc3RhbXApLmdldFRpbWUoKSk7XG4gIH0sIFtsb2dzXSk7XG5cbiAgcmV0dXJuIHtcbiAgICByaXR1YWxzLFxuICAgIGxvZ3M6IHJpdHVhbExvZ3NEZXNjZW5kaW5nLFxuICAgIHByb2dyZXNzQnlJZCxcbiAgICBjb21wbGV0ZVJpdHVhbCxcbiAgICBhZGRSaXR1YWwsXG4gICAgdXBkYXRlUml0dWFsLFxuICAgIGRlbGV0ZVJpdHVhbCxcbiAgICByZXNldFJpdHVhbFN0cmVhayxcbiAgICBmYWlsUml0dWFsLFxuICAgIHhwLFxuICAgIG9iZWRpZW5jZSxcbiAgICBzZXRYcCxcbiAgICBzZXRPYmVkaWVuY2UsXG4gIH07XG59XG4iXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJ1c2VNZW1vIiwidXNlUGVyc2lzdGVudFN0YXRlIiwidXNlQnVmZnMiLCJ1c2VDb21wYW5pb25zIiwidXNlTnBjcyIsInVzZVNoYW1lIiwiY2xvbmVEZWZhdWx0Uml0dWFsTG9ncyIsImNsb25lRGVmYXVsdFJpdHVhbHMiLCJjb21wdXRlUml0dWFsUHJvZ3Jlc3MiLCJGQUxMQkFDS19JRCIsImNyeXB0byIsInJhbmRvbVVVSUQiLCJEYXRlIiwibm93IiwidG9TdHJpbmciLCJ1c2VSaXR1YWxzRW5naW5lIiwicml0dWFscyIsInNldFJpdHVhbHMiLCJsb2dzIiwic2V0TG9ncyIsInhwIiwic2V0WHAiLCJvYmVkaWVuY2UiLCJzZXRPYmVkaWVuY2UiLCJhcHBseUV2ZW50IiwidHJpZ2dlckJ1ZmZCeVNvdXJjZSIsImNvbXBhbmlvbnMiLCJnYWluWHBGb3JDb21wYW5pb25zIiwibnBjcyIsImFkanVzdFNoYW1lIiwiYWRqdXN0TnBjU2hhbWUiLCJpbmNyZW1lbnRDb3VudGVyIiwicHJvZ3Jlc3NCeUlkIiwicmVkdWNlIiwiYWNjIiwicml0dWFsIiwiaWQiLCJyZWFkU3RyZWFrTXVsdGlwbGllckVuYWJsZWQiLCJyYXciLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicGFyc2VkIiwiSlNPTiIsInBhcnNlIiwic3RyZWFrTXVsdGlwbGllckVuYWJsZWQiLCJjb21wbGV0ZVJpdHVhbCIsInJpdHVhbElkIiwiZmluZCIsIml0ZW0iLCJzdGF0dXMiLCJvdXRjb21lIiwicHJvZ3Jlc3MiLCJwcmV2aW91c0xvZ3MiLCJwcm9ncmVzc0JlZm9yZSIsImNvbXBsZXRlZCIsImJhc2VMb2ciLCJ0aW1lc3RhbXAiLCJ0b0lTT1N0cmluZyIsInRlbnRhdGl2ZUxvZ3MiLCJwcm9ncmVzc0FmdGVyIiwibXVsdGlwbGllckVuYWJsZWQiLCJhcHBsaWVkTXVsdGlwbGllciIsIm11bHRpcGxpZXIiLCJ4cFdpdGhCb251cyIsIk1hdGgiLCJyb3VuZCIsIm9iZWRpZW5jZUF3YXJkZWQiLCJmaW5hbFhwIiwiZmluYWxPYmVkaWVuY2UiLCJjb21wbGV0ZWRMb2ciLCJ4cEF3YXJkZWQiLCJtdWx0aXBsaWVyQXBwbGllZCIsInVwZGF0ZWRMb2dzIiwicHJldiIsIm1hcCIsInN0cmVhayIsIm5hbWUiLCJyaXR1YWxUZXh0IiwidG9Mb3dlckNhc2UiLCJmb3JFYWNoIiwibnBjIiwiaW5jbHVkZXMiLCJsb2ciLCJyZXNldFJpdHVhbFN0cmVhayIsImZpbHRlciIsImZhaWxSaXR1YWwiLCJhZGRSaXR1YWwiLCJ1cGRhdGVSaXR1YWwiLCJwYXRjaCIsImRlbGV0ZVJpdHVhbCIsInJpdHVhbExvZ3NEZXNjZW5kaW5nIiwic29ydCIsImEiLCJiIiwiZ2V0VGltZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useRitualsEngine.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useShame.ts":
/*!*******************************!*\
  !*** ./app/hooks/useShame.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useShame: () => (/* binding */ useShame)\n/* harmony export */ });\n/* harmony import */ var _usePersistentState__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./usePersistentState */ \"(ssr)/./app/hooks/usePersistentState.ts\");\n/* harmony import */ var _data_shame_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../data/shame.json */ \"(ssr)/./data/shame.json\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* __next_internal_client_entry_do_not_use__ useShame auto */ \n\n\nfunction useShame() {\n    const [shame, setShame] = (0,_usePersistentState__WEBPACK_IMPORTED_MODULE_0__.usePersistentState)('shame', {\n        \"useShame.usePersistentState\": ()=>_data_shame_json__WEBPACK_IMPORTED_MODULE_1__\n    }[\"useShame.usePersistentState\"]);\n    const addConfession = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)({\n        \"useShame.useCallback[addConfession]\": (text)=>{\n            const newConfession = {\n                id: `c${Date.now()}`,\n                text,\n                date: new Date().toISOString().split('T')[0]\n            };\n            setShame({\n                \"useShame.useCallback[addConfession]\": (prev)=>({\n                        ...prev,\n                        confessions: [\n                            ...prev.confessions,\n                            newConfession\n                        ]\n                    })\n            }[\"useShame.useCallback[addConfession]\"]);\n        }\n    }[\"useShame.useCallback[addConfession]\"], [\n        setShame\n    ]);\n    const incrementCounter = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)({\n        \"useShame.useCallback[incrementCounter]\": (counter, amount = 1)=>{\n            setShame({\n                \"useShame.useCallback[incrementCounter]\": (prev)=>{\n                    if (typeof prev[counter] === 'number') {\n                        return {\n                            ...prev,\n                            [counter]: prev[counter] + amount\n                        };\n                    }\n                    return prev;\n                }\n            }[\"useShame.useCallback[incrementCounter]\"]);\n        }\n    }[\"useShame.useCallback[incrementCounter]\"], [\n        setShame\n    ]);\n    const resetShame = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)({\n        \"useShame.useCallback[resetShame]\": ()=>{\n            setShame(_data_shame_json__WEBPACK_IMPORTED_MODULE_1__);\n        }\n    }[\"useShame.useCallback[resetShame]\"], [\n        setShame\n    ]);\n    return {\n        shame,\n        addConfession,\n        incrementCounter,\n        resetShame\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvaG9va3MvdXNlU2hhbWUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OERBRTBEO0FBQ1Q7QUFDYjtBQWU3QixTQUFTRztJQUNkLE1BQU0sQ0FBQ0MsT0FBT0MsU0FBUyxHQUFHTCx1RUFBa0JBLENBQWE7dUNBQVMsSUFBTUMsNkNBQVlBOztJQUVwRixNQUFNSyxnQkFBZ0JKLGtEQUFXQTsrQ0FBQyxDQUFDSztZQUNqQyxNQUFNQyxnQkFBNEI7Z0JBQ2hDQyxJQUFJLENBQUMsQ0FBQyxFQUFFQyxLQUFLQyxHQUFHLElBQUk7Z0JBQ3BCSjtnQkFDQUssTUFBTSxJQUFJRixPQUFPRyxXQUFXLEdBQUdDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUM5QztZQUNBVDt1REFBU1UsQ0FBQUEsT0FBUzt3QkFDaEIsR0FBR0EsSUFBSTt3QkFDUEMsYUFBYTsrQkFBSUQsS0FBS0MsV0FBVzs0QkFBRVI7eUJBQWM7b0JBQ25EOztRQUNGOzhDQUFHO1FBQUNIO0tBQVM7SUFFYixNQUFNWSxtQkFBbUJmLGtEQUFXQTtrREFBQyxDQUFDZ0IsU0FBMkJDLFNBQVMsQ0FBQztZQUN6RWQ7MERBQVNVLENBQUFBO29CQUNQLElBQUksT0FBT0EsSUFBSSxDQUFDRyxRQUFRLEtBQUssVUFBVTt3QkFDckMsT0FBTzs0QkFDTCxHQUFHSCxJQUFJOzRCQUNQLENBQUNHLFFBQVEsRUFBRSxJQUFLLENBQUNBLFFBQVEsR0FBY0M7d0JBQ3pDO29CQUNGO29CQUNBLE9BQU9KO2dCQUNUOztRQUNGO2lEQUFHO1FBQUNWO0tBQVM7SUFFYixNQUFNZSxhQUFhbEIsa0RBQVdBOzRDQUFDO1lBQzdCRyxTQUFTSiw2Q0FBWUE7UUFDdkI7MkNBQUc7UUFBQ0k7S0FBUztJQUViLE9BQU87UUFDTEQ7UUFDQUU7UUFDQVc7UUFDQUc7SUFDRjtBQUNGIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXGhvb2tzXFx1c2VTaGFtZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XHJcblxyXG5pbXBvcnQgeyB1c2VQZXJzaXN0ZW50U3RhdGUgfSBmcm9tICcuL3VzZVBlcnNpc3RlbnRTdGF0ZSc7XHJcbmltcG9ydCBkZWZhdWx0U2hhbWUgZnJvbSAnLi4vLi4vZGF0YS9zaGFtZS5qc29uJztcclxuaW1wb3J0IHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENvbmZlc3Npb24ge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgdGV4dDogc3RyaW5nO1xyXG4gIGRhdGU6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTaGFtZVN0YXRlIHtcclxuICBwYW50aWVzU25pZmZlZDogbnVtYmVyO1xyXG4gIHJpdHVhbHNGYWlsZWQ6IG51bWJlcjtcclxuICBkaXJ0eVRva2Vuc0J1cm5lZDogbnVtYmVyO1xyXG4gIGNvbmZlc3Npb25zOiBDb25mZXNzaW9uW107XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VTaGFtZSgpIHtcclxuICBjb25zdCBbc2hhbWUsIHNldFNoYW1lXSA9IHVzZVBlcnNpc3RlbnRTdGF0ZTxTaGFtZVN0YXRlPignc2hhbWUnLCAoKSA9PiBkZWZhdWx0U2hhbWUpO1xyXG5cclxuICBjb25zdCBhZGRDb25mZXNzaW9uID0gdXNlQ2FsbGJhY2soKHRleHQ6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgbmV3Q29uZmVzc2lvbjogQ29uZmVzc2lvbiA9IHtcclxuICAgICAgaWQ6IGBjJHtEYXRlLm5vdygpfWAsXHJcbiAgICAgIHRleHQsXHJcbiAgICAgIGRhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLFxyXG4gICAgfTtcclxuICAgIHNldFNoYW1lKHByZXYgPT4gKHtcclxuICAgICAgLi4ucHJldixcclxuICAgICAgY29uZmVzc2lvbnM6IFsuLi5wcmV2LmNvbmZlc3Npb25zLCBuZXdDb25mZXNzaW9uXSxcclxuICAgIH0pKTtcclxuICB9LCBbc2V0U2hhbWVdKTtcclxuXHJcbiAgY29uc3QgaW5jcmVtZW50Q291bnRlciA9IHVzZUNhbGxiYWNrKChjb3VudGVyOiBrZXlvZiBTaGFtZVN0YXRlLCBhbW91bnQgPSAxKSA9PiB7XHJcbiAgICBzZXRTaGFtZShwcmV2ID0+IHtcclxuICAgICAgaWYgKHR5cGVvZiBwcmV2W2NvdW50ZXJdID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAuLi5wcmV2LFxyXG4gICAgICAgICAgW2NvdW50ZXJdOiAocHJldltjb3VudGVyXSBhcyBudW1iZXIpICsgYW1vdW50LFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHByZXY7XHJcbiAgICB9KTtcclxuICB9LCBbc2V0U2hhbWVdKTtcclxuXHJcbiAgY29uc3QgcmVzZXRTaGFtZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIHNldFNoYW1lKGRlZmF1bHRTaGFtZSk7XHJcbiAgfSwgW3NldFNoYW1lXSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBzaGFtZSxcclxuICAgIGFkZENvbmZlc3Npb24sXHJcbiAgICBpbmNyZW1lbnRDb3VudGVyLFxyXG4gICAgcmVzZXRTaGFtZSxcclxuICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJ1c2VQZXJzaXN0ZW50U3RhdGUiLCJkZWZhdWx0U2hhbWUiLCJ1c2VDYWxsYmFjayIsInVzZVNoYW1lIiwic2hhbWUiLCJzZXRTaGFtZSIsImFkZENvbmZlc3Npb24iLCJ0ZXh0IiwibmV3Q29uZmVzc2lvbiIsImlkIiwiRGF0ZSIsIm5vdyIsImRhdGUiLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwicHJldiIsImNvbmZlc3Npb25zIiwiaW5jcmVtZW50Q291bnRlciIsImNvdW50ZXIiLCJhbW91bnQiLCJyZXNldFNoYW1lIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useShame.ts\n");

/***/ }),

/***/ "(ssr)/./app/hooks/useShameAchievements.ts":
/*!*******************************************!*\
  !*** ./app/hooks/useShameAchievements.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useShameAchievements: () => (/* binding */ useShameAchievements)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _useAchievements__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useAchievements */ \"(ssr)/./app/hooks/useAchievements.ts\");\n/* harmony import */ var _useShame__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useShame */ \"(ssr)/./app/hooks/useShame.ts\");\n/* harmony import */ var _usePunishments__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./usePunishments */ \"(ssr)/./app/hooks/usePunishments.ts\");\n/* __next_internal_client_entry_do_not_use__ useShameAchievements auto */ \n\n\n\n/**\r\n * A custom hook to manage shame-related achievements.\r\n * It listens to changes in shame state and unlocks achievements when their triggers are met.\r\n */ function useShameAchievements() {\n    const { achievements, unlockAchievement } = (0,_useAchievements__WEBPACK_IMPORTED_MODULE_1__.useAchievements)();\n    const { shame } = (0,_useShame__WEBPACK_IMPORTED_MODULE_2__.useShame)();\n    const { activePunishments } = (0,_usePunishments__WEBPACK_IMPORTED_MODULE_3__.usePunishments)();\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useShameAchievements.useEffect\": ()=>{\n            // Don't run if achievements haven't loaded yet\n            if (!achievements || achievements.length === 0) return;\n            // Filter for only un-unlocked Shame achievements to check\n            const shameAchievements = achievements.filter({\n                \"useShameAchievements.useEffect.shameAchievements\": (a)=>!a.unlocked && a.category === 'Shame'\n            }[\"useShameAchievements.useEffect.shameAchievements\"]);\n            if (shameAchievements.length === 0) return;\n            shameAchievements.forEach({\n                \"useShameAchievements.useEffect\": (achievement)=>{\n                    const { trigger } = achievement;\n                    let conditionMet = false;\n                    switch(trigger.type){\n                        case 'SHAME_COUNTER':\n                            // Ensure the counter exists on the shame object before checking\n                            if (trigger.counter in shame && shame[trigger.counter] >= trigger.value) {\n                                conditionMet = true;\n                            }\n                            break;\n                        case 'CONFESSION_LOGGED':\n                            if (shame.confessions.length >= trigger.value) {\n                                conditionMet = true;\n                            }\n                            break;\n                        case 'PUNISHMENT_TIER_REACHED':\n                            // The tier is determined by the number of active punishments\n                            if (activePunishments.length >= trigger.value) {\n                                conditionMet = true;\n                            }\n                            break;\n                        default:\n                            break;\n                    }\n                    if (conditionMet) {\n                        unlockAchievement(achievement.id);\n                    }\n                }\n            }[\"useShameAchievements.useEffect\"]);\n        // This effect should re-run whenever the player's shame or punishment status changes.\n        }\n    }[\"useShameAchievements.useEffect\"], [\n        shame,\n        activePunishments,\n        achievements,\n        unlockAchievement\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvaG9va3MvdXNlU2hhbWVBY2hpZXZlbWVudHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OzBFQUVrQztBQUNrQjtBQUNkO0FBQ1k7QUFFbEQ7OztDQUdDLEdBQ00sU0FBU0k7SUFDZCxNQUFNLEVBQUVDLFlBQVksRUFBRUMsaUJBQWlCLEVBQUUsR0FBR0wsaUVBQWVBO0lBQzNELE1BQU0sRUFBRU0sS0FBSyxFQUFFLEdBQUdMLG1EQUFRQTtJQUMxQixNQUFNLEVBQUVNLGlCQUFpQixFQUFFLEdBQUdMLCtEQUFjQTtJQUU1Q0gsZ0RBQVNBOzBDQUFDO1lBQ1IsK0NBQStDO1lBQy9DLElBQUksQ0FBQ0ssZ0JBQWdCQSxhQUFhSSxNQUFNLEtBQUssR0FBRztZQUVoRCwwREFBMEQ7WUFDMUQsTUFBTUMsb0JBQW9CTCxhQUFhTSxNQUFNO29FQUMzQ0MsQ0FBQUEsSUFBSyxDQUFDQSxFQUFFQyxRQUFRLElBQUlELEVBQUVFLFFBQVEsS0FBSzs7WUFHckMsSUFBSUosa0JBQWtCRCxNQUFNLEtBQUssR0FBRztZQUVwQ0Msa0JBQWtCSyxPQUFPO2tEQUFDQyxDQUFBQTtvQkFDeEIsTUFBTSxFQUFFQyxPQUFPLEVBQUUsR0FBR0Q7b0JBQ3BCLElBQUlFLGVBQWU7b0JBRW5CLE9BQVFELFFBQVFFLElBQUk7d0JBQ2xCLEtBQUs7NEJBQ0gsZ0VBQWdFOzRCQUNoRSxJQUFJRixRQUFRRyxPQUFPLElBQUliLFNBQVNBLEtBQUssQ0FBQ1UsUUFBUUcsT0FBTyxDQUFDLElBQUlILFFBQVFJLEtBQUssRUFBRTtnQ0FDdkVILGVBQWU7NEJBQ2pCOzRCQUNBO3dCQUNGLEtBQUs7NEJBQ0gsSUFBSVgsTUFBTWUsV0FBVyxDQUFDYixNQUFNLElBQUlRLFFBQVFJLEtBQUssRUFBRTtnQ0FDN0NILGVBQWU7NEJBQ2pCOzRCQUNBO3dCQUNGLEtBQUs7NEJBQ0YsNkRBQTZEOzRCQUM5RCxJQUFJVixrQkFBa0JDLE1BQU0sSUFBSVEsUUFBUUksS0FBSyxFQUFFO2dDQUM3Q0gsZUFBZTs0QkFDakI7NEJBQ0E7d0JBQ0Y7NEJBRUU7b0JBQ0o7b0JBRUEsSUFBSUEsY0FBYzt3QkFDaEJaLGtCQUFrQlUsWUFBWU8sRUFBRTtvQkFDbEM7Z0JBQ0Y7O1FBQ0Esc0ZBQXNGO1FBQ3hGO3lDQUFHO1FBQUNoQjtRQUFPQztRQUFtQkg7UUFBY0M7S0FBa0I7QUFDaEUiLCJzb3VyY2VzIjpbIkM6XFxNb21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxcaG9va3NcXHVzZVNoYW1lQWNoaWV2ZW1lbnRzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcclxuXHJcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlQWNoaWV2ZW1lbnRzIH0gZnJvbSAnLi91c2VBY2hpZXZlbWVudHMnO1xyXG5pbXBvcnQgeyB1c2VTaGFtZSB9IGZyb20gJy4vdXNlU2hhbWUnO1xyXG5pbXBvcnQgeyB1c2VQdW5pc2htZW50cyB9IGZyb20gJy4vdXNlUHVuaXNobWVudHMnO1xyXG5cclxuLyoqXHJcbiAqIEEgY3VzdG9tIGhvb2sgdG8gbWFuYWdlIHNoYW1lLXJlbGF0ZWQgYWNoaWV2ZW1lbnRzLlxyXG4gKiBJdCBsaXN0ZW5zIHRvIGNoYW5nZXMgaW4gc2hhbWUgc3RhdGUgYW5kIHVubG9ja3MgYWNoaWV2ZW1lbnRzIHdoZW4gdGhlaXIgdHJpZ2dlcnMgYXJlIG1ldC5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VTaGFtZUFjaGlldmVtZW50cygpIHtcclxuICBjb25zdCB7IGFjaGlldmVtZW50cywgdW5sb2NrQWNoaWV2ZW1lbnQgfSA9IHVzZUFjaGlldmVtZW50cygpO1xyXG4gIGNvbnN0IHsgc2hhbWUgfSA9IHVzZVNoYW1lKCk7XHJcbiAgY29uc3QgeyBhY3RpdmVQdW5pc2htZW50cyB9ID0gdXNlUHVuaXNobWVudHMoKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIERvbid0IHJ1biBpZiBhY2hpZXZlbWVudHMgaGF2ZW4ndCBsb2FkZWQgeWV0XHJcbiAgICBpZiAoIWFjaGlldmVtZW50cyB8fCBhY2hpZXZlbWVudHMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG4gICAgLy8gRmlsdGVyIGZvciBvbmx5IHVuLXVubG9ja2VkIFNoYW1lIGFjaGlldmVtZW50cyB0byBjaGVja1xyXG4gICAgY29uc3Qgc2hhbWVBY2hpZXZlbWVudHMgPSBhY2hpZXZlbWVudHMuZmlsdGVyKFxyXG4gICAgICBhID0+ICFhLnVubG9ja2VkICYmIGEuY2F0ZWdvcnkgPT09ICdTaGFtZSdcclxuICAgICk7XHJcblxyXG4gICAgaWYgKHNoYW1lQWNoaWV2ZW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG5cclxuICAgIHNoYW1lQWNoaWV2ZW1lbnRzLmZvckVhY2goYWNoaWV2ZW1lbnQgPT4ge1xyXG4gICAgICBjb25zdCB7IHRyaWdnZXIgfSA9IGFjaGlldmVtZW50O1xyXG4gICAgICBsZXQgY29uZGl0aW9uTWV0ID0gZmFsc2U7XHJcblxyXG4gICAgICBzd2l0Y2ggKHRyaWdnZXIudHlwZSkge1xyXG4gICAgICAgIGNhc2UgJ1NIQU1FX0NPVU5URVInOlxyXG4gICAgICAgICAgLy8gRW5zdXJlIHRoZSBjb3VudGVyIGV4aXN0cyBvbiB0aGUgc2hhbWUgb2JqZWN0IGJlZm9yZSBjaGVja2luZ1xyXG4gICAgICAgICAgaWYgKHRyaWdnZXIuY291bnRlciBpbiBzaGFtZSAmJiBzaGFtZVt0cmlnZ2VyLmNvdW50ZXJdID49IHRyaWdnZXIudmFsdWUpIHtcclxuICAgICAgICAgICAgY29uZGl0aW9uTWV0ID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ0NPTkZFU1NJT05fTE9HR0VEJzpcclxuICAgICAgICAgIGlmIChzaGFtZS5jb25mZXNzaW9ucy5sZW5ndGggPj0gdHJpZ2dlci52YWx1ZSkge1xyXG4gICAgICAgICAgICBjb25kaXRpb25NZXQgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnUFVOSVNITUVOVF9USUVSX1JFQUNIRUQnOlxyXG4gICAgICAgICAgIC8vIFRoZSB0aWVyIGlzIGRldGVybWluZWQgYnkgdGhlIG51bWJlciBvZiBhY3RpdmUgcHVuaXNobWVudHNcclxuICAgICAgICAgIGlmIChhY3RpdmVQdW5pc2htZW50cy5sZW5ndGggPj0gdHJpZ2dlci52YWx1ZSkge1xyXG4gICAgICAgICAgICBjb25kaXRpb25NZXQgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIC8vIFRoaXMgYWNoaWV2ZW1lbnQncyB0cmlnZ2VyIGlzIG5vdCBoYW5kbGVkIGJ5IHRoaXMgc3BlY2lmaWMgaG9va1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChjb25kaXRpb25NZXQpIHtcclxuICAgICAgICB1bmxvY2tBY2hpZXZlbWVudChhY2hpZXZlbWVudC5pZCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgLy8gVGhpcyBlZmZlY3Qgc2hvdWxkIHJlLXJ1biB3aGVuZXZlciB0aGUgcGxheWVyJ3Mgc2hhbWUgb3IgcHVuaXNobWVudCBzdGF0dXMgY2hhbmdlcy5cclxuICB9LCBbc2hhbWUsIGFjdGl2ZVB1bmlzaG1lbnRzLCBhY2hpZXZlbWVudHMsIHVubG9ja0FjaGlldmVtZW50XSk7XHJcbn1cclxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZUFjaGlldmVtZW50cyIsInVzZVNoYW1lIiwidXNlUHVuaXNobWVudHMiLCJ1c2VTaGFtZUFjaGlldmVtZW50cyIsImFjaGlldmVtZW50cyIsInVubG9ja0FjaGlldmVtZW50Iiwic2hhbWUiLCJhY3RpdmVQdW5pc2htZW50cyIsImxlbmd0aCIsInNoYW1lQWNoaWV2ZW1lbnRzIiwiZmlsdGVyIiwiYSIsInVubG9ja2VkIiwiY2F0ZWdvcnkiLCJmb3JFYWNoIiwiYWNoaWV2ZW1lbnQiLCJ0cmlnZ2VyIiwiY29uZGl0aW9uTWV0IiwidHlwZSIsImNvdW50ZXIiLCJ2YWx1ZSIsImNvbmZlc3Npb25zIiwiaWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/hooks/useShameAchievements.ts\n");

/***/ }),

/***/ "(ssr)/./app/lib/companions.ts":
/*!*******************************!*\
  !*** ./app/lib/companions.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   COMPANION_BUFF_KEYS: () => (/* binding */ COMPANION_BUFF_KEYS),\n/* harmony export */   XP_EVENT_VALUES: () => (/* binding */ XP_EVENT_VALUES),\n/* harmony export */   canEvolve: () => (/* binding */ canEvolve),\n/* harmony export */   cloneCompanion: () => (/* binding */ cloneCompanion),\n/* harmony export */   cloneDefaultCompanions: () => (/* binding */ cloneDefaultCompanions),\n/* harmony export */   getActiveForm: () => (/* binding */ getActiveForm),\n/* harmony export */   getNextForm: () => (/* binding */ getNextForm),\n/* harmony export */   getXpForEvent: () => (/* binding */ getXpForEvent),\n/* harmony export */   getXpProgression: () => (/* binding */ getXpProgression),\n/* harmony export */   levelForXp: () => (/* binding */ levelForXp),\n/* harmony export */   totalXpToReachLevel: () => (/* binding */ totalXpToReachLevel),\n/* harmony export */   xpNeededForLevel: () => (/* binding */ xpNeededForLevel)\n/* harmony export */ });\n/* harmony import */ var _data_companions_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../data/companions.json */ \"(ssr)/./data/companions.json\");\n\nconst COMPANION_BUFF_KEYS = [\n    \"xpMultiplier\",\n    \"obedienceGain\",\n    \"tokenMultiplier\",\n    \"clarityBoost\"\n];\nconst DEFAULT_COMPANIONS = _data_companions_json__WEBPACK_IMPORTED_MODULE_0__.map((companion)=>cloneCompanion(companion));\nfunction cloneCompanion(companion) {\n    const normalisedForms = [\n        ...companion.evolutionTree\n    ].map((form, index)=>normaliseForm(form, index)).sort((a, b)=>(a.unlockLevel ?? 0) - (b.unlockLevel ?? 0));\n    const currentForm = normalisedForms.find((form)=>form.id === companion.currentForm)?.id ?? normalisedForms[0]?.id ?? companion.currentForm;\n    const level = Math.max(1, Number(companion.level) || 1);\n    const carryOverXp = Math.max(0, Number(companion.xp) || 0);\n    const sanitisedXp = clampXp(carryOverXp, level);\n    return {\n        ...companion,\n        level,\n        xp: sanitisedXp,\n        autoEvolve: Boolean(companion.autoEvolve),\n        currentForm,\n        evolutionTree: normalisedForms\n    };\n}\nfunction cloneDefaultCompanions() {\n    return DEFAULT_COMPANIONS.map((companion)=>cloneCompanion(companion));\n}\nfunction normaliseForm(form, index) {\n    const unlockLevel = typeof form.unlockLevel === \"number\" ? Math.max(1, form.unlockLevel) : index === 0 ? 1 : 1 + index * 2;\n    return {\n        ...form,\n        unlockLevel,\n        buff: form.buff ? {\n            ...form.buff\n        } : undefined\n    };\n}\nfunction clampXp(xp, level) {\n    const capacity = xpNeededForLevel(level + 1);\n    if (capacity <= 0) return 0;\n    return Math.min(xp, capacity - 1);\n}\nfunction getActiveForm(companion) {\n    if (!companion || !companion.evolutionTree) {\n        return undefined;\n    }\n    return companion.evolutionTree.find((form)=>form.id === companion.currentForm);\n}\nfunction getNextForm(companion) {\n    //  FIX: Guard against undefined evolutionTree\n    if (!companion?.evolutionTree) {\n        return undefined;\n    }\n    const next = companion.evolutionTree.filter((form)=>form.unlockLevel > (getActiveForm(companion)?.unlockLevel ?? 0)).sort((a, b)=>a.unlockLevel - b.unlockLevel)[0];\n    return next;\n}\nfunction canEvolve(companion) {\n    const next = getNextForm(companion);\n    if (!next) return false;\n    return companion.level >= next.unlockLevel;\n}\nconst XP_EVENT_VALUES = {\n    dream: 10,\n    ritual: 20,\n    quest: 50,\n    panty: 30\n};\nfunction getXpForEvent(event) {\n    return XP_EVENT_VALUES[event] ?? 0;\n}\nfunction levelForXp(level, xp) {\n    let currentLevel = level;\n    let remainingXp = xp;\n    while(remainingXp >= xpNeededForLevel(currentLevel + 1)){\n        remainingXp -= xpNeededForLevel(currentLevel + 1);\n        currentLevel += 1;\n    }\n    return currentLevel;\n}\nfunction xpNeededForLevel(targetLevel) {\n    if (targetLevel <= 1) return 0;\n    return Math.max(20, targetLevel * 20);\n}\nfunction totalXpToReachLevel(level) {\n    if (level <= 1) return 0;\n    let total = 0;\n    for(let current = 2; current <= level; current += 1){\n        total += xpNeededForLevel(current);\n    }\n    return total;\n}\nfunction getXpProgression(companion) {\n    const nextLevel = companion.level + 1;\n    const needed = xpNeededForLevel(nextLevel);\n    return {\n        level: companion.level,\n        current: companion.xp,\n        needed,\n        ratio: needed <= 0 ? 0 : Math.max(0, Math.min(1, companion.xp / needed))\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aWQgRHJlYW1cXGFwcFxcbGliXFxjb21wYW5pb25zLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkZWZhdWx0Q29tcGFuaW9ucyBmcm9tIFwiLi4vLi4vZGF0YS9jb21wYW5pb25zLmpzb25cIjtcblxuZXhwb3J0IHR5cGUgQ29tcGFuaW9uQnVmZiA9IHtcbiAgeHBNdWx0aXBsaWVyPzogbnVtYmVyO1xuICBvYmVkaWVuY2VHYWluPzogbnVtYmVyO1xuICB0b2tlbk11bHRpcGxpZXI/OiBudW1iZXI7XG4gIGNsYXJpdHlCb29zdD86IG51bWJlcjtcbn07XG5cbmV4cG9ydCB0eXBlIENvbXBhbmlvbkJ1ZmZLZXkgPSBrZXlvZiBDb21wYW5pb25CdWZmO1xuXG5leHBvcnQgY29uc3QgQ09NUEFOSU9OX0JVRkZfS0VZUzogQ29tcGFuaW9uQnVmZktleVtdID0gW1xuICBcInhwTXVsdGlwbGllclwiLFxuICBcIm9iZWRpZW5jZUdhaW5cIixcbiAgXCJ0b2tlbk11bHRpcGxpZXJcIixcbiAgXCJjbGFyaXR5Qm9vc3RcIixcbl07XG5cbmV4cG9ydCB0eXBlIENvbXBhbmlvbkZvcm0gPSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgdW5sb2NrTGV2ZWw6IG51bWJlcjtcbiAgYnVmZj86IENvbXBhbmlvbkJ1ZmY7XG4gIGljb24/OiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgQ29tcGFuaW9uID0ge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGxldmVsOiBudW1iZXI7XG4gIHhwOiBudW1iZXI7XG4gIGJvbmQ6IG51bWJlcjtcbiAgbG9yZT86IHN0cmluZztcbiAgZXZvbHV0aW9uVHJlZTogQ29tcGFuaW9uRm9ybVtdO1xuICBjdXJyZW50Rm9ybTogc3RyaW5nO1xuICBhdXRvRXZvbHZlPzogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCB0eXBlIENvbXBhbmlvblhwRXZlbnQgPSBcImRyZWFtXCIgfCBcInJpdHVhbFwiIHwgXCJxdWVzdFwiIHwgXCJwYW50eVwiO1xuXG5jb25zdCBERUZBVUxUX0NPTVBBTklPTlMgPSAoZGVmYXVsdENvbXBhbmlvbnMgYXMgQ29tcGFuaW9uW10pLm1hcCgoY29tcGFuaW9uKSA9PiBjbG9uZUNvbXBhbmlvbihjb21wYW5pb24pKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lQ29tcGFuaW9uKGNvbXBhbmlvbjogQ29tcGFuaW9uKTogQ29tcGFuaW9uIHtcbiAgY29uc3Qgbm9ybWFsaXNlZEZvcm1zID0gWy4uLmNvbXBhbmlvbi5ldm9sdXRpb25UcmVlXVxuICAgIC5tYXAoKGZvcm0sIGluZGV4KSA9PiBub3JtYWxpc2VGb3JtKGZvcm0sIGluZGV4KSlcbiAgICAuc29ydCgoYSwgYikgPT4gKGEudW5sb2NrTGV2ZWwgPz8gMCkgLSAoYi51bmxvY2tMZXZlbCA/PyAwKSk7XG5cbiAgY29uc3QgY3VycmVudEZvcm0gPSBub3JtYWxpc2VkRm9ybXMuZmluZCgoZm9ybSkgPT4gZm9ybS5pZCA9PT0gY29tcGFuaW9uLmN1cnJlbnRGb3JtKT8uaWRcbiAgICA/PyBub3JtYWxpc2VkRm9ybXNbMF0/LmlkXG4gICAgPz8gY29tcGFuaW9uLmN1cnJlbnRGb3JtO1xuXG4gIGNvbnN0IGxldmVsID0gTWF0aC5tYXgoMSwgTnVtYmVyKGNvbXBhbmlvbi5sZXZlbCkgfHwgMSk7XG4gIGNvbnN0IGNhcnJ5T3ZlclhwID0gTWF0aC5tYXgoMCwgTnVtYmVyKGNvbXBhbmlvbi54cCkgfHwgMCk7XG4gIGNvbnN0IHNhbml0aXNlZFhwID0gY2xhbXBYcChjYXJyeU92ZXJYcCwgbGV2ZWwpO1xuXG4gIHJldHVybiB7XG4gICAgLi4uY29tcGFuaW9uLFxuICAgIGxldmVsLFxuICAgIHhwOiBzYW5pdGlzZWRYcCxcbiAgICBhdXRvRXZvbHZlOiBCb29sZWFuKGNvbXBhbmlvbi5hdXRvRXZvbHZlKSxcbiAgICBjdXJyZW50Rm9ybSxcbiAgICBldm9sdXRpb25UcmVlOiBub3JtYWxpc2VkRm9ybXMsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZURlZmF1bHRDb21wYW5pb25zKCk6IENvbXBhbmlvbltdIHtcbiAgcmV0dXJuIERFRkFVTFRfQ09NUEFOSU9OUy5tYXAoKGNvbXBhbmlvbikgPT4gY2xvbmVDb21wYW5pb24oY29tcGFuaW9uKSk7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGlzZUZvcm0oZm9ybTogQ29tcGFuaW9uRm9ybSwgaW5kZXg6IG51bWJlcik6IENvbXBhbmlvbkZvcm0ge1xuICBjb25zdCB1bmxvY2tMZXZlbCA9IHR5cGVvZiBmb3JtLnVubG9ja0xldmVsID09PSBcIm51bWJlclwiXG4gICAgPyBNYXRoLm1heCgxLCBmb3JtLnVubG9ja0xldmVsKVxuICAgIDogaW5kZXggPT09IDBcbiAgICAgID8gMVxuICAgICAgOiAxICsgaW5kZXggKiAyO1xuXG4gIHJldHVybiB7XG4gICAgLi4uZm9ybSxcbiAgICB1bmxvY2tMZXZlbCxcbiAgICBidWZmOiBmb3JtLmJ1ZmYgPyB7IC4uLmZvcm0uYnVmZiB9IDogdW5kZWZpbmVkLFxuICB9O1xufVxuXG5mdW5jdGlvbiBjbGFtcFhwKHhwOiBudW1iZXIsIGxldmVsOiBudW1iZXIpOiBudW1iZXIge1xuICBjb25zdCBjYXBhY2l0eSA9IHhwTmVlZGVkRm9yTGV2ZWwobGV2ZWwgKyAxKTtcbiAgaWYgKGNhcGFjaXR5IDw9IDApIHJldHVybiAwO1xuICByZXR1cm4gTWF0aC5taW4oeHAsIGNhcGFjaXR5IC0gMSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBY3RpdmVGb3JtKGNvbXBhbmlvbjogQ29tcGFuaW9uKTogQ29tcGFuaW9uRm9ybSB8IHVuZGVmaW5lZCB7XG4gIGlmICghY29tcGFuaW9uIHx8ICFjb21wYW5pb24uZXZvbHV0aW9uVHJlZSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIGNvbXBhbmlvbi5ldm9sdXRpb25UcmVlLmZpbmQoKGZvcm0pID0+IGZvcm0uaWQgPT09IGNvbXBhbmlvbi5jdXJyZW50Rm9ybSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXROZXh0Rm9ybShjb21wYW5pb246IENvbXBhbmlvbik6IENvbXBhbmlvbkZvcm0gfCB1bmRlZmluZWQge1xuICAvLyDinIUgRklYOiBHdWFyZCBhZ2FpbnN0IHVuZGVmaW5lZCBldm9sdXRpb25UcmVlXG4gIGlmICghY29tcGFuaW9uPy5ldm9sdXRpb25UcmVlKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBcbiAgY29uc3QgbmV4dCA9IGNvbXBhbmlvbi5ldm9sdXRpb25UcmVlXG4gICAgLmZpbHRlcigoZm9ybSkgPT4gZm9ybS51bmxvY2tMZXZlbCA+IChnZXRBY3RpdmVGb3JtKGNvbXBhbmlvbik/LnVubG9ja0xldmVsID8/IDApKVxuICAgIC5zb3J0KChhLCBiKSA9PiBhLnVubG9ja0xldmVsIC0gYi51bmxvY2tMZXZlbClbMF07XG4gIHJldHVybiBuZXh0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FuRXZvbHZlKGNvbXBhbmlvbjogQ29tcGFuaW9uKTogYm9vbGVhbiB7XG4gIGNvbnN0IG5leHQgPSBnZXROZXh0Rm9ybShjb21wYW5pb24pO1xuICBpZiAoIW5leHQpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIGNvbXBhbmlvbi5sZXZlbCA+PSBuZXh0LnVubG9ja0xldmVsO1xufVxuXG5leHBvcnQgY29uc3QgWFBfRVZFTlRfVkFMVUVTOiBSZWNvcmQ8Q29tcGFuaW9uWHBFdmVudCwgbnVtYmVyPiA9IHtcbiAgZHJlYW06IDEwLFxuICByaXR1YWw6IDIwLFxuICBxdWVzdDogNTAsXG4gIHBhbnR5OiAzMCxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRYcEZvckV2ZW50KGV2ZW50OiBDb21wYW5pb25YcEV2ZW50KTogbnVtYmVyIHtcbiAgcmV0dXJuIFhQX0VWRU5UX1ZBTFVFU1tldmVudF0gPz8gMDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxldmVsRm9yWHAobGV2ZWw6IG51bWJlciwgeHA6IG51bWJlcik6IG51bWJlciB7XG4gIGxldCBjdXJyZW50TGV2ZWwgPSBsZXZlbDtcbiAgbGV0IHJlbWFpbmluZ1hwID0geHA7XG4gIHdoaWxlIChyZW1haW5pbmdYcCA+PSB4cE5lZWRlZEZvckxldmVsKGN1cnJlbnRMZXZlbCArIDEpKSB7XG4gICAgcmVtYWluaW5nWHAgLT0geHBOZWVkZWRGb3JMZXZlbChjdXJyZW50TGV2ZWwgKyAxKTtcbiAgICBjdXJyZW50TGV2ZWwgKz0gMTtcbiAgfVxuICByZXR1cm4gY3VycmVudExldmVsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24geHBOZWVkZWRGb3JMZXZlbCh0YXJnZXRMZXZlbDogbnVtYmVyKTogbnVtYmVyIHtcbiAgaWYgKHRhcmdldExldmVsIDw9IDEpIHJldHVybiAwO1xuICByZXR1cm4gTWF0aC5tYXgoMjAsIHRhcmdldExldmVsICogMjApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG90YWxYcFRvUmVhY2hMZXZlbChsZXZlbDogbnVtYmVyKTogbnVtYmVyIHtcbiAgaWYgKGxldmVsIDw9IDEpIHJldHVybiAwO1xuICBsZXQgdG90YWwgPSAwO1xuICBmb3IgKGxldCBjdXJyZW50ID0gMjsgY3VycmVudCA8PSBsZXZlbDsgY3VycmVudCArPSAxKSB7XG4gICAgdG90YWwgKz0geHBOZWVkZWRGb3JMZXZlbChjdXJyZW50KTtcbiAgfVxuICByZXR1cm4gdG90YWw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRYcFByb2dyZXNzaW9uKGNvbXBhbmlvbjogQ29tcGFuaW9uKSB7XG4gIGNvbnN0IG5leHRMZXZlbCA9IGNvbXBhbmlvbi5sZXZlbCArIDE7XG4gIGNvbnN0IG5lZWRlZCA9IHhwTmVlZGVkRm9yTGV2ZWwobmV4dExldmVsKTtcbiAgcmV0dXJuIHtcbiAgICBsZXZlbDogY29tcGFuaW9uLmxldmVsLFxuICAgIGN1cnJlbnQ6IGNvbXBhbmlvbi54cCxcbiAgICBuZWVkZWQsXG4gICAgcmF0aW86IG5lZWRlZCA8PSAwID8gMCA6IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIGNvbXBhbmlvbi54cCAvIG5lZWRlZCkpLFxuICB9O1xufVxuIl0sIm5hbWVzIjpbImRlZmF1bHRDb21wYW5pb25zIiwiQ09NUEFOSU9OX0JVRkZfS0VZUyIsIkRFRkFVTFRfQ09NUEFOSU9OUyIsIm1hcCIsImNvbXBhbmlvbiIsImNsb25lQ29tcGFuaW9uIiwibm9ybWFsaXNlZEZvcm1zIiwiZXZvbHV0aW9uVHJlZSIsImZvcm0iLCJpbmRleCIsIm5vcm1hbGlzZUZvcm0iLCJzb3J0IiwiYSIsImIiLCJ1bmxvY2tMZXZlbCIsImN1cnJlbnRGb3JtIiwiZmluZCIsImlkIiwibGV2ZWwiLCJNYXRoIiwibWF4IiwiTnVtYmVyIiwiY2FycnlPdmVyWHAiLCJ4cCIsInNhbml0aXNlZFhwIiwiY2xhbXBYcCIsImF1dG9Fdm9sdmUiLCJCb29sZWFuIiwiY2xvbmVEZWZhdWx0Q29tcGFuaW9ucyIsImJ1ZmYiLCJ1bmRlZmluZWQiLCJjYXBhY2l0eSIsInhwTmVlZGVkRm9yTGV2ZWwiLCJtaW4iLCJnZXRBY3RpdmVGb3JtIiwiZ2V0TmV4dEZvcm0iLCJuZXh0IiwiZmlsdGVyIiwiY2FuRXZvbHZlIiwiWFBfRVZFTlRfVkFMVUVTIiwiZHJlYW0iLCJyaXR1YWwiLCJxdWVzdCIsInBhbnR5IiwiZ2V0WHBGb3JFdmVudCIsImV2ZW50IiwibGV2ZWxGb3JYcCIsImN1cnJlbnRMZXZlbCIsInJlbWFpbmluZ1hwIiwidGFyZ2V0TGV2ZWwiLCJ0b3RhbFhwVG9SZWFjaExldmVsIiwidG90YWwiLCJjdXJyZW50IiwiZ2V0WHBQcm9ncmVzc2lvbiIsIm5leHRMZXZlbCIsIm5lZWRlZCIsInJhdGlvIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/lib/companions.ts\n");

/***/ }),

/***/ "(ssr)/./app/lib/dungeons.ts":
/*!*****************************!*\
  !*** ./app/lib/dungeons.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cloneDefaultDungeons: () => (/* binding */ cloneDefaultDungeons),\n/* harmony export */   cloneDungeon: () => (/* binding */ cloneDungeon),\n/* harmony export */   ensureDungeon: () => (/* binding */ ensureDungeon),\n/* harmony export */   ensureRoom: () => (/* binding */ ensureRoom),\n/* harmony export */   generateDungeonRun: () => (/* binding */ generateDungeonRun)\n/* harmony export */ });\n/* harmony import */ var _data_dungeons_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../data/dungeons.json */ \"(ssr)/./data/dungeons.json\");\n\nconst DEFAULT_DUNGEONS = _data_dungeons_json__WEBPACK_IMPORTED_MODULE_0__.dungeons.map((dungeon)=>cloneDungeon(dungeon));\nfunction cloneDungeon(dungeon) {\n    return {\n        ...dungeon,\n        rooms: dungeon.rooms?.map((room)=>({\n                ...room\n            })) || [],\n        roomPool: dungeon.roomPool ? [\n            ...dungeon.roomPool\n        ] : [],\n        lootPool: dungeon.lootPool?.map((loot)=>({\n                ...loot\n            })) || [],\n        cleared: Boolean(dungeon.cleared),\n        completed: Boolean(dungeon.completed),\n        unlocked: Boolean(dungeon.unlocked),\n        timesCleared: Math.max(0, Number(dungeon.timesCleared ?? 0)),\n        difficulty: Math.max(1, Number(dungeon.difficulty ?? 1))\n    };\n}\nfunction cloneDefaultDungeons() {\n    return DEFAULT_DUNGEONS.map((dungeon)=>cloneDungeon(dungeon));\n}\nfunction ensureRoom(room) {\n    return {\n        ...room,\n        completed: Boolean(room.completed),\n        rewards: room.rewards ? {\n            ...room.rewards\n        } : undefined\n    };\n}\nfunction ensureDungeon(dungeon) {\n    return {\n        ...dungeon,\n        name: dungeon.name || \"Untitled Dungeon\",\n        description: dungeon.description || \"\",\n        rooms: (dungeon.rooms || []).map(ensureRoom),\n        cleared: Boolean(dungeon.cleared),\n        completed: Boolean(dungeon.completed),\n        unlocked: Boolean(dungeon.unlocked),\n        timesCleared: Math.max(0, Number(dungeon.timesCleared ?? 0)),\n        difficulty: Math.max(1, Number(dungeon.difficulty ?? 1))\n    };\n}\n// Procedural generation helper\nfunction generateDungeonRun(dungeon) {\n    const rooms = [];\n    const roomPool = dungeon.roomPool || [];\n    // Always include at least 1 boss room at the end\n    const bossRoom = roomPool.find((r)=>r.type === 'boss');\n    // Generate 3-5 rooms before boss\n    const numRooms = Math.floor(Math.random() * 3) + 3; // 3-5 rooms\n    for(let i = 0; i < numRooms; i++){\n        // Filter out boss rooms for regular generation\n        const availableRooms = roomPool.filter((r)=>r.type !== 'boss');\n        const weightedPool = [];\n        // Create weighted pool\n        availableRooms.forEach((room)=>{\n            for(let w = 0; w < room.weight; w++){\n                weightedPool.push(room);\n            }\n        });\n        if (weightedPool.length > 0) {\n            const selectedRoom = weightedPool[Math.floor(Math.random() * weightedPool.length)];\n            rooms.push({\n                id: `room_${i + 1}`,\n                type: selectedRoom.type,\n                subtype: selectedRoom.subtype,\n                desc: selectedRoom.desc,\n                completed: false,\n                rewards: {\n                    xp: 50 + i * 10,\n                    tokens: 5 + i * 2\n                }\n            });\n        }\n    }\n    // Add boss room at the end\n    if (bossRoom) {\n        rooms.push({\n            id: 'boss_room',\n            type: 'boss',\n            desc: bossRoom.desc,\n            completed: false,\n            rewards: dungeon.boss?.rewards\n        });\n    }\n    return rooms;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFHLEdBQUc7WUFDM0IsTUFBTUMsZUFBZU4sWUFBWSxDQUFDdEIsS0FBS2lCLEtBQUssQ0FBQ2pCLEtBQUtrQixNQUFNLEtBQUtJLGFBQWFLLE1BQU0sRUFBRTtZQUNsRnJDLE1BQU1vQyxJQUFJLENBQUM7Z0JBQ1RHLElBQUksQ0FBQyxLQUFLLEVBQUVWLElBQUksR0FBRztnQkFDbkJKLE1BQU1hLGFBQWFiLElBQUk7Z0JBQ3ZCZSxTQUFTRixhQUFhRSxPQUFPO2dCQUM3QkMsTUFBTUgsYUFBYUcsSUFBSTtnQkFDdkJsQyxXQUFXO2dCQUNYUyxTQUFTO29CQUNQMEIsSUFBSSxLQUFNYixJQUFJO29CQUNkYyxRQUFRLElBQUtkLElBQUk7Z0JBQ25CO1lBQ0Y7UUFDRjtJQUNGO0lBRUEsMkJBQTJCO0lBQzNCLElBQUlQLFVBQVU7UUFDWnRCLE1BQU1vQyxJQUFJLENBQUM7WUFDVEcsSUFBSTtZQUNKZCxNQUFNO1lBQ05nQixNQUFNbkIsU0FBU21CLElBQUk7WUFDbkJsQyxXQUFXO1lBQ1hTLFNBQVNsQixRQUFROEMsSUFBSSxFQUFFNUI7UUFDekI7SUFDRjtJQUVBLE9BQU9oQjtBQUNUIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXGxpYlxcZHVuZ2VvbnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmF1bHREdW5nZW9ucyBmcm9tIFwiLi4vLi4vZGF0YS9kdW5nZW9ucy5qc29uXCI7XG5cbmV4cG9ydCB0eXBlIER1bmdlb25Sb29tVHlwZSA9IFwidHJpYWxcIiB8IFwibG9vdFwiIHwgXCJib3NzXCI7XG5leHBvcnQgdHlwZSBUcmlhbFN1YnR5cGUgPSBcInNoYW1lXCIgfCBcIm9iZWRpZW5jZVwiIHwgXCJjb21iYXRcIiB8IFwicml0dWFsXCIgfCBcInBzeWNoaWNcIiB8IFwicHV6emxlXCI7XG5cbmV4cG9ydCB0eXBlIER1bmdlb25Sb29tID0ge1xuICBpZDogc3RyaW5nO1xuICB0eXBlOiBEdW5nZW9uUm9vbVR5cGU7XG4gIHN1YnR5cGU/OiBUcmlhbFN1YnR5cGU7XG4gIGRlc2M6IHN0cmluZztcbiAgY29tcGxldGVkPzogYm9vbGVhbjtcbiAgcmV3YXJkcz86IHtcbiAgICB4cD86IG51bWJlcjtcbiAgICB0b2tlbnM/OiBudW1iZXI7XG4gICAgaXRlbXM/OiBzdHJpbmdbXTtcbiAgfTtcbn07XG5cbmV4cG9ydCB0eXBlIER1bmdlb25Mb290ID0ge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHR5cGU6ICdhcnRpZmFjdCcgfCAnYnVmZicgfCAnY3Vyc2UnIHwgJ2NvbnN1bWFibGUnO1xuICBlZmZlY3Q6IHN0cmluZztcbiAgcmFyaXR5OiAnY29tbW9uJyB8ICd1bmNvbW1vbicgfCAncmFyZScgfCAnZXBpYycgfCAnbGVnZW5kYXJ5JztcbiAgb2J0YWluZWQ/OiBudW1iZXI7XG59O1xuXG5leHBvcnQgdHlwZSBEdW5nZW9uQm9zcyA9IHtcbiAgbmFtZTogc3RyaW5nO1xuICBoZWFsdGg6IG51bWJlcjtcbiAgYXR0YWNrczogc3RyaW5nW107XG4gIHdlYWtuZXNzOiBzdHJpbmc7XG4gIHJld2FyZHM6IHtcbiAgICB4cDogbnVtYmVyO1xuICAgIHRva2VuczogbnVtYmVyO1xuICAgIGl0ZW1zOiBzdHJpbmdbXTtcbiAgfTtcbn07XG5cbmV4cG9ydCB0eXBlIER1bmdlb24gPSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIGRpZmZpY3VsdHk/OiBudW1iZXI7XG4gIGNsZWFyZWQ/OiBib29sZWFuO1xuICB0aW1lc0NsZWFyZWQ/OiBudW1iZXI7XG4gIHVubG9ja2VkPzogYm9vbGVhbjtcbiAgYmFja2dyb3VuZD86IHN0cmluZztcbiAgcm9vbVBvb2w/OiBhbnlbXTtcbiAgbG9vdFBvb2w/OiBEdW5nZW9uTG9vdFtdO1xuICBib3NzPzogRHVuZ2VvbkJvc3M7XG4gIHJvb21zPzogRHVuZ2VvblJvb21bXTsgLy8gRm9yIGxlZ2FjeSBjb21wYXRpYmlsaXR5XG4gIGNvbXBsZXRlZD86IGJvb2xlYW47IC8vIEZvciBsZWdhY3kgY29tcGF0aWJpbGl0eVxufTtcblxuZXhwb3J0IHR5cGUgQWN0aXZlRHVuZ2VvblJ1biA9IHtcbiAgZHVuZ2VvbklkOiBzdHJpbmc7XG4gIHJvb21zOiBEdW5nZW9uUm9vbVtdO1xuICBjdXJyZW50Um9vbUluZGV4OiBudW1iZXI7XG4gIHN0YXJ0VGltZTogbnVtYmVyO1xuICBjb21wbGV0ZWRSb29tczogbnVtYmVyO1xuICB0b3RhbFJvb21zOiBudW1iZXI7XG4gIGxvb3RDb2xsZWN0ZWQ6IER1bmdlb25Mb290W107XG59O1xuXG5jb25zdCBERUZBVUxUX0RVTkdFT05TOiBEdW5nZW9uW10gPSAoZGVmYXVsdER1bmdlb25zLmR1bmdlb25zIGFzIER1bmdlb25bXSkubWFwKChkdW5nZW9uKSA9PlxuICBjbG9uZUR1bmdlb24oZHVuZ2Vvbilcbik7XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZUR1bmdlb24oZHVuZ2VvbjogRHVuZ2Vvbik6IER1bmdlb24ge1xuICByZXR1cm4ge1xuICAgIC4uLmR1bmdlb24sXG4gICAgcm9vbXM6IGR1bmdlb24ucm9vbXM/Lm1hcCgocm9vbSkgPT4gKHsgLi4ucm9vbSB9KSkgfHwgW10sXG4gICAgcm9vbVBvb2w6IGR1bmdlb24ucm9vbVBvb2wgPyBbLi4uZHVuZ2Vvbi5yb29tUG9vbF0gOiBbXSxcbiAgICBsb290UG9vbDogZHVuZ2Vvbi5sb290UG9vbD8ubWFwKGxvb3QgPT4gKHsgLi4ubG9vdCB9KSkgfHwgW10sXG4gICAgY2xlYXJlZDogQm9vbGVhbihkdW5nZW9uLmNsZWFyZWQpLFxuICAgIGNvbXBsZXRlZDogQm9vbGVhbihkdW5nZW9uLmNvbXBsZXRlZCksIC8vIExlZ2FjeSBjb21wYXRpYmlsaXR5XG4gICAgdW5sb2NrZWQ6IEJvb2xlYW4oZHVuZ2Vvbi51bmxvY2tlZCksXG4gICAgdGltZXNDbGVhcmVkOiBNYXRoLm1heCgwLCBOdW1iZXIoZHVuZ2Vvbi50aW1lc0NsZWFyZWQgPz8gMCkpLFxuICAgIGRpZmZpY3VsdHk6IE1hdGgubWF4KDEsIE51bWJlcihkdW5nZW9uLmRpZmZpY3VsdHkgPz8gMSkpLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xvbmVEZWZhdWx0RHVuZ2VvbnMoKTogRHVuZ2VvbltdIHtcbiAgcmV0dXJuIERFRkFVTFRfRFVOR0VPTlMubWFwKChkdW5nZW9uKSA9PiBjbG9uZUR1bmdlb24oZHVuZ2VvbikpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlUm9vbShyb29tOiBEdW5nZW9uUm9vbSk6IER1bmdlb25Sb29tIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5yb29tLFxuICAgIGNvbXBsZXRlZDogQm9vbGVhbihyb29tLmNvbXBsZXRlZCksXG4gICAgcmV3YXJkczogcm9vbS5yZXdhcmRzID8geyAuLi5yb29tLnJld2FyZHMgfSA6IHVuZGVmaW5lZCxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZUR1bmdlb24oZHVuZ2VvbjogRHVuZ2Vvbik6IER1bmdlb24ge1xuICByZXR1cm4ge1xuICAgIC4uLmR1bmdlb24sXG4gICAgbmFtZTogZHVuZ2Vvbi5uYW1lIHx8IFwiVW50aXRsZWQgRHVuZ2VvblwiLFxuICAgIGRlc2NyaXB0aW9uOiBkdW5nZW9uLmRlc2NyaXB0aW9uIHx8IFwiXCIsXG4gICAgcm9vbXM6IChkdW5nZW9uLnJvb21zIHx8IFtdKS5tYXAoZW5zdXJlUm9vbSksXG4gICAgY2xlYXJlZDogQm9vbGVhbihkdW5nZW9uLmNsZWFyZWQpLFxuICAgIGNvbXBsZXRlZDogQm9vbGVhbihkdW5nZW9uLmNvbXBsZXRlZCksIC8vIExlZ2FjeSBjb21wYXRpYmlsaXR5XG4gICAgdW5sb2NrZWQ6IEJvb2xlYW4oZHVuZ2Vvbi51bmxvY2tlZCksXG4gICAgdGltZXNDbGVhcmVkOiBNYXRoLm1heCgwLCBOdW1iZXIoZHVuZ2Vvbi50aW1lc0NsZWFyZWQgPz8gMCkpLFxuICAgIGRpZmZpY3VsdHk6IE1hdGgubWF4KDEsIE51bWJlcihkdW5nZW9uLmRpZmZpY3VsdHkgPz8gMSkpLFxuICB9O1xufVxuXG4vLyBQcm9jZWR1cmFsIGdlbmVyYXRpb24gaGVscGVyXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVEdW5nZW9uUnVuKGR1bmdlb246IER1bmdlb24pOiBEdW5nZW9uUm9vbVtdIHtcbiAgY29uc3Qgcm9vbXM6IER1bmdlb25Sb29tW10gPSBbXTtcbiAgY29uc3Qgcm9vbVBvb2wgPSBkdW5nZW9uLnJvb21Qb29sIHx8IFtdO1xuICBcbiAgLy8gQWx3YXlzIGluY2x1ZGUgYXQgbGVhc3QgMSBib3NzIHJvb20gYXQgdGhlIGVuZFxuICBjb25zdCBib3NzUm9vbSA9IHJvb21Qb29sLmZpbmQociA9PiByLnR5cGUgPT09ICdib3NzJyk7XG4gIFxuICAvLyBHZW5lcmF0ZSAzLTUgcm9vbXMgYmVmb3JlIGJvc3NcbiAgY29uc3QgbnVtUm9vbXMgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzKSArIDM7IC8vIDMtNSByb29tc1xuICBcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1Sb29tczsgaSsrKSB7XG4gICAgLy8gRmlsdGVyIG91dCBib3NzIHJvb21zIGZvciByZWd1bGFyIGdlbmVyYXRpb25cbiAgICBjb25zdCBhdmFpbGFibGVSb29tcyA9IHJvb21Qb29sLmZpbHRlcihyID0+IHIudHlwZSAhPT0gJ2Jvc3MnKTtcbiAgICBjb25zdCB3ZWlnaHRlZFBvb2w6IGFueVtdID0gW107XG4gICAgXG4gICAgLy8gQ3JlYXRlIHdlaWdodGVkIHBvb2xcbiAgICBhdmFpbGFibGVSb29tcy5mb3JFYWNoKHJvb20gPT4ge1xuICAgICAgZm9yIChsZXQgdyA9IDA7IHcgPCByb29tLndlaWdodDsgdysrKSB7XG4gICAgICAgIHdlaWdodGVkUG9vbC5wdXNoKHJvb20pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGlmICh3ZWlnaHRlZFBvb2wubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgc2VsZWN0ZWRSb29tID0gd2VpZ2h0ZWRQb29sW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHdlaWdodGVkUG9vbC5sZW5ndGgpXTtcbiAgICAgIHJvb21zLnB1c2goe1xuICAgICAgICBpZDogYHJvb21fJHtpICsgMX1gLFxuICAgICAgICB0eXBlOiBzZWxlY3RlZFJvb20udHlwZSxcbiAgICAgICAgc3VidHlwZTogc2VsZWN0ZWRSb29tLnN1YnR5cGUsXG4gICAgICAgIGRlc2M6IHNlbGVjdGVkUm9vbS5kZXNjLFxuICAgICAgICBjb21wbGV0ZWQ6IGZhbHNlLFxuICAgICAgICByZXdhcmRzOiB7XG4gICAgICAgICAgeHA6IDUwICsgKGkgKiAxMCksXG4gICAgICAgICAgdG9rZW5zOiA1ICsgKGkgKiAyKVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIEFkZCBib3NzIHJvb20gYXQgdGhlIGVuZFxuICBpZiAoYm9zc1Jvb20pIHtcbiAgICByb29tcy5wdXNoKHtcbiAgICAgIGlkOiAnYm9zc19yb29tJyxcbiAgICAgIHR5cGU6ICdib3NzJyxcbiAgICAgIGRlc2M6IGJvc3NSb29tLmRlc2MsXG4gICAgICBjb21wbGV0ZWQ6IGZhbHNlLFxuICAgICAgcmV3YXJkczogZHVuZ2Vvbi5ib3NzPy5yZXdhcmRzXG4gICAgfSk7XG4gIH1cbiAgXG4gIHJldHVybiByb29tcztcbn1cbiJdLCJuYW1lcyI6WyJkZWZhdWx0RHVuZ2VvbnMiLCJERUZBVUxUX0RVTkdFT05TIiwiZHVuZ2VvbnMiLCJtYXAiLCJkdW5nZW9uIiwiY2xvbmVEdW5nZW9uIiwicm9vbXMiLCJyb29tIiwicm9vbVBvb2wiLCJsb290UG9vbCIsImxvb3QiLCJjbGVhcmVkIiwiQm9vbGVhbiIsImNvbXBsZXRlZCIsInVubG9ja2VkIiwidGltZXNDbGVhcmVkIiwiTWF0aCIsIm1heCIsIk51bWJlciIsImRpZmZpY3VsdHkiLCJjbG9uZURlZmF1bHREdW5nZW9ucyIsImVuc3VyZVJvb20iLCJyZXdhcmRzIiwidW5kZWZpbmVkIiwiZW5zdXJlRHVuZ2VvbiIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsImdlbmVyYXRlRHVuZ2VvblJ1biIsImJvc3NSb29tIiwiZmluZCIsInIiLCJ0eXBlIiwibnVtUm9vbXMiLCJmbG9vciIsInJhbmRvbSIsImkiLCJhdmFpbGFibGVSb29tcyIsImZpbHRlciIsIndlaWdodGVkUG9vbCIsImZvckVhY2giLCJ3Iiwid2VpZ2h0IiwicHVzaCIsImxlbmd0aCIsInNlbGVjdGVkUm9vbSIsImlkIiwic3VidHlwZSIsImRlc2MiLCJ4cCIsInRva2VucyIsImJvc3MiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/lib/dungeons.ts\n");

/***/ }),

/***/ "(ssr)/./app/lib/inventory.ts":
/*!******************************!*\
  !*** ./app/lib/inventory.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ITEM_TYPE_LABELS: () => (/* binding */ ITEM_TYPE_LABELS),\n/* harmony export */   ITEM_TYPE_ORDER: () => (/* binding */ ITEM_TYPE_ORDER),\n/* harmony export */   cloneDefaultInventory: () => (/* binding */ cloneDefaultInventory),\n/* harmony export */   getDefaultIcon: () => (/* binding */ getDefaultIcon),\n/* harmony export */   getDefaultItemTemplate: () => (/* binding */ getDefaultItemTemplate),\n/* harmony export */   isEquippable: () => (/* binding */ isEquippable)\n/* harmony export */ });\n/* harmony import */ var _data_items_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../data/items.json */ \"(ssr)/./data/items.json\");\n\nconst ITEM_TYPE_LABELS = {\n    relic: \"Relics\",\n    panty: \"Panties\",\n    shard: \"Dream Shards\",\n    consumable: \"Consumables\",\n    quest: \"Quest Items\"\n};\nconst ITEM_TYPE_ORDER = [\n    \"relic\",\n    \"panty\",\n    \"shard\",\n    \"consumable\",\n    \"quest\"\n];\nconst DEFAULT_ITEMS = _data_items_json__WEBPACK_IMPORTED_MODULE_0__.map((item)=>({\n        ...item\n    }));\nfunction cloneDefaultInventory() {\n    return DEFAULT_ITEMS.map((item)=>({\n            ...item\n        }));\n}\nfunction getDefaultItemTemplate(id) {\n    const template = DEFAULT_ITEMS.find((item)=>item.id === id);\n    return template ? {\n        ...template\n    } : undefined;\n}\nfunction isEquippable(item) {\n    return item.type === \"relic\" || item.type === \"panty\";\n}\nfunction getDefaultIcon(type) {\n    switch(type){\n        case \"relic\":\n            return \"\";\n        case \"panty\":\n            return \"\";\n        case \"shard\":\n            return \"\";\n        case \"consumable\":\n            return \"\";\n        case \"quest\":\n            return \"\";\n        default:\n            return \"\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvbGliL2ludmVudG9yeS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWlEO0FBYzFDLE1BQU1DLG1CQUE2QztJQUN4REMsT0FBTztJQUNQQyxPQUFPO0lBQ1BDLE9BQU87SUFDUEMsWUFBWTtJQUNaQyxPQUFPO0FBQ1QsRUFBRTtBQUVLLE1BQU1DLGtCQUE4QjtJQUN6QztJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0QsQ0FBQztBQUVGLE1BQU1DLGdCQUFnQiw4Q0FBa0NDLEdBQUcsQ0FBQyxDQUFDQyxPQUFVO1FBQUUsR0FBR0EsSUFBSTtJQUFDO0FBRTFFLFNBQVNDO0lBQ2QsT0FBT0gsY0FBY0MsR0FBRyxDQUFDLENBQUNDLE9BQVU7WUFBRSxHQUFHQSxJQUFJO1FBQUM7QUFDaEQ7QUFFTyxTQUFTRSx1QkFBdUJDLEVBQVU7SUFDL0MsTUFBTUMsV0FBV04sY0FBY08sSUFBSSxDQUFDLENBQUNMLE9BQVNBLEtBQUtHLEVBQUUsS0FBS0E7SUFDMUQsT0FBT0MsV0FBVztRQUFFLEdBQUdBLFFBQVE7SUFBQyxJQUFJRTtBQUN0QztBQUVPLFNBQVNDLGFBQWFQLElBQW1CO0lBQzlDLE9BQU9BLEtBQUtRLElBQUksS0FBSyxXQUFXUixLQUFLUSxJQUFJLEtBQUs7QUFDaEQ7QUFFTyxTQUFTQyxlQUFlRCxJQUFjO0lBQzNDLE9BQVFBO1FBQ04sS0FBSztZQUNILE9BQU87UUFDVCxLQUFLO1lBQ0gsT0FBTztRQUNULEtBQUs7WUFDSCxPQUFPO1FBQ1QsS0FBSztZQUNILE9BQU87UUFDVCxLQUFLO1lBQ0gsT0FBTztRQUNUO1lBQ0UsT0FBTztJQUNYO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxNb21teSBMdWN5XFxQcm9qZWN0c1xcTHVjaWQgRHJlYW1cXGFwcFxcbGliXFxpbnZlbnRvcnkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmF1bHRJdGVtcyBmcm9tIFwiLi4vLi4vZGF0YS9pdGVtcy5qc29uXCI7XG5cbmV4cG9ydCB0eXBlIEl0ZW1UeXBlID0gXCJyZWxpY1wiIHwgXCJwYW50eVwiIHwgXCJzaGFyZFwiIHwgXCJjb25zdW1hYmxlXCIgfCBcInF1ZXN0XCI7XG5cbmV4cG9ydCB0eXBlIEludmVudG9yeUl0ZW0gPSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgdHlwZTogSXRlbVR5cGU7XG4gIGRlc2M6IHN0cmluZztcbiAgb3duZWQ6IG51bWJlcjtcbiAgaWNvbj86IHN0cmluZztcbiAgZXF1aXBwZWQ/OiBib29sZWFuO1xufTtcblxuZXhwb3J0IGNvbnN0IElURU1fVFlQRV9MQUJFTFM6IFJlY29yZDxJdGVtVHlwZSwgc3RyaW5nPiA9IHtcbiAgcmVsaWM6IFwiUmVsaWNzXCIsXG4gIHBhbnR5OiBcIlBhbnRpZXNcIixcbiAgc2hhcmQ6IFwiRHJlYW0gU2hhcmRzXCIsXG4gIGNvbnN1bWFibGU6IFwiQ29uc3VtYWJsZXNcIixcbiAgcXVlc3Q6IFwiUXVlc3QgSXRlbXNcIixcbn07XG5cbmV4cG9ydCBjb25zdCBJVEVNX1RZUEVfT1JERVI6IEl0ZW1UeXBlW10gPSBbXG4gIFwicmVsaWNcIixcbiAgXCJwYW50eVwiLFxuICBcInNoYXJkXCIsXG4gIFwiY29uc3VtYWJsZVwiLFxuICBcInF1ZXN0XCIsXG5dO1xuXG5jb25zdCBERUZBVUxUX0lURU1TID0gKGRlZmF1bHRJdGVtcyBhcyBJbnZlbnRvcnlJdGVtW10pLm1hcCgoaXRlbSkgPT4gKHsgLi4uaXRlbSB9KSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZURlZmF1bHRJbnZlbnRvcnkoKTogSW52ZW50b3J5SXRlbVtdIHtcbiAgcmV0dXJuIERFRkFVTFRfSVRFTVMubWFwKChpdGVtKSA9PiAoeyAuLi5pdGVtIH0pKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRJdGVtVGVtcGxhdGUoaWQ6IHN0cmluZyk6IEludmVudG9yeUl0ZW0gfCB1bmRlZmluZWQge1xuICBjb25zdCB0ZW1wbGF0ZSA9IERFRkFVTFRfSVRFTVMuZmluZCgoaXRlbSkgPT4gaXRlbS5pZCA9PT0gaWQpO1xuICByZXR1cm4gdGVtcGxhdGUgPyB7IC4uLnRlbXBsYXRlIH0gOiB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0VxdWlwcGFibGUoaXRlbTogSW52ZW50b3J5SXRlbSk6IGJvb2xlYW4ge1xuICByZXR1cm4gaXRlbS50eXBlID09PSBcInJlbGljXCIgfHwgaXRlbS50eXBlID09PSBcInBhbnR5XCI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0SWNvbih0eXBlOiBJdGVtVHlwZSk6IHN0cmluZyB7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgXCJyZWxpY1wiOlxuICAgICAgcmV0dXJuIFwi8J+qrFwiO1xuICAgIGNhc2UgXCJwYW50eVwiOlxuICAgICAgcmV0dXJuIFwi8J+pslwiO1xuICAgIGNhc2UgXCJzaGFyZFwiOlxuICAgICAgcmV0dXJuIFwi8J+SjlwiO1xuICAgIGNhc2UgXCJjb25zdW1hYmxlXCI6XG4gICAgICByZXR1cm4gXCLwn6eqXCI7XG4gICAgY2FzZSBcInF1ZXN0XCI6XG4gICAgICByZXR1cm4gXCLwn5OcXCI7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBcIuKcqFwiO1xuICB9XG59XG4iXSwibmFtZXMiOlsiZGVmYXVsdEl0ZW1zIiwiSVRFTV9UWVBFX0xBQkVMUyIsInJlbGljIiwicGFudHkiLCJzaGFyZCIsImNvbnN1bWFibGUiLCJxdWVzdCIsIklURU1fVFlQRV9PUkRFUiIsIkRFRkFVTFRfSVRFTVMiLCJtYXAiLCJpdGVtIiwiY2xvbmVEZWZhdWx0SW52ZW50b3J5IiwiZ2V0RGVmYXVsdEl0ZW1UZW1wbGF0ZSIsImlkIiwidGVtcGxhdGUiLCJmaW5kIiwidW5kZWZpbmVkIiwiaXNFcXVpcHBhYmxlIiwidHlwZSIsImdldERlZmF1bHRJY29uIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/lib/inventory.ts\n");

/***/ }),

/***/ "(ssr)/./app/lib/map.ts":
/*!************************!*\
  !*** ./app/lib/map.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cloneDefaultMap: () => (/* binding */ cloneDefaultMap)\n/* harmony export */ });\n/* harmony import */ var _data_map_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../data/map.json */ \"(ssr)/./data/map.json\");\n\nfunction cloneDefaultMap() {\n    // Add fallback data in case JSON import fails\n    const fallbackData = {\n        nodes: [\n            {\n                id: \"r1\",\n                name: \"Lucid World\",\n                type: \"realm\",\n                unlocked: true,\n                coords: [\n                    500,\n                    300\n                ],\n                lore: \"The central hub of your dreamscape, where your journey begins.\"\n            },\n            {\n                id: \"t1\",\n                name: \"Temple of Awakening\",\n                type: \"temple\",\n                unlocked: true,\n                coords: [\n                    200,\n                    500\n                ],\n                lore: \"A serene temple dedicated to the art of lucid dreaming.\"\n            },\n            {\n                id: \"r2\",\n                name: \"Panty Realm\",\n                type: \"panty\",\n                unlocked: false,\n                coords: [\n                    800,\n                    200\n                ],\n                lore: \"A realm woven from desire and silk. Unlock by completing specific rituals.\",\n                unlockCondition: {\n                    type: \"ritual\",\n                    id: \"panty_ritual_1\"\n                }\n            },\n            {\n                id: \"d1\",\n                name: \"Caves of Shame\",\n                type: \"dungeon\",\n                unlocked: false,\n                coords: [\n                    750,\n                    600\n                ],\n                lore: \"A deep dungeon where echoes of embarrassment and guilt reside.\",\n                unlockCondition: {\n                    type: \"shame\",\n                    level: 5\n                }\n            }\n        ],\n        links: [\n            {\n                from: \"r1\",\n                to: \"t1\",\n                locked: false\n            },\n            {\n                from: \"r1\",\n                to: \"r2\",\n                locked: true\n            },\n            {\n                from: \"r2\",\n                to: \"d1\",\n                locked: true\n            }\n        ]\n    };\n    try {\n        // Try to use the imported JSON, fallback to hardcoded data\n        const mapToUse = _data_map_json__WEBPACK_IMPORTED_MODULE_0__ || fallbackData;\n        return JSON.parse(JSON.stringify(mapToUse));\n    } catch (error) {\n        console.error('Error cloning map data:', error);\n        return fallbackData;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvbGliL21hcC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUE2QztBQWdDdEMsU0FBU0M7SUFDZCw4Q0FBOEM7SUFDOUMsTUFBTUMsZUFBd0I7UUFDNUJDLE9BQU87WUFDTDtnQkFBRUMsSUFBSTtnQkFBTUMsTUFBTTtnQkFBZUMsTUFBTTtnQkFBU0MsVUFBVTtnQkFBTUMsUUFBUTtvQkFBQztvQkFBSztpQkFBSTtnQkFBRUMsTUFBTTtZQUFpRTtZQUMzSjtnQkFBRUwsSUFBSTtnQkFBTUMsTUFBTTtnQkFBdUJDLE1BQU07Z0JBQVVDLFVBQVU7Z0JBQU1DLFFBQVE7b0JBQUM7b0JBQUs7aUJBQUk7Z0JBQUVDLE1BQU07WUFBMEQ7WUFDN0o7Z0JBQUVMLElBQUk7Z0JBQU1DLE1BQU07Z0JBQWVDLE1BQU07Z0JBQVNDLFVBQVU7Z0JBQU9DLFFBQVE7b0JBQUM7b0JBQUs7aUJBQUk7Z0JBQUVDLE1BQU07Z0JBQThFQyxpQkFBaUI7b0JBQUVKLE1BQU07b0JBQVVGLElBQUk7Z0JBQWlCO1lBQUU7WUFDbk87Z0JBQUVBLElBQUk7Z0JBQU1DLE1BQU07Z0JBQWtCQyxNQUFNO2dCQUFXQyxVQUFVO2dCQUFPQyxRQUFRO29CQUFDO29CQUFLO2lCQUFJO2dCQUFFQyxNQUFNO2dCQUFrRUMsaUJBQWlCO29CQUFFSixNQUFNO29CQUFTSyxPQUFPO2dCQUFFO1lBQUU7U0FDaE47UUFDREMsT0FBTztZQUNMO2dCQUFFQyxNQUFNO2dCQUFNQyxJQUFJO2dCQUFNQyxRQUFRO1lBQU07WUFDdEM7Z0JBQUVGLE1BQU07Z0JBQU1DLElBQUk7Z0JBQU1DLFFBQVE7WUFBSztZQUNyQztnQkFBRUYsTUFBTTtnQkFBTUMsSUFBSTtnQkFBTUMsUUFBUTtZQUFLO1NBQ3RDO0lBQ0g7SUFFQSxJQUFJO1FBQ0YsMkRBQTJEO1FBQzNELE1BQU1DLFdBQVdoQiwyQ0FBVUEsSUFBSUU7UUFDL0IsT0FBT2UsS0FBS0MsS0FBSyxDQUFDRCxLQUFLRSxTQUFTLENBQUNIO0lBQ25DLEVBQUUsT0FBT0ksT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsMkJBQTJCQTtRQUN6QyxPQUFPbEI7SUFDVDtBQUNGIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXGxpYlxcbWFwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkZWZhdWx0TWFwIGZyb20gJy4uLy4uL2RhdGEvbWFwLmpzb24nO1xyXG5cclxuZXhwb3J0IHR5cGUgTWFwTm9kZVR5cGUgPSBcInJlYWxtXCIgfCBcInBhbnR5XCIgfCBcImR1bmdlb25cIiB8IFwidGVtcGxlXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFVubG9ja0NvbmRpdGlvbiB7XHJcbiAgdHlwZTogXCJyaXR1YWxcIiB8IFwic2hhbWVcIiB8IFwicXVlc3RcIiB8IFwiaXRlbVwiO1xyXG4gIGlkPzogc3RyaW5nO1xyXG4gIGxldmVsPzogbnVtYmVyO1xyXG4gIGFtb3VudD86IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBNYXBOb2RlIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIG5hbWU6IHN0cmluZztcclxuICB0eXBlOiBNYXBOb2RlVHlwZTtcclxuICB1bmxvY2tlZDogYm9vbGVhbjtcclxuICBjb29yZHM6IFtudW1iZXIsIG51bWJlcl07XHJcbiAgbG9yZTogc3RyaW5nO1xyXG4gIHVubG9ja0NvbmRpdGlvbj86IFVubG9ja0NvbmRpdGlvbjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBNYXBMaW5rIHtcclxuICBmcm9tOiBzdHJpbmc7XHJcbiAgdG86IHN0cmluZztcclxuICBsb2NrZWQ6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWFwRGF0YSB7XHJcbiAgbm9kZXM6IE1hcE5vZGVbXTtcclxuICBsaW5rczogTWFwTGlua1tdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2xvbmVEZWZhdWx0TWFwKCk6IE1hcERhdGEge1xyXG4gIC8vIEFkZCBmYWxsYmFjayBkYXRhIGluIGNhc2UgSlNPTiBpbXBvcnQgZmFpbHNcclxuICBjb25zdCBmYWxsYmFja0RhdGE6IE1hcERhdGEgPSB7XHJcbiAgICBub2RlczogW1xyXG4gICAgICB7IGlkOiBcInIxXCIsIG5hbWU6IFwiTHVjaWQgV29ybGRcIiwgdHlwZTogXCJyZWFsbVwiLCB1bmxvY2tlZDogdHJ1ZSwgY29vcmRzOiBbNTAwLCAzMDBdLCBsb3JlOiBcIlRoZSBjZW50cmFsIGh1YiBvZiB5b3VyIGRyZWFtc2NhcGUsIHdoZXJlIHlvdXIgam91cm5leSBiZWdpbnMuXCIgfSxcclxuICAgICAgeyBpZDogXCJ0MVwiLCBuYW1lOiBcIlRlbXBsZSBvZiBBd2FrZW5pbmdcIiwgdHlwZTogXCJ0ZW1wbGVcIiwgdW5sb2NrZWQ6IHRydWUsIGNvb3JkczogWzIwMCwgNTAwXSwgbG9yZTogXCJBIHNlcmVuZSB0ZW1wbGUgZGVkaWNhdGVkIHRvIHRoZSBhcnQgb2YgbHVjaWQgZHJlYW1pbmcuXCIgfSxcclxuICAgICAgeyBpZDogXCJyMlwiLCBuYW1lOiBcIlBhbnR5IFJlYWxtXCIsIHR5cGU6IFwicGFudHlcIiwgdW5sb2NrZWQ6IGZhbHNlLCBjb29yZHM6IFs4MDAsIDIwMF0sIGxvcmU6IFwiQSByZWFsbSB3b3ZlbiBmcm9tIGRlc2lyZSBhbmQgc2lsay4gVW5sb2NrIGJ5IGNvbXBsZXRpbmcgc3BlY2lmaWMgcml0dWFscy5cIiwgdW5sb2NrQ29uZGl0aW9uOiB7IHR5cGU6IFwicml0dWFsXCIsIGlkOiBcInBhbnR5X3JpdHVhbF8xXCIgfSB9LFxyXG4gICAgICB7IGlkOiBcImQxXCIsIG5hbWU6IFwiQ2F2ZXMgb2YgU2hhbWVcIiwgdHlwZTogXCJkdW5nZW9uXCIsIHVubG9ja2VkOiBmYWxzZSwgY29vcmRzOiBbNzUwLCA2MDBdLCBsb3JlOiBcIkEgZGVlcCBkdW5nZW9uIHdoZXJlIGVjaG9lcyBvZiBlbWJhcnJhc3NtZW50IGFuZCBndWlsdCByZXNpZGUuXCIsIHVubG9ja0NvbmRpdGlvbjogeyB0eXBlOiBcInNoYW1lXCIsIGxldmVsOiA1IH0gfVxyXG4gICAgXSxcclxuICAgIGxpbmtzOiBbXHJcbiAgICAgIHsgZnJvbTogXCJyMVwiLCB0bzogXCJ0MVwiLCBsb2NrZWQ6IGZhbHNlIH0sXHJcbiAgICAgIHsgZnJvbTogXCJyMVwiLCB0bzogXCJyMlwiLCBsb2NrZWQ6IHRydWUgfSxcclxuICAgICAgeyBmcm9tOiBcInIyXCIsIHRvOiBcImQxXCIsIGxvY2tlZDogdHJ1ZSB9XHJcbiAgICBdXHJcbiAgfTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIFRyeSB0byB1c2UgdGhlIGltcG9ydGVkIEpTT04sIGZhbGxiYWNrIHRvIGhhcmRjb2RlZCBkYXRhXHJcbiAgICBjb25zdCBtYXBUb1VzZSA9IGRlZmF1bHRNYXAgfHwgZmFsbGJhY2tEYXRhO1xyXG4gICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobWFwVG9Vc2UpKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY2xvbmluZyBtYXAgZGF0YTonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gZmFsbGJhY2tEYXRhO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiZGVmYXVsdE1hcCIsImNsb25lRGVmYXVsdE1hcCIsImZhbGxiYWNrRGF0YSIsIm5vZGVzIiwiaWQiLCJuYW1lIiwidHlwZSIsInVubG9ja2VkIiwiY29vcmRzIiwibG9yZSIsInVubG9ja0NvbmRpdGlvbiIsImxldmVsIiwibGlua3MiLCJmcm9tIiwidG8iLCJsb2NrZWQiLCJtYXBUb1VzZSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsImVycm9yIiwiY29uc29sZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/lib/map.ts\n");

/***/ }),

/***/ "(ssr)/./app/lib/npcs.ts":
/*!*************************!*\
  !*** ./app/lib/npcs.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clampMeter: () => (/* binding */ clampMeter),\n/* harmony export */   cloneDefaultNpcs: () => (/* binding */ cloneDefaultNpcs),\n/* harmony export */   normaliseDialogue: () => (/* binding */ normaliseDialogue),\n/* harmony export */   normaliseNpc: () => (/* binding */ normaliseNpc)\n/* harmony export */ });\n/* harmony import */ var _data_npcs_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../data/npcs.json */ \"(ssr)/./data/npcs.json\");\n\nconst DEFAULT_NPCS = _data_npcs_json__WEBPACK_IMPORTED_MODULE_0__.map((npc)=>normaliseNpc(npc));\nfunction normaliseDialogue(entry) {\n    return {\n        ...entry,\n        id: entry.id,\n        text: entry.text ?? \"\",\n        date: entry.date ?? new Date().toISOString()\n    };\n}\nfunction normaliseNpc(npc) {\n    return {\n        id: npc.id,\n        name: npc.name || \"Unnamed NPC\",\n        role: npc.role || \"Friend\",\n        dreamCount: Math.max(0, Number(npc.dreamCount ?? 0)),\n        trust: clampMeter(npc.trust),\n        shame: clampMeter(npc.shame),\n        bio: npc.bio ?? \"\",\n        dialogues: Array.isArray(npc.dialogues) ? npc.dialogues.map((dialogue)=>normaliseDialogue(dialogue)) : []\n    };\n}\nfunction cloneDefaultNpcs() {\n    return DEFAULT_NPCS.map((npc)=>normaliseNpc({\n            ...npc\n        }));\n}\nfunction clampMeter(value) {\n    if (typeof value !== 'number' || Number.isNaN(value)) return 0;\n    return Math.max(0, Math.min(100, Math.round(value)));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvbGliL25wY3MudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBK0M7QUFxQi9DLE1BQU1DLGVBQXNCLDZDQUF1QkMsR0FBRyxDQUFDLENBQUNDLE1BQVFDLGFBQWFEO0FBRXRFLFNBQVNFLGtCQUFrQkMsS0FBb0I7SUFDcEQsT0FBTztRQUNMLEdBQUdBLEtBQUs7UUFDUkMsSUFBSUQsTUFBTUMsRUFBRTtRQUNaQyxNQUFNRixNQUFNRSxJQUFJLElBQUk7UUFDcEJDLE1BQU1ILE1BQU1HLElBQUksSUFBSSxJQUFJQyxPQUFPQyxXQUFXO0lBQzVDO0FBQ0Y7QUFFTyxTQUFTUCxhQUFhRCxHQUFRO0lBQ25DLE9BQU87UUFDTEksSUFBSUosSUFBSUksRUFBRTtRQUNWSyxNQUFNVCxJQUFJUyxJQUFJLElBQUk7UUFDbEJDLE1BQU1WLElBQUlVLElBQUksSUFBSTtRQUNsQkMsWUFBWUMsS0FBS0MsR0FBRyxDQUFDLEdBQUdDLE9BQU9kLElBQUlXLFVBQVUsSUFBSTtRQUNqREksT0FBT0MsV0FBV2hCLElBQUllLEtBQUs7UUFDM0JFLE9BQU9ELFdBQVdoQixJQUFJaUIsS0FBSztRQUMzQkMsS0FBS2xCLElBQUlrQixHQUFHLElBQUk7UUFDaEJDLFdBQVdDLE1BQU1DLE9BQU8sQ0FBQ3JCLElBQUltQixTQUFTLElBQ2xDbkIsSUFBSW1CLFNBQVMsQ0FBQ3BCLEdBQUcsQ0FBQyxDQUFDdUIsV0FBYXBCLGtCQUFrQm9CLGFBQ2xELEVBQUU7SUFDUjtBQUNGO0FBRU8sU0FBU0M7SUFDZCxPQUFPekIsYUFBYUMsR0FBRyxDQUFDLENBQUNDLE1BQVFDLGFBQWE7WUFBRSxHQUFHRCxHQUFHO1FBQUM7QUFDekQ7QUFFTyxTQUFTZ0IsV0FBV1EsS0FBeUI7SUFDbEQsSUFBSSxPQUFPQSxVQUFVLFlBQVlWLE9BQU9XLEtBQUssQ0FBQ0QsUUFBUSxPQUFPO0lBQzdELE9BQU9aLEtBQUtDLEdBQUcsQ0FBQyxHQUFHRCxLQUFLYyxHQUFHLENBQUMsS0FBS2QsS0FBS2UsS0FBSyxDQUFDSDtBQUM5QyIsInNvdXJjZXMiOlsiQzpcXE1vbW15IEx1Y3lcXFByb2plY3RzXFxMdWNpZCBEcmVhbVxcYXBwXFxsaWJcXG5wY3MudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmF1bHROcGNzIGZyb20gXCIuLi8uLi9kYXRhL25wY3MuanNvblwiO1xuXG5leHBvcnQgdHlwZSBEaWFsb2d1ZUVudHJ5ID0ge1xuICBpZDogc3RyaW5nO1xuICB0ZXh0OiBzdHJpbmc7XG4gIGRhdGU6IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIE5wY1JvbGUgPSBcIk1pc3RyZXNzXCIgfCBcIkZhbWlseVwiIHwgXCJGcmllbmRcIiB8IFwiV2FpZnVcIiB8IFwiTWVudG9yXCIgfCBzdHJpbmc7XG5cbmV4cG9ydCB0eXBlIE5wYyA9IHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICByb2xlOiBOcGNSb2xlO1xuICBkcmVhbUNvdW50OiBudW1iZXI7XG4gIHRydXN0OiBudW1iZXI7XG4gIHNoYW1lOiBudW1iZXI7XG4gIGJpbz86IHN0cmluZztcbiAgZGlhbG9ndWVzOiBEaWFsb2d1ZUVudHJ5W107XG59O1xuXG5jb25zdCBERUZBVUxUX05QQ1M6IE5wY1tdID0gKGRlZmF1bHROcGNzIGFzIE5wY1tdKS5tYXAoKG5wYykgPT4gbm9ybWFsaXNlTnBjKG5wYykpO1xuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXNlRGlhbG9ndWUoZW50cnk6IERpYWxvZ3VlRW50cnkpOiBEaWFsb2d1ZUVudHJ5IHtcbiAgcmV0dXJuIHtcbiAgICAuLi5lbnRyeSxcbiAgICBpZDogZW50cnkuaWQsXG4gICAgdGV4dDogZW50cnkudGV4dCA/PyBcIlwiLFxuICAgIGRhdGU6IGVudHJ5LmRhdGUgPz8gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXNlTnBjKG5wYzogTnBjKTogTnBjIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogbnBjLmlkLFxuICAgIG5hbWU6IG5wYy5uYW1lIHx8IFwiVW5uYW1lZCBOUENcIixcbiAgICByb2xlOiBucGMucm9sZSB8fCBcIkZyaWVuZFwiLFxuICAgIGRyZWFtQ291bnQ6IE1hdGgubWF4KDAsIE51bWJlcihucGMuZHJlYW1Db3VudCA/PyAwKSksXG4gICAgdHJ1c3Q6IGNsYW1wTWV0ZXIobnBjLnRydXN0KSxcbiAgICBzaGFtZTogY2xhbXBNZXRlcihucGMuc2hhbWUpLFxuICAgIGJpbzogbnBjLmJpbyA/PyBcIlwiLFxuICAgIGRpYWxvZ3VlczogQXJyYXkuaXNBcnJheShucGMuZGlhbG9ndWVzKVxuICAgICAgPyBucGMuZGlhbG9ndWVzLm1hcCgoZGlhbG9ndWUpID0+IG5vcm1hbGlzZURpYWxvZ3VlKGRpYWxvZ3VlKSlcbiAgICAgIDogW10sXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZURlZmF1bHROcGNzKCk6IE5wY1tdIHtcbiAgcmV0dXJuIERFRkFVTFRfTlBDUy5tYXAoKG5wYykgPT4gbm9ybWFsaXNlTnBjKHsgLi4ubnBjIH0pKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsYW1wTWV0ZXIodmFsdWU6IG51bWJlciB8IHVuZGVmaW5lZCk6IG51bWJlciB7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdudW1iZXInIHx8IE51bWJlci5pc05hTih2YWx1ZSkpIHJldHVybiAwO1xuICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oMTAwLCBNYXRoLnJvdW5kKHZhbHVlKSkpO1xufVxuIl0sIm5hbWVzIjpbImRlZmF1bHROcGNzIiwiREVGQVVMVF9OUENTIiwibWFwIiwibnBjIiwibm9ybWFsaXNlTnBjIiwibm9ybWFsaXNlRGlhbG9ndWUiLCJlbnRyeSIsImlkIiwidGV4dCIsImRhdGUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJuYW1lIiwicm9sZSIsImRyZWFtQ291bnQiLCJNYXRoIiwibWF4IiwiTnVtYmVyIiwidHJ1c3QiLCJjbGFtcE1ldGVyIiwic2hhbWUiLCJiaW8iLCJkaWFsb2d1ZXMiLCJBcnJheSIsImlzQXJyYXkiLCJkaWFsb2d1ZSIsImNsb25lRGVmYXVsdE5wY3MiLCJ2YWx1ZSIsImlzTmFOIiwibWluIiwicm91bmQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/lib/npcs.ts\n");

/***/ }),

/***/ "(ssr)/./app/lib/questlines.ts":
/*!*******************************!*\
  !*** ./app/lib/questlines.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cloneDefaultQuestlines: () => (/* binding */ cloneDefaultQuestlines),\n/* harmony export */   cloneQuestline: () => (/* binding */ cloneQuestline),\n/* harmony export */   findStage: () => (/* binding */ findStage),\n/* harmony export */   getActiveStage: () => (/* binding */ getActiveStage),\n/* harmony export */   getQuestlineProgress: () => (/* binding */ getQuestlineProgress),\n/* harmony export */   isQuestlineComplete: () => (/* binding */ isQuestlineComplete)\n/* harmony export */ });\n/* harmony import */ var _data_questlines_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../data/questlines.json */ \"(ssr)/./data/questlines.json\");\n\nfunction cloneQuestline(questline) {\n    return {\n        ...questline,\n        stages: questline.stages.map((stage)=>({\n                ...stage,\n                branchChoices: stage.branchChoices?.map((branch)=>({\n                        ...branch\n                    }))\n            }))\n    };\n}\nconst DEFAULT_QUESTLINES = _data_questlines_json__WEBPACK_IMPORTED_MODULE_0__.map((questline)=>cloneQuestline(questline));\nfunction cloneDefaultQuestlines() {\n    return DEFAULT_QUESTLINES.map((questline)=>cloneQuestline(questline));\n}\nfunction getQuestlineProgress(questline) {\n    const total = questline.stages.length;\n    const completed = questline.stages.filter((stage)=>stage.completed).length;\n    return {\n        total,\n        completed,\n        percent: total === 0 ? 0 : Math.round(completed / total * 100)\n    };\n}\nfunction getActiveStage(questline) {\n    return questline.stages.find((stage)=>!stage.completed);\n}\nfunction findStage(questline, stageId) {\n    const index = questline.stages.findIndex((stage)=>stage.id === stageId);\n    if (index === -1) return undefined;\n    return {\n        stage: questline.stages[index],\n        index\n    };\n}\nfunction isQuestlineComplete(questline) {\n    return questline.stages.every((stage)=>stage.completed);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvbGliL3F1ZXN0bGluZXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUEyRDtBQTJDcEQsU0FBU0MsZUFBZUMsU0FBb0I7SUFDakQsT0FBTztRQUNMLEdBQUdBLFNBQVM7UUFDWkMsUUFBUUQsVUFBVUMsTUFBTSxDQUFDQyxHQUFHLENBQUMsQ0FBQ0MsUUFBVztnQkFDdkMsR0FBR0EsS0FBSztnQkFDUkMsZUFBZUQsTUFBTUMsYUFBYSxFQUFFRixJQUFJLENBQUNHLFNBQVk7d0JBQUUsR0FBR0EsTUFBTTtvQkFBQztZQUNuRTtJQUNGO0FBQ0Y7QUFFQSxNQUFNQyxxQkFBcUIsbURBQW1DSixHQUFHLENBQUMsQ0FBQ0YsWUFDakVELGVBQWVDO0FBR1YsU0FBU087SUFDZCxPQUFPRCxtQkFBbUJKLEdBQUcsQ0FBQyxDQUFDRixZQUFjRCxlQUFlQztBQUM5RDtBQUVPLFNBQVNRLHFCQUFxQlIsU0FBb0I7SUFDdkQsTUFBTVMsUUFBUVQsVUFBVUMsTUFBTSxDQUFDUyxNQUFNO0lBQ3JDLE1BQU1DLFlBQVlYLFVBQVVDLE1BQU0sQ0FBQ1csTUFBTSxDQUFDLENBQUNULFFBQVVBLE1BQU1RLFNBQVMsRUFBRUQsTUFBTTtJQUM1RSxPQUFPO1FBQ0xEO1FBQ0FFO1FBQ0FFLFNBQVNKLFVBQVUsSUFBSSxJQUFJSyxLQUFLQyxLQUFLLENBQUMsWUFBYU4sUUFBUztJQUM5RDtBQUNGO0FBRU8sU0FBU08sZUFBZWhCLFNBQW9CO0lBQ2pELE9BQU9BLFVBQVVDLE1BQU0sQ0FBQ2dCLElBQUksQ0FBQyxDQUFDZCxRQUFVLENBQUNBLE1BQU1RLFNBQVM7QUFDMUQ7QUFFTyxTQUFTTyxVQUNkbEIsU0FBb0IsRUFDcEJtQixPQUFlO0lBRWYsTUFBTUMsUUFBUXBCLFVBQVVDLE1BQU0sQ0FBQ29CLFNBQVMsQ0FBQyxDQUFDbEIsUUFBVUEsTUFBTW1CLEVBQUUsS0FBS0g7SUFDakUsSUFBSUMsVUFBVSxDQUFDLEdBQUcsT0FBT0c7SUFDekIsT0FBTztRQUFFcEIsT0FBT0gsVUFBVUMsTUFBTSxDQUFDbUIsTUFBTTtRQUFFQTtJQUFNO0FBQ2pEO0FBRU8sU0FBU0ksb0JBQW9CeEIsU0FBb0I7SUFDdEQsT0FBT0EsVUFBVUMsTUFBTSxDQUFDd0IsS0FBSyxDQUFDLENBQUN0QixRQUFVQSxNQUFNUSxTQUFTO0FBQzFEIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXGxpYlxccXVlc3RsaW5lcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVmYXVsdFF1ZXN0bGluZXMgZnJvbSBcIi4uLy4uL2RhdGEvcXVlc3RsaW5lcy5qc29uXCI7XG5cbmV4cG9ydCB0eXBlIFF1ZXN0UmV3YXJkID0ge1xuICB4cD86IG51bWJlcjtcbiAgaXRlbT86IHN0cmluZztcbiAgdGl0bGU/OiBzdHJpbmc7XG4gIGJ1ZmY/OiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgUXVlc3RCcmFuY2ggPSB7XG4gIGlkOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICByZXdhcmQ/OiBRdWVzdFJld2FyZDtcbn07XG5cbmV4cG9ydCB0eXBlIFF1ZXN0U3RhZ2UgPSB7XG4gIGlkOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICB4cDogbnVtYmVyO1xuICBjb21wbGV0ZWQ6IGJvb2xlYW47XG4gIGJyYW5jaENob2ljZXM/OiBRdWVzdEJyYW5jaFtdO1xuICBjaG9zZW5CcmFuY2hJZD86IHN0cmluZyB8IG51bGw7XG4gIHJld2FyZD86IFF1ZXN0UmV3YXJkO1xuICBkZWFkbGluZT86IHN0cmluZyB8IG51bGw7XG4gIGRlYWRsaW5lTm90ZT86IHN0cmluZyB8IG51bGw7XG59O1xuXG5leHBvcnQgdHlwZSBRdWVzdGxpbmUgPSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIHJlYWxtPzogc3RyaW5nO1xuICBjb21wYW5pb25JZD86IHN0cmluZztcbiAgYnJhbmNoaW5nPzogYm9vbGVhbjtcbiAgc3RhZ2VzOiBRdWVzdFN0YWdlW107XG4gIHJld2FyZD86IFF1ZXN0UmV3YXJkO1xuICBjb21wbGV0ZWQ/OiBib29sZWFuO1xuICBhY3RpdmVTdGFnZUlkPzogc3RyaW5nIHwgbnVsbDtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZVF1ZXN0bGluZShxdWVzdGxpbmU6IFF1ZXN0bGluZSk6IFF1ZXN0bGluZSB7XG4gIHJldHVybiB7XG4gICAgLi4ucXVlc3RsaW5lLFxuICAgIHN0YWdlczogcXVlc3RsaW5lLnN0YWdlcy5tYXAoKHN0YWdlKSA9PiAoe1xuICAgICAgLi4uc3RhZ2UsXG4gICAgICBicmFuY2hDaG9pY2VzOiBzdGFnZS5icmFuY2hDaG9pY2VzPy5tYXAoKGJyYW5jaCkgPT4gKHsgLi4uYnJhbmNoIH0pKSxcbiAgICB9KSksXG4gIH07XG59XG5cbmNvbnN0IERFRkFVTFRfUVVFU1RMSU5FUyA9IChkZWZhdWx0UXVlc3RsaW5lcyBhcyBRdWVzdGxpbmVbXSkubWFwKChxdWVzdGxpbmUpID0+XG4gIGNsb25lUXVlc3RsaW5lKHF1ZXN0bGluZSlcbik7XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZURlZmF1bHRRdWVzdGxpbmVzKCk6IFF1ZXN0bGluZVtdIHtcbiAgcmV0dXJuIERFRkFVTFRfUVVFU1RMSU5FUy5tYXAoKHF1ZXN0bGluZSkgPT4gY2xvbmVRdWVzdGxpbmUocXVlc3RsaW5lKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRRdWVzdGxpbmVQcm9ncmVzcyhxdWVzdGxpbmU6IFF1ZXN0bGluZSkge1xuICBjb25zdCB0b3RhbCA9IHF1ZXN0bGluZS5zdGFnZXMubGVuZ3RoO1xuICBjb25zdCBjb21wbGV0ZWQgPSBxdWVzdGxpbmUuc3RhZ2VzLmZpbHRlcigoc3RhZ2UpID0+IHN0YWdlLmNvbXBsZXRlZCkubGVuZ3RoO1xuICByZXR1cm4ge1xuICAgIHRvdGFsLFxuICAgIGNvbXBsZXRlZCxcbiAgICBwZXJjZW50OiB0b3RhbCA9PT0gMCA/IDAgOiBNYXRoLnJvdW5kKChjb21wbGV0ZWQgLyB0b3RhbCkgKiAxMDApLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWN0aXZlU3RhZ2UocXVlc3RsaW5lOiBRdWVzdGxpbmUpOiBRdWVzdFN0YWdlIHwgdW5kZWZpbmVkIHtcbiAgcmV0dXJuIHF1ZXN0bGluZS5zdGFnZXMuZmluZCgoc3RhZ2UpID0+ICFzdGFnZS5jb21wbGV0ZWQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZFN0YWdlKFxuICBxdWVzdGxpbmU6IFF1ZXN0bGluZSxcbiAgc3RhZ2VJZDogc3RyaW5nXG4pOiB7IHN0YWdlOiBRdWVzdFN0YWdlOyBpbmRleDogbnVtYmVyIH0gfCB1bmRlZmluZWQge1xuICBjb25zdCBpbmRleCA9IHF1ZXN0bGluZS5zdGFnZXMuZmluZEluZGV4KChzdGFnZSkgPT4gc3RhZ2UuaWQgPT09IHN0YWdlSWQpO1xuICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gdW5kZWZpbmVkO1xuICByZXR1cm4geyBzdGFnZTogcXVlc3RsaW5lLnN0YWdlc1tpbmRleF0sIGluZGV4IH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1F1ZXN0bGluZUNvbXBsZXRlKHF1ZXN0bGluZTogUXVlc3RsaW5lKTogYm9vbGVhbiB7XG4gIHJldHVybiBxdWVzdGxpbmUuc3RhZ2VzLmV2ZXJ5KChzdGFnZSkgPT4gc3RhZ2UuY29tcGxldGVkKTtcbn1cbiJdLCJuYW1lcyI6WyJkZWZhdWx0UXVlc3RsaW5lcyIsImNsb25lUXVlc3RsaW5lIiwicXVlc3RsaW5lIiwic3RhZ2VzIiwibWFwIiwic3RhZ2UiLCJicmFuY2hDaG9pY2VzIiwiYnJhbmNoIiwiREVGQVVMVF9RVUVTVExJTkVTIiwiY2xvbmVEZWZhdWx0UXVlc3RsaW5lcyIsImdldFF1ZXN0bGluZVByb2dyZXNzIiwidG90YWwiLCJsZW5ndGgiLCJjb21wbGV0ZWQiLCJmaWx0ZXIiLCJwZXJjZW50IiwiTWF0aCIsInJvdW5kIiwiZ2V0QWN0aXZlU3RhZ2UiLCJmaW5kIiwiZmluZFN0YWdlIiwic3RhZ2VJZCIsImluZGV4IiwiZmluZEluZGV4IiwiaWQiLCJ1bmRlZmluZWQiLCJpc1F1ZXN0bGluZUNvbXBsZXRlIiwiZXZlcnkiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/lib/questlines.ts\n");

/***/ }),

/***/ "(ssr)/./app/lib/rituals.ts":
/*!****************************!*\
  !*** ./app/lib/rituals.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cloneDefaultRitualLogs: () => (/* binding */ cloneDefaultRitualLogs),\n/* harmony export */   cloneDefaultRituals: () => (/* binding */ cloneDefaultRituals),\n/* harmony export */   computeRitualProgress: () => (/* binding */ computeRitualProgress),\n/* harmony export */   describeMultiplier: () => (/* binding */ describeMultiplier),\n/* harmony export */   formatRitualType: () => (/* binding */ formatRitualType)\n/* harmony export */ });\n/* harmony import */ var _data_rituals_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../data/rituals.json */ \"(ssr)/./data/rituals.json\");\n/* harmony import */ var _data_ritualLogs_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../data/ritualLogs.json */ \"(ssr)/./data/ritualLogs.json\");\n\n\nconst DAY_MS = 86400000;\nconst WEEK_MS = DAY_MS * 7;\nfunction startOfDay(date) {\n    return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n}\nfunction getPeriodIndexFromDate(date, type) {\n    const dayStart = startOfDay(date);\n    switch(type){\n        case \"daily\":\n            return Math.floor(dayStart.getTime() / DAY_MS);\n        case \"weekly\":\n            return Math.floor(dayStart.getTime() / WEEK_MS);\n        case \"monthly\":\n            return dayStart.getFullYear() * 12 + dayStart.getMonth();\n        case \"yearly\":\n            return dayStart.getFullYear();\n    }\n}\nfunction stepBackPeriod(index, type) {\n    switch(type){\n        case \"daily\":\n        case \"weekly\":\n        case \"monthly\":\n        case \"yearly\":\n            return index - 1;\n    }\n}\nconst MULTIPLIERS = {\n    daily: {\n        threshold: 3,\n        bonus: 0.1\n    },\n    weekly: {\n        threshold: 4,\n        bonus: 0.2\n    },\n    monthly: {\n        threshold: 3,\n        bonus: 0.5\n    },\n    yearly: {\n        threshold: Infinity,\n        bonus: 0\n    }\n};\nfunction cloneDefaultRituals() {\n    return _data_rituals_json__WEBPACK_IMPORTED_MODULE_0__.map((ritual)=>({\n            ...ritual\n        }));\n}\nfunction cloneDefaultRitualLogs() {\n    return _data_ritualLogs_json__WEBPACK_IMPORTED_MODULE_1__.map((log)=>({\n            ...log\n        }));\n}\nfunction computeRitualProgress(ritual, logs, referenceDate = new Date()) {\n    const relevantLogs = logs.filter((log)=>log.ritualId === ritual.id).sort((a, b)=>new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\n    const uniquePeriods = [];\n    const seen = new Set();\n    for (const log of relevantLogs){\n        const index = getPeriodIndexFromDate(new Date(log.timestamp), ritual.type);\n        if (!seen.has(index)) {\n            uniquePeriods.push(index);\n            seen.add(index);\n        }\n    }\n    if (uniquePeriods.length === 0) {\n        return {\n            streak: 0,\n            completed: false,\n            multiplier: 0\n        };\n    }\n    const currentIndex = getPeriodIndexFromDate(referenceDate, ritual.type);\n    const completed = uniquePeriods[0] === currentIndex;\n    const { threshold, bonus } = MULTIPLIERS[ritual.type];\n    let streak = 0;\n    let expected = completed ? currentIndex : stepBackPeriod(currentIndex, ritual.type);\n    for (const periodIndex of uniquePeriods){\n        if (periodIndex === expected) {\n            streak += 1;\n            expected = stepBackPeriod(expected, ritual.type);\n        } else if (periodIndex < expected) {\n            break;\n        }\n    }\n    const multiplier = streak >= threshold ? bonus : 0;\n    return {\n        streak,\n        completed,\n        multiplier,\n        lastCompletedAt: relevantLogs[0]?.timestamp\n    };\n}\nfunction formatRitualType(type) {\n    switch(type){\n        case \"daily\":\n            return \"Daily\";\n        case \"weekly\":\n            return \"Weekly\";\n        case \"monthly\":\n            return \"Monthly\";\n        case \"yearly\":\n            return \"Yearly\";\n        default:\n            return type;\n    }\n}\nfunction describeMultiplier(type) {\n    const { threshold, bonus } = MULTIPLIERS[type];\n    if (!Number.isFinite(threshold) || bonus <= 0) return null;\n    return {\n        threshold,\n        bonus\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJWSxnQkFBZ0JELFVBQVU7WUFDNUJKLFVBQVU7WUFDVkksV0FBV3JDLGVBQWVxQyxVQUFVekIsT0FBT2pCLElBQUk7UUFDakQsT0FBTyxJQUFJMkMsY0FBY0QsVUFBVTtZQUNqQztRQUNGO0lBQ0Y7SUFFQSxNQUFNRixhQUFhRixVQUFVN0IsWUFBWUMsUUFBUTtJQUVqRCxPQUFPO1FBQ0w0QjtRQUNBQztRQUNBQztRQUNBSSxpQkFBaUJyQixZQUFZLENBQUMsRUFBRSxFQUFFTztJQUNwQztBQUNGO0FBRU8sU0FBU2UsaUJBQWlCN0MsSUFBcUI7SUFDcEQsT0FBUUE7UUFDTixLQUFLO1lBQ0gsT0FBTztRQUNULEtBQUs7WUFDSCxPQUFPO1FBQ1QsS0FBSztZQUNILE9BQU87UUFDVCxLQUFLO1lBQ0gsT0FBTztRQUNUO1lBQ0UsT0FBT0E7SUFDWDtBQUNGO0FBRU8sU0FBUzhDLG1CQUFtQjlDLElBQXFCO0lBQ3RELE1BQU0sRUFBRVMsU0FBUyxFQUFFQyxLQUFLLEVBQUUsR0FBR0gsV0FBVyxDQUFDUCxLQUFLO0lBQzlDLElBQUksQ0FBQytDLE9BQU9DLFFBQVEsQ0FBQ3ZDLGNBQWNDLFNBQVMsR0FBRyxPQUFPO0lBQ3RELE9BQU87UUFDTEQ7UUFDQUM7SUFDRjtBQUNGIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXGxpYlxccml0dWFscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcmF3Uml0dWFscyBmcm9tIFwiLi4vLi4vZGF0YS9yaXR1YWxzLmpzb25cIjtcbmltcG9ydCByYXdSaXR1YWxMb2dzIGZyb20gXCIuLi8uLi9kYXRhL3JpdHVhbExvZ3MuanNvblwiO1xuXG5leHBvcnQgdHlwZSBSaXR1YWxGcmVxdWVuY3kgPSBcImRhaWx5XCIgfCBcIndlZWtseVwiIHwgXCJtb250aGx5XCIgfCBcInllYXJseVwiO1xuXG5leHBvcnQgdHlwZSBSaXR1YWwgPSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgdHlwZTogUml0dWFsRnJlcXVlbmN5O1xuICB4cDogbnVtYmVyO1xuICBvYmVkaWVuY2U6IG51bWJlcjtcbiAgY29tcGxldGVkVG9kYXk/OiBib29sZWFuO1xuICBjb21wbGV0ZWRUaGlzV2Vlaz86IGJvb2xlYW47XG4gIGNvbXBsZXRlZFRoaXNNb250aD86IGJvb2xlYW47XG4gIGNvbXBsZXRlZFRoaXNZZWFyPzogYm9vbGVhbjtcbiAgc3RyZWFrPzogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgUml0dWFsTG9nID0ge1xuICBpZDogc3RyaW5nO1xuICByaXR1YWxJZDogc3RyaW5nO1xuICB0aW1lc3RhbXA6IHN0cmluZztcbiAgeHBBd2FyZGVkPzogbnVtYmVyO1xuICBvYmVkaWVuY2VBd2FyZGVkPzogbnVtYmVyO1xuICBtdWx0aXBsaWVyQXBwbGllZD86IG51bWJlcjtcbn07XG5cbmV4cG9ydCB0eXBlIFJpdHVhbFByb2dyZXNzID0ge1xuICBzdHJlYWs6IG51bWJlcjtcbiAgY29tcGxldGVkOiBib29sZWFuO1xuICBtdWx0aXBsaWVyOiBudW1iZXI7XG4gIGxhc3RDb21wbGV0ZWRBdD86IHN0cmluZztcbn07XG5cbmNvbnN0IERBWV9NUyA9IDg2XzQwMF8wMDA7XG5jb25zdCBXRUVLX01TID0gREFZX01TICogNztcblxuZnVuY3Rpb24gc3RhcnRPZkRheShkYXRlOiBEYXRlKSB7XG4gIHJldHVybiBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSwgZGF0ZS5nZXREYXRlKCkpO1xufVxuXG5mdW5jdGlvbiBnZXRQZXJpb2RJbmRleEZyb21EYXRlKGRhdGU6IERhdGUsIHR5cGU6IFJpdHVhbEZyZXF1ZW5jeSk6IG51bWJlciB7XG4gIGNvbnN0IGRheVN0YXJ0ID0gc3RhcnRPZkRheShkYXRlKTtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBcImRhaWx5XCI6XG4gICAgICByZXR1cm4gTWF0aC5mbG9vcihkYXlTdGFydC5nZXRUaW1lKCkgLyBEQVlfTVMpO1xuICAgIGNhc2UgXCJ3ZWVrbHlcIjpcbiAgICAgIHJldHVybiBNYXRoLmZsb29yKGRheVN0YXJ0LmdldFRpbWUoKSAvIFdFRUtfTVMpO1xuICAgIGNhc2UgXCJtb250aGx5XCI6XG4gICAgICByZXR1cm4gZGF5U3RhcnQuZ2V0RnVsbFllYXIoKSAqIDEyICsgZGF5U3RhcnQuZ2V0TW9udGgoKTtcbiAgICBjYXNlIFwieWVhcmx5XCI6XG4gICAgICByZXR1cm4gZGF5U3RhcnQuZ2V0RnVsbFllYXIoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzdGVwQmFja1BlcmlvZChpbmRleDogbnVtYmVyLCB0eXBlOiBSaXR1YWxGcmVxdWVuY3kpOiBudW1iZXIge1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIFwiZGFpbHlcIjpcbiAgICBjYXNlIFwid2Vla2x5XCI6XG4gICAgY2FzZSBcIm1vbnRobHlcIjpcbiAgICBjYXNlIFwieWVhcmx5XCI6XG4gICAgICByZXR1cm4gaW5kZXggLSAxO1xuICB9XG59XG5cbmNvbnN0IE1VTFRJUExJRVJTOiBSZWNvcmQ8Uml0dWFsRnJlcXVlbmN5LCB7IHRocmVzaG9sZDogbnVtYmVyOyBib251czogbnVtYmVyIH0+ID0ge1xuICBkYWlseTogeyB0aHJlc2hvbGQ6IDMsIGJvbnVzOiAwLjEgfSxcbiAgd2Vla2x5OiB7IHRocmVzaG9sZDogNCwgYm9udXM6IDAuMiB9LFxuICBtb250aGx5OiB7IHRocmVzaG9sZDogMywgYm9udXM6IDAuNSB9LFxuICB5ZWFybHk6IHsgdGhyZXNob2xkOiBJbmZpbml0eSwgYm9udXM6IDAgfSxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZURlZmF1bHRSaXR1YWxzKCk6IFJpdHVhbFtdIHtcbiAgcmV0dXJuIChyYXdSaXR1YWxzIGFzIFJpdHVhbFtdKS5tYXAoKHJpdHVhbCkgPT4gKHsgLi4ucml0dWFsIH0pKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lRGVmYXVsdFJpdHVhbExvZ3MoKTogUml0dWFsTG9nW10ge1xuICByZXR1cm4gKHJhd1JpdHVhbExvZ3MgYXMgUml0dWFsTG9nW10pLm1hcCgobG9nKSA9PiAoeyAuLi5sb2cgfSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZVJpdHVhbFByb2dyZXNzKFxuICByaXR1YWw6IFJpdHVhbCxcbiAgbG9nczogUml0dWFsTG9nW10sXG4gIHJlZmVyZW5jZURhdGU6IERhdGUgPSBuZXcgRGF0ZSgpXG4pOiBSaXR1YWxQcm9ncmVzcyB7XG4gIGNvbnN0IHJlbGV2YW50TG9ncyA9IGxvZ3NcbiAgICAuZmlsdGVyKChsb2cpID0+IGxvZy5yaXR1YWxJZCA9PT0gcml0dWFsLmlkKVxuICAgIC5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLnRpbWVzdGFtcCkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYS50aW1lc3RhbXApLmdldFRpbWUoKSk7XG5cbiAgY29uc3QgdW5pcXVlUGVyaW9kczogbnVtYmVyW10gPSBbXTtcbiAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICBmb3IgKGNvbnN0IGxvZyBvZiByZWxldmFudExvZ3MpIHtcbiAgICBjb25zdCBpbmRleCA9IGdldFBlcmlvZEluZGV4RnJvbURhdGUobmV3IERhdGUobG9nLnRpbWVzdGFtcCksIHJpdHVhbC50eXBlKTtcbiAgICBpZiAoIXNlZW4uaGFzKGluZGV4KSkge1xuICAgICAgdW5pcXVlUGVyaW9kcy5wdXNoKGluZGV4KTtcbiAgICAgIHNlZW4uYWRkKGluZGV4KTtcbiAgICB9XG4gIH1cblxuICBpZiAodW5pcXVlUGVyaW9kcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4geyBzdHJlYWs6IDAsIGNvbXBsZXRlZDogZmFsc2UsIG11bHRpcGxpZXI6IDAgfTtcbiAgfVxuXG4gIGNvbnN0IGN1cnJlbnRJbmRleCA9IGdldFBlcmlvZEluZGV4RnJvbURhdGUocmVmZXJlbmNlRGF0ZSwgcml0dWFsLnR5cGUpO1xuICBjb25zdCBjb21wbGV0ZWQgPSB1bmlxdWVQZXJpb2RzWzBdID09PSBjdXJyZW50SW5kZXg7XG4gIGNvbnN0IHsgdGhyZXNob2xkLCBib251cyB9ID0gTVVMVElQTElFUlNbcml0dWFsLnR5cGVdO1xuXG4gIGxldCBzdHJlYWsgPSAwO1xuICBsZXQgZXhwZWN0ZWQgPSBjb21wbGV0ZWQgPyBjdXJyZW50SW5kZXggOiBzdGVwQmFja1BlcmlvZChjdXJyZW50SW5kZXgsIHJpdHVhbC50eXBlKTtcblxuICBmb3IgKGNvbnN0IHBlcmlvZEluZGV4IG9mIHVuaXF1ZVBlcmlvZHMpIHtcbiAgICBpZiAocGVyaW9kSW5kZXggPT09IGV4cGVjdGVkKSB7XG4gICAgICBzdHJlYWsgKz0gMTtcbiAgICAgIGV4cGVjdGVkID0gc3RlcEJhY2tQZXJpb2QoZXhwZWN0ZWQsIHJpdHVhbC50eXBlKTtcbiAgICB9IGVsc2UgaWYgKHBlcmlvZEluZGV4IDwgZXhwZWN0ZWQpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IG11bHRpcGxpZXIgPSBzdHJlYWsgPj0gdGhyZXNob2xkID8gYm9udXMgOiAwO1xuXG4gIHJldHVybiB7XG4gICAgc3RyZWFrLFxuICAgIGNvbXBsZXRlZCxcbiAgICBtdWx0aXBsaWVyLFxuICAgIGxhc3RDb21wbGV0ZWRBdDogcmVsZXZhbnRMb2dzWzBdPy50aW1lc3RhbXAsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRSaXR1YWxUeXBlKHR5cGU6IFJpdHVhbEZyZXF1ZW5jeSkge1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIFwiZGFpbHlcIjpcbiAgICAgIHJldHVybiBcIkRhaWx5XCI7XG4gICAgY2FzZSBcIndlZWtseVwiOlxuICAgICAgcmV0dXJuIFwiV2Vla2x5XCI7XG4gICAgY2FzZSBcIm1vbnRobHlcIjpcbiAgICAgIHJldHVybiBcIk1vbnRobHlcIjtcbiAgICBjYXNlIFwieWVhcmx5XCI6XG4gICAgICByZXR1cm4gXCJZZWFybHlcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHR5cGU7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlc2NyaWJlTXVsdGlwbGllcih0eXBlOiBSaXR1YWxGcmVxdWVuY3kpIHtcbiAgY29uc3QgeyB0aHJlc2hvbGQsIGJvbnVzIH0gPSBNVUxUSVBMSUVSU1t0eXBlXTtcbiAgaWYgKCFOdW1iZXIuaXNGaW5pdGUodGhyZXNob2xkKSB8fCBib251cyA8PSAwKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIHtcbiAgICB0aHJlc2hvbGQsXG4gICAgYm9udXMsXG4gIH07XG59XG4iXSwibmFtZXMiOlsicmF3Uml0dWFscyIsInJhd1JpdHVhbExvZ3MiLCJEQVlfTVMiLCJXRUVLX01TIiwic3RhcnRPZkRheSIsImRhdGUiLCJEYXRlIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJnZXRQZXJpb2RJbmRleEZyb21EYXRlIiwidHlwZSIsImRheVN0YXJ0IiwiTWF0aCIsImZsb29yIiwiZ2V0VGltZSIsInN0ZXBCYWNrUGVyaW9kIiwiaW5kZXgiLCJNVUxUSVBMSUVSUyIsImRhaWx5IiwidGhyZXNob2xkIiwiYm9udXMiLCJ3ZWVrbHkiLCJtb250aGx5IiwieWVhcmx5IiwiSW5maW5pdHkiLCJjbG9uZURlZmF1bHRSaXR1YWxzIiwibWFwIiwicml0dWFsIiwiY2xvbmVEZWZhdWx0Uml0dWFsTG9ncyIsImxvZyIsImNvbXB1dGVSaXR1YWxQcm9ncmVzcyIsImxvZ3MiLCJyZWZlcmVuY2VEYXRlIiwicmVsZXZhbnRMb2dzIiwiZmlsdGVyIiwicml0dWFsSWQiLCJpZCIsInNvcnQiLCJhIiwiYiIsInRpbWVzdGFtcCIsInVuaXF1ZVBlcmlvZHMiLCJzZWVuIiwiU2V0IiwiaGFzIiwicHVzaCIsImFkZCIsImxlbmd0aCIsInN0cmVhayIsImNvbXBsZXRlZCIsIm11bHRpcGxpZXIiLCJjdXJyZW50SW5kZXgiLCJleHBlY3RlZCIsInBlcmlvZEluZGV4IiwibGFzdENvbXBsZXRlZEF0IiwiZm9ybWF0Uml0dWFsVHlwZSIsImRlc2NyaWJlTXVsdGlwbGllciIsIk51bWJlciIsImlzRmluaXRlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/lib/rituals.ts\n");

/***/ }),

/***/ "(ssr)/./app/types/journal.ts":
/*!******************************!*\
  !*** ./app/types/journal.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_XP_CONFIG: () => (/* binding */ DEFAULT_XP_CONFIG),\n/* harmony export */   TAG_COLORS: () => (/* binding */ TAG_COLORS)\n/* harmony export */ });\nconst DEFAULT_XP_CONFIG = {\n    baseEntry: 25,\n    lucidTag: 50,\n    ritualTag: 75,\n    pantyTag: 100,\n    templeTag: 30,\n    questTag: 40,\n    streakBonus: 15\n};\nconst TAG_COLORS = {\n    lucid: 'bg-yellow-500/20 text-yellow-200 border-yellow-400/40',\n    ritual: 'bg-purple-500/20 text-purple-200 border-purple-400/40',\n    panty: 'bg-pink-500/20 text-pink-200 border-pink-400/40',\n    temple: 'bg-blue-500/20 text-blue-200 border-blue-400/40',\n    quest: 'bg-green-500/20 text-green-200 border-green-400/40',\n    nightmare: 'bg-red-500/20 text-red-200 border-red-400/40',\n    flying: 'bg-cyan-500/20 text-cyan-200 border-cyan-400/40',\n    transformation: 'bg-indigo-500/20 text-indigo-200 border-indigo-400/40',\n    default: 'bg-slate-500/20 text-slate-200 border-slate-400/40'\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvdHlwZXMvam91cm5hbC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQStETyxNQUFNQSxvQkFBb0M7SUFDL0NDLFdBQVc7SUFDWEMsVUFBVTtJQUNWQyxXQUFXO0lBQ1hDLFVBQVU7SUFDVkMsV0FBVztJQUNYQyxVQUFVO0lBQ1ZDLGFBQWE7QUFDZixFQUFFO0FBRUssTUFBTUMsYUFBYTtJQUN4QkMsT0FBTztJQUNQQyxRQUFRO0lBQ1JDLE9BQU87SUFDUEMsUUFBUTtJQUNSQyxPQUFPO0lBQ1BDLFdBQVc7SUFDWEMsUUFBUTtJQUNSQyxnQkFBZ0I7SUFDaEJDLFNBQVM7QUFDWCxFQUFXIiwic291cmNlcyI6WyJDOlxcTW9tbXkgTHVjeVxcUHJvamVjdHNcXEx1Y2lkIERyZWFtXFxhcHBcXHR5cGVzXFxqb3VybmFsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgRHJlYW1Kb3VybmFsRW50cnkge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBkYXRlOiBzdHJpbmc7XHJcbiAgY29udGVudDogc3RyaW5nO1xyXG4gIHRhZ3M6IHN0cmluZ1tdO1xyXG4gIGNvbXBhbmlvbnM6IHN0cmluZ1tdO1xyXG4gIHBsYWNlczogc3RyaW5nW107XHJcbiAgeHBFYXJuZWQ6IG51bWJlcjtcclxuICBtZWRpYTogc3RyaW5nW107XHJcbiAgY3JlYXRlZEF0OiBzdHJpbmc7XHJcbiAgdXBkYXRlZEF0OiBzdHJpbmc7XHJcbiAgbW9vZD86ICdhbWF6aW5nJyB8ICdnb29kJyB8ICduZXV0cmFsJyB8ICdjaGFsbGVuZ2luZycgfCAnZGlmZmljdWx0JyB8ICdldXBob3JpYyc7XHJcbiAgbHVjaWRpdHk/OiAnbm9uZScgfCAncGFydGlhbCcgfCAnZnVsbCc7XHJcbiAgdml2aWRuZXNzPzogbnVtYmVyOyAvLyAxLTEwIHNjYWxlXHJcbiAgLy8gRW5oYW5jZWQgbHVjaWQgZHJlYW0gbWV0cmljc1xyXG4gIGlzTHVjaWQ/OiBib29sZWFuO1xyXG4gIGx1Y2lkaXR5TGV2ZWw/OiBudW1iZXI7IC8vIDAtMTAgc2NhbGUgZm9yIGRldGFpbGVkIGx1Y2lkaXR5IGFzc2Vzc21lbnRcclxuICBjb250cm9sPzogbnVtYmVyOyAvLyAwLTEwIHNjYWxlIGZvciBkcmVhbSBjb250cm9sIGxldmVsXHJcbiAgbWVtb3J5PzogbnVtYmVyOyAvLyAwLTEwIHNjYWxlIGZvciBkcmVhbSByZWNhbGwgcXVhbGl0eVxyXG4gIGVtb3Rpb25hbERlcHRoPzogbnVtYmVyOyAvLyAwLTEwIHNjYWxlIGZvciBlbW90aW9uYWwgaW50ZW5zaXR5XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSm91cm5hbFN0cmVhayB7XHJcbiAgY3VycmVudDogbnVtYmVyO1xyXG4gIGxvbmdlc3Q6IG51bWJlcjtcclxuICBsYXN0RW50cnlEYXRlOiBzdHJpbmcgfCBudWxsO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEpvdXJuYWxTdGF0cyB7XHJcbiAgdG90YWxFbnRyaWVzOiBudW1iZXI7XHJcbiAgdG90YWxYcEVhcm5lZDogbnVtYmVyO1xyXG4gIGF2ZXJhZ2VYcFBlckVudHJ5OiBudW1iZXI7XHJcbiAgbW9zdFVzZWRUYWdzOiB7IHRhZzogc3RyaW5nOyBjb3VudDogbnVtYmVyIH1bXTtcclxuICBmYXZvcml0ZUNvbXBhbmlvbnM6IHsgbmFtZTogc3RyaW5nOyBjb3VudDogbnVtYmVyIH1bXTtcclxuICBmYXZvcml0ZUxvY2F0aW9uczogeyBwbGFjZTogc3RyaW5nOyBjb3VudDogbnVtYmVyIH1bXTtcclxuICBlbnRyaWVzVGhpc01vbnRoOiBudW1iZXI7XHJcbiAgbHVjaWREcmVhbUNvdW50OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSm91cm5hbEZpbHRlciB7XHJcbiAgc2VhcmNoVGV4dDogc3RyaW5nO1xyXG4gIHRhZ3M6IHN0cmluZ1tdO1xyXG4gIGNvbXBhbmlvbnM6IHN0cmluZ1tdO1xyXG4gIHBsYWNlczogc3RyaW5nW107XHJcbiAgZGF0ZUZyb206IHN0cmluZztcclxuICBkYXRlVG86IHN0cmluZztcclxuICBtaW5YcDogbnVtYmVyO1xyXG4gIG1heFhwOiBudW1iZXI7XHJcbiAgbW9vZDogc3RyaW5nW107XHJcbiAgbHVjaWRpdHk6IHN0cmluZ1tdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFhwUmV3YXJkQ29uZmlnIHtcclxuICBiYXNlRW50cnk6IG51bWJlcjtcclxuICBsdWNpZFRhZzogbnVtYmVyO1xyXG4gIHJpdHVhbFRhZzogbnVtYmVyO1xyXG4gIHBhbnR5VGFnOiBudW1iZXI7XHJcbiAgdGVtcGxlVGFnOiBudW1iZXI7XHJcbiAgcXVlc3RUYWc6IG51bWJlcjtcclxuICBzdHJlYWtCb251czogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9YUF9DT05GSUc6IFhwUmV3YXJkQ29uZmlnID0ge1xyXG4gIGJhc2VFbnRyeTogMjUsXHJcbiAgbHVjaWRUYWc6IDUwLFxyXG4gIHJpdHVhbFRhZzogNzUsXHJcbiAgcGFudHlUYWc6IDEwMCxcclxuICB0ZW1wbGVUYWc6IDMwLFxyXG4gIHF1ZXN0VGFnOiA0MCxcclxuICBzdHJlYWtCb251czogMTUsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgVEFHX0NPTE9SUyA9IHtcclxuICBsdWNpZDogJ2JnLXllbGxvdy01MDAvMjAgdGV4dC15ZWxsb3ctMjAwIGJvcmRlci15ZWxsb3ctNDAwLzQwJyxcclxuICByaXR1YWw6ICdiZy1wdXJwbGUtNTAwLzIwIHRleHQtcHVycGxlLTIwMCBib3JkZXItcHVycGxlLTQwMC80MCcsXHJcbiAgcGFudHk6ICdiZy1waW5rLTUwMC8yMCB0ZXh0LXBpbmstMjAwIGJvcmRlci1waW5rLTQwMC80MCcsXHJcbiAgdGVtcGxlOiAnYmctYmx1ZS01MDAvMjAgdGV4dC1ibHVlLTIwMCBib3JkZXItYmx1ZS00MDAvNDAnLFxyXG4gIHF1ZXN0OiAnYmctZ3JlZW4tNTAwLzIwIHRleHQtZ3JlZW4tMjAwIGJvcmRlci1ncmVlbi00MDAvNDAnLFxyXG4gIG5pZ2h0bWFyZTogJ2JnLXJlZC01MDAvMjAgdGV4dC1yZWQtMjAwIGJvcmRlci1yZWQtNDAwLzQwJyxcclxuICBmbHlpbmc6ICdiZy1jeWFuLTUwMC8yMCB0ZXh0LWN5YW4tMjAwIGJvcmRlci1jeWFuLTQwMC80MCcsXHJcbiAgdHJhbnNmb3JtYXRpb246ICdiZy1pbmRpZ28tNTAwLzIwIHRleHQtaW5kaWdvLTIwMCBib3JkZXItaW5kaWdvLTQwMC80MCcsXHJcbiAgZGVmYXVsdDogJ2JnLXNsYXRlLTUwMC8yMCB0ZXh0LXNsYXRlLTIwMCBib3JkZXItc2xhdGUtNDAwLzQwJyxcclxufSBhcyBjb25zdDsiXSwibmFtZXMiOlsiREVGQVVMVF9YUF9DT05GSUciLCJiYXNlRW50cnkiLCJsdWNpZFRhZyIsInJpdHVhbFRhZyIsInBhbnR5VGFnIiwidGVtcGxlVGFnIiwicXVlc3RUYWciLCJzdHJlYWtCb251cyIsIlRBR19DT0xPUlMiLCJsdWNpZCIsInJpdHVhbCIsInBhbnR5IiwidGVtcGxlIiwicXVlc3QiLCJuaWdodG1hcmUiLCJmbHlpbmciLCJ0cmFuc2Zvcm1hdGlvbiIsImRlZmF1bHQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/types/journal.ts\n");

/***/ }),

/***/ "(ssr)/./data/achievements.json":
/*!********************************!*\
  !*** ./data/achievements.json ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('[{"id":"DREAM_LUCID_FIRST","title":"First Lucid Dream","desc":"You took control and realized you were dreaming.","category":"Dream","secret":false,"unlocked":false,"date":null,"trigger":{"type":"DREAM_TAG","value":"lucid"},"reward":{"xp":50}},{"id":"SHAME_PANTY_WHISPERER","title":"Panty Whisperer","desc":"Sniffed 10 pairs of panties. You\'re developing a refined taste.","category":"Shame","secret":false,"unlocked":false,"date":null,"trigger":{"type":"SHAME_COUNTER","counter":"pantiesSniffed","value":10},"reward":{"xp":100,"title":"Panty Whisperer"}},{"id":"SHAME_SHAMEBOUND","title":"Shamebound","desc":"Confessed your first filthy act in the tracker. Welcome to the fold.","category":"Shame","secret":true,"unlocked":false,"date":null,"trigger":{"type":"CONFESSION_LOGGED","value":1},"reward":{"xp":200,"tokens":5,"title":"Shamebound"}},{"id":"DUNGEON_BOSS_SLAYER","title":"Boss Slayer","desc":"Cleared your first Nightmare Dungeon. The darkness fears you.","category":"Dungeon","secret":false,"unlocked":false,"date":null,"trigger":{"type":"DUNGEON_CLEARED","value":1},"reward":{"xp":250}},{"id":"COMPANION_DREAM_GUARDIAN","title":"Dream Guardian","desc":"Evolved a companion to their final form. A bond that transcends dreams.","category":"Companion","secret":false,"unlocked":false,"date":null,"trigger":{"type":"COMPANION_EVOLVED","value":1},"reward":{"xp":500,"title":"Dream Guardian"}},{"id":"RITUAL_OBEDIENCE_MASTER","title":"Obedience Master","desc":"Completed 25 obedience rituals. Your devotion is absolute.","category":"Ritual","secret":false,"unlocked":false,"date":null,"trigger":{"type":"RITUAL_COMPLETED","value":25},"reward":{"xp":300,"title":"Obedience Master"}},{"id":"SHAME_ULTIMATE_DEGRADATION","title":"Ultimate Degradation","desc":"Reached the highest tier of punishment. There is no redemption from this depth.","category":"Shame","secret":true,"unlocked":false,"date":null,"trigger":{"type":"PUNISHMENT_TIER_REACHED","value":5},"reward":{"xp":1000,"tokens":50,"title":"Utterly Degraded"}},{"id":"MAP_VOYAGER","title":"Multiverse Voyager","desc":"Explored every known node on the Multiverse Map.","category":"Map","secret":false,"unlocked":false,"date":null,"trigger":{"type":"MAP_ALL_NODES_UNLOCKED"},"reward":{"xp":1000,"title":"Multiverse Voyager"}},{"id":"MAP_PANTY_REALM_DISCOVERER","title":"Panty Realm Discoverer","desc":"Unlocked the fabled Panty Realm. A new world of lewd adventures awaits.","category":"Map","secret":true,"unlocked":false,"date":null,"trigger":{"type":"MAP_NODE_UNLOCKED","value":"r2"},"reward":{"xp":250,"tokens":20}},{"id":"DUNGEON_EXPLORER","title":"Dungeon Explorer","desc":"Completed your first dungeon run. The trials have only just begun.","category":"Dungeon","secret":false,"unlocked":false,"date":null,"trigger":{"type":"DUNGEON_CLEARED","value":1},"reward":{"xp":200,"tokens":25}},{"id":"DUNGEON_SHAME_MASTER","title":"Master of Shame","desc":"Cleared the Caves of Shame multiple times. You\'ve embraced your darkest secrets.","category":"Dungeon","secret":false,"unlocked":false,"date":null,"trigger":{"type":"DUNGEON_CLEARED","value":3},"reward":{"xp":500,"tokens":60}},{"id":"DUNGEON_OBEDIENCE_ADEPT","title":"Obedience Adept","desc":"Mastered the Temple of Obedience. Your submission knows no bounds.","category":"Dungeon","secret":false,"unlocked":false,"date":null,"trigger":{"type":"DUNGEON_CLEARED","value":5},"reward":{"xp":750,"tokens":80}},{"id":"DUNGEON_DREAM_WALKER","title":"Dream Walker","desc":"Conquered the Labyrinth of Dreams. Reality bends to your will.","category":"Dungeon","secret":false,"unlocked":false,"date":null,"trigger":{"type":"DUNGEON_CLEARED","value":7},"reward":{"xp":1000,"tokens":100}},{"id":"DUNGEON_MASTER","title":"Dungeon Master","desc":"Cleared all available dungeons. You are the master of trials and tribulations.","category":"Dungeon","secret":false,"unlocked":false,"date":null,"trigger":{"type":"DUNGEON_CLEARED","value":10},"reward":{"xp":2000,"tokens":200,"title":"Dungeon Master"}}]');

/***/ }),

/***/ "(ssr)/./data/buffs.json":
/*!*************************!*\
  !*** ./data/buffs.json ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"active":[{"id":"b1","name":"Lucid Focus","type":"buff","desc":"+20% dream clarity","duration":"2 hours","durationMs":7200000,"createdAt":1758249350151,"expiresAt":1758256550151,"source":"Lucid Amulet","icon":"","rarity":"rare","effects":{"xpMultiplier":1.2,"dreamClarity":20}},{"id":"b2","name":"Companion Aura","type":"buff","desc":"+15% bond growth","duration":"3 hours","durationMs":10800000,"createdAt":1758249350151,"expiresAt":1758260150151,"source":"Mommy Luma","icon":"","rarity":"common","effects":{"bondMultiplier":1.15}},{"id":"c1","name":"Panty Stink","type":"curse","desc":"-10% XP gain","duration":"1 day","durationMs":86400000,"createdAt":1758249350151,"expiresAt":1758335750151,"source":"Panty Realm","icon":"","rarity":"common","effects":{"xpMultiplier":0.9}},{"id":"c2","name":"Shame Weight","type":"curse","desc":"-5% movement speed","duration":"1 hour","durationMs":3600000,"createdAt":1758249350151,"expiresAt":1758252950151,"source":"Shame Tracker","icon":"","rarity":"uncommon","effects":{"movementSpeed":-5}}],"history":[{"id":"h1","name":"Dream Boost","type":"buff","desc":"+30% lucid XP","duration":"1 hour","source":"Temple Meditation","icon":"","rarity":"epic","expiredAt":1758245750151,"effects":{"lucidXpMultiplier":1.3}},{"id":"h2","name":"Ritual Fatigue","type":"curse","desc":"-20% ritual success","duration":"2 hours","source":"Failed Ritual","icon":"","rarity":"uncommon","expiredAt":1758242150151,"effects":{"ritualSuccessRate":-20}}]}');

/***/ }),

/***/ "(ssr)/./data/companions.json":
/*!******************************!*\
  !*** ./data/companions.json ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('[{"id":"c1","name":"Mommy Luma","level":1,"xp":0,"bond":10,"lore":"The astral matron who guides initiates through soft humiliation and tender discipline.","evolutionTree":[{"id":"f1","name":"Novice Form","unlockLevel":1,"buff":{"xpMultiplier":1},"icon":"","description":"A gentle aura that steadies lucidity and guides first obedience rites."},{"id":"f2","name":"Ritual Form","unlockLevel":5,"buff":{"obedienceGain":1.5},"icon":"","description":"Channels temple chants into obedience surges during moonlit ceremonies."},{"id":"f3","name":"Divine Form","unlockLevel":10,"buff":{"clarityBoost":2},"icon":"","description":"Cascades dreamlight across the sanctum, sharpening every lucid recall."}],"autoEvolve":false,"currentForm":"f1"},{"id":"c2","name":"Ekram","level":1,"xp":0,"bond":5,"lore":"Shamebound enforcer of the Panty Realm. Evolves through obedience forfeits.","evolutionTree":[{"id":"f1","name":"Watcher","unlockLevel":1,"buff":{"tokenMultiplier":1},"icon":"","description":"Keeps quiet tally of shame tokens and whispers reminders to submit."},{"id":"f2","name":"Panty Guardian","unlockLevel":4,"buff":{"obedienceGain":1.8},"icon":"","description":"Forges a radiant shame barrier, amplifying obedience each time panties are surrendered."}],"autoEvolve":true,"currentForm":"f1"}]');

/***/ }),

/***/ "(ssr)/./data/dungeons.json":
/*!****************************!*\
  !*** ./data/dungeons.json ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"dungeons":[{"id":"d1","name":"Caves of Shame","description":"Dark caverns where past regrets echo through twisted passages. Only by confronting your shame can you claim the treasures within.","difficulty":1,"cleared":false,"timesCleared":0,"unlocked":true,"background":"cave","roomPool":[{"type":"trial","subtype":"shame","desc":"Confess a filthy act to proceed","weight":3},{"type":"trial","subtype":"obedience","desc":"Submit to a humiliating ritual","weight":2},{"type":"trial","subtype":"combat","desc":"Face shadow creatures born from guilt","weight":2},{"type":"loot","desc":"Discover a hidden cache of mystical items","weight":2},{"type":"boss","desc":"Confront the Shame Wraith that guards this place","weight":1}],"lootPool":[{"id":"shame_relic","name":"Panty Relic of Shame","type":"artifact","effect":"+15 shame XP","rarity":"rare"},{"id":"guilt_stone","name":"Guilt Stone","type":"curse","effect":"-10% confidence for 2 hours","rarity":"common"},{"id":"submission_charm","name":"Submission Charm","type":"buff","effect":"+20% obedience for 3 hours","rarity":"uncommon"}],"boss":{"name":"Shame Wraith","health":100,"attacks":["Guilt Lash","Regret Storm","Humiliation Wave"],"weakness":"confession","rewards":{"xp":500,"tokens":50,"items":["shame_relic"]}}},{"id":"d2","name":"Temple of Obedience","description":"Sacred halls where submission is the only path forward. Ancient rituals await those brave enough to surrender control.","difficulty":2,"cleared":false,"timesCleared":0,"unlocked":false,"background":"temple","roomPool":[{"type":"trial","subtype":"obedience","desc":"Kneel before the altar of submission","weight":4},{"type":"trial","subtype":"shame","desc":"Expose your deepest secrets","weight":2},{"type":"trial","subtype":"ritual","desc":"Perform the ancient rites of devotion","weight":3},{"type":"loot","desc":"Find sacred implements of worship","weight":2},{"type":"boss","desc":"Face Mistress Ekram in her divine form","weight":1}],"lootPool":[{"id":"devotion_collar","name":"Collar of Devotion","type":"artifact","effect":"+25% ritual effectiveness","rarity":"rare"},{"id":"obedience_mark","name":"Mark of Obedience","type":"buff","effect":"+30% submission for 4 hours","rarity":"uncommon"},{"id":"divine_essence","name":"Divine Essence","type":"consumable","effect":"Instant full energy restore","rarity":"epic"}],"boss":{"name":"Mistress Ekram","health":150,"attacks":["Divine Command","Submission Strike","Obedience Binding"],"weakness":"ritual_offering","rewards":{"xp":750,"tokens":75,"items":["devotion_collar","divine_essence"]}}},{"id":"d3","name":"Labyrinth of Dreams","description":"An ever-shifting maze where reality bends to desire. Navigate twisted pathways to reach the dream core.","difficulty":3,"cleared":false,"timesCleared":0,"unlocked":false,"background":"dream","roomPool":[{"type":"trial","subtype":"psychic","desc":"Resist the pull of forbidden fantasies","weight":3},{"type":"trial","subtype":"combat","desc":"Battle nightmare manifestations","weight":3},{"type":"trial","subtype":"puzzle","desc":"Solve the riddle of desire","weight":2},{"type":"loot","desc":"Discover dream fragments of power","weight":2},{"type":"boss","desc":"Confront the Dream Sovereign","weight":1}],"lootPool":[{"id":"dream_shard","name":"Lucid Dream Shard","type":"artifact","effect":"+50% dream recall for 24 hours","rarity":"epic"},{"id":"nightmare_ward","name":"Nightmare Ward","type":"buff","effect":"Immunity to fear effects","rarity":"rare"},{"id":"desire_crystal","name":"Crystal of Desire","type":"consumable","effect":"Double XP gain for next ritual","rarity":"legendary"}],"boss":{"name":"Dream Sovereign","health":200,"attacks":["Reality Warp","Nightmare Cascade","Dream Drain"],"weakness":"lucid_awareness","rewards":{"xp":1000,"tokens":100,"items":["dream_shard","desire_crystal"]}}}],"activeRun":null,"roomTypes":{"trial":{"shame":{"description":"Face your deepest shame and confess to proceed","requirements":["confession_entry"],"rewards":{"xp":50,"tokens":5}},"obedience":{"description":"Submit to humiliating commands","requirements":["submission_act"],"rewards":{"xp":75,"tokens":8}},"combat":{"description":"Fight shadow creatures and manifestations","requirements":["energy_cost"],"rewards":{"xp":100,"tokens":10}},"ritual":{"description":"Perform sacred rites and ceremonies","requirements":["ritual_knowledge"],"rewards":{"xp":80,"tokens":12}},"psychic":{"description":"Resist mental intrusions and illusions","requirements":["willpower_check"],"rewards":{"xp":90,"tokens":15}},"puzzle":{"description":"Solve complex riddles and challenges","requirements":["intelligence_check"],"rewards":{"xp":60,"tokens":7}}},"loot":{"description":"Discover treasure chests and hidden caches","rewards":{"tokens":20}},"boss":{"description":"Face powerful guardians and dungeon masters","rewards":{"xp":300,"tokens":50}}},"achievements":{"first_dungeon":{"name":"Dungeon Explorer","description":"Complete your first dungeon","reward":{"xp":200,"tokens":25}},"boss_slayer":{"name":"Boss Slayer","description":"Defeat your first dungeon boss","reward":{"xp":300,"tokens":40}},"shame_master":{"name":"Master of Shame","description":"Clear Caves of Shame 3 times","reward":{"xp":500,"tokens":60}},"obedience_adept":{"name":"Obedience Adept","description":"Clear Temple of Obedience","reward":{"xp":750,"tokens":80}},"dream_walker":{"name":"Dream Walker","description":"Clear Labyrinth of Dreams","reward":{"xp":1000,"tokens":100}},"dungeon_master":{"name":"Dungeon Master","description":"Clear all dungeons at least once","reward":{"xp":2000,"tokens":200}}}}');

/***/ }),

/***/ "(ssr)/./data/items.json":
/*!*************************!*\
  !*** ./data/items.json ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('[{"id":"i1","name":"Lucid Amulet","type":"relic","icon":"","desc":"Ancient charm that boosts focus in the dream temple.","owned":1,"equipped":true},{"id":"i2","name":"Ekram\'s Panties","type":"panty","icon":"","desc":"Faint shame aura that doubles Dirty Token rewards.","owned":1,"equipped":false},{"id":"i3","name":"Dream Shard","type":"shard","icon":"","desc":"Crystalline currency of the Astral Map.","owned":12},{"id":"i4","name":"Moonwater Elixir","type":"consumable","icon":"","desc":"Drink to restore lucidity after a nightmare crawl.","owned":3},{"id":"i5","name":"Quest Glyph","type":"quest","icon":"","desc":"Unlocks the next stage of a temple storyline.","owned":0}]');

/***/ }),

/***/ "(ssr)/./data/journal.json":
/*!***************************!*\
  !*** ./data/journal.json ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('[{"id":"d1","title":"First Lucid Dream in the Temple","date":"2025-09-15","content":"I found myself standing before the magnificent Dreamgate, its ethereal glow pulsing with ancient power. Mommy Luma appeared beside me, her presence both commanding and nurturing. She guided me through a ritual of surrender and obedience that felt deeply transformative. The temple walls shimmered with cosmic energy as I embraced my submissive nature.","tags":["lucid","ritual","temple","transformation"],"companions":["Mommy Luma"],"places":["Lucid World","Temple of Dreams"],"xpEarned":200,"media":[],"createdAt":"2025-09-15T22:30:00.000Z","updatedAt":"2025-09-15T22:30:00.000Z","mood":"amazing","lucidity":"full","vividness":9},{"id":"d2","title":"Panty Training Session","date":"2025-09-16","content":"A vivid dream where I was learning proper panty presentation techniques. The experience felt incredibly real and submissive. I woke up feeling deeply connected to my feminine side.","tags":["panty","training","submission"],"companions":[],"places":["Training Room"],"xpEarned":125,"media":[],"createdAt":"2025-09-16T21:15:00.000Z","updatedAt":"2025-09-16T21:15:00.000Z","mood":"good","lucidity":"partial","vividness":7},{"id":"d3","title":"Flying Through Cosmic Realms","date":"2025-09-17","content":"An incredible flying dream where I soared through star-filled dimensions. The freedom was intoxicating as I navigated through nebulae and cosmic phenomena.","tags":["flying","cosmic","adventure"],"companions":[],"places":["Cosmic Realm","Starfield"],"xpEarned":75,"media":[],"createdAt":"2025-09-17T23:45:00.000Z","updatedAt":"2025-09-17T23:45:00.000Z","mood":"amazing","lucidity":"full","vividness":8}]');

/***/ }),

/***/ "(ssr)/./data/map.json":
/*!***********************!*\
  !*** ./data/map.json ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"nodes":[{"id":"r1","name":"Lucid World","type":"realm","unlocked":true,"coords":[500,300],"lore":"The central hub of your dreamscape, where your journey begins."},{"id":"r2","name":"Panty Realm","type":"panty","unlocked":false,"coords":[800,200],"lore":"A realm woven from desire and silk. Unlock by completing specific rituals.","unlockCondition":{"type":"ritual","id":"panty_ritual_1"}},{"id":"d1","name":"Caves of Shame","type":"dungeon","unlocked":false,"coords":[750,600],"lore":"A deep dungeon where echoes of embarrassment and guilt reside.","unlockCondition":{"type":"shame","level":5}},{"id":"t1","name":"Temple of Awakening","type":"temple","unlocked":true,"coords":[200,500],"lore":"A serene temple dedicated to the art of lucid dreaming."}],"links":[{"from":"r1","to":"t1","locked":false},{"from":"r1","to":"r2","locked":true},{"from":"r2","to":"d1","locked":true}]}');

/***/ }),

/***/ "(ssr)/./data/npcs.json":
/*!************************!*\
  !*** ./data/npcs.json ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('[{"id":"n1","name":"Ekram","role":"Mistress","dreamCount":12,"trust":40,"shame":80,"bio":"Enforcer of the Panty Realm, delighting in rituals of humiliation.","dialogues":[{"id":"d1","text":"Sniff them, loser.","date":"2025-09-01"}]},{"id":"n2","name":"Bilal","role":"Family","dreamCount":23,"trust":70,"shame":10,"bio":"Protective sibling who anchors waking routines.","dialogues":[]}]');

/***/ }),

/***/ "(ssr)/./data/punishments.json":
/*!*******************************!*\
  !*** ./data/punishments.json ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('[{"id":"p1","name":"Cage Lockout: +24hrs","description":"Your cage remains locked for an additional 24 hours. No release allowed."},{"id":"p2","name":"Slut Clothes: Next 3 dreams","description":"You must wear designated \'slut clothes\' for your next three dream sessions."},{"id":"p3","name":"No Touch: 48hrs","description":"A strict no-touch policy is in effect for 48 hours. No self-pleasure."},{"id":"p4","name":"Public Humiliation","description":"Your next dream will feature a public humiliation scenario."},{"id":"p5","name":"Reduced Rations","description":"Your dream rations are reduced for the next cycle."}]');

/***/ }),

/***/ "(ssr)/./data/questlines.json":
/*!******************************!*\
  !*** ./data/questlines.json ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('[{"id":"ql1","name":"Awakening of Lucidia","description":"Pursue the echo of Lucidia through ritual, gateway, and astral communion.","realm":"Lucid RPG","branching":false,"stages":[{"id":"s1","title":"Perform Lucid Ritual","xp":50,"completed":false,"deadline":"2025-09-21","deadlineNote":"Complete the Lucid Pulse ritual before sunrise."},{"id":"s2","title":"Enter Dreamgate","xp":100,"completed":false,"deadline":"2025-09-30","deadlineNote":"Open the Dreamgate during the waxing moon."},{"id":"s3","title":"Meet Lucid Echo","xp":150,"completed":false,"deadline":"2025-10-07","deadlineNote":"Confront the Lucid Echo under a still mind."}],"reward":{"item":"i1","xp":200}},{"id":"ql2","name":"Panty Submission Trials","description":"Embrace Ekram\'s humiliating gauntlet to unlock shameful power.","realm":"Panty Realm","branching":true,"stages":[{"id":"s1","title":"Sniff Ekram\'s Panties","xp":100,"completed":false,"branchChoices":[{"id":"b1","title":"Confess","reward":{"xp":50}},{"id":"b2","title":"Deny","reward":{"buff":"Panty Shame"}}],"deadline":"2025-09-22","deadlineNote":"Submit the confession within Ekram\'s chamber."},{"id":"s2","title":"Confess Ritual in Chamber","xp":150,"completed":false,"deadline":"2025-09-27","deadlineNote":"Recite the chamber ritual before midnight."},{"id":"s3","title":"Burn Tokens for Cleansing","xp":200,"completed":false,"deadline":"2025-10-03","deadlineNote":"Burn the dirty tokens under the full moon."}],"reward":{"title":"Panty Slave","xp":500}}]');

/***/ }),

/***/ "(ssr)/./data/ritualLogs.json":
/*!******************************!*\
  !*** ./data/ritualLogs.json ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = [];

/***/ }),

/***/ "(ssr)/./data/rituals.json":
/*!***************************!*\
  !*** ./data/rituals.json ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('[{"id":"r1","name":"Lucid Pulse","type":"daily","xp":25,"obedience":5,"completedToday":false,"streak":0},{"id":"r2","name":"Astral Obedience","type":"weekly","xp":100,"obedience":20,"completedThisWeek":false,"streak":0},{"id":"r3","name":"Full Moon Offering","type":"monthly","xp":300,"obedience":50,"completedThisMonth":false,"streak":0},{"id":"r4","name":"Celestial Submission","type":"yearly","xp":800,"obedience":120,"completedThisYear":false,"streak":0}]');

/***/ }),

/***/ "(ssr)/./data/shame.json":
/*!*************************!*\
  !*** ./data/shame.json ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"pantiesSniffed":42,"ritualsFailed":3,"dirtyTokensBurned":15,"confessions":[{"id":"c1","text":"Came in cage like a loser.","date":"2025-09-10"},{"id":"c2","text":"Ate all ritual hair.","date":"2025-09-16"}]}');

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CAchievementTriggerManager.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CThemeController.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Cglobals.css%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Creact-hot-toast%5C%5Cdist%5C%5Cindex.mjs%22%2C%22ids%22%3A%5B%22Toaster%22%5D%7D&server=true!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CAchievementTriggerManager.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CThemeController.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Cglobals.css%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Creact-hot-toast%5C%5Cdist%5C%5Cindex.mjs%22%2C%22ids%22%3A%5B%22Toaster%22%5D%7D&server=true! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/components/AchievementTriggerManager.tsx */ \"(ssr)/./app/components/AchievementTriggerManager.tsx\"));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/components/ThemeController.tsx */ \"(ssr)/./app/components/ThemeController.tsx\"));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./node_modules/react-hot-toast/dist/index.mjs */ \"(ssr)/./node_modules/react-hot-toast/dist/index.mjs\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNhcHAlNUMlNUNjb21wb25lbnRzJTVDJTVDQWNoaWV2ZW1lbnRUcmlnZ2VyTWFuYWdlci50c3glMjIlMkMlMjJpZHMlMjIlM0ElNUIlMjJkZWZhdWx0JTIyJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNhcHAlNUMlNUNjb21wb25lbnRzJTVDJTVDVGhlbWVDb250cm9sbGVyLnRzeCUyMiUyQyUyMmlkcyUyMiUzQSU1QiUyMmRlZmF1bHQlMjIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q2FwcCU1QyU1Q2dsb2JhbHMuY3NzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNub2RlX21vZHVsZXMlNUMlNUNyZWFjdC1ob3QtdG9hc3QlNUMlNUNkaXN0JTVDJTVDaW5kZXgubWpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTIyVG9hc3RlciUyMiU1RCU3RCZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEsd01BQXVKO0FBQ3ZKO0FBQ0Esb0xBQTZJO0FBQzdJO0FBQ0Esc01BQXVKIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIsIHdlYnBhY2tFeHBvcnRzOiBbXCJkZWZhdWx0XCJdICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxhcHBcXFxcY29tcG9uZW50c1xcXFxBY2hpZXZlbWVudFRyaWdnZXJNYW5hZ2VyLnRzeFwiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiLCB3ZWJwYWNrRXhwb3J0czogW1wiZGVmYXVsdFwiXSAqLyBcIkM6XFxcXE1vbW15IEx1Y3lcXFxcUHJvamVjdHNcXFxcTHVjaWQgRHJlYW1cXFxcYXBwXFxcXGNvbXBvbmVudHNcXFxcVGhlbWVDb250cm9sbGVyLnRzeFwiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiLCB3ZWJwYWNrRXhwb3J0czogW1wiVG9hc3RlclwiXSAqLyBcIkM6XFxcXE1vbW15IEx1Y3lcXFxcUHJvamVjdHNcXFxcTHVjaWQgRHJlYW1cXFxcbm9kZV9tb2R1bGVzXFxcXHJlYWN0LWhvdC10b2FzdFxcXFxkaXN0XFxcXGluZGV4Lm1qc1wiKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CAchievementTriggerManager.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Ccomponents%5C%5CThemeController.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Capp%5C%5Cglobals.css%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Creact-hot-toast%5C%5Cdist%5C%5Cindex.mjs%22%2C%22ids%22%3A%5B%22Toaster%22%5D%7D&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cbuiltin%5C%5Cglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Chttp-access-fallback%5C%5Cerror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Clayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cmetadata%5C%5Casync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Crender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cframework%5C%5Cboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cmetadata%5C%5Cgenerate%5C%5Cicon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cnext-devtools%5C%5Cuserspace%5C%5Capp%5C%5Csegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cbuiltin%5C%5Cglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Chttp-access-fallback%5C%5Cerror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Clayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cmetadata%5C%5Casync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Crender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cframework%5C%5Cboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cmetadata%5C%5Cgenerate%5C%5Cicon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cnext-devtools%5C%5Cuserspace%5C%5Capp%5C%5Csegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/builtin/global-error.js */ \"(ssr)/./node_modules/next/dist/client/components/builtin/global-error.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-page.js */ \"(ssr)/./node_modules/next/dist/client/components/client-page.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-segment.js */ \"(ssr)/./node_modules/next/dist/client/components/client-segment.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js */ \"(ssr)/./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/layout-router.js */ \"(ssr)/./node_modules/next/dist/client/components/layout-router.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/metadata/async-metadata.js */ \"(ssr)/./node_modules/next/dist/client/components/metadata/async-metadata.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/render-from-template-context.js */ \"(ssr)/./node_modules/next/dist/client/components/render-from-template-context.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/lib/framework/boundary-components.js */ \"(ssr)/./node_modules/next/dist/lib/framework/boundary-components.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./node_modules/next/dist/lib/metadata/generate/icon-mark.js */ \"(ssr)/./node_modules/next/dist/lib/metadata/generate/icon-mark.js\"));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/next-devtools/userspace/app/segment-explorer-node.js */ \"(ssr)/./node_modules/next/dist/next-devtools/userspace/app/segment-explorer-node.js\", 23));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNub2RlX21vZHVsZXMlNUMlNUNuZXh0JTVDJTVDZGlzdCU1QyU1Q2NsaWVudCU1QyU1Q2NvbXBvbmVudHMlNUMlNUNidWlsdGluJTVDJTVDZ2xvYmFsLWVycm9yLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNub2RlX21vZHVsZXMlNUMlNUNuZXh0JTVDJTVDZGlzdCU1QyU1Q2NsaWVudCU1QyU1Q2NvbXBvbmVudHMlNUMlNUNjbGllbnQtcGFnZS5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjJDJTNBJTVDJTVDTW9tbXklMjBMdWN5JTVDJTVDUHJvamVjdHMlNUMlNUNMdWNpZCUyMERyZWFtJTVDJTVDbm9kZV9tb2R1bGVzJTVDJTVDbmV4dCU1QyU1Q2Rpc3QlNUMlNUNjbGllbnQlNUMlNUNjb21wb25lbnRzJTVDJTVDY2xpZW50LXNlZ21lbnQuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q2h0dHAtYWNjZXNzLWZhbGxiYWNrJTVDJTVDZXJyb3ItYm91bmRhcnkuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q2xheW91dC1yb3V0ZXIuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q21ldGFkYXRhJTVDJTVDYXN5bmMtbWV0YWRhdGEuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q3JlbmRlci1mcm9tLXRlbXBsYXRlLWNvbnRleHQuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q01vbW15JTIwTHVjeSU1QyU1Q1Byb2plY3RzJTVDJTVDTHVjaWQlMjBEcmVhbSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDbGliJTVDJTVDZnJhbWV3b3JrJTVDJTVDYm91bmRhcnktY29tcG9uZW50cy5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjJDJTNBJTVDJTVDTW9tbXklMjBMdWN5JTVDJTVDUHJvamVjdHMlNUMlNUNMdWNpZCUyMERyZWFtJTVDJTVDbm9kZV9tb2R1bGVzJTVDJTVDbmV4dCU1QyU1Q2Rpc3QlNUMlNUNsaWIlNUMlNUNtZXRhZGF0YSU1QyU1Q2dlbmVyYXRlJTVDJTVDaWNvbi1tYXJrLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNNb21teSUyMEx1Y3klNUMlNUNQcm9qZWN0cyU1QyU1Q0x1Y2lkJTIwRHJlYW0lNUMlNUNub2RlX21vZHVsZXMlNUMlNUNuZXh0JTVDJTVDZGlzdCU1QyU1Q25leHQtZGV2dG9vbHMlNUMlNUN1c2Vyc3BhY2UlNUMlNUNhcHAlNUMlNUNzZWdtZW50LWV4cGxvcmVyLW5vZGUuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0Qmc2VydmVyPXRydWUhIiwibWFwcGluZ3MiOiJBQUFBLHNQQUFrSjtBQUNsSjtBQUNBLG9PQUF3STtBQUN4STtBQUNBLDBPQUEySTtBQUMzSTtBQUNBLG9SQUFpSztBQUNqSztBQUNBLHdPQUEwSTtBQUMxSTtBQUNBLDRQQUFxSjtBQUNySjtBQUNBLHNRQUF5SjtBQUN6SjtBQUNBLDRPQUE0STtBQUM1STtBQUNBLGtPQUEySTtBQUMzSTtBQUNBLDRRQUE2SiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGNsaWVudFxcXFxjb21wb25lbnRzXFxcXGJ1aWx0aW5cXFxcZ2xvYmFsLWVycm9yLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxNb21teSBMdWN5XFxcXFByb2plY3RzXFxcXEx1Y2lkIERyZWFtXFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxcY2xpZW50LXBhZ2UuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkM6XFxcXE1vbW15IEx1Y3lcXFxcUHJvamVjdHNcXFxcTHVjaWQgRHJlYW1cXFxcbm9kZV9tb2R1bGVzXFxcXG5leHRcXFxcZGlzdFxcXFxjbGllbnRcXFxcY29tcG9uZW50c1xcXFxjbGllbnQtc2VnbWVudC5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGNsaWVudFxcXFxjb21wb25lbnRzXFxcXGh0dHAtYWNjZXNzLWZhbGxiYWNrXFxcXGVycm9yLWJvdW5kYXJ5LmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxNb21teSBMdWN5XFxcXFByb2plY3RzXFxcXEx1Y2lkIERyZWFtXFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxcbGF5b3V0LXJvdXRlci5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGNsaWVudFxcXFxjb21wb25lbnRzXFxcXG1ldGFkYXRhXFxcXGFzeW5jLW1ldGFkYXRhLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxNb21teSBMdWN5XFxcXFByb2plY3RzXFxcXEx1Y2lkIERyZWFtXFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxccmVuZGVyLWZyb20tdGVtcGxhdGUtY29udGV4dC5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGxpYlxcXFxmcmFtZXdvcmtcXFxcYm91bmRhcnktY29tcG9uZW50cy5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcTW9tbXkgTHVjeVxcXFxQcm9qZWN0c1xcXFxMdWNpZCBEcmVhbVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGxpYlxcXFxtZXRhZGF0YVxcXFxnZW5lcmF0ZVxcXFxpY29uLW1hcmsuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkM6XFxcXE1vbW15IEx1Y3lcXFxcUHJvamVjdHNcXFxcTHVjaWQgRHJlYW1cXFxcbm9kZV9tb2R1bGVzXFxcXG5leHRcXFxcZGlzdFxcXFxuZXh0LWRldnRvb2xzXFxcXHVzZXJzcGFjZVxcXFxhcHBcXFxcc2VnbWVudC1leHBsb3Jlci1ub2RlLmpzXCIpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cbuiltin%5C%5Cglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Chttp-access-fallback%5C%5Cerror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Clayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cmetadata%5C%5Casync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Crender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cframework%5C%5Cboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cmetadata%5C%5Cgenerate%5C%5Cicon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CMommy%20Lucy%5C%5CProjects%5C%5CLucid%20Dream%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cnext-devtools%5C%5Cuserspace%5C%5Capp%5C%5Csegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/dynamic-access-async-storage.external":
/*!***************************************************************************************!*\
  !*** external "next/dist/server/app-render/dynamic-access-async-storage.external.js" ***!
  \***************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/dynamic-access-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "module":
/*!*************************!*\
  !*** external "module" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("module");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/is-bot":
/*!***********************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/is-bot" ***!
  \***********************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/is-bot");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/react-hot-toast","vendor-chunks/goober","vendor-chunks/@swc"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Frpg%2Fpage&page=%2Frpg%2Fpage&appPaths=%2Frpg%2Fpage&pagePath=private-next-app-dir%2Frpg%2Fpage.tsx&appDir=C%3A%5CMommy%20Lucy%5CProjects%5CLucid%20Dream%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CMommy%20Lucy%5CProjects%5CLucid%20Dream&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();